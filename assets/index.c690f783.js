(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function X(){}const Pa=t=>t;function O(t,e){for(const n in e)t[n]=e[n];return t}function Fa(t){return t()}function ao(){return Object.create(null)}function Qe(t){t.forEach(Fa)}function Nt(t){return typeof t=="function"}function $(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ts;function Rr(t,e){return ts||(ts=document.createElement("a")),ts.href=e,t===ts.href}function Tc(t){return Object.keys(t).length===0}function Cc(t,...e){if(t==null)return X;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Va(t,e,n){t.$$.on_destroy.push(Cc(e,n))}function ne(t,e,n,s){if(t){const r=xa(t,e,n,s);return t[0](r)}}function xa(t,e,n,s){return t[1]&&s?O(n.ctx.slice(),t[1](s(e))):n.ctx}function se(t,e,n,s){if(t[2]&&s){const r=t[2](s(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const i=[],o=Math.max(e.dirty.length,r.length);for(let a=0;a<o;a+=1)i[a]=e.dirty[a]|r[a];return i}return e.dirty|r}return e.dirty}function re(t,e,n,s,r,i){if(r){const o=xa(e,n,s,i);t.p(o,r)}}function ie(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function Y(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function fe(t,e){const n={};e=new Set(e);for(const s in t)!e.has(s)&&s[0]!=="$"&&(n[s]=t[s]);return n}function Ua(t){const e={};for(const n in t)e[n]=!0;return e}function Ic(t,e,n){return t.set(n),e}function ci(t){return t&&Nt(t.destroy)?t.destroy:X}const Ba=typeof window<"u";let ja=Ba?()=>window.performance.now():()=>Date.now(),hi=Ba?t=>requestAnimationFrame(t):X;const xt=new Set;function za(t){xt.forEach(e=>{e.c(t)||(xt.delete(e),e.f())}),xt.size!==0&&hi(za)}function qa(t){let e;return xt.size===0&&hi(za),{promise:new Promise(n=>{xt.add(e={c:t,f:n})}),abort(){xt.delete(e)}}}function x(t,e){t.appendChild(e)}function Ha(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Sc(t){const e=U("style");return Ac(Ha(t),e),e.sheet}function Ac(t,e){return x(t.head||t,e),e.sheet}function C(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function fi(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function U(t){return document.createElement(t)}function ge(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ve(t){return document.createTextNode(t)}function ae(){return ve(" ")}function Ne(){return ve("")}function F(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function Dc(t){return function(e){return e.preventDefault(),t.call(this,e)}}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function oe(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const s in e)e[s]==null?t.removeAttribute(s):s==="style"?t.style.cssText=e[s]:s==="__value"?t.value=t[s]=e[s]:n[s]&&n[s].set?t[s]=e[s]:m(t,s,e[s])}function qe(t,e){Object.keys(e).forEach(n=>{Nc(t,n,e[n])})}function Nc(t,e,n){e in t?t[e]=typeof t[e]=="boolean"&&n===""?!0:n:m(t,e,n)}function Rc(t){return Array.from(t.childNodes)}function Xe(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function lo(t,e){t.value=e==null?"":e}function ns(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function uo(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];s.selected=~e.indexOf(s.__value)}}function Lc(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function co(t,e,n){t.classList[n?"add":"remove"](e)}function Ka(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,s,e),r}const ps=new Map;let ys=0;function Mc(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Oc(t,e){const n={stylesheet:Sc(e),rules:{}};return ps.set(t,n),n}function Lr(t,e,n,s,r,i,o,a=0){const l=16.666/s;let u=`{
`;for(let E=0;E<=1;E+=l){const _=e+(n-e)*i(E);u+=E*100+`%{${o(_,1-_)}}
`}const c=u+`100% {${o(n,1-n)}}
}`,h=`__svelte_${Mc(c)}_${a}`,f=Ha(t),{stylesheet:g,rules:d}=ps.get(f)||Oc(f,t);d[h]||(d[h]=!0,g.insertRule(`@keyframes ${h} ${c}`,g.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${h} ${s}ms linear ${r}ms 1 both`,ys+=1,h}function Mr(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),r=n.length-s.length;r&&(t.style.animation=s.join(", "),ys-=r,ys||Pc())}function Pc(){hi(()=>{ys||(ps.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&T(e)}),ps.clear())})}let wn;function dn(t){wn=t}function Vs(){if(!wn)throw new Error("Function called outside component initialization");return wn}function Fc(t){Vs().$$.on_mount.push(t)}function Vc(){const t=Vs();return(e,n,{cancelable:s=!1}={})=>{const r=t.$$.callbacks[e];if(r){const i=Ka(e,n,{cancelable:s});return r.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}function vs(t,e){return Vs().$$.context.set(t,e),e}function Vn(t){return Vs().$$.context.get(t)}function R(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(s=>s.call(this,e))}const ln=[],It=[],cs=[],Or=[],xc=Promise.resolve();let Pr=!1;function Uc(){Pr||(Pr=!0,xc.then(Ga))}function ct(t){cs.push(t)}function ho(t){Or.push(t)}const ur=new Set;let ss=0;function Ga(){const t=wn;do{for(;ss<ln.length;){const e=ln[ss];ss++,dn(e),Bc(e.$$)}for(dn(null),ln.length=0,ss=0;It.length;)It.pop()();for(let e=0;e<cs.length;e+=1){const n=cs[e];ur.has(n)||(ur.add(n),n())}cs.length=0}while(ln.length);for(;Or.length;)Or.pop()();Pr=!1,ur.clear(),dn(t)}function Bc(t){if(t.fragment!==null){t.update(),Qe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ct)}}let on;function Qa(){return on||(on=Promise.resolve(),on.then(()=>{on=null})),on}function gn(t,e,n){t.dispatchEvent(Ka(`${e?"intro":"outro"}${n}`))}const hs=new Set;let $e;function xe(){$e={r:0,c:[],p:$e}}function Ue(){$e.r||Qe($e.c),$e=$e.p}function p(t,e){t&&t.i&&(hs.delete(t),t.i(e))}function b(t,e,n,s){if(t&&t.o){if(hs.has(t))return;hs.add(t),$e.c.push(()=>{hs.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}const Wa={duration:0};function jc(t,e,n){let s=e(t,n),r=!1,i,o,a=0;function l(){i&&Mr(t,i)}function u(){const{delay:h=0,duration:f=300,easing:g=Pa,tick:d=X,css:v}=s||Wa;v&&(i=Lr(t,0,1,f,h,g,v,a++)),d(0,1);const E=ja()+h,_=E+f;o&&o.abort(),r=!0,ct(()=>gn(t,!0,"start")),o=qa(y=>{if(r){if(y>=_)return d(1,0),gn(t,!0,"end"),l(),r=!1;if(y>=E){const N=g((y-E)/f);d(N,1-N)}}return r})}let c=!1;return{start(){c||(c=!0,Mr(t),Nt(s)?(s=s(),Qa().then(u)):u())},invalidate(){c=!1},end(){r&&(l(),r=!1)}}}function fo(t,e,n,s){let r=e(t,n),i=s?0:1,o=null,a=null,l=null;function u(){l&&Mr(t,l)}function c(f,g){const d=f.b-i;return g*=Math.abs(d),{a:i,b:f.b,d,duration:g,start:f.start,end:f.start+g,group:f.group}}function h(f){const{delay:g=0,duration:d=300,easing:v=Pa,tick:E=X,css:_}=r||Wa,y={start:ja()+g,b:f};f||(y.group=$e,$e.r+=1),o||a?a=y:(_&&(u(),l=Lr(t,i,f,d,g,v,_)),f&&E(0,1),o=c(y,d),ct(()=>gn(t,f,"start")),qa(N=>{if(a&&N>a.start&&(o=c(a,d),a=null,gn(t,o.b,"start"),_&&(u(),l=Lr(t,i,o.b,o.duration,0,v,r.css))),o){if(N>=o.end)E(i=o.b,1-i),gn(t,o.b,"end"),a||(o.b?u():--o.group.r||Qe(o.group.c)),o=null;else if(N>=o.start){const ee=N-o.start;i=o.a+o.d*v(ee/o.duration),E(i,1-i)}}return!!(o||a)}))}return{run(f){Nt(r)?Qa().then(()=>{r=r(),h(f)}):h(f)},end(){u(),o=a=null}}}function Re(t,e){const n={},s={},r={$$scope:1};let i=t.length;for(;i--;){const o=t[i],a=e[i];if(a){for(const l in o)l in a||(s[l]=1);for(const l in a)r[l]||(n[l]=a[l],r[l]=1);t[i]=a}else for(const l in o)r[l]=1}for(const o in s)o in n||(n[o]=void 0);return n}function xs(t){return typeof t=="object"&&t!==null?t:{}}function go(t,e,n){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function Q(t){t&&t.c()}function H(t,e,n,s){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),s||ct(()=>{const o=t.$$.on_mount.map(Fa).filter(Nt);t.$$.on_destroy?t.$$.on_destroy.push(...o):Qe(o),t.$$.on_mount=[]}),i.forEach(ct)}function K(t,e){const n=t.$$;n.fragment!==null&&(Qe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function zc(t,e){t.$$.dirty[0]===-1&&(ln.push(t),Uc(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function pe(t,e,n,s,r,i,o,a=[-1]){const l=wn;dn(t);const u=t.$$={fragment:null,ctx:[],props:i,update:X,not_equal:r,bound:ao(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:ao(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(h,f,...g)=>{const d=g.length?g[0]:f;return u.ctx&&r(u.ctx[h],u.ctx[h]=d)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](d),c&&zc(t,h)),f}):[],u.update(),c=!0,Qe(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const h=Rc(e.target);u.fragment&&u.fragment.l(h),h.forEach(T)}else u.fragment&&u.fragment.c();e.intro&&p(t.$$.fragment),H(t,e.target,e.anchor,e.customElement),Ga()}dn(l)}class ye{$destroy(){K(this,1),this.$destroy=X}$on(e,n){if(!Nt(n))return X;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}$set(e){this.$$set&&!Tc(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ot=[];function qc(t,e=X){let n;const s=new Set;function r(a){if($(t,a)&&(t=a,n)){const l=!Ot.length;for(const u of s)u[1](),Ot.push(u,t);if(l){for(let u=0;u<Ot.length;u+=2)Ot[u][0](Ot[u+1]);Ot.length=0}}}function i(a){r(a(t))}function o(a,l=X){const u=[a,l];return s.add(u),s.size===1&&(n=e(r)||X),a(t),()=>{s.delete(u),s.size===0&&(n(),n=null)}}return{set:r,update:i,subscribe:o}}var Xa={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s=[],r=0;r<arguments.length;r++){var i=arguments[r];if(!!i){var o=typeof i;if(o==="string"||o==="number")s.push(i);else if(Array.isArray(i)){if(i.length){var a=n.apply(null,i);a&&s.push(a)}}else if(o==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){s.push(i.toString());continue}for(var l in i)e.call(i,l)&&i[l]&&s.push(l)}}}return s.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Xa);const le=Xa.exports;function Hc(t){let e=t[1],n,s,r=t[1]&&cr(t);return{c(){r&&r.c(),n=Ne()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,o){i[1]?e?$(e,i[1])?(r.d(1),r=cr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=cr(i),r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null),e=i[1]},i(i){s||(p(r),s=!0)},o(i){b(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function Kc(t){let e=t[1],n,s,r=t[1]&&hr(t);return{c(){r&&r.c(),n=Ne()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,o){i[1]?e?$(e,i[1])?(r.d(1),r=hr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=hr(i),r.c(),p(r),r.m(n.parentNode,n)):e&&(xe(),b(r,1,1,()=>{r=null}),Ue()),e=i[1]},i(i){s||(p(r),s=!0)},o(i){b(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function cr(t){let e,n,s,r,i;const o=t[13].default,a=ne(o,t,t[12],null);let l=[t[7],{class:t[6]}],u={};for(let c=0;c<l.length;c+=1)u=O(u,l[c]);return{c(){e=U(t[1]),a&&a.c(),/-/.test(t[1])?qe(e,u):oe(e,u)},m(c,h){C(c,e,h),a&&a.m(e,null),t[23](e),s=!0,r||(i=[ci(n=t[4].call(null,e,t[5])),F(e,"mouseenter",t[18]),F(e,"mouseleave",t[19]),F(e,"focusin",t[20]),F(e,"focusout",t[21])],r=!0)},p(c,h){a&&a.p&&(!s||h&4096)&&re(a,o,c,c[12],s?se(o,c[12],h,null):ie(c[12]),null),u=Re(l,[h&128&&c[7],(!s||h&64)&&{class:c[6]}]),/-/.test(c[1])?qe(e,u):oe(e,u),n&&Nt(n.update)&&h&32&&n.update.call(null,c[5])},i(c){s||(p(a,c),s=!0)},o(c){b(a,c),s=!1},d(c){c&&T(e),a&&a.d(c),t[23](null),r=!1,Qe(i)}}}function hr(t){let e,n,s,r,i,o;const a=t[13].default,l=ne(a,t,t[12],null);let u=[t[7],{class:t[6]}],c={};for(let h=0;h<u.length;h+=1)c=O(c,u[h]);return{c(){e=U(t[1]),l&&l.c(),/-/.test(t[1])?qe(e,c):oe(e,c)},m(h,f){C(h,e,f),l&&l.m(e,null),t[22](e),r=!0,i||(o=[ci(n=t[4].call(null,e,t[5])),F(e,"mouseenter",t[14]),F(e,"mouseleave",t[15]),F(e,"focusin",t[16]),F(e,"focusout",t[17])],i=!0)},p(h,f){t=h,l&&l.p&&(!r||f&4096)&&re(l,a,t,t[12],r?se(a,t[12],f,null):ie(t[12]),null),c=Re(u,[f&128&&t[7],(!r||f&64)&&{class:t[6]}]),/-/.test(t[1])?qe(e,c):oe(e,c),n&&Nt(n.update)&&f&32&&n.update.call(null,t[5])},i(h){r||(p(l,h),ct(()=>{s||(s=fo(e,t[2],t[3],!0)),s.run(1)}),r=!0)},o(h){b(l,h),s||(s=fo(e,t[2],t[3],!1)),s.run(0),r=!1},d(h){h&&T(e),l&&l.d(h),t[22](null),h&&s&&s.end(),i=!1,Qe(o)}}}function Gc(t){let e,n,s,r;const i=[Kc,Hc],o=[];function a(l,u){return l[2]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Ne()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(xe(),b(o[c],1,1,()=>{o[c]=null}),Ue(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),p(n,1),n.m(s.parentNode,s))},i(l){r||(p(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function Qc(t,e,n){const s=["tag","color","rounded","border","shadow","transition","params","node","use","options"];let r=fe(e,s),{$$slots:i={},$$scope:o}=e;vs("background",!0);let{tag:a="div"}=e,{color:l="default"}=e,{rounded:u=!1}=e,{border:c=!1}=e,{shadow:h=!1}=e,{transition:f=void 0}=e,{params:g={}}=e,{node:d=void 0}=e,{use:v=X}=e,{options:E={}}=e;const _={gray:"bg-gray-100 dark:bg-gray-200 ",red:"bg-red-100 dark:bg-red-200",yellow:"bg-yellow-100 dark:bg-yellow-200 ",green:"bg-green-100 dark:bg-green-200 ",indigo:"bg-indigo-100 dark:bg-indigo-200 ",purple:"bg-purple-100 dark:bg-purple-200 ",pink:"bg-pink-100 dark:bg-pink-200 ",blue:"bg-blue-100 dark:bg-blue-200 ",light:"bg-gray-50 dark:bg-gray-700",dark:"bg-gray-100 dark:bg-gray-700",default:"bg-white dark:bg-gray-800",dropdown:"bg-white dark:bg-gray-700",navbar:"bg-white dark:bg-gray-900",navbarUl:"bg-gray-50 dark:bg-gray-800",form:"bg-gray-50 dark:bg-gray-700",primary:"bg-primary-100 dark:bg-primary-200 ",none:""},y={gray:"text-gray-700 dark:text-gray-800",red:"text-red-700 dark:text-red-800",yellow:"text-yellow-700 dark:text-yellow-800",green:"text-green-700 dark:text-green-800",indigo:"text-indigo-700 dark:text-indigo-800",purple:"text-purple-700 dark:text-purple-800",pink:"text-pink-700 dark:text-pink-800",blue:"text-blue-700 dark:text-blue-800",light:"text-gray-700 dark:text-gray-300",dark:"text-gray-700 dark:text-gray-300",default:"text-gray-500 dark:text-gray-400",dropdown:"text-gray-700 dark:text-gray-200",navbar:"text-gray-700 dark:text-gray-200",navbarUl:"text-gray-700 dark:text-gray-400",form:"text-gray-900 dark:text-white",primary:"text-primary-700 dark:text-primary-800",none:""},N={gray:"border-gray-500 dark:bg-gray-200 ",red:"border-red-500 dark:bg-red-200 ",yellow:"border-yellow-500 dark:bg-tellow-200 ",green:"border-green-500 dark:bg-green-200 ",indigo:"border-indigo-500 dark:bg-indigo-200 ",purple:"border-purple-500 dark:bg-purple-200 ",pink:"border-pink-500 dark:bg-pink-200 ",blue:"border-blue-500 dark:bg-blue-200 ",light:"border-gray-500",dark:"border-gray-500",default:"border-gray-200 dark:border-gray-700",dropdown:"border-gray-100 dark:border-gray-700",navbar:"border-gray-100 dark:border-gray-700",navbarUl:"border-gray-100 dark:border-gray-700",form:"border-gray-300 dark:border-gray-700",primary:"border-primary-500 dark:bg-primary-200 ",none:""};let ee;function we(S){R.call(this,t,S)}function Me(S){R.call(this,t,S)}function ue(S){R.call(this,t,S)}function We(S){R.call(this,t,S)}function z(S){R.call(this,t,S)}function de(S){R.call(this,t,S)}function I(S){R.call(this,t,S)}function pt(S){R.call(this,t,S)}function yt(S){It[S?"unshift":"push"](()=>{d=S,n(0,d)})}function vt(S){It[S?"unshift":"push"](()=>{d=S,n(0,d)})}return t.$$set=S=>{n(27,e=O(O({},e),Y(S))),n(7,r=fe(e,s)),"tag"in S&&n(1,a=S.tag),"color"in S&&n(8,l=S.color),"rounded"in S&&n(9,u=S.rounded),"border"in S&&n(10,c=S.border),"shadow"in S&&n(11,h=S.shadow),"transition"in S&&n(2,f=S.transition),"params"in S&&n(3,g=S.params),"node"in S&&n(0,d=S.node),"use"in S&&n(4,v=S.use),"options"in S&&n(5,E=S.options),"$$scope"in S&&n(12,o=S.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&vs("color",l),n(6,ee=le(_[l],y[l],u&&(l==="dropdown"?"rounded":"rounded-lg"),c&&"border",N[l],h&&"shadow-md",e.class))},e=Y(e),[d,a,f,g,v,E,ee,r,l,u,c,h,o,i,we,Me,ue,We,z,de,I,pt,yt,vt]}class Ya extends ye{constructor(e){super(),pe(this,e,Qc,Gc,$,{tag:1,color:8,rounded:9,border:10,shadow:11,transition:2,params:3,node:0,use:4,options:5})}}function Wc(t){const e=t-1;return e*e*e+1}function Xc(t,{delay:e=0,duration:n=400,easing:s=Wc,start:r=0,opacity:i=0}={}){const o=getComputedStyle(t),a=+o.opacity,l=o.transform==="none"?"":o.transform,u=1-r,c=a*(1-i);return{delay:e,duration:n,easing:s,css:(h,f)=>`
			transform: ${l} scale(${1-u*f});
			opacity: ${a-c*f}
		`}}function Yc(t){let e,n,s,r,i,o;return{c(){e=U("span"),n=ve(t[0]),s=ae(),r=ge("svg"),i=ge("path"),m(e,"class","sr-only"),m(i,"fill-rule","evenodd"),m(i,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),m(i,"clip-rule","evenodd"),m(r,"class",o=t[3][t[1]]),m(r,"fill","currentColor"),m(r,"viewBox","0 0 20 20"),m(r,"xmlns","http://www.w3.org/2000/svg")},m(a,l){C(a,e,l),x(e,n),C(a,s,l),C(a,r,l),x(r,i)},p(a,l){l&1&&Xe(n,a[0]),l&2&&o!==(o=a[3][a[1]])&&m(r,"class",o)},d(a){a&&T(e),a&&T(s),a&&T(r)}}}function Jc(t){let e,n,s,r;const i=t[6].default,o=ne(i,t,t[5],null),a=o||Yc(t);return{c(){e=U("button"),a&&a.c(),m(e,"type","button"),m(e,"class",t[2]),m(e,"aria-label","Close")},m(l,u){C(l,e,u),a&&a.m(e,null),n=!0,s||(r=F(e,"click",t[7]),s=!0)},p(l,[u]){o?o.p&&(!n||u&32)&&re(o,i,l,l[5],n?se(i,l[5],u,null):ie(l[5]),null):a&&a.p&&(!n||u&3)&&a.p(l,n?u:-1),(!n||u&4)&&m(e,"class",l[2])},i(l){n||(p(a,l),n=!0)},o(l){b(a,l),n=!1},d(l){l&&T(e),a&&a.d(l),s=!1,r()}}}function Zc(t,e,n){let{$$slots:s={},$$scope:r}=e;const i=Vn("background");let{color:o="default"}=e,{name:a="Close"}=e,{size:l="md"}=e;const u={dark:"hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600",gray:"focus:ring-gray-400 hover:bg-gray-200 dark:hover:bg-gray-300",red:"focus:ring-red-400 hover:bg-red-200 dark:hover:bg-red-300",yellow:"focus:ring-yellow-400 hover:bg-yellow-200 dark:hover:bg-yellow-300",green:"focus:ring-green-400 hover:bg-green-200 dark:hover:bg-green-300",indigo:"focus:ring-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-300",purple:"focus:ring-purple-400 hover:bg-purple-200 dark:hover:bg-purple-300",pink:"focus:ring-pink-400 hover:bg-pink-200 dark:hover:bg-pink-300",blue:"focus:ring-blue-400 hover:bg-blue-200 dark:hover:bg-blue-300",default:"focus:ring-gray-300 "},c={xs:"m-0.5 rounded focus:ring-1 p-0.5",sm:"m-0.5 rounded focus:ring-1 p-0.5",md:"rounded-lg focus:ring-2 p-1.5"};let h="";const f={xs:"w-3 h-3",sm:"w-3.5 h-3.5",md:"w-5 h-5"};function g(d){R.call(this,t,d)}return t.$$set=d=>{n(11,e=O(O({},e),Y(d))),"color"in d&&n(4,o=d.color),"name"in d&&n(0,a=d.name),"size"in d&&n(1,l=d.size),"$$scope"in d&&n(5,r=d.$$scope)},t.$$.update=()=>{n(2,h=le("ml-auto focus:outline-none whitespace-normal",c[l],u[o],o==="default"&&(i?"hover:bg-gray-100 dark:hover:bg-gray-600":"hover:bg-gray-100 dark:hover:bg-gray-700"),e.class))},e=Y(e),[a,l,h,f,o,r,s,g]}class $c extends ye{constructor(e){super(),pe(this,e,Zc,Jc,$,{color:4,name:0,size:1})}}function eh(t){let e,n,s;return{c(){e=ge("svg"),n=ge("path"),m(n,"fill-rule","evenodd"),m(n,"d","M8 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"),m(n,"clip-rule","evenodd"),m(e,"class",s="text-gray-400 bg-gray-100 dark:bg-gray-600 "+(t[0]?"rounded":"rounded-full")),m(e,"fill","currentColor"),m(e,"viewBox","0 0 16 16"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(r,i){C(r,e,i),x(e,n)},p(r,[i]){i&1&&s!==(s="text-gray-400 bg-gray-100 dark:bg-gray-600 "+(r[0]?"rounded":"rounded-full"))&&m(e,"class",s)},i:X,o:X,d(r){r&&T(e)}}}function th(t,e,n){let{rounded:s=!1}=e;return t.$$set=r=>{"rounded"in r&&n(0,s=r.rounded)},[s]}class nh extends ye{constructor(e){super(),pe(this,e,th,eh,$,{rounded:0})}}function sh(t){let e;const n=t[8].default,s=ne(n,t,t[7],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&128)&&re(s,n,r,r[7],e?se(n,r[7],i,null):ie(r[7]),null)},i(r){e||(p(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function rh(t){let e,n,s,r;const i=t[8].default,o=ne(i,t,t[7],null);return{c(){e=U("div"),o&&o.c(),n=ae(),s=U("span"),m(s,"class",t[1]),m(e,"class",t[2])},m(a,l){C(a,e,l),o&&o.m(e,null),x(e,n),x(e,s),r=!0},p(a,l){o&&o.p&&(!r||l&128)&&re(o,i,a,a[7],r?se(i,a[7],l,null):ie(a[7]),null),(!r||l&2)&&m(s,"class",a[1]),(!r||l&4)&&m(e,"class",a[2])},i(a){r||(p(o,a),r=!0)},o(a){b(o,a),r=!1},d(a){a&&T(e),o&&o.d(a)}}}function ih(t){let e,n,s,r;const i=[rh,sh],o=[];function a(l,u){return l[0]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Ne()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(xe(),b(o[c],1,1,()=>{o[c]=null}),Ue(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),p(n,1),n.m(s.parentNode,s))},i(l){r||(p(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function oh(t,e,n){let{$$slots:s={},$$scope:r}=e,{show:i=!1}=e,{top:o=!1}=e,{color:a="bg-gray-300 dark:bg-gray-500"}=e,{rounded:l=!1}=e,{size:u="md"}=e;const c={xs:"w-2.5 h-2.5",sm:"w-3 h-3",md:"w-3.5 h-3.5",lg:"w-6 h-6",xl:"w-10 h-10"},h={xs:["left-4","left-5"],sm:["left-6","left-6"],md:["left-7","left-8"],lg:["left-14","left-16"],xl:["left-24","left-32"]};let f,g;return t.$$set=d=>{n(11,e=O(O({},e),Y(d))),"show"in d&&n(0,i=d.show),"top"in d&&n(3,o=d.top),"color"in d&&n(4,a=d.color),"rounded"in d&&n(5,l=d.rounded),"size"in d&&n(6,u=d.size),"$$scope"in d&&n(7,r=d.$$scope)},t.$$.update=()=>{t.$$.dirty&120&&n(1,f=le("absolute rounded-full border-white dark:border-gray-800 border-2",c[u],h[u][+l],o?"top-0":"bottom-0",l&&o&&"transform -translate-y-1/2",l&&!o&&"transform translate-y-1/4",a)),n(2,g=le("relative flex-shrink-0",e.class))},e=Y(e),[i,f,g,o,a,l,u,r,s]}class ah extends ye{constructor(e){super(),pe(this,e,oh,ih,$,{show:0,top:3,color:4,rounded:5,size:6})}}function lh(t){let e=t[1]?"a":"div",n,s=(t[1]?"a":"div")&&fr(t);return{c(){s&&s.c(),n=Ne()},m(r,i){s&&s.m(r,i),C(r,n,i)},p(r,i){r[1],e?$(e,r[1]?"a":"div")?(s.d(1),s=fr(r),s.c(),s.m(n.parentNode,n)):s.p(r,i):(s=fr(r),s.c(),s.m(n.parentNode,n)),e=r[1]?"a":"div"},i:X,o(r){b(s)},d(r){r&&T(n),s&&s.d(r)}}}function uh(t){let e=t[1]?"a":"div",n,s,r=(t[1]?"a":"div")&&dr(t);return{c(){r&&r.c(),n=Ne()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,o){i[1],e?$(e,i[1]?"a":"div")?(r.d(1),r=dr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=dr(i),r.c(),r.m(n.parentNode,n)),e=i[1]?"a":"div"},i(i){s||(p(r),s=!0)},o(i){b(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function ch(t){let e,n,s=[{alt:t[4]},{src:n=t[0]},t[9],{class:t[6]}],r={};for(let i=0;i<s.length;i+=1)r=O(r,s[i]);return{c(){e=U("img"),oe(e,r)},m(i,o){C(i,e,o)},p(i,o){oe(e,r=Re(s,[o&16&&{alt:i[4]},o&1&&!Rr(e.src,n=i[0])&&{src:n},o&512&&i[9],o&64&&{class:i[6]}]))},i:X,o:X,d(i){i&&T(e)}}}function fr(t){let e,n,s;n=new nh({props:{rounded:t[2]}});let r=[t[9],{class:t[6]}],i={};for(let o=0;o<r.length;o+=1)i=O(i,r[o]);return{c(){e=U(t[1]?"a":"div"),Q(n.$$.fragment),/-/.test(t[1]?"a":"div")?qe(e,i):oe(e,i)},m(o,a){C(o,e,a),H(n,e,null),s=!0},p(o,a){const l={};a&4&&(l.rounded=o[2]),n.$set(l),i=Re(r,[a&512&&o[9],(!s||a&64)&&{class:o[6]}]),/-/.test(o[1]?"a":"div")?qe(e,i):oe(e,i)},i(o){s||(p(n.$$.fragment,o),s=!0)},o(o){b(n.$$.fragment,o),s=!1},d(o){o&&T(e),K(n)}}}function dr(t){let e,n,s;const r=t[13].default,i=ne(r,t,t[14],null);let o=[{href:t[1]},t[9],{class:n="flex justify-center items-center text-xs font-medium "+t[6]}],a={};for(let l=0;l<o.length;l+=1)a=O(a,o[l]);return{c(){e=U(t[1]?"a":"div"),i&&i.c(),/-/.test(t[1]?"a":"div")?qe(e,a):oe(e,a)},m(l,u){C(l,e,u),i&&i.m(e,null),s=!0},p(l,u){i&&i.p&&(!s||u&16384)&&re(i,r,l,l[14],s?se(r,l[14],u,null):ie(l[14]),null),a=Re(o,[(!s||u&2)&&{href:l[1]},u&512&&l[9],(!s||u&64&&n!==(n="flex justify-center items-center text-xs font-medium "+l[6]))&&{class:n}]),/-/.test(l[1]?"a":"div")?qe(e,a):oe(e,a)},i(l){s||(p(i,l),s=!0)},o(l){b(i,l),s=!1},d(l){l&&T(e),i&&i.d(l)}}}function hh(t){let e,n,s,r;const i=[ch,uh,lh],o=[];function a(l,u){return l[0]?0:l[10].default?1:2}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Ne()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,u){let c=e;e=a(l),e===c?o[e].p(l,u):(xe(),b(o[c],1,1,()=>{o[c]=null}),Ue(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),p(n,1),n.m(s.parentNode,s))},i(l){r||(p(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function fh(t){let e,n;const s=[{show:t[8].dot},{rounded:t[2]},t[3],{size:t[5]},{class:t[7][t[5]]}];let r={$$slots:{default:[hh]},$$scope:{ctx:t}};for(let i=0;i<s.length;i+=1)r=O(r,s[i]);return e=new ah({props:r}),{c(){Q(e.$$.fragment)},m(i,o){H(e,i,o),n=!0},p(i,[o]){const a=o&428?Re(s,[o&256&&{show:i[8].dot},o&4&&{rounded:i[2]},o&8&&xs(i[3]),o&32&&{size:i[5]},o&160&&{class:i[7][i[5]]}]):{};o&18007&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){n||(p(e.$$.fragment,i),n=!0)},o(i){b(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function dh(t,e,n){const s=["src","href","rounded","border","stacked","dot","alt","size"];let r=fe(e,s),{$$slots:i={},$$scope:o}=e;const a=Ua(i);let{src:l=""}=e,{href:u="#"}=e,{rounded:c=!1}=e,{border:h=!1}=e,{stacked:f=!1}=e,{dot:g={top:!1,color:"bg-gray-300 dark:bg-gray-500"}}=e,{alt:d=""}=e,{size:v="md"}=e;const E={xs:"w-6 h-6",sm:"w-8 h-8",md:"w-10 h-10",lg:"w-20 h-20",xl:"w-36 h-36"};let _;return t.$$set=y=>{n(8,e=O(O({},e),Y(y))),n(9,r=fe(e,s)),"src"in y&&n(0,l=y.src),"href"in y&&n(1,u=y.href),"rounded"in y&&n(2,c=y.rounded),"border"in y&&n(11,h=y.border),"stacked"in y&&n(12,f=y.stacked),"dot"in y&&n(3,g=y.dot),"alt"in y&&n(4,d=y.alt),"size"in y&&n(5,v=y.size),"$$scope"in y&&n(14,o=y.$$scope)},t.$$.update=()=>{n(6,_=le(c?"rounded":"rounded-full",h&&"p-1 ring-2 ring-gray-300 dark:ring-gray-500",E[v],f&&"border-2 -ml-4 border-white dark:border-gray-800","bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300",e.class))},e=Y(e),[l,u,c,g,d,v,_,E,e,r,a,h,f,i,o]}class gh extends ye{constructor(e){super(),pe(this,e,dh,fh,$,{src:0,href:1,rounded:2,border:11,stacked:12,dot:3,alt:4,size:5})}}function mo(t){let e,n;return e=new $c({props:{color:t[0],size:t[1]?"sm":"xs",class:"ml-1.5 -mr-1.5"}}),e.$on("click",t[6]),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,r){const i={};r&1&&(i.color=s[0]),r&2&&(i.size=s[1]?"sm":"xs"),e.$set(i)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function gr(t){let e,n,s;const r=t[12].default,i=ne(r,t,t[11],null);let o=t[3]&&mo(t),a=[{href:t[2]},t[7],{class:t[5]}],l={};for(let u=0;u<a.length;u+=1)l=O(l,a[u]);return{c(){e=U(t[2]?"a":"span"),i&&i.c(),n=ae(),o&&o.c(),/-/.test(t[2]?"a":"span")?qe(e,l):oe(e,l),co(e,"hidden",t[4])},m(u,c){C(u,e,c),i&&i.m(e,null),x(e,n),o&&o.m(e,null),s=!0},p(u,c){i&&i.p&&(!s||c&2048)&&re(i,r,u,u[11],s?se(r,u[11],c,null):ie(u[11]),null),u[3]?o?(o.p(u,c),c&8&&p(o,1)):(o=mo(u),o.c(),p(o,1),o.m(e,null)):o&&(xe(),b(o,1,1,()=>{o=null}),Ue()),l=Re(a,[(!s||c&4)&&{href:u[2]},c&128&&u[7],(!s||c&32)&&{class:u[5]}]),/-/.test(u[2]?"a":"span")?qe(e,l):oe(e,l),co(e,"hidden",u[4])},i(u){s||(p(i,u),p(o),s=!0)},o(u){b(i,u),b(o),s=!1},d(u){u&&T(e),i&&i.d(u),o&&o.d()}}}function mh(t){let e=t[2]?"a":"span",n,s,r=(t[2]?"a":"span")&&gr(t);return{c(){r&&r.c(),n=Ne()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,[o]){i[2],e?$(e,i[2]?"a":"span")?(r.d(1),r=gr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=gr(i),r.c(),r.m(n.parentNode,n)),e=i[2]?"a":"span"},i(i){s||(p(r),s=!0)},o(i){b(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function ph(t,e,n){const s=["color","large","href","rounded","index","dismissable","baseClass"];let r=fe(e,s),{$$slots:i={},$$scope:o}=e,{color:a="blue"}=e,{large:l=!1}=e,{href:u=void 0}=e,{rounded:c=!1}=e,{index:h=!1}=e,{dismissable:f=!1}=e,{baseClass:g="inline-flex items-center justify-center -mb-0.5"}=e,d=!1;const v={blue:"bg-blue-100 text-blue-800 dark:bg-blue-200 dark:text-blue-800",dark:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",red:"bg-red-100 text-red-800 dark:bg-red-200 dark:text-red-900",green:"bg-green-100 text-green-800 dark:bg-green-200 dark:text-green-900",yellow:"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900",indigo:"bg-indigo-100 text-indigo-800 dark:bg-indigo-200 dark:text-indigo-900",purple:"bg-purple-100 text-purple-800 dark:bg-purple-200 dark:text-purple-900",pink:"bg-pink-100 text-pink-800 dark:bg-pink-200 dark:text-pink-900",["!blue"]:"bg-blue-500 text-blue-100",["!dark"]:"bg-gray-500 text-gray-100",["!red"]:"bg-red-500 text-white",["!green"]:"bg-green-500 text-green-100",["!yellow"]:"bg-yellow-300 text-yellow-800",["!indigo"]:"bg-indigo-500 text-indigo-100",["!purple"]:"bg-purple-500 text-purple-100",["!pink"]:"bg-pink-500 text-pink-100"},E={blue:"hover:bg-blue-200 dark:hover:bg-blue-300",dark:"hover:bg-gray-200 dark:hover:bg-gray-300",red:"hover:bg-red-200 dark:hover:bg-red-300",green:"hover:bg-green-200 dark:hover:bg-green-300",yellow:"hover:bg-yellow-200 dark:hover:bg-yellow-300",indigo:"hover:bg-indigo-200 dark:hover:bg-indigo-300",purple:"hover:bg-purple-200 dark:hover:bg-purple-300",pink:"hover:bg-pink-200 dark:hover:bg-pink-300"};let _;const y=()=>{n(4,d=!d)};return t.$$set=N=>{n(15,e=O(O({},e),Y(N))),n(7,r=fe(e,s)),"color"in N&&n(0,a=N.color),"large"in N&&n(1,l=N.large),"href"in N&&n(2,u=N.href),"rounded"in N&&n(8,c=N.rounded),"index"in N&&n(9,h=N.index),"dismissable"in N&&n(3,f=N.dismissable),"baseClass"in N&&n(10,g=N.baseClass),"$$scope"in N&&n(11,o=N.$$scope)},t.$$.update=()=>{var N;n(5,_=le(g,l?"text-sm font-medium":"text-xs font-semibold",v[a],u&&((N=E[a])!=null?N:E.blue),c?"rounded-full p-1":"rounded px-2.5 py-0.5",h&&"absolute font-bold border-2 border-white dark:border-gray-900",h&&(l?"w-7 h-7 -top-3 -right-3":"w-6 h-6 -top-2 -right-2"),e.class))},e=Y(e),[a,l,u,f,d,_,y,r,c,h,g,o,i]}class yh extends ye{constructor(e){super(),pe(this,e,ph,mh,$,{color:0,large:1,href:2,rounded:8,index:9,dismissable:3,baseClass:10})}}function vh(t){let e;const n=t[10].default,s=ne(n,t,t[11],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&2048)&&re(s,n,r,r[11],e?se(n,r[11],i,null):ie(r[11]),null)},i(r){e||(p(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function bh(t){let e,n,s,r,i;const o=t[10].default,a=ne(o,t,t[11],null);return{c(){e=U("img"),s=ae(),r=U("div"),a&&a.c(),m(e,"class",t[4]),Rr(e.src,n=t[1])||m(e,"src",n),m(e,"alt",""),m(r,"class",t[2])},m(l,u){C(l,e,u),C(l,s,u),C(l,r,u),a&&a.m(r,null),i=!0},p(l,u){(!i||u&16)&&m(e,"class",l[4]),(!i||u&2&&!Rr(e.src,n=l[1]))&&m(e,"src",n),a&&a.p&&(!i||u&2048)&&re(a,o,l,l[11],i?se(o,l[11],u,null):ie(l[11]),null),(!i||u&4)&&m(r,"class",l[2])},i(l){i||(p(a,l),i=!0)},o(l){b(a,l),i=!1},d(l){l&&T(e),l&&T(s),l&&T(r),a&&a.d(l)}}}function _h(t){let e,n,s,r;const i=[bh,vh],o=[];function a(l,u){return l[1]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Ne()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,u){let c=e;e=a(l),e===c?o[e].p(l,u):(xe(),b(o[c],1,1,()=>{o[c]=null}),Ue(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),p(n,1),n.m(s.parentNode,s))},i(l){r||(p(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function wh(t){let e,n;const s=[{tag:t[0]?"a":"div"},{rounded:!0},{shadow:!0},{border:!0},{href:t[0]},t[5],{class:t[3]}];let r={$$slots:{default:[_h]},$$scope:{ctx:t}};for(let i=0;i<s.length;i+=1)r=O(r,s[i]);return e=new Ya({props:r}),{c(){Q(e.$$.fragment)},m(i,o){H(e,i,o),n=!0},p(i,[o]){const a=o&41?Re(s,[o&1&&{tag:i[0]?"a":"div"},s[1],s[2],s[3],o&1&&{href:i[0]},o&32&&xs(i[5]),o&8&&{class:i[3]}]):{};o&2070&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){n||(p(e.$$.fragment,i),n=!0)},o(i){b(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function kh(t,e,n){const s=["href","horizontal","reverse","img","padding","size"];let r=fe(e,s),{$$slots:i={},$$scope:o}=e,{href:a=void 0}=e,{horizontal:l=!1}=e,{reverse:u=!1}=e,{img:c=void 0}=e,{padding:h="lg"}=e,{size:f="sm"}=e;const g={none:"p-0",sm:"p-4 sm:p-6 md:p-8",md:"p-4 sm:p-5",lg:"p-4 sm:p-6",xl:"p-4 sm:p-8"},d={xs:"max-w-xs",sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-screen-xl"};let v,E,_;return t.$$set=y=>{n(14,e=O(O({},e),Y(y))),n(5,r=fe(e,s)),"href"in y&&n(0,a=y.href),"horizontal"in y&&n(6,l=y.horizontal),"reverse"in y&&n(7,u=y.reverse),"img"in y&&n(1,c=y.img),"padding"in y&&n(8,h=y.padding),"size"in y&&n(9,f=y.size),"$$scope"in y&&n(11,o=y.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&n(2,v=g[h]),n(3,E=le("flex",d[f],u?"flex-col-reverse":"flex-col",l&&(u?"md:flex-row-reverse md:max-w-xl":"md:flex-row md:max-w-xl"),a&&"hover:bg-gray-100 dark:hover:bg-gray-700",!c&&v,e.class)),t.$$.dirty&192&&n(4,_=le(u?"rounded-b-lg":"rounded-t-lg",l&&"object-cover w-full h-96 md:h-auto md:w-48 md:rounded-none",l&&(u?"md:rounded-r-lg":"md:rounded-l-lg")))},e=Y(e),[a,c,v,E,_,r,l,u,h,f,i,o]}class Eh extends ye{constructor(e){super(),pe(this,e,kh,wh,$,{href:0,horizontal:6,reverse:7,img:1,padding:8,size:9})}}function Th(t){let e;const n=t[5].default,s=ne(n,t,t[4],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&16)&&re(s,n,r,r[4],e?se(n,r[4],i,null):ie(r[4]),null)},i(r){e||(p(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function Ch(t){let e=t[0],n,s,r=t[0]&&mr(t);return{c(){r&&r.c(),n=Ne()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,o){i[0]?e?$(e,i[0])?(r.d(1),r=mr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=mr(i),r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null),e=i[0]},i(i){s||(p(r),s=!0)},o(i){b(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function mr(t){let e,n,s,r;const i=t[5].default,o=ne(i,t,t[4],null);let a=[t[3]],l={};for(let u=0;u<a.length;u+=1)l=O(l,a[u]);return{c(){e=U(t[0]),o&&o.c(),/-/.test(t[0])?qe(e,l):oe(e,l)},m(u,c){C(u,e,c),o&&o.m(e,null),n=!0,s||(r=ci(t[2].call(null,e)),s=!0)},p(u,c){o&&o.p&&(!n||c&16)&&re(o,i,u,u[4],n?se(i,u[4],c,null):ie(u[4]),null),l=Re(a,[c&8&&u[3]]),/-/.test(u[0])?qe(e,l):oe(e,l)},i(u){n||(p(o,u),n=!0)},o(u){b(o,u),n=!1},d(u){u&&T(e),o&&o.d(u),s=!1,r()}}}function Ih(t){let e,n,s,r;const i=[Ch,Th],o=[];function a(l,u){return l[1]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Ne()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(xe(),b(o[c],1,1,()=>{o[c]=null}),Ue(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),p(n,1),n.m(s.parentNode,s))},i(l){r||(p(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function Sh(t,e,n){const s=["tag","show","use"];let r=fe(e,s),{$$slots:i={},$$scope:o}=e,{tag:a="div"}=e,{show:l}=e,{use:u=()=>{}}=e;return t.$$set=c=>{e=O(O({},e),Y(c)),n(3,r=fe(e,s)),"tag"in c&&n(0,a=c.tag),"show"in c&&n(1,l=c.show),"use"in c&&n(2,u=c.use),"$$scope"in c&&n(4,o=c.$$scope)},[a,l,u,r,o,i]}class Ja extends ye{constructor(e){super(),pe(this,e,Sh,Ih,$,{tag:0,show:1,use:2})}}function Ah(t){let e;const n=t[7].default,s=ne(n,t,t[6],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&64)&&re(s,n,r,r[6],e?se(n,r[6],i,null):ie(r[6]),null)},i(r){e||(p(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function Dh(t){let e,n;const s=t[7].default,r=ne(s,t,t[6],null);let i=[t[3],{class:t[2]}],o={};for(let a=0;a<i.length;a+=1)o=O(o,i[a]);return{c(){e=U("label"),r&&r.c(),oe(e,o)},m(a,l){C(a,e,l),r&&r.m(e,null),t[8](e),n=!0},p(a,l){r&&r.p&&(!n||l&64)&&re(r,s,a,a[6],n?se(s,a[6],l,null):ie(a[6]),null),oe(e,o=Re(i,[l&8&&a[3],(!n||l&4)&&{class:a[2]}]))},i(a){n||(p(r,a),n=!0)},o(a){b(r,a),n=!1},d(a){a&&T(e),r&&r.d(a),t[8](null)}}}function Nh(t){let e,n,s,r;const i=[Dh,Ah],o=[];function a(l,u){return l[0]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Ne()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(xe(),b(o[c],1,1,()=>{o[c]=null}),Ue(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),p(n,1),n.m(s.parentNode,s))},i(l){r||(p(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function Rh(t,e,n){let s;const r=["color","defaultClass","show"];let i=fe(e,r),{$$slots:o={},$$scope:a}=e,{color:l="gray"}=e,{defaultClass:u="text-sm font-medium block"}=e,{show:c=!0}=e,h;const f={gray:"text-gray-900 dark:text-gray-300",green:"text-green-700 dark:text-green-500",red:"text-red-700 dark:text-red-500",disabled:"text-gray-400 dark:text-gray-500"};function g(d){It[d?"unshift":"push"](()=>{h=d,n(1,h)})}return t.$$set=d=>{n(10,e=O(O({},e),Y(d))),n(3,i=fe(e,r)),"color"in d&&n(4,l=d.color),"defaultClass"in d&&n(5,u=d.defaultClass),"show"in d&&n(0,c=d.show),"$$scope"in d&&n(6,a=d.$$scope)},t.$$.update=()=>{if(t.$$.dirty&18){const d=h==null?void 0:h.control;n(4,l=d!=null&&d.disabled?"disabled":l)}n(2,s=le(u,f[l],e.class))},e=Y(e),[c,h,s,i,l,u,a,o,g]}class po extends ye{constructor(e){super(),pe(this,e,Rh,Nh,$,{color:4,defaultClass:5,show:0})}}function yo(t,e,n){const s=t.slice();return s[0]=e[n].value,s[13]=e[n].name,s}function vo(t){let e,n=t[13]+"",s,r;return{c(){e=U("option"),s=ve(n),e.__value=r=t[0],e.value=e.__value},m(i,o){C(i,e,o),x(e,s)},p(i,o){o&2&&n!==(n=i[13]+"")&&Xe(s,n),o&2&&r!==(r=i[0])&&(e.__value=r,e.value=e.__value)},d(i){i&&T(e)}}}function Lh(t){let e,n,s,r,i,o=t[1],a=[];for(let c=0;c<o.length;c+=1)a[c]=vo(yo(t,o,c));let l=[t[4],{class:t[3]}],u={};for(let c=0;c<l.length;c+=1)u=O(u,l[c]);return{c(){e=U("select"),n=U("option"),s=ve(t[2]);for(let c=0;c<a.length;c+=1)a[c].c();n.disabled=!0,n.selected=!0,n.__value="",n.value=n.__value,oe(e,u),t[0]===void 0&&ct(()=>t[11].call(e))},m(c,h){C(c,e,h),x(e,n),x(n,s);for(let f=0;f<a.length;f+=1)a[f].m(e,null);(u.multiple?uo:ns)(e,u.value),e.autofocus&&e.focus(),ns(e,t[0]),r||(i=[F(e,"change",t[11]),F(e,"change",t[9]),F(e,"input",t[10])],r=!0)},p(c,[h]){if(h&4&&Xe(s,c[2]),h&2){o=c[1];let f;for(f=0;f<o.length;f+=1){const g=yo(c,o,f);a[f]?a[f].p(g,h):(a[f]=vo(g),a[f].c(),a[f].m(e,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=o.length}oe(e,u=Re(l,[h&16&&c[4],h&8&&{class:c[3]}])),h&24&&"value"in u&&(u.multiple?uo:ns)(e,u.value),h&3&&ns(e,c[0])},i:X,o:X,d(c){c&&T(e),fi(a,c),r=!1,Qe(i)}}}const Mh="block w-full";function Oh(t,e,n){const s=["items","value","placeholder","underline","size","defaultClass","underlineClass"];let r=fe(e,s),{items:i=[]}=e,{value:o}=e,{placeholder:a="Choose option ..."}=e,{underline:l=!1}=e,{size:u="md"}=e,{defaultClass:c="text-gray-900 bg-gray-50 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"}=e,{underlineClass:h="text-gray-500 bg-transparent border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer"}=e;const f={sm:"text-sm p-2",md:"text-sm p-2.5",lg:"text-base py-3 px-4"};let g;function d(_){R.call(this,t,_)}function v(_){R.call(this,t,_)}function E(){o=Lc(this),n(0,o),n(1,i)}return t.$$set=_=>{e=O(O({},e),Y(_)),n(4,r=fe(e,s)),"items"in _&&n(1,i=_.items),"value"in _&&n(0,o=_.value),"placeholder"in _&&n(2,a=_.placeholder),"underline"in _&&n(5,l=_.underline),"size"in _&&n(6,u=_.size),"defaultClass"in _&&n(7,c=_.defaultClass),"underlineClass"in _&&n(8,h=_.underlineClass)},t.$$.update=()=>{n(3,g=le(Mh,l?h:c,f[u],l&&"!px-0",r.class))},[o,i,a,g,r,l,u,c,h,d,v,E]}class Ph extends ye{constructor(e){super(),pe(this,e,Oh,Lh,$,{items:1,value:0,placeholder:2,underline:5,size:6,defaultClass:7,underlineClass:8})}}const Fh=t=>({}),bo=t=>({}),Vh=t=>({}),_o=t=>({});function wo(t){let e,n;const s=t[8].header,r=ne(s,t,t[21],_o);return{c(){e=U("div"),r&&r.c(),m(e,"class",t[5](!0))},m(i,o){C(i,e,o),r&&r.m(e,null),n=!0},p(i,o){r&&r.p&&(!n||o&2097152)&&re(r,s,i,i[21],n?se(s,i[21],o,Vh):ie(i[21]),_o)},i(i){n||(p(r,i),n=!0)},o(i){b(r,i),n=!1},d(i){i&&T(e),r&&r.d(i)}}}function xh(t){let e,n,s,r=[t[7],{class:t[3]}],i={};for(let o=0;o<r.length;o+=1)i=O(i,r[o]);return{c(){e=U("textarea"),oe(e,i)},m(o,a){C(o,e,a),e.autofocus&&e.focus(),lo(e,t[0]),n||(s=[F(e,"input",t[20]),F(e,"blur",t[9]),F(e,"change",t[10]),F(e,"click",t[11]),F(e,"focus",t[12]),F(e,"keydown",t[13]),F(e,"keypress",t[14]),F(e,"keyup",t[15]),F(e,"mouseenter",t[16]),F(e,"mouseleave",t[17]),F(e,"mouseover",t[18]),F(e,"paste",t[19])],n=!0)},p(o,a){oe(e,i=Re(r,[a&128&&o[7],a&8&&{class:o[3]}])),a&1&&lo(e,o[0])},d(o){o&&T(e),n=!1,Qe(s)}}}function ko(t){let e,n;const s=t[8].footer,r=ne(s,t,t[21],bo);return{c(){e=U("div"),r&&r.c(),m(e,"class",t[5](!1))},m(i,o){C(i,e,o),r&&r.m(e,null),n=!0},p(i,o){r&&r.p&&(!n||o&2097152)&&re(r,s,i,i[21],n?se(s,i[21],o,Fh):ie(i[21]),bo)},i(i){n||(p(r,i),n=!0)},o(i){b(r,i),n=!1},d(i){i&&T(e),r&&r.d(i)}}}function Uh(t){let e,n,s,r,i,o=t[6].header&&wo(t);n=new Ja({props:{show:t[1],class:t[4],$$slots:{default:[xh]},$$scope:{ctx:t}}});let a=t[6].footer&&ko(t);return{c(){o&&o.c(),e=ae(),Q(n.$$.fragment),s=ae(),a&&a.c(),r=Ne()},m(l,u){o&&o.m(l,u),C(l,e,u),H(n,l,u),C(l,s,u),a&&a.m(l,u),C(l,r,u),i=!0},p(l,u){l[6].header?o?(o.p(l,u),u&64&&p(o,1)):(o=wo(l),o.c(),p(o,1),o.m(e.parentNode,e)):o&&(xe(),b(o,1,1,()=>{o=null}),Ue());const c={};u&2&&(c.show=l[1]),u&16&&(c.class=l[4]),u&2097289&&(c.$$scope={dirty:u,ctx:l}),n.$set(c),l[6].footer?a?(a.p(l,u),u&64&&p(a,1)):(a=ko(l),a.c(),p(a,1),a.m(r.parentNode,r)):a&&(xe(),b(a,1,1,()=>{a=null}),Ue())},i(l){i||(p(o),p(n.$$.fragment,l),p(a),i=!0)},o(l){b(o),b(n.$$.fragment,l),b(a),i=!1},d(l){o&&o.d(l),l&&T(e),K(n,l),l&&T(s),a&&a.d(l),l&&T(r)}}}function Bh(t){let e,n;return e=new Ja({props:{show:t[1],class:t[2],$$slots:{default:[Uh]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,[r]){const i={};r&2&&(i.show=s[1]),r&4&&(i.class=s[2]),r&2097371&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function jh(t,e,n){const s=["value"];let r=fe(e,s),{$$slots:i={},$$scope:o}=e;const a=Ua(i),l=Vn("background");let{value:u=""}=e,c,h,f;const g=I=>le(I?"border-b":"border-t","py-2 px-3 border-gray-200 dark:border-gray-600");let d;function v(I){R.call(this,t,I)}function E(I){R.call(this,t,I)}function _(I){R.call(this,t,I)}function y(I){R.call(this,t,I)}function N(I){R.call(this,t,I)}function ee(I){R.call(this,t,I)}function we(I){R.call(this,t,I)}function Me(I){R.call(this,t,I)}function ue(I){R.call(this,t,I)}function We(I){R.call(this,t,I)}function z(I){R.call(this,t,I)}function de(){u=this.value,n(0,u)}return t.$$set=I=>{n(23,e=O(O({},e),Y(I))),n(7,r=fe(e,s)),"value"in I&&n(0,u=I.value),"$$scope"in I&&n(21,o=I.$$scope)},t.$$.update=()=>{n(2,h=le("w-full rounded-lg",l?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700","text-gray-900 dark:placeholder-gray-400 dark:text-white ","border border-gray-200 dark:border-gray-600",e.class)),t.$$.dirty&6&&n(3,f=c?le("block w-full","text-sm","border-0 px-0","bg-inherit dark:bg-inherit","focus:outline-none focus:ring-0"):le(h,"p-2.5 text-sm","focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500"))},n(1,c=a.header||a.footer),n(4,d=le("py-2 px-4 bg-white dark:bg-gray-800",a.footer||"rounded-b-lg",a.header||"rounded-t-lg")),e=Y(e),[u,c,h,f,d,g,a,r,i,v,E,_,y,N,ee,we,Me,ue,We,z,de,o]}class zh extends ye{constructor(e){super(),pe(this,e,jh,Bh,$,{value:0})}}const qh=t=>({item:t[0]&64}),Eo=t=>({item:t[6]}),Hh=t=>({item:t[0]&64}),To=t=>({item:t[6]}),Kh=t=>({item:t[0]&64}),Co=t=>({item:t[6]});function Gh(t){let e,n,s,r,i;const o=t[9].default,a=ne(o,t,t[8],Eo);return{c(){e=U("button"),a&&a.c(),m(e,"class",n="inline-flex relative items-center text-left "+t[4]),e.disabled=t[2],m(e,"aria-current",t[1])},m(l,u){C(l,e,u),a&&a.m(e,null),s=!0,r||(i=[F(e,"click",t[31]),F(e,"blur",t[20]),F(e,"change",t[21]),F(e,"click",t[22]),F(e,"focus",t[23]),F(e,"keydown",t[24]),F(e,"keypress",t[25]),F(e,"keyup",t[26]),F(e,"mouseenter",t[27]),F(e,"mouseleave",t[28]),F(e,"mouseover",t[29])],r=!0)},p(l,u){a&&a.p&&(!s||u[0]&320)&&re(a,o,l,l[8],s?se(o,l[8],u,qh):ie(l[8]),Eo),(!s||u[0]&16&&n!==(n="inline-flex relative items-center text-left "+l[4]))&&m(e,"class",n),(!s||u[0]&4)&&(e.disabled=l[2]),(!s||u[0]&2)&&m(e,"aria-current",l[1])},i(l){s||(p(a,l),s=!0)},o(l){b(a,l),s=!1},d(l){l&&T(e),a&&a.d(l),r=!1,Qe(i)}}}function Qh(t){let e,n,s,r,i;const o=t[9].default,a=ne(o,t,t[8],To);return{c(){e=U("a"),a&&a.c(),m(e,"href",t[3]),m(e,"class",n="block "+t[4]),m(e,"aria-current",t[1])},m(l,u){C(l,e,u),a&&a.m(e,null),s=!0,r||(i=[F(e,"click",t[30]),F(e,"blur",t[10]),F(e,"change",t[11]),F(e,"click",t[12]),F(e,"focus",t[13]),F(e,"keydown",t[14]),F(e,"keypress",t[15]),F(e,"keyup",t[16]),F(e,"mouseenter",t[17]),F(e,"mouseleave",t[18]),F(e,"mouseover",t[19])],r=!0)},p(l,u){a&&a.p&&(!s||u[0]&320)&&re(a,o,l,l[8],s?se(o,l[8],u,Hh):ie(l[8]),To),(!s||u[0]&8)&&m(e,"href",l[3]),(!s||u[0]&16&&n!==(n="block "+l[4]))&&m(e,"class",n),(!s||u[0]&2)&&m(e,"aria-current",l[1])},i(l){s||(p(a,l),s=!0)},o(l){b(a,l),s=!1},d(l){l&&T(e),a&&a.d(l),r=!1,Qe(i)}}}function Wh(t){let e,n;const s=t[9].default,r=ne(s,t,t[8],Co);return{c(){e=U("li"),r&&r.c(),m(e,"class",t[4])},m(i,o){C(i,e,o),r&&r.m(e,null),n=!0},p(i,o){r&&r.p&&(!n||o[0]&320)&&re(r,s,i,i[8],n?se(s,i[8],o,Kh):ie(i[8]),Co),(!n||o[0]&16)&&m(e,"class",i[4])},i(i){n||(p(r,i),n=!0)},o(i){b(r,i),n=!1},d(i){i&&T(e),r&&r.d(i)}}}function Xh(t){let e,n,s,r;const i=[Wh,Qh,Gh],o=[];function a(l,u){return l[0]?l[3]?1:2:0}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Ne()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,u){let c=e;e=a(l),e===c?o[e].p(l,u):(xe(),b(o[c],1,1,()=>{o[c]=null}),Ue(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),p(n,1),n.m(s.parentNode,s))},i(l){r||(p(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}let Yh="focus:z-40 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:focus:ring-gray-500 dark:focus:text-white",Jh="hover:bg-gray-100 hover:text-blue-700 dark:hover:bg-gray-600 dark:hover:text-white";function Zh(t,e,n){let{$$slots:s={},$$scope:r}=e,{active:i=Vn("active")}=e,{current:o=!1}=e,{disabled:a=!1}=e,{href:l=""}=e,u=Vc();const c={current:"text-white bg-blue-700 dark:text-white dark:bg-gray-800",normal:"",disabled:"text-gray-900 bg-gray-100 dark:bg-gray-600 dark:text-gray-400"};let h,f;function g(P){R.call(this,t,P)}function d(P){R.call(this,t,P)}function v(P){R.call(this,t,P)}function E(P){R.call(this,t,P)}function _(P){R.call(this,t,P)}function y(P){R.call(this,t,P)}function N(P){R.call(this,t,P)}function ee(P){R.call(this,t,P)}function we(P){R.call(this,t,P)}function Me(P){R.call(this,t,P)}function ue(P){R.call(this,t,P)}function We(P){R.call(this,t,P)}function z(P){R.call(this,t,P)}function de(P){R.call(this,t,P)}function I(P){R.call(this,t,P)}function pt(P){R.call(this,t,P)}function yt(P){R.call(this,t,P)}function vt(P){R.call(this,t,P)}function S(P){R.call(this,t,P)}function wc(P){R.call(this,t,P)}const kc=()=>u("click",e),Ec=()=>u("click",e);return t.$$set=P=>{n(6,e=O(O({},e),Y(P))),"active"in P&&n(0,i=P.active),"current"in P&&n(1,o=P.current),"disabled"in P&&n(2,a=P.disabled),"href"in P&&n(3,l=P.href),"$$scope"in P&&n(8,r=P.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&6&&n(7,h=a?"disabled":o?"current":"normal"),n(4,f=le("py-2 px-0 sm:px-4 w-full text-sm font-medium","first:rounded-t-lg last:rounded-b-lg",c[h],i&&h==="disabled"&&"cursor-not-allowed",i&&h==="normal"&&Jh,i&&h==="normal"&&Yh,e.class))},e=Y(e),[i,o,a,l,f,u,e,h,r,s,g,d,v,E,_,y,N,ee,we,Me,ue,We,z,de,I,pt,yt,vt,S,wc,kc,Ec]}class $h extends ye{constructor(e){super(),pe(this,e,Zh,Xh,$,{active:0,current:1,disabled:2,href:3},null,[-1,-1])}}function Io(t,e,n){const s=t.slice();return s[8]=e[n],s[10]=n,s}const ef=t=>({item:t&1}),So=t=>({item:t[8],index:t[10]});function Ao(t){let e;const n=t[4].default,s=ne(n,t,t[6],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&64)&&re(s,n,r,r[6],e?se(n,r[6],i,null):ie(r[6]),null)},i(r){e||(p(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function tf(t){let e;const n=t[4].default,s=ne(n,t,t[6],So);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&65)&&re(s,n,r,r[6],e?se(n,r[6],i,ef):ie(r[6]),So)},i(r){e||(p(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function Do(t){let e,n;const s=[{active:t[1]},t[8],{index:t[10]}];let r={$$slots:{default:[tf]},$$scope:{ctx:t}};for(let i=0;i<s.length;i+=1)r=O(r,s[i]);return e=new $h({props:r}),e.$on("click",t[5]),{c(){Q(e.$$.fragment)},m(i,o){H(e,i,o),n=!0},p(i,o){const a=o&3?Re(s,[o&2&&{active:i[1]},o&1&&xs(i[8]),s[2]]):{};o&65&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){n||(p(e.$$.fragment,i),n=!0)},o(i){b(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function nf(t){let e,n,s=t[0],r=[];for(let a=0;a<s.length;a+=1)r[a]=Do(Io(t,s,a));const i=a=>b(r[a],1,1,()=>{r[a]=null});let o=null;return s.length||(o=Ao(t)),{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Ne(),o&&o.c()},m(a,l){for(let u=0;u<r.length;u+=1)r[u].m(a,l);C(a,e,l),o&&o.m(a,l),n=!0},p(a,l){if(l&67){s=a[0];let u;for(u=0;u<s.length;u+=1){const c=Io(a,s,u);r[u]?(r[u].p(c,l),p(r[u],1)):(r[u]=Do(c),r[u].c(),p(r[u],1),r[u].m(e.parentNode,e))}for(xe(),u=s.length;u<r.length;u+=1)i(u);Ue(),!s.length&&o?o.p(a,l):s.length?o&&(xe(),b(o,1,1,()=>{o=null}),Ue()):(o=Ao(a),o.c(),p(o,1),o.m(e.parentNode,e))}},i(a){if(!n){for(let l=0;l<s.length;l+=1)p(r[l]);n=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)b(r[l]);n=!1},d(a){fi(r,a),a&&T(e),o&&o.d(a)}}}function sf(t){let e,n;const s=[{tag:t[1]?"div":"ul"},t[3],{rounded:!0},{border:!0},{class:t[2]}];let r={$$slots:{default:[nf]},$$scope:{ctx:t}};for(let i=0;i<s.length;i+=1)r=O(r,s[i]);return e=new Ya({props:r}),{c(){Q(e.$$.fragment)},m(i,o){H(e,i,o),n=!0},p(i,[o]){const a=o&14?Re(s,[o&2&&{tag:i[1]?"div":"ul"},o&8&&xs(i[3]),s[2],s[3],o&4&&{class:i[2]}]):{};o&67&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){n||(p(e.$$.fragment,i),n=!0)},o(i){b(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function rf(t,e,n){const s=["items","active"];let r=fe(e,s),{$$slots:i={},$$scope:o}=e,{items:a=[]}=e,{active:l=!1}=e,u;function c(h){R.call(this,t,h)}return t.$$set=h=>{n(7,e=O(O({},e),Y(h))),n(3,r=fe(e,s)),"items"in h&&n(0,a=h.items),"active"in h&&n(1,l=h.active),"$$scope"in h&&n(6,o=h.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&vs("active",l),n(2,u=le("divide-y divide-gray-200 dark:divide-gray-600",e.class))},e=Y(e),[a,l,u,r,i,c,o]}class of extends ye{constructor(e){super(),pe(this,e,rf,sf,$,{items:0,active:1})}}function No(t){let e,n;return{c(){e=U("span"),n=ve(t[0]),m(e,"class","sr-only")},m(s,r){C(s,e,r),x(e,n)},p(s,r){r&1&&Xe(n,s[0])},d(s){s&&T(e)}}}function af(t){let e,n,s;return{c(){e=ge("svg"),n=ge("path"),m(n,"fill-rule","evenodd"),m(n,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),m(n,"clip-rule","evenodd"),m(e,"class",s=t[4][t[2]]),m(e,"fill","currentColor"),m(e,"viewBox","0 0 20 20"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(r,i){C(r,e,i),x(e,n)},p(r,i){i&4&&s!==(s=r[4][r[2]])&&m(e,"class",s)},d(r){r&&T(e)}}}function lf(t){var g;let e,n,s,r,i,o,a=t[0]&&No(t);const l=t[8].default,u=ne(l,t,t[7],null),c=u||af(t);let h=[{type:"button"},t[5],{class:t[3]},{"aria-label":s=(g=t[1])!=null?g:t[0]}],f={};for(let d=0;d<h.length;d+=1)f=O(f,h[d]);return{c(){e=U("button"),a&&a.c(),n=ae(),c&&c.c(),oe(e,f)},m(d,v){C(d,e,v),a&&a.m(e,null),x(e,n),c&&c.m(e,null),e.autofocus&&e.focus(),r=!0,i||(o=F(e,"click",t[9]),i=!0)},p(d,[v]){var E;d[0]?a?a.p(d,v):(a=No(d),a.c(),a.m(e,n)):a&&(a.d(1),a=null),u?u.p&&(!r||v&128)&&re(u,l,d,d[7],r?se(l,d[7],v,null):ie(d[7]),null):c&&c.p&&(!r||v&4)&&c.p(d,r?v:-1),oe(e,f=Re(h,[{type:"button"},v&32&&d[5],(!r||v&8)&&{class:d[3]},(!r||v&3&&s!==(s=(E=d[1])!=null?E:d[0]))&&{"aria-label":s}]))},i(d){r||(p(c,d),r=!0)},o(d){b(c,d),r=!1},d(d){d&&T(e),a&&a.d(),c&&c.d(d),i=!1,o()}}}function uf(t,e,n){const s=["color","name","ariaLabel","size"];let r=fe(e,s),{$$slots:i={},$$scope:o}=e;const a=Vn("background");let{color:l="default"}=e,{name:u=void 0}=e,{ariaLabel:c=void 0}=e,{size:h="md"}=e;const f={default:"hover:text-gray-900 hover:bg-gray-100 text-gray-500 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600",gray:"focus:ring-gray-400 hover:bg-gray-200 dark:hover:bg-gray-300",red:"focus:ring-red-400 hover:bg-red-200 dark:hover:bg-red-300",yellow:"focus:ring-yellow-400 hover:bg-yellow-200 dark:hover:bg-yellow-300",green:"focus:ring-green-400 hover:bg-green-200 dark:hover:bg-green-300",indigo:"focus:ring-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-300",purple:"focus:ring-purple-400 hover:bg-purple-200 dark:hover:bg-purple-300",pink:"focus:ring-pink-400 hover:bg-pink-200 dark:hover:bg-pink-300",blue:"focus:ring-blue-400 hover:bg-blue-200 dark:hover:bg-blue-300"},g={xs:"m-0.5 rounded focus:ring-1 p-0.5",sm:"m-0.5 rounded focus:ring-1 p-0.5",md:"rounded-lg focus:ring-2 p-1.5"};let d;const v={xs:"w-3 h-3",sm:"w-3.5 h-3.5",md:"w-5 h-5"};function E(_){R.call(this,t,_)}return t.$$set=_=>{n(13,e=O(O({},e),Y(_))),n(5,r=fe(e,s)),"color"in _&&n(6,l=_.color),"name"in _&&n(0,u=_.name),"ariaLabel"in _&&n(1,c=_.ariaLabel),"size"in _&&n(2,h=_.size),"$$scope"in _&&n(7,o=_.$$scope)},t.$$.update=()=>{n(3,d=le("focus:outline-none whitespace-normal",g[h],f[l],l==="default"&&(a?"hover:bg-gray-100 dark:hover:bg-gray-600":"hover:bg-gray-100 dark:hover:bg-gray-700"),e.class))},e=Y(e),[u,c,h,d,v,r,l,o,i,E]}class Ut extends ye{constructor(e){super(),pe(this,e,uf,lf,$,{color:6,name:0,ariaLabel:1,size:2})}}function cf(t){let e,n,s,r;return{c(){e=ge("svg"),n=ge("path"),s=ge("path"),m(n,"d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z"),m(n,"fill",t[2]),m(s,"d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z"),m(s,"fill",t[1]),m(e,"role","status"),m(e,"class",r=le("inline -mt-px animate-spin dark:text-gray-600",t[3],t[0],t[4],t[5].class)),m(e,"viewBox","0 0 100 101"),m(e,"fill","none"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(i,o){C(i,e,o),x(e,n),x(e,s)},p(i,[o]){o&4&&m(n,"fill",i[2]),o&2&&m(s,"fill",i[1]),o&33&&r!==(r=le("inline -mt-px animate-spin dark:text-gray-600",i[3],i[0],i[4],i[5].class))&&m(e,"class",r)},i:X,o:X,d(i){i&&T(e)}}}function hf(t,e,n){var h;let{color:s="blue"}=e,{bg:r="text-gray-300"}=e,{size:i="8"}=e,{currentFill:o="currentFill"}=e,{currentColor:a="currentColor"}=e,l=`w-${i} h-${i}`;o!=="currentFill"&&(s=void 0);const u={blue:"fill-blue-600",gray:"fill-gray-600 dark:fill-gray-300",green:"fill-green-500",red:"fill-red-600",yellow:"fill-yellow-400",pink:"fill-pink-600",purple:"fill-purple-600",white:"fill-white"};let c=s===void 0?"":(h=u[s])!=null?h:u.blue;return t.$$set=f=>{n(5,e=O(O({},e),Y(f))),"color"in f&&n(6,s=f.color),"bg"in f&&n(0,r=f.bg),"size"in f&&n(7,i=f.size),"currentFill"in f&&n(1,o=f.currentFill),"currentColor"in f&&n(2,a=f.currentColor)},e=Y(e),[r,o,a,l,c,e,s,i]}class Za extends ye{constructor(e){super(),pe(this,e,hf,cf,$,{color:6,bg:0,size:7,currentFill:1,currentColor:2})}}const ff=t=>({}),Ro=t=>({});function df(t){let e,n,s,r,i;const o=t[7].default,a=ne(o,t,t[6],null),l=t[7].end,u=ne(l,t,t[6],Ro);return{c(){e=U("div"),n=U("div"),a&&a.c(),r=ae(),u&&u.c(),m(n,"class",s="flex flex-wrap items-center "+t[1]),m(e,"class",t[0])},m(c,h){C(c,e,h),x(e,n),a&&a.m(n,null),x(e,r),u&&u.m(e,null),i=!0},p(c,[h]){a&&a.p&&(!i||h&64)&&re(a,o,c,c[6],i?se(o,c[6],h,null):ie(c[6]),null),(!i||h&2&&s!==(s="flex flex-wrap items-center "+c[1]))&&m(n,"class",s),u&&u.p&&(!i||h&64)&&re(u,l,c,c[6],i?se(l,c[6],h,ff):ie(c[6]),Ro),(!i||h&1)&&m(e,"class",c[0])},i(c){i||(p(a,c),p(u,c),i=!0)},o(c){b(a,c),b(u,c),i=!1},d(c){c&&T(e),a&&a.d(c),u&&u.d(c)}}}function gf(t,e,n){let s,{$$slots:r={},$$scope:i}=e;const o=qc(!1);Va(t,o,d=>n(5,s=d)),vs("toolbar",o);let{color:a="dark"}=e,{embedded:l=!1}=e;const u={gray:"bg-gray-100 dark:bg-gray-200 ",red:"bg-red-100 dark:bg-red-200",yellow:"bg-yellow-100 dark:bg-yellow-200 ",green:"bg-green-100 dark:bg-green-200 ",indigo:"bg-indigo-100 dark:bg-indigo-200 ",purple:"bg-purple-100 dark:bg-purple-200 ",pink:"bg-pink-100 dark:bg-pink-200 ",blue:"bg-blue-100 dark:bg-blue-200 ",dark:"bg-gray-50 dark:bg-gray-700"},c={gray:"text-gray-500 dark:text-gray-700",red:"text-red-500 dark:text-red-700",yellow:"text-yellow-500 dark:text-yellow-700",green:"text-green-500 dark:text-green-700",indigo:"text-indigo-500 dark:text-indigo-700",purple:"text-purple-500 dark:text-purple-700",pink:"text-pink-500 dark:text-pink-700",blue:"text-blue-500 dark:text-blue-700",dark:"text-gray-500 dark:text-gray-400"};let h;const f={gray:"divide-gray-200 dark:divide-gray-700",red:"divide-red-200 dark:divide-red-700",yellow:"divide-yellow-200 dark:divide-yellow-700",green:"divide-green-200 dark:divide-green-700",indigo:"divide-indigo-200 dark:divide-indigo-700",purple:"divide-purple-200 dark:divide-purple-700",pink:"divide-pink-200 dark:divide-pink-700",blue:"divide-blue-200 dark:divide-blue-700",dark:"divide-gray-200 dark:divide-gray-600"};let g;return t.$$set=d=>{n(11,e=O(O({},e),Y(d))),"color"in d&&n(3,a=d.color),"embedded"in d&&n(4,l=d.embedded),"$$scope"in d&&n(6,i=d.$$scope)},t.$$.update=()=>{n(0,h=le("flex justify-between items-center",l||"rounded-lg border border-gray-200 dark:border-gray-600 py-2 px-3",l||c[a],l||u[a],e.class)),t.$$.dirty&40&&n(1,g=le(s&&"divide-gray-200 sm:divide-x",f[a]))},e=Y(e),[h,g,o,a,l,s,i,r]}class mf extends ye{constructor(e){super(),pe(this,e,gf,df,$,{color:3,embedded:4})}}function pf(t){let e,n;const s=t[2].default,r=ne(s,t,t[1],null);return{c(){e=U("div"),r&&r.c(),m(e,"class","flex items-center space-x-1 sm:pr-4 sm:pl-4 first:sm:pl-0 last:sm:pr-0")},m(i,o){C(i,e,o),r&&r.m(e,null),n=!0},p(i,[o]){r&&r.p&&(!n||o&2)&&re(r,s,i,i[1],n?se(s,i[1],o,null):ie(i[1]),null)},i(i){n||(p(r,i),n=!0)},o(i){b(r,i),n=!1},d(i){i&&T(e),r&&r.d(i)}}}function yf(t,e,n){let s,{$$slots:r={},$$scope:i}=e;const o=Vn("toolbar");return Va(t,o,a=>n(3,s=a)),o&&Ic(o,s=!0,s),t.$$set=a=>{"$$scope"in a&&n(1,i=a.$$scope)},[o,i,r]}class Lo extends ye{constructor(e){super(),pe(this,e,yf,pf,$,{})}}function pr(t){let e,n,s;const r=t[7].default,i=ne(r,t,t[6],null);let o=[t[4],{class:n=le(t[2]?t[2]:t[3][t[0]],t[1],"w-full",t[5].class)}],a={};for(let l=0;l<o.length;l+=1)a=O(a,o[l]);return{c(){e=U(t[0]),i&&i.c(),/-/.test(t[0])?qe(e,a):oe(e,a)},m(l,u){C(l,e,u),i&&i.m(e,null),s=!0},p(l,u){i&&i.p&&(!s||u&64)&&re(i,r,l,l[6],s?se(r,l[6],u,null):ie(l[6]),null),a=Re(o,[u&16&&l[4],(!s||u&39&&n!==(n=le(l[2]?l[2]:l[3][l[0]],l[1],"w-full",l[5].class)))&&{class:n}]),/-/.test(l[0])?qe(e,a):oe(e,a)},i(l){s||(p(i,l),s=!0)},o(l){b(i,l),s=!1},d(l){l&&T(e),i&&i.d(l)}}}function vf(t){let e=t[0],n,s,r=t[0]&&pr(t);return{c(){r&&r.c(),n=Ne()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,[o]){i[0]?e?$(e,i[0])?(r.d(1),r=pr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=pr(i),r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null),e=i[0]},i(i){s||(p(r),s=!0)},o(i){b(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function bf(t,e,n){const s=["tag","color","customSize"];let r=fe(e,s),{$$slots:i={},$$scope:o}=e,{tag:a="h1"}=e,{color:l="text-gray-900 dark:text-white"}=e,{customSize:u=""}=e;const c={h1:"text-5xl font-extrabold",h2:"text-4xl font-bold",h3:"text-3xl font-bold",h4:"text-2xl font-bold",h5:"text-xl font-bold",h6:"text-lg font-bold"};return t.$$set=h=>{n(5,e=O(O({},e),Y(h))),n(4,r=fe(e,s)),"tag"in h&&n(0,a=h.tag),"color"in h&&n(1,l=h.color),"customSize"in h&&n(2,u=h.customSize),"$$scope"in h&&n(6,o=h.$$scope)},e=Y(e),[a,l,u,c,r,e,o,i]}class Mo extends ye{constructor(e){super(),pe(this,e,bf,vf,$,{tag:0,color:1,customSize:2})}}function _f(t){let e,n;const s=t[15].default,r=ne(s,t,t[14],null);let i=[t[1],{class:t[0]}],o={};for(let a=0;a<i.length;a+=1)o=O(o,i[a]);return{c(){e=U("p"),r&&r.c(),oe(e,o)},m(a,l){C(a,e,l),r&&r.m(e,null),n=!0},p(a,[l]){r&&r.p&&(!n||l&16384)&&re(r,s,a,a[14],n?se(s,a[14],l,null):ie(a[14]),null),oe(e,o=Re(i,[l&2&&a[1],{class:a[0]}]))},i(a){n||(p(r,a),n=!0)},o(a){b(r,a),n=!1},d(a){a&&T(e),r&&r.d(a)}}}function wf(t,e,n){const s=["color","height","align","justify","italic","firstupper","upperClass","opacity","whitespace","size","space","weight"];let r=fe(e,s),{$$slots:i={},$$scope:o}=e,{color:a="text-gray-900 dark:text-white"}=e,{height:l="normal"}=e,{align:u="left"}=e,{justify:c=!1}=e,{italic:h=!1}=e,{firstupper:f=!1}=e,{upperClass:g="first-line:uppercase first-line:tracking-widest first-letter:text-7xl first-letter:font-bold first-letter:text-gray-900 dark:first-letter:text-gray-100 first-letter:mr-3 first-letter:float-left"}=e,{opacity:d=void 0}=e,{whitespace:v="normal"}=e,{size:E="base"}=e,{space:_=void 0}=e,{weight:y="normal"}=e;const N={xs:"text-xs",sm:"text-sm",base:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl","5xl":"text-5xl","6xl":"text-6xl","7xl":"text-7xl","8xl":"text-8xl","9xl":"text-9xl"},ee={thin:"font-thin",extralight:"font-extralight",light:"font-light",normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold",extrabold:"font-extrabold",black:"font-black"},we={tighter:"tracking-tighter",tight:"tracking-tight",normal:"tracking-normal",wide:"tracking-wide",wider:"tracking-wider",widest:"tracking-widest"},Me={normal:"leading-normal",relaxed:"leading-relaxed",loose:"leading-loose"},ue={left:"text-left",center:"text-center",right:"text-right"},We={normal:"whitespace-normal",nowrap:"whitespace-nowrap",pre:"whitespace-pre",preline:"whitespace-pre-line",prewrap:"whitespace-pre-wrap"};let z=a.split(" ").map(I=>I.trim()).map(I=>I+"/"+String(d)).join(" "),de=le(E&&N[E],d&&z||a&&a,l&&Me[l],y&&ee[y],_&&we[_],u&&ue[u],c&&"text-justify",h&&"italic",f&&g,v&&We[v],e.class);return t.$$set=I=>{n(23,e=O(O({},e),Y(I))),n(1,r=fe(e,s)),"color"in I&&n(2,a=I.color),"height"in I&&n(3,l=I.height),"align"in I&&n(4,u=I.align),"justify"in I&&n(5,c=I.justify),"italic"in I&&n(6,h=I.italic),"firstupper"in I&&n(7,f=I.firstupper),"upperClass"in I&&n(8,g=I.upperClass),"opacity"in I&&n(9,d=I.opacity),"whitespace"in I&&n(10,v=I.whitespace),"size"in I&&n(11,E=I.size),"space"in I&&n(12,_=I.space),"weight"in I&&n(13,y=I.weight),"$$scope"in I&&n(14,o=I.$$scope)},e=Y(e),[de,r,a,l,u,c,h,f,g,d,v,E,_,y,o,i]}class mn extends ye{constructor(e){super(),pe(this,e,wf,_f,$,{color:2,height:3,align:4,justify:5,italic:6,firstupper:7,upperClass:8,opacity:9,whitespace:10,size:11,space:12,weight:13})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},kf=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},el={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,c=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(f=64)),s.push(n[c],n[h],n[f],n[g])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($a(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):kf(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||u==null||h==null)throw Error();const f=i<<2|a>>4;if(s.push(f),u!==64){const g=a<<4&240|u>>2;if(s.push(g),h!==64){const d=u<<6&192|h;s.push(d)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Ef=function(t){const e=$a(t);return el.encodeByteArray(e,!0)},bs=function(t){return Ef(t).replace(/\./g,"")},Tf=function(t){try{return el.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Cf(){return typeof indexedDB=="object"}function If(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function Sf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=()=>Sf().__FIREBASE_DEFAULTS__,Df=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Nf=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Tf(t[1]);return e&&JSON.parse(e)},tl=()=>{try{return Af()||Df()||Nf()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Rf=t=>{var e,n;return(n=(e=tl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Lf=t=>{const e=Rf(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Mf=()=>{var t;return(t=tl())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[bs(JSON.stringify(n)),bs(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="FirebaseError";class Zt extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Ff,Object.setPrototypeOf(this,Zt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nl.prototype.create)}}class nl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?Vf(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Zt(r,a,s)}}function Vf(t,e){return t.replace(xf,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const xf=/\{\$([^}]+)}/g;function Fr(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Oo(i)&&Oo(o)){if(!Fr(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Oo(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t){return t&&t._delegate?t._delegate:t}class kn{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Of;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jf(e))try{this.getOrInitializeService({instanceIdentifier:bt})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=bt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bt){return this.instances.has(e)}getOptions(e=bt){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(!!s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Bf(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=bt){return this.component?this.component.multipleInstances?e:bt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bf(t){return t===bt?void 0:t}function jf(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Uf(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(J||(J={}));const qf={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},Hf=J.INFO,Kf={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},Gf=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=Kf[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sl{constructor(e){this.name=e,this._logLevel=Hf,this._logHandler=Gf,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in J))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qf[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...e),this._logHandler(this,J.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...e),this._logHandler(this,J.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,J.INFO,...e),this._logHandler(this,J.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,J.WARN,...e),this._logHandler(this,J.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...e),this._logHandler(this,J.ERROR,...e)}}const Qf=(t,e)=>e.some(n=>t instanceof n);let Po,Fo;function Wf(){return Po||(Po=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Xf(){return Fo||(Fo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rl=new WeakMap,Vr=new WeakMap,il=new WeakMap,yr=new WeakMap,di=new WeakMap;function Yf(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(at(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&rl.set(n,t)}).catch(()=>{}),di.set(e,t),e}function Jf(t){if(Vr.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Vr.set(t,e)}let xr={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vr.get(t);if(e==="objectStoreNames")return t.objectStoreNames||il.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return at(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Zf(t){xr=t(xr)}function $f(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(vr(this),e,...n);return il.set(s,e.sort?e.sort():[e]),at(s)}:Xf().includes(t)?function(...e){return t.apply(vr(this),e),at(rl.get(this))}:function(...e){return at(t.apply(vr(this),e))}}function ed(t){return typeof t=="function"?$f(t):(t instanceof IDBTransaction&&Jf(t),Qf(t,Wf())?new Proxy(t,xr):t)}function at(t){if(t instanceof IDBRequest)return Yf(t);if(yr.has(t))return yr.get(t);const e=ed(t);return e!==t&&(yr.set(t,e),di.set(e,t)),e}const vr=t=>di.get(t);function td(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=at(o);return s&&o.addEventListener("upgradeneeded",l=>{s(at(o.result),l.oldVersion,l.newVersion,at(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}const nd=["get","getKey","getAll","getAllKeys","count"],sd=["put","add","delete","clear"],br=new Map;function Vo(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(br.get(e))return br.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=sd.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||nd.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return br.set(e,i),i}Zf(t=>({...t,get:(e,n,s)=>Vo(e,n)||t.get(e,n,s),has:(e,n)=>!!Vo(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(id(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function id(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ur="@firebase/app",xo="0.8.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St=new sl("@firebase/app"),od="@firebase/app-compat",ad="@firebase/analytics-compat",ld="@firebase/analytics",ud="@firebase/app-check-compat",cd="@firebase/app-check",hd="@firebase/auth",fd="@firebase/auth-compat",dd="@firebase/database",gd="@firebase/database-compat",md="@firebase/functions",pd="@firebase/functions-compat",yd="@firebase/installations",vd="@firebase/installations-compat",bd="@firebase/messaging",_d="@firebase/messaging-compat",wd="@firebase/performance",kd="@firebase/performance-compat",Ed="@firebase/remote-config",Td="@firebase/remote-config-compat",Cd="@firebase/storage",Id="@firebase/storage-compat",Sd="@firebase/firestore",Ad="@firebase/firestore-compat",Dd="firebase",Nd="9.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br="[DEFAULT]",Rd={[Ur]:"fire-core",[od]:"fire-core-compat",[ld]:"fire-analytics",[ad]:"fire-analytics-compat",[cd]:"fire-app-check",[ud]:"fire-app-check-compat",[hd]:"fire-auth",[fd]:"fire-auth-compat",[dd]:"fire-rtdb",[gd]:"fire-rtdb-compat",[md]:"fire-fn",[pd]:"fire-fn-compat",[yd]:"fire-iid",[vd]:"fire-iid-compat",[bd]:"fire-fcm",[_d]:"fire-fcm-compat",[wd]:"fire-perf",[kd]:"fire-perf-compat",[Ed]:"fire-rc",[Td]:"fire-rc-compat",[Cd]:"fire-gcs",[Id]:"fire-gcs-compat",[Sd]:"fire-fst",[Ad]:"fire-fst-compat","fire-js":"fire-js",[Dd]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s=new Map,jr=new Map;function Ld(t,e){try{t.container.addComponent(e)}catch(n){St.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ws(t){const e=t.name;if(jr.has(e))return St.debug(`There were multiple attempts to register component ${e}.`),!1;jr.set(e,t);for(const n of _s.values())Ld(n,t);return!0}function Md(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},lt=new nl("app","Firebase",Od);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new kn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd=Nd;function ol(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Br,automaticDataCollectionEnabled:!1},e),r=s.name;if(typeof r!="string"||!r)throw lt.create("bad-app-name",{appName:String(r)});if(n||(n=Mf()),!n)throw lt.create("no-options");const i=_s.get(r);if(i){if(Fr(n,i.options)&&Fr(s,i.config))return i;throw lt.create("duplicate-app",{appName:r})}const o=new zf(r);for(const l of jr.values())o.addComponent(l);const a=new Pd(n,s,o);return _s.set(r,a),a}function Vd(t=Br){const e=_s.get(t);if(!e&&t===Br)return ol();if(!e)throw lt.create("no-app",{appName:t});return e}function Bt(t,e,n){var s;let r=(s=Rd[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),St.warn(a.join(" "));return}ws(new kn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="firebase-heartbeat-database",Ud=1,En="firebase-heartbeat-store";let _r=null;function al(){return _r||(_r=td(xd,Ud,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(En)}}}).catch(t=>{throw lt.create("idb-open",{originalErrorMessage:t.message})})),_r}async function Bd(t){var e;try{return(await al()).transaction(En).objectStore(En).get(ll(t))}catch(n){if(n instanceof Zt)St.warn(n.message);else{const s=lt.create("idb-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message});St.warn(s.message)}}}async function Uo(t,e){var n;try{const r=(await al()).transaction(En,"readwrite");return await r.objectStore(En).put(e,ll(t)),r.done}catch(s){if(s instanceof Zt)St.warn(s.message);else{const r=lt.create("idb-set",{originalErrorMessage:(n=s)===null||n===void 0?void 0:n.message});St.warn(r.message)}}}function ll(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd=1024,zd=30*24*60*60*1e3;class qd{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Kd(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Bo();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const i=new Date(r.date).valueOf();return Date.now()-i<=zd}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Bo(),{heartbeatsToSend:n,unsentEntries:s}=Hd(this._heartbeatsCache.heartbeats),r=bs(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Bo(){return new Date().toISOString().substring(0,10)}function Hd(t,e=jd){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),jo(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),jo(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Kd{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Cf()?If().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Bd(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Uo(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Uo(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function jo(t){return bs(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(t){ws(new kn("platform-logger",e=>new rd(e),"PRIVATE")),ws(new kn("heartbeat",e=>new qd(e),"PRIVATE")),Bt(Ur,xo,t),Bt(Ur,xo,"esm2017"),Bt("fire-js","")}Gd("");var Qd="firebase",Wd="9.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bt(Qd,Wd,"app");var Xd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},A,gi=gi||{},V=Xd||self;function ks(){}function Us(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function xn(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Yd(t){return Object.prototype.hasOwnProperty.call(t,wr)&&t[wr]||(t[wr]=++Jd)}var wr="closure_uid_"+(1e9*Math.random()>>>0),Jd=0;function Zd(t,e,n){return t.call.apply(t.bind,arguments)}function $d(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,s),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Fe(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Fe=Zd:Fe=$d,Fe.apply(null,arguments)}function rs(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),t.apply(this,s)}}function Le(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(s,r,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(s,o)}}function gt(){this.s=this.s,this.o=this.o}var eg=0;gt.prototype.s=!1;gt.prototype.na=function(){!this.s&&(this.s=!0,this.M(),eg!=0)&&Yd(this)};gt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ul=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function mi(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function zo(t,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(Us(s)){const r=t.length||0,i=s.length||0;t.length=r+i;for(let o=0;o<i;o++)t[r+o]=s[o]}else t.push(s)}}function Ve(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ve.prototype.h=function(){this.defaultPrevented=!0};var tg=function(){if(!V.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{V.addEventListener("test",ks,e),V.removeEventListener("test",ks,e)}catch{}return t}();function Es(t){return/^[\s\xa0]*$/.test(t)}var qo=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function kr(t,e){return t<e?-1:t>e?1:0}function Bs(){var t=V.navigator;return t&&(t=t.userAgent)?t:""}function Ye(t){return Bs().indexOf(t)!=-1}function pi(t){return pi[" "](t),t}pi[" "]=ks;function ng(t){var e=ig;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var sg=Ye("Opera"),Kt=Ye("Trident")||Ye("MSIE"),cl=Ye("Edge"),zr=cl||Kt,hl=Ye("Gecko")&&!(Bs().toLowerCase().indexOf("webkit")!=-1&&!Ye("Edge"))&&!(Ye("Trident")||Ye("MSIE"))&&!Ye("Edge"),rg=Bs().toLowerCase().indexOf("webkit")!=-1&&!Ye("Edge");function fl(){var t=V.document;return t?t.documentMode:void 0}var Ts;e:{var Er="",Tr=function(){var t=Bs();if(hl)return/rv:([^\);]+)(\)|;)/.exec(t);if(cl)return/Edge\/([\d\.]+)/.exec(t);if(Kt)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(rg)return/WebKit\/(\S+)/.exec(t);if(sg)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Tr&&(Er=Tr?Tr[1]:""),Kt){var Cr=fl();if(Cr!=null&&Cr>parseFloat(Er)){Ts=String(Cr);break e}}Ts=Er}var ig={};function og(){return ng(function(){let t=0;const e=qo(String(Ts)).split("."),n=qo("9").split("."),s=Math.max(e.length,n.length);for(let o=0;t==0&&o<s;o++){var r=e[o]||"",i=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],r[0].length==0&&i[0].length==0)break;t=kr(r[1].length==0?0:parseInt(r[1],10),i[1].length==0?0:parseInt(i[1],10))||kr(r[2].length==0,i[2].length==0)||kr(r[2],i[2]),r=r[3],i=i[3]}while(t==0)}return 0<=t})}var qr;if(V.document&&Kt){var Ho=fl();qr=Ho||parseInt(Ts,10)||void 0}else qr=void 0;var ag=qr;function Tn(t,e){if(Ve.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(hl){e:{try{pi(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:lg[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Tn.X.h.call(this)}}Le(Tn,Ve);var lg={2:"touch",3:"pen",4:"mouse"};Tn.prototype.h=function(){Tn.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Un="closure_listenable_"+(1e6*Math.random()|0),ug=0;function cg(t,e,n,s,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.ha=r,this.key=++ug,this.ba=this.ea=!1}function js(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function yi(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function dl(t){const e={};for(const n in t)e[n]=t[n];return e}const Ko="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gl(t,e){let n,s;for(let r=1;r<arguments.length;r++){s=arguments[r];for(n in s)t[n]=s[n];for(let i=0;i<Ko.length;i++)n=Ko[i],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function zs(t){this.src=t,this.g={},this.h=0}zs.prototype.add=function(t,e,n,s,r){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Kr(t,e,s,r);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new cg(e,this.src,i,!!s,r),e.ea=n,t.push(e)),e};function Hr(t,e){var n=e.type;if(n in t.g){var s=t.g[n],r=ul(s,e),i;(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(js(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Kr(t,e,n,s){for(var r=0;r<t.length;++r){var i=t[r];if(!i.ba&&i.listener==e&&i.capture==!!n&&i.ha==s)return r}return-1}var vi="closure_lm_"+(1e6*Math.random()|0),Ir={};function ml(t,e,n,s,r){if(s&&s.once)return yl(t,e,n,s,r);if(Array.isArray(e)){for(var i=0;i<e.length;i++)ml(t,e[i],n,s,r);return null}return n=wi(n),t&&t[Un]?t.N(e,n,xn(s)?!!s.capture:!!s,r):pl(t,e,n,!1,s,r)}function pl(t,e,n,s,r,i){if(!e)throw Error("Invalid event type");var o=xn(r)?!!r.capture:!!r,a=_i(t);if(a||(t[vi]=a=new zs(t)),n=a.add(e,n,s,o,i),n.proxy)return n;if(s=hg(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)tg||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),s,r);else if(t.attachEvent)t.attachEvent(bl(e.toString()),s);else if(t.addListener&&t.removeListener)t.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function hg(){function t(n){return e.call(t.src,t.listener,n)}const e=fg;return t}function yl(t,e,n,s,r){if(Array.isArray(e)){for(var i=0;i<e.length;i++)yl(t,e[i],n,s,r);return null}return n=wi(n),t&&t[Un]?t.O(e,n,xn(s)?!!s.capture:!!s,r):pl(t,e,n,!0,s,r)}function vl(t,e,n,s,r){if(Array.isArray(e))for(var i=0;i<e.length;i++)vl(t,e[i],n,s,r);else s=xn(s)?!!s.capture:!!s,n=wi(n),t&&t[Un]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Kr(i,n,s,r),-1<n&&(js(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=_i(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Kr(e,n,s,r)),(n=-1<t?e[t]:null)&&bi(n))}function bi(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[Un])Hr(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(bl(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=_i(e))?(Hr(n,t),n.h==0&&(n.src=null,e[vi]=null)):js(t)}}}function bl(t){return t in Ir?Ir[t]:Ir[t]="on"+t}function fg(t,e){if(t.ba)t=!0;else{e=new Tn(e,this);var n=t.listener,s=t.ha||t.src;t.ea&&bi(t),t=n.call(s,e)}return t}function _i(t){return t=t[vi],t instanceof zs?t:null}var Sr="__closure_events_fn_"+(1e9*Math.random()>>>0);function wi(t){return typeof t=="function"?t:(t[Sr]||(t[Sr]=function(e){return t.handleEvent(e)}),t[Sr])}function Ie(){gt.call(this),this.i=new zs(this),this.P=this,this.I=null}Le(Ie,gt);Ie.prototype[Un]=!0;Ie.prototype.removeEventListener=function(t,e,n,s){vl(this,t,e,n,s)};function De(t,e){var n,s=t.I;if(s)for(n=[];s;s=s.I)n.push(s);if(t=t.P,s=e.type||e,typeof e=="string")e=new Ve(e,t);else if(e instanceof Ve)e.target=e.target||t;else{var r=e;e=new Ve(s,t),gl(e,r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];r=is(o,s,!0,e)&&r}if(o=e.g=t,r=is(o,s,!0,e)&&r,r=is(o,s,!1,e)&&r,n)for(i=0;i<n.length;i++)o=e.g=n[i],r=is(o,s,!1,e)&&r}Ie.prototype.M=function(){if(Ie.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)js(n[s]);delete t.g[e],t.h--}}this.I=null};Ie.prototype.N=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)};Ie.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};function is(t,e,n,s){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ba&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.ea&&Hr(t.i,o),r=a.call(l,s)!==!1&&r}}return r&&!s.defaultPrevented}var ki=V.JSON.stringify;function dg(){var t=kl;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class gg{constructor(){this.h=this.g=null}add(e,n){const s=_l.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}}var _l=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new mg,t=>t.reset());class mg{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function pg(t){V.setTimeout(()=>{throw t},0)}function wl(t,e){Gr||yg(),Qr||(Gr(),Qr=!0),kl.add(t,e)}var Gr;function yg(){var t=V.Promise.resolve(void 0);Gr=function(){t.then(vg)}}var Qr=!1,kl=new gg;function vg(){for(var t;t=dg();){try{t.h.call(t.g)}catch(n){pg(n)}var e=_l;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Qr=!1}function qs(t,e){Ie.call(this),this.h=t||1,this.g=e||V,this.j=Fe(this.lb,this),this.l=Date.now()}Le(qs,Ie);A=qs.prototype;A.ca=!1;A.R=null;A.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),De(this,"tick"),this.ca&&(Ei(this),this.start()))}};A.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Ei(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}A.M=function(){qs.X.M.call(this),Ei(this),delete this.g};function Ti(t,e,n){if(typeof t=="function")n&&(t=Fe(t,n));else if(t&&typeof t.handleEvent=="function")t=Fe(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:V.setTimeout(t,e||0)}function El(t){t.g=Ti(()=>{t.g=null,t.i&&(t.i=!1,El(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class bg extends gt{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:El(this)}M(){super.M(),this.g&&(V.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cn(t){gt.call(this),this.h=t,this.g={}}Le(Cn,gt);var Go=[];function Tl(t,e,n,s){Array.isArray(n)||(n&&(Go[0]=n.toString()),n=Go);for(var r=0;r<n.length;r++){var i=ml(e,n[r],s||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Cl(t){yi(t.g,function(e,n){this.g.hasOwnProperty(n)&&bi(e)},t),t.g={}}Cn.prototype.M=function(){Cn.X.M.call(this),Cl(this)};Cn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Hs(){this.g=!0}Hs.prototype.Aa=function(){this.g=!1};function _g(t,e,n,s,r,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function wg(t,e,n,s,r,i,o){t.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+e+`
`+n+`
`+i+" "+o})}function Ft(t,e,n,s){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Eg(t,n)+(s?" "+s:"")})}function kg(t,e){t.info(function(){return"TIMEOUT: "+e})}Hs.prototype.info=function(){};function Eg(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var r=s[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return ki(n)}catch{return e}}var Rt={},Qo=null;function Ks(){return Qo=Qo||new Ie}Rt.Pa="serverreachability";function Il(t){Ve.call(this,Rt.Pa,t)}Le(Il,Ve);function In(t){const e=Ks();De(e,new Il(e))}Rt.STAT_EVENT="statevent";function Sl(t,e){Ve.call(this,Rt.STAT_EVENT,t),this.stat=e}Le(Sl,Ve);function je(t){const e=Ks();De(e,new Sl(e,t))}Rt.Qa="timingevent";function Al(t,e){Ve.call(this,Rt.Qa,t),this.size=e}Le(Al,Ve);function Bn(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return V.setTimeout(function(){t()},e)}var Gs={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Dl={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ci(){}Ci.prototype.h=null;function Wo(t){return t.h||(t.h=t.i())}function Nl(){}var jn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Ii(){Ve.call(this,"d")}Le(Ii,Ve);function Si(){Ve.call(this,"c")}Le(Si,Ve);var Wr;function Qs(){}Le(Qs,Ci);Qs.prototype.g=function(){return new XMLHttpRequest};Qs.prototype.i=function(){return{}};Wr=new Qs;function zn(t,e,n,s){this.l=t,this.j=e,this.m=n,this.U=s||1,this.S=new Cn(this),this.O=Tg,t=zr?125:void 0,this.T=new qs(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Rl}function Rl(){this.i=null,this.g="",this.h=!1}var Tg=45e3,Xr={},Cs={};A=zn.prototype;A.setTimeout=function(t){this.O=t};function Yr(t,e,n){t.K=1,t.v=Xs(st(e)),t.s=n,t.P=!0,Ll(t,null)}function Ll(t,e){t.F=Date.now(),qn(t),t.A=st(t.v);var n=t.A,s=t.U;Array.isArray(s)||(s=[String(s)]),Bl(n.i,"t",s),t.C=0,n=t.l.H,t.h=new Rl,t.g=au(t.l,n?e:null,!t.s),0<t.N&&(t.L=new bg(Fe(t.La,t,t.g),t.N)),Tl(t.S,t.g,"readystatechange",t.ib),e=t.H?dl(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),In(),_g(t.j,t.u,t.A,t.m,t.U,t.s)}A.ib=function(t){t=t.target;const e=this.L;e&&et(t)==3?e.l():this.La(t)};A.La=function(t){try{if(t==this.g)e:{const c=et(this.g);var e=this.g.Ea();const h=this.g.aa();if(!(3>c)&&(c!=3||zr||this.g&&(this.h.h||this.g.fa()||Zo(this.g)))){this.I||c!=4||e==7||(e==8||0>=h?In(3):In(2)),Ws(this);var n=this.g.aa();this.Y=n;t:if(Ml(this)){var s=Zo(this.g);t="";var r=s.length,i=et(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_t(this),pn(this);var o="";break t}this.h.i=new V.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:i&&e==r-1});s.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,wg(this.j,this.u,this.A,this.m,this.U,c,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Es(a)){var u=a;break t}}u=null}if(n=u)Ft(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Jr(this,n);else{this.i=!1,this.o=3,je(12),_t(this),pn(this);break e}}this.P?(Ol(this,c,o),zr&&this.i&&c==3&&(Tl(this.S,this.T,"tick",this.hb),this.T.start())):(Ft(this.j,this.m,o,null),Jr(this,o)),c==4&&_t(this),this.i&&!this.I&&(c==4?su(this.l,this):(this.i=!1,qn(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,je(12)):(this.o=0,je(13)),_t(this),pn(this)}}}catch{}finally{}};function Ml(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function Ol(t,e,n){let s=!0,r;for(;!t.I&&t.C<n.length;)if(r=Cg(t,n),r==Cs){e==4&&(t.o=4,je(14),s=!1),Ft(t.j,t.m,null,"[Incomplete Response]");break}else if(r==Xr){t.o=4,je(15),Ft(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}else Ft(t.j,t.m,r,null),Jr(t,r);Ml(t)&&r!=Cs&&r!=Xr&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,je(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Oi(e),e.K=!0,je(11))):(Ft(t.j,t.m,n,"[Invalid Chunked Response]"),_t(t),pn(t))}A.hb=function(){if(this.g){var t=et(this.g),e=this.g.fa();this.C<e.length&&(Ws(this),Ol(this,t,e),this.i&&t!=4&&qn(this))}};function Cg(t,e){var n=t.C,s=e.indexOf(`
`,n);return s==-1?Cs:(n=Number(e.substring(n,s)),isNaN(n)?Xr:(s+=1,s+n>e.length?Cs:(e=e.substr(s,n),t.C=s+n,e)))}A.cancel=function(){this.I=!0,_t(this)};function qn(t){t.V=Date.now()+t.O,Pl(t,t.O)}function Pl(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Bn(Fe(t.gb,t),e)}function Ws(t){t.B&&(V.clearTimeout(t.B),t.B=null)}A.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(kg(this.j,this.A),this.K!=2&&(In(),je(17)),_t(this),this.o=2,pn(this)):Pl(this,this.V-t)};function pn(t){t.l.G==0||t.I||su(t.l,t)}function _t(t){Ws(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Ei(t.T),Cl(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Jr(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||Zr(n.h,t))){if(!t.J&&Zr(n.h,t)&&n.G==3){try{var s=n.Fa.g.parse(e)}catch{s=null}if(Array.isArray(s)&&s.length==3){var r=s;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)As(n),Zs(n);else break e;Mi(n),je(18)}}else n.Ba=r[1],0<n.Ba-n.T&&37500>r[2]&&n.L&&n.A==0&&!n.v&&(n.v=Bn(Fe(n.cb,n),6e3));if(1>=ql(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else wt(n,11)}else if((t.J||n.g==t)&&As(n),!Es(e))for(r=n.Fa.g.parse(e),e=0;e<r.length;e++){let u=r[e];if(n.T=u[0],u=u[1],n.G==2)if(u[0]=="c"){n.I=u[1],n.ka=u[2];const c=u[3];c!=null&&(n.ma=c,n.j.info("VER="+n.ma));const h=u[4];h!=null&&(n.Ca=h,n.j.info("SVER="+n.Ca));const f=u[5];f!=null&&typeof f=="number"&&0<f&&(s=1.5*f,n.J=s,n.j.info("backChannelRequestTimeoutMs_="+s)),s=n;const g=t.g;if(g){const d=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(d){var i=s.h;i.g||d.indexOf("spdy")==-1&&d.indexOf("quic")==-1&&d.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Ai(i,i.h),i.h=null))}if(s.D){const v=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(s.za=v,ce(s.F,s.D,v))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),s=n;var o=t;if(s.sa=ou(s,s.H?s.ka:null,s.V),o.J){Hl(s.h,o);var a=o,l=s.J;l&&a.setTimeout(l),a.B&&(Ws(a),qn(a)),s.g=o}else tu(s);0<n.i.length&&$s(n)}else u[0]!="stop"&&u[0]!="close"||wt(n,7);else n.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?wt(n,7):Li(n):u[0]!="noop"&&n.l&&n.l.wa(u),n.A=0)}}In(4)}catch{}}function Ig(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Us(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}e=[],n=0;for(s in t)e[n++]=t[s];return e}function Sg(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Us(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const s in t)e[n++]=s;return e}}}function Fl(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Us(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Sg(t),s=Ig(t),r=s.length,i=0;i<r;i++)e.call(void 0,s[i],n&&n[i],t)}var Vl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ag(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),r=null;if(0<=s){var i=t[n].substring(0,s);r=t[n].substring(s+1)}else i=t[n];e(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Et(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Et){this.h=e!==void 0?e:t.h,Is(this,t.j),this.s=t.s,this.g=t.g,Ss(this,t.m),this.l=t.l,e=t.i;var n=new Sn;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Xo(this,n),this.o=t.o}else t&&(n=String(t).match(Vl))?(this.h=!!e,Is(this,n[1]||"",!0),this.s=un(n[2]||""),this.g=un(n[3]||"",!0),Ss(this,n[4]),this.l=un(n[5]||"",!0),Xo(this,n[6]||"",!0),this.o=un(n[7]||"")):(this.h=!!e,this.i=new Sn(null,this.h))}Et.prototype.toString=function(){var t=[],e=this.j;e&&t.push(cn(e,Yo,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(cn(e,Yo,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(cn(n,n.charAt(0)=="/"?Rg:Ng,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",cn(n,Mg)),t.join("")};function st(t){return new Et(t)}function Is(t,e,n){t.j=n?un(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ss(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Xo(t,e,n){e instanceof Sn?(t.i=e,Og(t.i,t.h)):(n||(e=cn(e,Lg)),t.i=new Sn(e,t.h))}function ce(t,e,n){t.i.set(e,n)}function Xs(t){return ce(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function un(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function cn(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Dg),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Dg(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Yo=/[#\/\?@]/g,Ng=/[#\?:]/g,Rg=/[#\?]/g,Lg=/[#\?@]/g,Mg=/#/g;function Sn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function mt(t){t.g||(t.g=new Map,t.h=0,t.i&&Ag(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}A=Sn.prototype;A.add=function(t,e){mt(this),this.i=null,t=$t(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function xl(t,e){mt(t),e=$t(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Ul(t,e){return mt(t),e=$t(t,e),t.g.has(e)}A.forEach=function(t,e){mt(this),this.g.forEach(function(n,s){n.forEach(function(r){t.call(e,r,s,this)},this)},this)};A.oa=function(){mt(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const r=t[s];for(let i=0;i<r.length;i++)n.push(e[s])}return n};A.W=function(t){mt(this);let e=[];if(typeof t=="string")Ul(this,t)&&(e=e.concat(this.g.get($t(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};A.set=function(t,e){return mt(this),this.i=null,t=$t(this,t),Ul(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};A.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function Bl(t,e,n){xl(t,e),0<n.length&&(t.i=null,t.g.set($t(t,e),mi(n)),t.h+=n.length)}A.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const i=encodeURIComponent(String(s)),o=this.W(s);for(s=0;s<o.length;s++){var r=i;o[s]!==""&&(r+="="+encodeURIComponent(String(o[s]))),t.push(r)}}return this.i=t.join("&")};function $t(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Og(t,e){e&&!t.j&&(mt(t),t.i=null,t.g.forEach(function(n,s){var r=s.toLowerCase();s!=r&&(xl(this,s),Bl(this,r,n))},t)),t.j=e}var Pg=class{constructor(t,e){this.h=t,this.g=e}};function jl(t){this.l=t||Fg,V.PerformanceNavigationTiming?(t=V.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(V.g&&V.g.Ga&&V.g.Ga()&&V.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Fg=10;function zl(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function ql(t){return t.h?1:t.g?t.g.size:0}function Zr(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Ai(t,e){t.g?t.g.add(e):t.h=e}function Hl(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}jl.prototype.cancel=function(){if(this.i=Kl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Kl(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return mi(t.i)}function Di(){}Di.prototype.stringify=function(t){return V.JSON.stringify(t,void 0)};Di.prototype.parse=function(t){return V.JSON.parse(t,void 0)};function Vg(){this.g=new Di}function xg(t,e,n){const s=n||"";try{Fl(t,function(r,i){let o=r;xn(r)&&(o=ki(r)),e.push(s+i+"="+encodeURIComponent(o))})}catch(r){throw e.push(s+"type="+encodeURIComponent("_badmap")),r}}function Ug(t,e){const n=new Hs;if(V.Image){const s=new Image;s.onload=rs(os,n,s,"TestLoadImage: loaded",!0,e),s.onerror=rs(os,n,s,"TestLoadImage: error",!1,e),s.onabort=rs(os,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=rs(os,n,s,"TestLoadImage: timeout",!1,e),V.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=t}else e(!1)}function os(t,e,n,s,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(s)}catch{}}function Hn(t){this.l=t.ac||null,this.j=t.jb||!1}Le(Hn,Ci);Hn.prototype.g=function(){return new Ys(this.l,this.j)};Hn.prototype.i=function(t){return function(){return t}}({});function Ys(t,e){Ie.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Ni,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Le(Ys,Ie);var Ni=0;A=Ys.prototype;A.open=function(t,e){if(this.readyState!=Ni)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,An(this)};A.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||V).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};A.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Kn(this)),this.readyState=Ni};A.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,An(this)),this.g&&(this.readyState=3,An(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof V.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gl(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function Gl(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}A.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Kn(this):An(this),this.readyState==3&&Gl(this)}};A.Va=function(t){this.g&&(this.response=this.responseText=t,Kn(this))};A.Ua=function(t){this.g&&(this.response=t,Kn(this))};A.ga=function(){this.g&&Kn(this)};function Kn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,An(t)}A.setRequestHeader=function(t,e){this.v.append(t,e)};A.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};A.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function An(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Ys.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Bg=V.JSON.parse;function me(t){Ie.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ql,this.K=this.L=!1}Le(me,Ie);var Ql="",jg=/^https?$/i,zg=["POST","PUT"];A=me.prototype;A.Ka=function(t){this.L=t};A.da=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Wr.g(),this.C=this.u?Wo(this.u):Wo(Wr),this.g.onreadystatechange=Fe(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){Jo(this,i);return}if(t=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var r in s)n.set(r,s[r]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const i of s.keys())n.set(i,s.get(i));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),r=V.FormData&&t instanceof V.FormData,!(0<=ul(zg,e))||s||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Yl(this),0<this.B&&((this.K=qg(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fe(this.qa,this)):this.A=Ti(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){Jo(this,i)}};function qg(t){return Kt&&og()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}A.qa=function(){typeof gi<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,De(this,"timeout"),this.abort(8))};function Jo(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Wl(t),Js(t)}function Wl(t){t.D||(t.D=!0,De(t,"complete"),De(t,"error"))}A.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,De(this,"complete"),De(this,"abort"),Js(this))};A.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Js(this,!0)),me.X.M.call(this)};A.Ha=function(){this.s||(this.F||this.v||this.l?Xl(this):this.fb())};A.fb=function(){Xl(this)};function Xl(t){if(t.h&&typeof gi<"u"&&(!t.C[1]||et(t)!=4||t.aa()!=2)){if(t.v&&et(t)==4)Ti(t.Ha,0,t);else if(De(t,"readystatechange"),et(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=a===0){var r=String(t.H).match(Vl)[1]||null;if(!r&&V.self&&V.self.location){var i=V.self.location.protocol;r=i.substr(0,i.length-1)}s=!jg.test(r?r.toLowerCase():"")}n=s}if(n)De(t,"complete"),De(t,"success");else{t.m=6;try{var o=2<et(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",Wl(t)}}finally{Js(t)}}}}function Js(t,e){if(t.g){Yl(t);const n=t.g,s=t.C[0]?ks:null;t.g=null,t.C=null,e||De(t,"ready");try{n.onreadystatechange=s}catch{}}}function Yl(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(V.clearTimeout(t.A),t.A=null)}function et(t){return t.g?t.g.readyState:0}A.aa=function(){try{return 2<et(this)?this.g.status:-1}catch{return-1}};A.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};A.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Bg(e)}};function Zo(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Ql:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}A.Ea=function(){return this.m};A.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Jl(t){let e="";return yi(t,function(n,s){e+=s,e+=":",e+=n,e+=`\r
`}),e}function Ri(t,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=Jl(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ce(t,e,n))}function an(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Zl(t){this.Ca=0,this.i=[],this.j=new Hs,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=an("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=an("baseRetryDelayMs",5e3,t),this.bb=an("retryDelaySeedMs",1e4,t),this.$a=an("forwardChannelMaxRetries",2,t),this.ta=an("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new jl(t&&t.concurrentRequestLimit),this.Fa=new Vg,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}A=Zl.prototype;A.ma=8;A.G=1;function Li(t){if($l(t),t.G==3){var e=t.U++,n=st(t.F);ce(n,"SID",t.I),ce(n,"RID",e),ce(n,"TYPE","terminate"),Gn(t,n),e=new zn(t,t.j,e,void 0),e.K=2,e.v=Xs(st(n)),n=!1,V.navigator&&V.navigator.sendBeacon&&(n=V.navigator.sendBeacon(e.v.toString(),"")),!n&&V.Image&&(new Image().src=e.v,n=!0),n||(e.g=au(e.l,null),e.g.da(e.v)),e.F=Date.now(),qn(e)}iu(t)}function Zs(t){t.g&&(Oi(t),t.g.cancel(),t.g=null)}function $l(t){Zs(t),t.u&&(V.clearTimeout(t.u),t.u=null),As(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&V.clearTimeout(t.m),t.m=null)}function $s(t){zl(t.h)||t.m||(t.m=!0,wl(t.Ja,t),t.C=0)}function Hg(t,e){return ql(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=Bn(Fe(t.Ja,t,e),ru(t,t.C)),t.C++,!0)}A.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new zn(this,this.j,t,void 0);let i=this.s;if(this.S&&(i?(i=dl(i),gl(i,this.S)):i=this.S),this.o!==null||this.N||(r.H=i,i=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var s=this.i[n];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(e+=s,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=eu(this,r,e),n=st(this.F),ce(n,"RID",t),ce(n,"CVER",22),this.D&&ce(n,"X-HTTP-Session-Id",this.D),Gn(this,n),i&&(this.N?e="headers="+encodeURIComponent(String(Jl(i)))+"&"+e:this.o&&Ri(n,this.o,i)),Ai(this.h,r),this.Ya&&ce(n,"TYPE","init"),this.O?(ce(n,"$req",e),ce(n,"SID","null"),r.Z=!0,Yr(r,n,null)):Yr(r,n,e),this.G=2}}else this.G==3&&(t?$o(this,t):this.i.length==0||zl(this.h)||$o(this))};function $o(t,e){var n;e?n=e.m:n=t.U++;const s=st(t.F);ce(s,"SID",t.I),ce(s,"RID",n),ce(s,"AID",t.T),Gn(t,s),t.o&&t.s&&Ri(s,t.o,t.s),n=new zn(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=eu(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),Ai(t.h,n),Yr(n,s,e)}function Gn(t,e){t.ia&&yi(t.ia,function(n,s){ce(e,s,n)}),t.l&&Fl({},function(n,s){ce(e,s,n)})}function eu(t,e,n){n=Math.min(t.i.length,n);var s=t.l?Fe(t.l.Ra,t.l,t):null;e:{var r=t.i;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=r[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let u=r[l].h;const c=r[l].g;if(u-=i,0>u)i=Math.max(0,r[l].h-100),a=!1;else try{xg(c,o,"req"+u+"_")}catch{s&&s(c)}}if(a){s=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,s}function tu(t){t.g||t.u||(t.Z=1,wl(t.Ia,t),t.A=0)}function Mi(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=Bn(Fe(t.Ia,t),ru(t,t.A)),t.A++,!0)}A.Ia=function(){if(this.u=null,nu(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=Bn(Fe(this.eb,this),t)}};A.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,je(10),Zs(this),nu(this))};function Oi(t){t.B!=null&&(V.clearTimeout(t.B),t.B=null)}function nu(t){t.g=new zn(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=st(t.sa);ce(e,"RID","rpc"),ce(e,"SID",t.I),ce(e,"CI",t.L?"0":"1"),ce(e,"AID",t.T),ce(e,"TYPE","xmlhttp"),Gn(t,e),t.o&&t.s&&Ri(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=Xs(st(e)),n.s=null,n.P=!0,Ll(n,t)}A.cb=function(){this.v!=null&&(this.v=null,Zs(this),Mi(this),je(19))};function As(t){t.v!=null&&(V.clearTimeout(t.v),t.v=null)}function su(t,e){var n=null;if(t.g==e){As(t),Oi(t),t.g=null;var s=2}else if(Zr(t.h,e))n=e.D,Hl(t.h,e),s=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(s==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;s=Ks(),De(s,new Al(s,n)),$s(t)}else tu(t);else if(r=e.o,r==3||r==0&&0<t.pa||!(s==1&&Hg(t,e)||s==2&&Mi(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:wt(t,5);break;case 4:wt(t,10);break;case 3:wt(t,6);break;default:wt(t,2)}}}function ru(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function wt(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var s=Fe(t.kb,t);n||(n=new Et("//www.google.com/images/cleardot.gif"),V.location&&V.location.protocol=="http"||Is(n,"https"),Xs(n)),Ug(n.toString(),s)}else je(2);t.G=0,t.l&&t.l.va(e),iu(t),$l(t)}A.kb=function(t){t?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))};function iu(t){if(t.G=0,t.la=[],t.l){const e=Kl(t.h);(e.length!=0||t.i.length!=0)&&(zo(t.la,e),zo(t.la,t.i),t.h.i.length=0,mi(t.i),t.i.length=0),t.l.ua()}}function ou(t,e,n){var s=n instanceof Et?st(n):new Et(n,void 0);if(s.g!="")e&&(s.g=e+"."+s.g),Ss(s,s.m);else{var r=V.location;s=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var i=new Et(null,void 0);s&&Is(i,s),e&&(i.g=e),r&&Ss(i,r),n&&(i.l=n),s=i}return n=t.D,e=t.za,n&&e&&ce(s,n,e),ce(s,"VER",t.ma),Gn(t,s),s}function au(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new me(new Hn({jb:!0})):new me(t.ra),e.Ka(t.H),e}function lu(){}A=lu.prototype;A.xa=function(){};A.wa=function(){};A.va=function(){};A.ua=function(){};A.Ra=function(){};function Ds(){if(Kt&&!(10<=Number(ag)))throw Error("Environmental error: no available transport.")}Ds.prototype.g=function(t,e){return new He(t,e)};function He(t,e){Ie.call(this),this.g=new Zl(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!Es(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Es(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new en(this)}Le(He,Ie);He.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;je(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=ou(t,null,t.V),$s(t)};He.prototype.close=function(){Li(this.g)};He.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=ki(t),t=n);e.i.push(new Pg(e.ab++,t)),e.G==3&&$s(e)};He.prototype.M=function(){this.g.l=null,delete this.j,Li(this.g),delete this.g,He.X.M.call(this)};function uu(t){Ii.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Le(uu,Ii);function cu(){Si.call(this),this.status=1}Le(cu,Si);function en(t){this.g=t}Le(en,lu);en.prototype.xa=function(){De(this.g,"a")};en.prototype.wa=function(t){De(this.g,new uu(t))};en.prototype.va=function(t){De(this.g,new cu)};en.prototype.ua=function(){De(this.g,"b")};Ds.prototype.createWebChannel=Ds.prototype.g;He.prototype.send=He.prototype.u;He.prototype.open=He.prototype.m;He.prototype.close=He.prototype.close;Gs.NO_ERROR=0;Gs.TIMEOUT=8;Gs.HTTP_ERROR=6;Dl.COMPLETE="complete";Nl.EventType=jn;jn.OPEN="a";jn.CLOSE="b";jn.ERROR="c";jn.MESSAGE="d";Ie.prototype.listen=Ie.prototype.N;me.prototype.listenOnce=me.prototype.O;me.prototype.getLastError=me.prototype.Oa;me.prototype.getLastErrorCode=me.prototype.Ea;me.prototype.getStatus=me.prototype.aa;me.prototype.getResponseJson=me.prototype.Sa;me.prototype.getResponseText=me.prototype.fa;me.prototype.send=me.prototype.da;me.prototype.setWithCredentials=me.prototype.Ka;var Kg=function(){return new Ds},Gg=function(){return Ks()},Ar=Gs,Qg=Dl,Wg=Rt,ea={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Xg=Hn,as=Nl,Yg=me;const ta="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Oe.UNAUTHENTICATED=new Oe(null),Oe.GOOGLE_CREDENTIALS=new Oe("google-credentials-uid"),Oe.FIRST_PARTY=new Oe("first-party-uid"),Oe.MOCK_USER=new Oe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tn="9.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const At=new sl("@firebase/firestore");function na(){return At.logLevel}function D(t,...e){if(At.logLevel<=J.DEBUG){const n=e.map(Pi);At.debug(`Firestore (${tn}): ${t}`,...n)}}function rt(t,...e){if(At.logLevel<=J.ERROR){const n=e.map(Pi);At.error(`Firestore (${tn}): ${t}`,...n)}}function $r(t,...e){if(At.logLevel<=J.WARN){const n=e.map(Pi);At.warn(`Firestore (${tn}): ${t}`,...n)}}function Pi(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(t="Unexpected state"){const e=`FIRESTORE (${tn}) INTERNAL ASSERTION FAILED: `+t;throw rt(e),new Error(e)}function te(t,e){t||B()}function j(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends Zt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jg{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Oe.UNAUTHENTICATED))}shutdown(){}}class Zg{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $g{constructor(e){this.t=e,this.currentUser=Oe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new Tt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Tt,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Tt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(te(typeof s.accessToken=="string"),new hu(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return te(e===null||typeof e=="string"),new Oe(e)}}class em{constructor(e,n,s,r){this.h=e,this.l=n,this.m=s,this.g=r,this.type="FirstParty",this.user=Oe.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(te(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class tm{constructor(e,n,s,r){this.h=e,this.l=n,this.m=s,this.g=r}getToken(){return Promise.resolve(new em(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(Oe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class nm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sm{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const s=i=>{i.error!=null&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.A;return this.A=i.token,D("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.T.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.T.getImmediate({optional:!0});i?r(i):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(te(typeof n.token=="string"),this.A=n.token,new nm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const r=rm(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%e.length))}return s}}function Z(t,e){return t<e?-1:t>e?1:0}function Gt(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new L(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new ke(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.timestamp=e}static fromTimestamp(e){return new q(e)}static min(){return new q(new ke(0,0))}static max(){return new q(new ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n,s){n===void 0?n=0:n>e.length&&B(),s===void 0?s=e.length-n:s>e.length-n&&B(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Dn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=e.get(r),o=n.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class he extends Dn{construct(e,n,s){return new he(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new L(w.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new he(n)}static emptyPath(){return new he([])}}const im=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pe extends Dn{construct(e,n,s){return new Pe(e,n,s)}static isValidIdentifier(e){return im.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pe(["__name__"])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new L(w.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new L(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new L(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new L(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pe(n)}static emptyPath(){return new Pe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.path=e}static fromPath(e){return new M(he.fromString(e))}static fromName(e){return new M(he.fromString(e).popFirst(5))}static empty(){return new M(he.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&he.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return he.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new M(new he(e.slice()))}}function om(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=q.fromTimestamp(s===1e9?new ke(n+1,0):new ke(n,s));return new ht(r,M.empty(),e)}function am(t){return new ht(t.readTime,t.key,-1)}class ht{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ht(q.min(),M.empty(),-1)}static max(){return new ht(q.max(),M.empty(),-1)}}function lm(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=M.comparator(t.documentKey,e.documentKey),n!==0?n:Z(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qn(t){if(t.code!==w.FAILED_PRECONDITION||t.message!==um)throw t;D("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new k((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof k?n:k.resolve(n)}catch(n){return k.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):k.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):k.reject(n)}static resolve(e){return new k((n,s)=>{n(e)})}static reject(e){return new k((n,s)=>{s(e)})}static waitFor(e){return new k((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(e){let n=k.resolve(!1);for(const s of e)n=n.next(r=>r?k.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new k((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===i&&s(o)},c=>r(c))}})}static doWhile(e,n){return new k((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function Wn(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ut(s),this.ct=s=>n.writeSequenceNumber(s))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function nn(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function du(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fi.at=-1;class Te{constructor(e,n){this.comparator=e,this.root=n||Se.EMPTY}insert(e,n){return new Te(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Se.BLACK,null,null))}remove(e){return new Te(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Se.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ls(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ls(this.root,e,this.comparator,!1)}getReverseIterator(){return new ls(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ls(this.root,e,this.comparator,!0)}}class ls{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Se{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s!=null?s:Se.RED,this.left=r!=null?r:Se.EMPTY,this.right=i!=null?i:Se.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Se(e!=null?e:this.key,n!=null?n:this.value,s!=null?s:this.color,r!=null?r:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Se.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Se.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Se.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Se.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();const e=this.left.check();if(e!==this.right.check())throw B();return e+(this.isRed()?0:1)}}Se.EMPTY=null,Se.RED=!0,Se.BLACK=!1;Se.EMPTY=new class{constructor(){this.size=0}get key(){throw B()}get value(){throw B()}get color(){throw B()}get left(){throw B()}get right(){throw B()}copy(t,e,n,s,r){return this}insert(t,e,n){return new Se(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.comparator=e,this.data=new Te(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ra(this.data.getIterator())}getIteratorFrom(e){return new ra(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ee)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ee(this.comparator);return n.data=e,n}}class ra{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.fields=e,e.sort(Pe.comparator)}static empty(){return new Je([])}unionWith(e){let n=new Ee(Pe.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Je(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gt(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Be(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new Be(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Be.EMPTY_BYTE_STRING=new Be("");const hm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ft(t){if(te(!!t),typeof t=="string"){let e=0;const n=hm.exec(t);if(te(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_e(t.seconds),nanos:_e(t.nanos)}}function _e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qt(t){return typeof t=="string"?Be.fromBase64String(t):Be.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mu(t){const e=t.mapValue.fields.__previous_value__;return gu(e)?mu(e):e}function Nn(t){const e=ft(t.mapValue.fields.__local_write_time__.timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n,s,r,i,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Rn{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Rn("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Rn&&e.projectId===this.projectId&&e.database===this.database}}function er(t){return t==null}function Ns(t){return t===0&&1/t==-1/0}function dm(t){return typeof t=="number"&&Number.isInteger(t)&&!Ns(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Dt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gu(t)?4:gm(t)?9007199254740991:10:B()}function Ze(t,e){if(t===e)return!0;const n=Dt(t);if(n!==Dt(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nn(t).isEqual(Nn(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=ft(s.timestampValue),o=ft(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Qt(s.bytesValue).isEqual(Qt(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return _e(s.geoPointValue.latitude)===_e(r.geoPointValue.latitude)&&_e(s.geoPointValue.longitude)===_e(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return _e(s.integerValue)===_e(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=_e(s.doubleValue),o=_e(r.doubleValue);return i===o?Ns(i)===Ns(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Gt(t.arrayValue.values||[],e.arrayValue.values||[],Ze);case 10:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(sa(i)!==sa(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!Ze(i[a],o[a])))return!1;return!0}(t,e);default:return B()}}function Ln(t,e){return(t.values||[]).find(n=>Ze(n,e))!==void 0}function Wt(t,e){if(t===e)return 0;const n=Dt(t),s=Dt(e);if(n!==s)return Z(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Z(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=_e(r.integerValue||r.doubleValue),a=_e(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return ia(t.timestampValue,e.timestampValue);case 4:return ia(Nn(t),Nn(e));case 5:return Z(t.stringValue,e.stringValue);case 6:return function(r,i){const o=Qt(r),a=Qt(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=Z(o[l],a[l]);if(u!==0)return u}return Z(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=Z(_e(r.latitude),_e(i.latitude));return o!==0?o:Z(_e(r.longitude),_e(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,i){const o=r.values||[],a=i.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=Wt(o[l],a[l]);if(u)return u}return Z(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,i){if(r===us.mapValue&&i===us.mapValue)return 0;if(r===us.mapValue)return 1;if(i===us.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const h=Z(a[c],u[c]);if(h!==0)return h;const f=Wt(o[a[c]],l[u[c]]);if(f!==0)return f}return Z(a.length,u.length)}(t.mapValue,e.mapValue);default:throw B()}}function ia(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Z(t,e);const n=ft(t),s=ft(e),r=Z(n.seconds,s.seconds);return r!==0?r:Z(n.nanos,s.nanos)}function jt(t){return ei(t)}function ei(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const r=ft(s);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Qt(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,M.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(s){let r="[",i=!0;for(const o of s.values||[])i?i=!1:r+=",",r+=ei(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(s){const r=Object.keys(s.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${ei(s.fields[a])}`;return i+"}"}(t.mapValue):B();var e,n}function ti(t){return!!t&&"integerValue"in t}function Vi(t){return!!t&&"arrayValue"in t}function oa(t){return!!t&&"nullValue"in t}function aa(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fs(t){return!!t&&"mapValue"in t}function yn(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return nn(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=yn(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yn(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gm(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.value=e}static empty(){return new Ke({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!fs(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yn(n)}setAll(e){let n=Pe.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=yn(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());fs(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ze(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];fs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){nn(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Ke(yn(this.value))}}function pu(t){const e=[];return nn(t.fields,(n,s)=>{const r=new Pe([n]);if(fs(s)){const i=pu(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Je(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n,s,r,i,o){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Ae(e,0,q.min(),q.min(),Ke.empty(),0)}static newFoundDocument(e,n,s){return new Ae(e,1,n,q.min(),s,0)}static newNoDocument(e,n){return new Ae(e,2,n,q.min(),Ke.empty(),0)}static newUnknownDocument(e,n){return new Ae(e,3,n,q.min(),Ke.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ke.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ke.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ae&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ae(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ht=null}}function la(t,e=null,n=[],s=[],r=null,i=null,o=null){return new mm(t,e,n,s,r,i,o)}function xi(t){const e=j(t);if(e.ht===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>{return(r=s).field.canonicalString()+r.op.toString()+jt(r.value);var r}).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),er(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>jt(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>jt(s)).join(",")),e.ht=n}return e.ht}function pm(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(s=n).field.canonicalString()} ${s.op} ${jt(s.value)}`;var s}).join(", ")}]`),er(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>jt(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>jt(n)).join(",")),`Target(${e})`}function Ui(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Tm(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(n=t.filters[r],s=e.filters[r],n.op!==s.op||!n.field.isEqual(s.field)||!Ze(n.value,s.value))return!1;var n,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ca(t.startAt,e.startAt)&&ca(t.endAt,e.endAt)}function ni(t){return M.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class ze extends class{}{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.lt(e,n,s):new ym(e,n,s):n==="array-contains"?new _m(e,s):n==="in"?new wm(e,s):n==="not-in"?new km(e,s):n==="array-contains-any"?new Em(e,s):new ze(e,n,s)}static lt(e,n,s){return n==="in"?new vm(e,s):new bm(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.ft(Wt(n,this.value)):n!==null&&Dt(this.value)===Dt(n)&&this.ft(Wt(n,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ym extends ze{constructor(e,n,s){super(e,n,s),this.key=M.fromName(s.referenceValue)}matches(e){const n=M.comparator(e.key,this.key);return this.ft(n)}}class vm extends ze{constructor(e,n){super(e,"in",n),this.keys=yu("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class bm extends ze{constructor(e,n){super(e,"not-in",n),this.keys=yu("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yu(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>M.fromName(s.referenceValue))}class _m extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vi(n)&&Ln(n.arrayValue,this.value)}}class wm extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ln(this.value.arrayValue,n)}}class km extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ln(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ln(this.value.arrayValue,n)}}class Em extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vi(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Ln(this.value.arrayValue,s))}}class Rs{constructor(e,n){this.position=e,this.inclusive=n}}class zt{constructor(e,n="asc"){this.field=e,this.dir=n}}function Tm(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ua(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=M.comparator(M.fromName(o.referenceValue),n.key):s=Wt(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function ca(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ze(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this._t=null,this.wt=null,this.startAt,this.endAt}}function Cm(t,e,n,s,r,i,o,a){return new Xn(t,e,n,s,r,i,o,a)}function Bi(t){return new Xn(t)}function ha(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vu(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function bu(t){for(const e of t.filters)if(e.dt())return e.field;return null}function Im(t){return t.collectionGroup!==null}function Mn(t){const e=j(t);if(e._t===null){e._t=[];const n=bu(e),s=vu(e);if(n!==null&&s===null)n.isKeyField()||e._t.push(new zt(n)),e._t.push(new zt(Pe.keyField(),"asc"));else{let r=!1;for(const i of e.explicitOrderBy)e._t.push(i),i.field.isKeyField()&&(r=!0);if(!r){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new zt(Pe.keyField(),i))}}}return e._t}function it(t){const e=j(t);if(!e.wt)if(e.limitType==="F")e.wt=la(e.path,e.collectionGroup,Mn(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of Mn(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new zt(i.field,o))}const s=e.endAt?new Rs(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Rs(e.startAt.position,e.startAt.inclusive):null;e.wt=la(e.path,e.collectionGroup,n,e.filters,e.limit,s,r)}return e.wt}function si(t,e,n){return new Xn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function tr(t,e){return Ui(it(t),it(e))&&t.limitType===e.limitType}function _u(t){return`${xi(it(t))}|lt:${t.limitType}`}function ri(t){return`Query(target=${pm(it(t))}; limitType=${t.limitType})`}function ji(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):M.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of n.explicitOrderBy)if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=ua(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,Mn(n),s)||n.endAt&&!function(r,i,o){const a=ua(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,Mn(n),s))}(t,e)}function Sm(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wu(t){return(e,n)=>{let s=!1;for(const r of Mn(t)){const i=Am(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function Am(t,e,n){const s=t.field.isKeyField()?M.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),l=o.data.field(r);return a!==null&&l!==null?Wt(a,l):B()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return B()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(t,e){if(t.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ns(e)?"-0":e}}function Eu(t){return{integerValue:""+t}}function Dm(t,e){return dm(e)?Eu(e):ku(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(){this._=void 0}}function Nm(t,e,n){return t instanceof On?function(s,r){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&(i.fields.__previous_value__=r),{mapValue:i}}(n,e):t instanceof Pn?Cu(t,e):t instanceof Fn?Iu(t,e):function(s,r){const i=Tu(s,r),o=fa(i)+fa(s.yt);return ti(i)&&ti(s.yt)?Eu(o):ku(s.It,o)}(t,e)}function Rm(t,e,n){return t instanceof Pn?Cu(t,e):t instanceof Fn?Iu(t,e):n}function Tu(t,e){return t instanceof Ls?ti(n=e)||function(s){return!!s&&"doubleValue"in s}(n)?e:{integerValue:0}:null;var n}class On extends nr{}class Pn extends nr{constructor(e){super(),this.elements=e}}function Cu(t,e){const n=Su(e);for(const s of t.elements)n.some(r=>Ze(r,s))||n.push(s);return{arrayValue:{values:n}}}class Fn extends nr{constructor(e){super(),this.elements=e}}function Iu(t,e){let n=Su(e);for(const s of t.elements)n=n.filter(r=>!Ze(r,s));return{arrayValue:{values:n}}}class Ls extends nr{constructor(e,n){super(),this.It=e,this.yt=n}}function fa(t){return _e(t.integerValue||t.doubleValue)}function Su(t){return Vi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(e,n){this.field=e,this.transform=n}}function Mm(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Pn&&s instanceof Pn||n instanceof Fn&&s instanceof Fn?Gt(n.elements,s.elements,Ze):n instanceof Ls&&s instanceof Ls?Ze(n.yt,s.yt):n instanceof On&&s instanceof On}(t.transform,e.transform)}class Om{constructor(e,n){this.version=e,this.transformResults=n}}class tt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new tt}static exists(e){return new tt(void 0,e)}static updateTime(e){return new tt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ds(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class sr{}function Au(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nu(t.key,tt.none()):new Yn(t.key,t.data,tt.none());{const n=t.data,s=Ke.empty();let r=new Ee(Pe.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Lt(t.key,s,new Je(r.toArray()),tt.none())}}function Pm(t,e,n){t instanceof Yn?function(s,r,i){const o=s.value.clone(),a=ga(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Lt?function(s,r,i){if(!ds(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=ga(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(Du(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function vn(t,e,n,s){return t instanceof Yn?function(r,i,o,a){if(!ds(r.precondition,i))return o;const l=r.value.clone(),u=ma(r.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,s):t instanceof Lt?function(r,i,o,a){if(!ds(r.precondition,i))return o;const l=ma(r.fieldTransforms,a,i),u=i.data;return u.setAll(Du(r)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(c=>c.field))}(t,e,n,s):function(r,i,o){return ds(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function Fm(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=Tu(s.transform,r||null);i!=null&&(n===null&&(n=Ke.empty()),n.set(s.field,i))}return n||null}function da(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Gt(n,s,(r,i)=>Mm(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yn extends sr{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Lt extends sr{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Du(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function ga(t,e,n){const s=new Map;te(t.length===n.length);for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,Rm(o,a,n[r]))}return s}function ma(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,Nm(i,o,e))}return s}class Nu extends sr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vm extends sr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be,W;function Um(t){switch(t){default:return B();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}function Ru(t){if(t===void 0)return rt("GRPC error has no .code"),w.UNKNOWN;switch(t){case be.OK:return w.OK;case be.CANCELLED:return w.CANCELLED;case be.UNKNOWN:return w.UNKNOWN;case be.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case be.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case be.INTERNAL:return w.INTERNAL;case be.UNAVAILABLE:return w.UNAVAILABLE;case be.UNAUTHENTICATED:return w.UNAUTHENTICATED;case be.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case be.NOT_FOUND:return w.NOT_FOUND;case be.ALREADY_EXISTS:return w.ALREADY_EXISTS;case be.PERMISSION_DENIED:return w.PERMISSION_DENIED;case be.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case be.ABORTED:return w.ABORTED;case be.OUT_OF_RANGE:return w.OUT_OF_RANGE;case be.UNIMPLEMENTED:return w.UNIMPLEMENTED;case be.DATA_LOSS:return w.DATA_LOSS;default:return B()}}(W=be||(be={}))[W.OK=0]="OK",W[W.CANCELLED=1]="CANCELLED",W[W.UNKNOWN=2]="UNKNOWN",W[W.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",W[W.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",W[W.NOT_FOUND=5]="NOT_FOUND",W[W.ALREADY_EXISTS=6]="ALREADY_EXISTS",W[W.PERMISSION_DENIED=7]="PERMISSION_DENIED",W[W.UNAUTHENTICATED=16]="UNAUTHENTICATED",W[W.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",W[W.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",W[W.ABORTED=10]="ABORTED",W[W.OUT_OF_RANGE=11]="OUT_OF_RANGE",W[W.UNIMPLEMENTED=12]="UNIMPLEMENTED",W[W.INTERNAL=13]="INTERNAL",W[W.UNAVAILABLE=14]="UNAVAILABLE",W[W.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){nn(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return du(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=new Te(M.comparator);function ot(){return Bm}const Lu=new Te(M.comparator);function hn(...t){let e=Lu;for(const n of t)e=e.insert(n.key,n);return e}function Mu(t){let e=Lu;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function kt(){return bn()}function Ou(){return bn()}function bn(){return new sn(t=>t.toString(),(t,e)=>t.isEqual(e))}const jm=new Te(M.comparator),zm=new Ee(M.comparator);function G(...t){let e=zm;for(const n of t)e=e.add(n);return e}const qm=new Ee(Z);function Pu(){return qm}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,Jn.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new rr(q.min(),r,Pu(),ot(),G())}}class Jn{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Jn(s,n,G(),G(),G())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n,s,r){this.Tt=e,this.removedTargetIds=n,this.key=s,this.Et=r}}class Fu{constructor(e,n){this.targetId=e,this.At=n}}class Vu{constructor(e,n,s=Be.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class pa{constructor(){this.Rt=0,this.bt=va(),this.Pt=Be.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return this.Rt!==0}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=G(),n=G(),s=G();return this.bt.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:B()}}),new Jn(this.Pt,this.vt,e,n,s)}Nt(){this.Vt=!1,this.bt=va()}kt(e,n){this.Vt=!0,this.bt=this.bt.insert(e,n)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Hm{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=ot(),this.qt=ya(),this.Kt=new Ee(Z)}Gt(e){for(const n of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(n,e.Et):this.jt(n,e.key,e.Et);for(const n of e.removedTargetIds)this.jt(n,e.key,e.Et)}Wt(e){this.forEachTarget(e,n=>{const s=this.zt(n);switch(e.state){case 0:this.Ht(n)&&s.Ct(e.resumeToken);break;case 1:s.Ft(),s.St||s.Nt(),s.Ct(e.resumeToken);break;case 2:s.Ft(),s.St||this.removeTarget(n);break;case 3:this.Ht(n)&&(s.$t(),s.Ct(e.resumeToken));break;case 4:this.Ht(n)&&(this.Jt(n),s.Ct(e.resumeToken));break;default:B()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Lt.forEach((s,r)=>{this.Ht(r)&&n(r)})}Yt(e){const n=e.targetId,s=e.At.count,r=this.Xt(n);if(r){const i=r.target;if(ni(i))if(s===0){const o=new M(i.path);this.jt(n,o,Ae.newNoDocument(o,q.min()))}else te(s===1);else this.Zt(n)!==s&&(this.Jt(n),this.Kt=this.Kt.add(n))}}te(e){const n=new Map;this.Lt.forEach((i,o)=>{const a=this.Xt(o);if(a){if(i.current&&ni(a.target)){const l=new M(a.target.path);this.Ut.get(l)!==null||this.ee(o,l)||this.jt(o,l,Ae.newNoDocument(l,e))}i.Dt&&(n.set(o,i.xt()),i.Nt())}});let s=G();this.qt.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Xt(l);return!u||u.purpose===2||(a=!1,!1)}),a&&(s=s.add(i))}),this.Ut.forEach((i,o)=>o.setReadTime(e));const r=new rr(e,n,this.Kt,this.Ut,s);return this.Ut=ot(),this.qt=ya(),this.Kt=new Ee(Z),r}Qt(e,n){if(!this.Ht(e))return;const s=this.ee(e,n.key)?2:0;this.zt(e).kt(n.key,s),this.Ut=this.Ut.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ne(n.key).add(e))}jt(e,n,s){if(!this.Ht(e))return;const r=this.zt(e);this.ee(e,n)?r.kt(n,1):r.Ot(n),this.qt=this.qt.insert(n,this.ne(n).delete(e)),s&&(this.Ut=this.Ut.insert(n,s))}removeTarget(e){this.Lt.delete(e)}Zt(e){const n=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let n=this.Lt.get(e);return n||(n=new pa,this.Lt.set(e,n)),n}ne(e){let n=this.qt.get(e);return n||(n=new Ee(Z),this.qt=this.qt.insert(e,n)),n}Ht(e){const n=this.Xt(e)!==null;return n||D("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.Lt.get(e);return n&&n.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new pa),this.Bt.getRemoteKeysForTarget(e).forEach(n=>{this.jt(e,n,null)})}ee(e,n){return this.Bt.getRemoteKeysForTarget(e).has(n)}}function ya(){return new Te(M.comparator)}function va(){return new Te(M.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Gm=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class Qm{constructor(e,n){this.databaseId=e,this.gt=n}}function Ms(t,e){return t.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xu(t,e){return t.gt?e.toBase64():e.toUint8Array()}function Wm(t,e){return Ms(t,e.toTimestamp())}function nt(t){return te(!!t),q.fromTimestamp(function(e){const n=ft(e);return new ke(n.seconds,n.nanos)}(t))}function zi(t,e){return function(n){return new he(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Uu(t){const e=he.fromString(t);return te(zu(e)),e}function ii(t,e){return zi(t.databaseId,e.path)}function Dr(t,e){const n=Uu(e);if(n.get(1)!==t.databaseId.projectId)throw new L(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new M(Bu(n))}function oi(t,e){return zi(t.databaseId,e)}function Xm(t){const e=Uu(t);return e.length===4?he.emptyPath():Bu(e)}function ai(t){return new he(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Bu(t){return te(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ba(t,e,n){return{name:ii(t,e),fields:n.value.mapValue.fields}}function Ym(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:B()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(l,u){return l.gt?(te(u===void 0||typeof u=="string"),Be.fromBase64String(u||"")):(te(u===void 0||u instanceof Uint8Array),Be.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?w.UNKNOWN:Ru(l.code);return new L(u,l.message||"")}(o);n=new Vu(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Dr(t,s.document.name),i=nt(s.document.updateTime),o=new Ke({mapValue:{fields:s.document.fields}}),a=Ae.newFoundDocument(r,i,o),l=s.targetIds||[],u=s.removedTargetIds||[];n=new gs(l,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Dr(t,s.document),i=s.readTime?nt(s.readTime):q.min(),o=Ae.newNoDocument(r,i),a=s.removedTargetIds||[];n=new gs([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Dr(t,s.document),i=s.removedTargetIds||[];n=new gs([],i,r,null)}else{if(!("filter"in e))return B();{e.filter;const s=e.filter;s.targetId;const r=s.count||0,i=new xm(r),o=s.targetId;n=new Fu(o,i)}}return n}function Jm(t,e){let n;if(e instanceof Yn)n={update:ba(t,e.key,e.value)};else if(e instanceof Nu)n={delete:ii(t,e.key)};else if(e instanceof Lt)n={update:ba(t,e.key,e.data),updateMask:ap(e.fieldMask)};else{if(!(e instanceof Vm))return B();n={verify:ii(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof On)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Pn)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Fn)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Ls)return{fieldPath:i.field.canonicalString(),increment:o.yt};throw B()}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:Wm(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:B()}(t,e.precondition)),n}function Zm(t,e){return t&&t.length>0?(te(e!==void 0),t.map(n=>function(s,r){let i=s.updateTime?nt(s.updateTime):nt(r);return i.isEqual(q.min())&&(i=nt(r)),new Om(i,s.transformResults||[])}(n,e))):[]}function $m(t,e){return{documents:[oi(t,e.path)]}}function ep(t,e){const n={structuredQuery:{}},s=e.path;e.collectionGroup!==null?(n.parent=oi(t,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=oi(t,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const r=function(l){if(l.length===0)return;const u=l.map(c=>function(h){if(h.op==="=="){if(aa(h.value))return{unaryFilter:{field:Pt(h.field),op:"IS_NAN"}};if(oa(h.value))return{unaryFilter:{field:Pt(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(aa(h.value))return{unaryFilter:{field:Pt(h.field),op:"IS_NOT_NAN"}};if(oa(h.value))return{unaryFilter:{field:Pt(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pt(h.field),op:rp(h.op),value:h.value}}}(c));return u.length===1?u[0]:{compositeFilter:{op:"AND",filters:u}}}(e.filters);r&&(n.structuredQuery.where=r);const i=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:Pt(c.field),direction:sp(c.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(l,u){return l.gt||er(u)?u:{value:u}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function tp(t){let e=Xm(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){te(s===1);const c=n.from[0];c.allDescendants?r=c.collectionId:e=e.child(c.collectionId)}let i=[];n.where&&(i=ju(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new zt(Vt(h.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,er(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(c){const h=!!c.before,f=c.values||[];return new Rs(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const h=!c.before,f=c.values||[];return new Rs(f,h)}(n.endAt)),Cm(e,r,o,i,a,"F",l,u)}function np(t,e){const n=function(s,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return B()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function ju(t){return t?t.unaryFilter!==void 0?[op(t)]:t.fieldFilter!==void 0?[ip(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>ju(e)).reduce((e,n)=>e.concat(n)):B():[]}function sp(t){return Km[t]}function rp(t){return Gm[t]}function Pt(t){return{fieldPath:t.canonicalString()}}function Vt(t){return Pe.fromServerFormat(t.fieldPath)}function ip(t){return ze.create(Vt(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return B()}}(t.fieldFilter.op),t.fieldFilter.value)}function op(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Vt(t.unaryFilter.field);return ze.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Vt(t.unaryFilter.field);return ze.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Vt(t.unaryFilter.field);return ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Vt(t.unaryFilter.field);return ze.create(r,"!=",{nullValue:"NULL_VALUE"});default:return B()}}function ap(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zu(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&Pm(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=vn(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=vn(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Ou();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=Au(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(q.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),G())}isEqual(e){return this.batchId===e.batchId&&Gt(this.mutations,e.mutations,(n,s)=>da(n,s))&&Gt(this.baseMutations,e.baseMutations,(n,s)=>da(n,s))}}class qi{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){te(e.mutations.length===s.length);let r=jm;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new qi(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n,s,r,i=q.min(),o=q.min(),a=Be.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Ct(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Ct(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ct(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e){this.re=e}}function hp(t){const e=tp({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?si(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(){this.Ye=new dp}addToCollectionParentIndex(e,n){return this.Ye.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.Ye.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(ht.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(ht.min())}updateCollectionGroup(e,n,s){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}}class dp{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Ee(he.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Ee(he.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Xt(0)}static vn(){return new Xt(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(){this.changes=new sn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ae.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?k.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.getBaseDocument(e,n,s))).next(r=>(s!==null&&vn(s.mutation,r,Je.empty(),ke.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,G()).next(()=>s))}getLocalViewOfDocuments(e,n,s=G()){const r=kt();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=hn();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=kt();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,G()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=ot();const o=bn(),a=bn();return n.forEach((l,u)=>{const c=s.get(u.key);r.has(u.key)&&(c===void 0||c.mutation instanceof Lt)?i=i.insert(u.key,u):c!==void 0&&(o.set(u.key,c.mutation.getFieldMask()),vn(c.mutation,u,c.mutation.getFieldMask(),ke.now()))}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new mp(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const s=bn();let r=new Te((o,a)=>o-a),i=G();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=s.get(l)||Je.empty();c=a.applyToLocalView(u,c),s.set(l,c);const h=(r.get(a.batchId)||G()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=Ou();c.forEach(f=>{if(!i.has(f)){const g=Au(n.get(f),s.get(f));g!==null&&h.set(f,g),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return k.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s){return function(r){return M.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Im(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s):this.getDocumentsMatchingCollectionQuery(e,n,s)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):k.resolve(kt());let a=-1,l=i;return o.next(u=>k.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(c)?k.resolve():this.getBaseDocument(e,c,h).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,G())).next(c=>({batchId:a,changes:Mu(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new M(n)).next(s=>{let r=hn();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s){const r=n.collectionGroup;let i=hn();return this.indexManager.getCollectionParents(e,r).next(o=>k.forEach(o,a=>{const l=function(u,c){return new Xn(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,l,s).next(u=>{u.forEach((c,h)=>{i=i.insert(c,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,s){let r;return this.remoteDocumentCache.getAllFromCollection(e,n.path,s).next(i=>(r=i,this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId))).next(i=>{i.forEach((a,l)=>{const u=l.getKey();r.get(u)===null&&(r=r.insert(u,Ae.newInvalidDocument(u)))});let o=hn();return r.forEach((a,l)=>{const u=i.get(a);u!==void 0&&vn(u.mutation,l,Je.empty(),ke.now()),ji(n,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(e,n,s){return s===null||s.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):k.resolve(Ae.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return k.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var s;return this.Zn.set(n.id,{id:(s=n).id,version:s.version,createTime:nt(s.createTime)}),k.resolve()}getNamedQuery(e,n){return k.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,function(s){return{name:s.name,query:hp(s.bundledQuery),readTime:nt(s.readTime)}}(n)),k.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(){this.overlays=new Te(M.comparator),this.es=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){const s=kt();return k.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.ue(e,n,i)}),k.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.es.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.es.delete(s)),k.resolve()}getOverlaysForCollection(e,n,s){const r=kt(),i=n.length+1,o=new M(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return k.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Te((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let c=i.get(u.largestBatchId);c===null&&(c=kt(),i=i.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=kt(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=r)););return k.resolve(a)}ue(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.es.get(r.largestBatchId).delete(s.key);this.es.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new up(n,s));let i=this.es.get(n);i===void 0&&(i=G(),this.es.set(n,i)),this.es.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.ns=new Ee(Ce.ss),this.rs=new Ee(Ce.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const s=new Ce(e,n);this.ns=this.ns.add(s),this.rs=this.rs.add(s)}us(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.cs(new Ce(e,n))}hs(e,n){e.forEach(s=>this.removeReference(s,n))}ls(e){const n=new M(new he([])),s=new Ce(n,e),r=new Ce(n,e+1),i=[];return this.rs.forEachInRange([s,r],o=>{this.cs(o),i.push(o.key)}),i}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new M(new he([])),s=new Ce(n,e),r=new Ce(n,e+1);let i=G();return this.rs.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ce(e,0),s=this.ns.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ce{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return M.comparator(e.key,n.key)||Z(e._s,n._s)}static os(e,n){return Z(e._s,n._s)||M.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Ee(Ce.ss)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new lp(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.gs=this.gs.add(new Ce(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,n){return k.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ps(s),i=r<0?0:r;return k.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ce(n,0),r=new Ce(n,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([s,r],o=>{const a=this.ys(o._s);i.push(a)}),k.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ee(Z);return n.forEach(r=>{const i=new Ce(r,0),o=new Ce(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([i,o],a=>{s=s.add(a._s)})}),k.resolve(this.Is(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;M.isDocumentKey(i)||(i=i.child(""));const o=new Ce(new M(i),0);let a=new Ee(Z);return this.gs.forEachWhile(l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(l._s)),!0)},o),k.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(s=>{const r=this.ys(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){te(this.Ts(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.gs;return k.forEach(n.mutations,r=>{const i=new Ce(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.gs=s})}An(e){}containsKey(e,n){const s=new Ce(n,0),r=this.gs.firstAfterOrEqual(s);return k.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Ts(e,n){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e){this.Es=e,this.docs=new Te(M.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.Es(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return k.resolve(s?s.document.mutableCopy():Ae.newInvalidDocument(n))}getEntries(e,n){let s=ot();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ae.newInvalidDocument(r))}),k.resolve(s)}getAllFromCollection(e,n,s){let r=ot();const i=new M(n.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||lm(am(l),s)<=0||(r=r.insert(l.key,l.mutableCopy()))}return k.resolve(r)}getAllFromCollectionGroup(e,n,s,r){B()}As(e,n){return k.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new wp(this)}getSize(e){return k.resolve(this.size)}}class wp extends gp{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(s)}),k.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e){this.persistence=e,this.Rs=new sn(n=>xi(n),Ui),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Hi,this.targetCount=0,this.vs=Xt.Pn()}forEachTarget(e,n){return this.Rs.forEach((s,r)=>n(r)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.bs&&(this.bs=n),k.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new Xt(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.Dn(n),k.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.Rs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),k.waitFor(i).next(()=>r)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){const s=this.Rs.get(n)||null;return k.resolve(s)}addMatchingKeys(e,n,s){return this.Ps.us(n,s),k.resolve()}removeMatchingKeys(e,n,s){this.Ps.hs(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),k.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),k.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ps.ds(n);return k.resolve(s)}containsKey(e,n){return k.resolve(this.Ps.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new Fi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new kp(this),this.indexManager=new fp,this.remoteDocumentCache=function(s){return new _p(s)}(s=>this.referenceDelegate.xs(s)),this.It=new cp(n),this.Ns=new yp(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vp,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Vs[e.toKey()];return s||(s=new bp(n,this.referenceDelegate),this.Vs[e.toKey()]=s),s}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,s){D("MemoryPersistence","Starting transaction:",e);const r=new Tp(this.Ss.next());return this.referenceDelegate.ks(),s(r).next(i=>this.referenceDelegate.Os(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ms(e,n){return k.or(Object.values(this.Vs).map(s=>()=>s.containsKey(e,n)))}}class Tp extends cm{constructor(e){super(),this.currentSequenceNumber=e}}class Ki{constructor(e){this.persistence=e,this.Fs=new Hi,this.$s=null}static Bs(e){return new Ki(e)}get Ls(){if(this.$s)return this.$s;throw B()}addReference(e,n,s){return this.Fs.addReference(s,n),this.Ls.delete(s.toString()),k.resolve()}removeReference(e,n,s){return this.Fs.removeReference(s,n),this.Ls.add(s.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),k.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(r=>this.Ls.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.Ls.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}ks(){this.$s=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Ls,s=>{const r=M.fromPath(s);return this.Us(e,r).next(i=>{i||n.removeEntry(r,q.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.Us(e,n).next(s=>{s?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}Us(e,n){return k.or([()=>k.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ms(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Si=s,this.Di=r}static Ci(e,n){let s=G(),r=G();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Gi(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,s,r){return this.ki(e,n).next(i=>i||this.Oi(e,n,r,s)).next(i=>i||this.Mi(e,n))}ki(e,n){if(ha(n))return k.resolve(null);let s=it(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=si(n,null,"F"),s=it(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=G(...i);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const u=this.Fi(n,a);return this.$i(n,u,o,l.readTime)?this.ki(e,si(n,null,"F")):this.Bi(e,u,n,l)}))})))}Oi(e,n,s,r){return ha(n)||r.isEqual(q.min())?this.Mi(e,n):this.Ni.getDocuments(e,s).next(i=>{const o=this.Fi(n,i);return this.$i(n,o,s,r)?this.Mi(e,n):(na()<=J.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ri(n)),this.Bi(e,o,n,om(r,-1)))})}Fi(e,n){let s=new Ee(wu(e));return n.forEach((r,i)=>{ji(e,i)&&(s=s.add(i))}),s}$i(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Mi(e,n){return na()<=J.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",ri(n)),this.Ni.getDocumentsMatchingQuery(e,n,ht.min())}Bi(e,n,s,r){return this.Ni.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n,s,r){this.persistence=e,this.Li=n,this.It=r,this.Ui=new Te(Z),this.qi=new sn(i=>xi(i),Ui),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(s)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pp(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ui))}}function Sp(t,e,n,s){return new Ip(t,e,n,s)}async function qu(t,e){const n=j(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Qi(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=G();for(const u of r){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of i){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(s,l).next(u=>({ji:u,removedBatchIds:o,addedBatchIds:a}))})})}function Ap(t,e){const n=j(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,h=c.keys();let f=k.resolve();return h.forEach(g=>{f=f.next(()=>u.getEntry(a,g)).next(d=>{const v=l.docVersions.get(g);te(v!==null),d.version.compareTo(v)<0&&(c.applyToRemoteDocument(d,l),d.isValidDocument()&&(d.setReadTime(l.commitVersion),u.addEntry(d)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=G();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function Hu(t){const e=j(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function Dp(t,e){const n=j(t),s=e.snapshotVersion;let r=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});r=n.Ui;const a=[];e.targetChanges.forEach((c,h)=>{const f=r.get(h);if(!f)return;a.push(n.Cs.removeMatchingKeys(i,c.removedDocuments,h).next(()=>n.Cs.addMatchingKeys(i,c.addedDocuments,h)));let g=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(h)?g=g.withResumeToken(Be.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):c.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(c.resumeToken,s)),r=r.insert(h,g),function(d,v,E){return d.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-d.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,g,c)&&a.push(n.Cs.updateTargetData(i,g))});let l=ot(),u=G();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))}),a.push(Np(i,o,e.documentUpdates).next(c=>{l=c.Wi,u=c.zi})),!s.isEqual(q.min())){const c=n.Cs.getLastRemoteSnapshotVersion(i).next(h=>n.Cs.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(c)}return k.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ui=r,i))}function Np(t,e,n){let s=G(),r=G();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=ot();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(q.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):D("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Wi:o,zi:r}})}function Rp(t,e){const n=j(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Lp(t,e){const n=j(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Cs.getTargetData(s,e).next(i=>i?(r=i,k.resolve(r)):n.Cs.allocateTargetId(s).next(o=>(r=new Ct(e,o,0,s.currentSequenceNumber),n.Cs.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ui.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(s.targetId,s),n.qi.set(e,s.targetId)),s})}async function li(t,e,n){const s=j(t),r=s.Ui.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Wn(o))throw o;D("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ui=s.Ui.remove(e),s.qi.delete(r.target)}function _a(t,e,n){const s=j(t);let r=q.min(),i=G();return s.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=j(a),h=c.qi.get(u);return h!==void 0?k.resolve(c.Ui.get(h)):c.Cs.getTargetData(l,u)}(s,o,it(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Li.getDocumentsMatchingQuery(o,e,n?r:q.min(),n?i:G())).next(a=>(Mp(s,Sm(e),a),{documents:a,Hi:i})))}function Mp(t,e,n){let s=t.Ki.get(e)||q.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Ki.set(e,s)}class wa{constructor(){this.activeTargetIds=Pu()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Op{constructor(){this.Lr=new wa,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,n,s){this.Ur[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new wa,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{qr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.oo=n+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,n,s,r,i){const o=this.ho(e,n);D("RestConnection","Sending: ",o,s);const a={};return this.lo(a,r,i),this.fo(e,o,a,s).then(l=>(D("RestConnection","Received: ",l),l),l=>{throw $r("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",s),l})}_o(e,n,s,r,i,o){return this.ao(e,n,s,r,i)}lo(e,n,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+tn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}ho(e,n){const s=Fp[e];return`${this.oo}/v1/${n}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,s,r){return new Promise((i,o)=>{const a=new Yg;a.setWithCredentials(!0),a.listenOnce(Qg.COMPLETE,()=>{var u;try{switch(a.getLastErrorCode()){case Ar.NO_ERROR:const c=a.getResponseJson();D("Connection","XHR received:",JSON.stringify(c)),i(c);break;case Ar.TIMEOUT:D("Connection",'RPC "'+e+'" timed out'),o(new L(w.DEADLINE_EXCEEDED,"Request time out"));break;case Ar.HTTP_ERROR:const h=a.getStatus();if(D("Connection",'RPC "'+e+'" failed with status:',h,"response text:",a.getResponseText()),h>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=(u=f)===null||u===void 0?void 0:u.error;if(g&&g.status&&g.message){const d=function(v){const E=v.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(E)>=0?E:w.UNKNOWN}(g.status);o(new L(d,g.message))}else o(new L(w.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new L(w.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{D("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(r);a.send(n,"POST",l,s,15)})}wo(e,n,s){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Kg(),o=Gg(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Xg({})),this.lo(a.initMessageHeaders,n,s),a.encodeInitMessageHeaders=!0;const l=r.join("");D("Connection","Creating WebChannel: "+l,a);const u=i.createWebChannel(l,a);let c=!1,h=!1;const f=new Vp({Hr:d=>{h?D("Connection","Not sending because WebChannel is closed:",d):(c||(D("Connection","Opening WebChannel transport."),u.open(),c=!0),D("Connection","WebChannel sending:",d),u.send(d))},Jr:()=>u.close()}),g=(d,v,E)=>{d.listen(v,_=>{try{E(_)}catch(y){setTimeout(()=>{throw y},0)}})};return g(u,as.EventType.OPEN,()=>{h||D("Connection","WebChannel transport opened.")}),g(u,as.EventType.CLOSE,()=>{h||(h=!0,D("Connection","WebChannel transport closed"),f.io())}),g(u,as.EventType.ERROR,d=>{h||(h=!0,$r("Connection","WebChannel transport errored:",d),f.io(new L(w.UNAVAILABLE,"The operation could not be completed")))}),g(u,as.EventType.MESSAGE,d=>{var v;if(!h){const E=d.data[0];te(!!E);const _=E,y=_.error||((v=_[0])===null||v===void 0?void 0:v.error);if(y){D("Connection","WebChannel received error:",y);const N=y.status;let ee=function(Me){const ue=be[Me];if(ue!==void 0)return Ru(ue)}(N),we=y.message;ee===void 0&&(ee=w.INTERNAL,we="Unknown error status: "+N+" with message "+y.message),h=!0,f.io(new L(ee,we)),u.close()}else D("Connection","WebChannel received:",E),f.ro(E)}}),g(o,Wg.STAT_EVENT,d=>{d.stat===ea.PROXY?D("Connection","Detected buffering proxy"):d.stat===ea.NOPROXY&&D("Connection","Detected no buffering proxy")}),setTimeout(()=>{f.so()},0),f}}function Nr(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t){return new Qm(t,!0)}class Ku{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Hs=e,this.timerId=n,this.mo=s,this.yo=r,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),s=Math.max(0,Date.now()-this.Eo),r=Math.max(0,n-s);r>0&&D("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n,s,r,i,o,a,l){this.Hs=e,this.vo=s,this.Vo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Ku(e,n)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,n){this.Lo(),this.Uo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():n&&n.code===w.RESOURCE_EXHAUSTED?(rt(n.toString()),rt("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===w.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.qo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}qo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.So===n&&this.Go(s,r)},s=>{e(()=>{const r=new L(w.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Qo(r)})})}Go(e,n){const s=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{s(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{s(()=>this.Qo(r))}),this.stream.onMessage(r=>{s(()=>this.onMessage(r))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return D("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Up extends Gu{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.It=i}jo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.xo.reset();const n=Ym(this.It,e),s=function(r){if(!("targetChange"in r))return q.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?q.min():i.readTime?nt(i.readTime):q.min()}(e);return this.listener.Wo(n,s)}zo(e){const n={};n.database=ai(this.It),n.addTarget=function(r,i){let o;const a=i.target;return o=ni(a)?{documents:$m(r,a)}:{query:ep(r,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?o.resumeToken=xu(r,i.resumeToken):i.snapshotVersion.compareTo(q.min())>0&&(o.readTime=Ms(r,i.snapshotVersion.toTimestamp())),o}(this.It,e);const s=np(this.It,e);s&&(n.labels=s),this.Bo(n)}Ho(e){const n={};n.database=ai(this.It),n.removeTarget=e,this.Bo(n)}}class Bp extends Gu{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.It=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(te(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=Zm(e.writeResults,e.commitTime),s=nt(e.commitTime);return this.listener.Zo(s,n)}return te(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=ai(this.It),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>Jm(this.It,s))};this.Bo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends class{}{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.It=r,this.nu=!1}su(){if(this.nu)throw new L(w.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,n,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.connection.ao(e,n,s,r,i)).catch(r=>{throw r.name==="FirebaseError"?(r.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new L(w.UNKNOWN,r.toString())})}_o(e,n,s,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection._o(e,n,s,i,o,r)).catch(i=>{throw i.name==="FirebaseError"?(i.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new L(w.UNKNOWN,i.toString())})}terminate(){this.nu=!0}}class zp{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(rt(n),this.ou=!1):D("OnlineStateTracker",n)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.qr(o=>{s.enqueueAndForget(async()=>{Mt(this)&&(D("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=j(a);l._u.add(4),await Zn(l),l.gu.set("Unknown"),l._u.delete(4),await or(l)}(this))})}),this.gu=new zp(s,r)}}async function or(t){if(Mt(t))for(const e of t.wu)await e(!0)}async function Zn(t){for(const e of t.wu)await e(!1)}function Qu(t,e){const n=j(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),Xi(n)?Wi(n):rn(n).ko()&&Qi(n,e))}function Wu(t,e){const n=j(t),s=rn(n);n.du.delete(e),s.ko()&&Xu(n,e),n.du.size===0&&(s.ko()?s.Fo():Mt(n)&&n.gu.set("Unknown"))}function Qi(t,e){t.yu.Mt(e.targetId),rn(t).zo(e)}function Xu(t,e){t.yu.Mt(e),rn(t).Ho(e)}function Wi(t){t.yu=new Hm({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),se:e=>t.du.get(e)||null}),rn(t).start(),t.gu.uu()}function Xi(t){return Mt(t)&&!rn(t).No()&&t.du.size>0}function Mt(t){return j(t)._u.size===0}function Yu(t){t.yu=void 0}async function Hp(t){t.du.forEach((e,n)=>{Qi(t,e)})}async function Kp(t,e){Yu(t),Xi(t)?(t.gu.hu(e),Wi(t)):t.gu.set("Unknown")}async function Gp(t,e,n){if(t.gu.set("Online"),e instanceof Vu&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.du.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.du.delete(o),s.yu.removeTarget(o))}(t,e)}catch(s){D("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Os(t,s)}else if(e instanceof gs?t.yu.Gt(e):e instanceof Fu?t.yu.Yt(e):t.yu.Wt(e),!n.isEqual(q.min()))try{const s=await Hu(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.yu.te(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=r.du.get(l);u&&r.du.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach(a=>{const l=r.du.get(a);if(!l)return;r.du.set(a,l.withResumeToken(Be.EMPTY_BYTE_STRING,l.snapshotVersion)),Xu(r,a);const u=new Ct(l.target,a,1,l.sequenceNumber);Qi(r,u)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){D("RemoteStore","Failed to raise snapshot:",s),await Os(t,s)}}async function Os(t,e,n){if(!Wn(e))throw e;t._u.add(1),await Zn(t),t.gu.set("Offline"),n||(n=()=>Hu(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{D("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await or(t)})}function Ju(t,e){return e().catch(n=>Os(t,n,e))}async function ar(t){const e=j(t),n=dt(e);let s=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Qp(e);)try{const r=await Rp(e.localStore,s);if(r===null){e.fu.length===0&&n.Fo();break}s=r.batchId,Wp(e,r)}catch(r){await Os(e,r)}Zu(e)&&$u(e)}function Qp(t){return Mt(t)&&t.fu.length<10}function Wp(t,e){t.fu.push(e);const n=dt(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function Zu(t){return Mt(t)&&!dt(t).No()&&t.fu.length>0}function $u(t){dt(t).start()}async function Xp(t){dt(t).eu()}async function Yp(t){const e=dt(t);for(const n of t.fu)e.Xo(n.mutations)}async function Jp(t,e,n){const s=t.fu.shift(),r=qi.from(s,e,n);await Ju(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await ar(t)}async function Zp(t,e){e&&dt(t).Yo&&await async function(n,s){if(r=s.code,Um(r)&&r!==w.ABORTED){const i=n.fu.shift();dt(n).Mo(),await Ju(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ar(n)}var r}(t,e),Zu(t)&&$u(t)}async function Ea(t,e){const n=j(t);n.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");const s=Mt(n);n._u.add(3),await Zn(n),s&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await or(n)}async function $p(t,e){const n=j(t);e?(n._u.delete(2),await or(n)):e||(n._u.add(2),await Zn(n),n.gu.set("Unknown"))}function rn(t){return t.pu||(t.pu=function(e,n,s){const r=j(e);return r.su(),new Up(n,r.connection,r.authCredentials,r.appCheckCredentials,r.It,s)}(t.datastore,t.asyncQueue,{Yr:Hp.bind(null,t),Zr:Kp.bind(null,t),Wo:Gp.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Mo(),Xi(t)?Wi(t):t.gu.set("Unknown")):(await t.pu.stop(),Yu(t))})),t.pu}function dt(t){return t.Iu||(t.Iu=function(e,n,s){const r=j(e);return r.su(),new Bp(n,r.connection,r.authCredentials,r.appCheckCredentials,r.It,s)}(t.datastore,t.asyncQueue,{Yr:Xp.bind(null,t),Zr:Zp.bind(null,t),tu:Yp.bind(null,t),Zo:Jp.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Mo(),await ar(t)):(await t.Iu.stop(),t.fu.length>0&&(D("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Tt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new Yi(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ji(t,e){if(rt("AsyncQueue",`${e}: ${t}`),Wn(t))return new L(w.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e?(n,s)=>e(n,s)||M.comparator(n.key,s.key):(n,s)=>M.comparator(n.key,s.key),this.keyedMap=hn(),this.sortedSet=new Te(this.comparator)}static emptySet(e){return new qt(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new qt;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.Tu=new Te(M.comparator)}track(e){const n=e.doc.key,s=this.Tu.get(n);s?e.type!==0&&s.type===3?this.Tu=this.Tu.insert(n,e):e.type===3&&s.type!==1?this.Tu=this.Tu.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Tu=this.Tu.remove(n):e.type===1&&s.type===2?this.Tu=this.Tu.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):B():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,s)=>{e.push(s)}),e}}class Yt{constructor(e,n,s,r,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Yt(e,n,qt.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tr(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(){this.Au=void 0,this.listeners=[]}}class t0{constructor(){this.queries=new sn(e=>_u(e),tr),this.onlineState="Unknown",this.Ru=new Set}}async function n0(t,e){const n=j(t),s=e.query;let r=!1,i=n.queries.get(s);if(i||(r=!0,i=new e0),r)try{i.Au=await n.onListen(s)}catch(o){const a=Ji(o,`Initialization of query '${ri(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.listeners.push(e),e.bu(n.onlineState),i.Au&&e.Pu(i.Au)&&Zi(n)}async function s0(t,e){const n=j(t),s=e.query;let r=!1;const i=n.queries.get(s);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),r=i.listeners.length===0)}if(r)return n.queries.delete(s),n.onUnlisten(s)}function r0(t,e){const n=j(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Pu(r)&&(s=!0);o.Au=r}}s&&Zi(n)}function i0(t,e,n){const s=j(t),r=s.queries.get(e);if(r)for(const i of r.listeners)i.onError(n);s.queries.delete(e)}function Zi(t){t.Ru.forEach(e=>{e.next()})}class o0{constructor(e,n,s){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=s||{}}Pu(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Yt(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){if(!e.fromCache)return!0;const s=n!=="Offline";return(!this.options.Nu||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const n=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}xu(e){e=Yt.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e){this.key=e}}class tc{constructor(e){this.key=e}}class a0{constructor(e,n){this.query=e,this.Uu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=G(),this.mutatedKeys=G(),this.Gu=wu(e),this.Qu=new qt(this.Gu)}get ju(){return this.Uu}Wu(e,n){const s=n?n.zu:new Ta,r=n?n.Qu:this.Qu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((c,h)=>{const f=r.get(c),g=ji(this.query,h)?h:null,d=!!f&&this.mutatedKeys.has(f.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let E=!1;f&&g?f.data.isEqual(g.data)?d!==v&&(s.track({type:3,doc:g}),E=!0):this.Hu(f,g)||(s.track({type:2,doc:g}),E=!0,(l&&this.Gu(g,l)>0||u&&this.Gu(g,u)<0)&&(a=!0)):!f&&g?(s.track({type:0,doc:g}),E=!0):f&&!g&&(s.track({type:1,doc:f}),E=!0,(l||u)&&(a=!0)),E&&(g?(o=o.add(g),i=v?i.add(c):i.delete(c)):(o=o.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),i=i.delete(c.key),s.track({type:1,doc:c})}return{Qu:o,zu:s,$i:a,mutatedKeys:i}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const i=e.zu.Eu();i.sort((u,c)=>function(h,f){const g=d=>{switch(d){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return B()}};return g(h)-g(f)}(u.type,c.type)||this.Gu(u.doc,c.doc)),this.Ju(s);const o=n?this.Yu():[],a=this.Ku.size===0&&this.current?1:0,l=a!==this.qu;return this.qu=a,i.length!==0||l?{snapshot:new Yt(this.query,e.Qu,r,i,e.mutatedKeys,a===0,l,!1,!!s&&s.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Ta,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.Uu=this.Uu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Uu=this.Uu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=G(),this.Qu.forEach(s=>{this.Zu(s.key)&&(this.Ku=this.Ku.add(s.key))});const n=[];return e.forEach(s=>{this.Ku.has(s)||n.push(new tc(s))}),this.Ku.forEach(s=>{e.has(s)||n.push(new ec(s))}),n}tc(e){this.Uu=e.Hi,this.Ku=G();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ec(){return Yt.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.qu===0,this.hasCachedResults)}}class l0{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class u0{constructor(e){this.key=e,this.nc=!1}}class c0{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new sn(a=>_u(a),tr),this.rc=new Map,this.oc=new Set,this.uc=new Te(M.comparator),this.cc=new Map,this.ac=new Hi,this.hc={},this.lc=new Map,this.fc=Xt.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function h0(t,e){const n=w0(t);let s,r;const i=n.ic.get(e);if(i)s=i.targetId,n.sharedClientState.addLocalQueryTarget(s),r=i.view.ec();else{const o=await Lp(n.localStore,it(e));n.isPrimaryClient&&Qu(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);s=o.targetId,r=await f0(n,e,s,a==="current",o.resumeToken)}return r}async function f0(t,e,n,s,r){t._c=(h,f,g)=>async function(d,v,E,_){let y=v.view.Wu(E);y.$i&&(y=await _a(d.localStore,v.query,!1).then(({documents:we})=>v.view.Wu(we,y)));const N=_&&_.targetChanges.get(v.targetId),ee=v.view.applyChanges(y,d.isPrimaryClient,N);return Ia(d,v.targetId,ee.Xu),ee.snapshot}(t,h,f,g);const i=await _a(t.localStore,e,!0),o=new a0(e,i.Hi),a=o.Wu(i.documents),l=Jn.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);Ia(t,n,u.Xu);const c=new l0(e,n,o);return t.ic.set(e,c),t.rc.has(n)?t.rc.get(n).push(e):t.rc.set(n,[e]),u.snapshot}async function d0(t,e){const n=j(t),s=n.ic.get(e),r=n.rc.get(s.targetId);if(r.length>1)return n.rc.set(s.targetId,r.filter(i=>!tr(i,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await li(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),Wu(n.remoteStore,s.targetId),ui(n,s.targetId)}).catch(Qn)):(ui(n,s.targetId),await li(n.localStore,s.targetId,!0))}async function g0(t,e,n){const s=k0(t);try{const r=await function(i,o){const a=j(i),l=ke.now(),u=o.reduce((f,g)=>f.add(g.key),G());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=ot(),d=G();return a.Gi.getEntries(f,u).next(v=>{g=v,g.forEach((E,_)=>{_.isValidDocument()||(d=d.add(E))})}).next(()=>a.localDocuments.getOverlayedDocuments(f,g)).next(v=>{c=v;const E=[];for(const _ of o){const y=Fm(_,c.get(_.key).overlayedDocument);y!=null&&E.push(new Lt(_.key,y,pu(y.value.mapValue),tt.exists(!0)))}return a.mutationQueue.addMutationBatch(f,l,E,o)}).next(v=>{h=v;const E=v.applyToLocalDocumentSet(c,d);return a.documentOverlayCache.saveOverlays(f,v.batchId,E)})}).then(()=>({batchId:h.batchId,changes:Mu(c)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let l=i.hc[i.currentUser.toKey()];l||(l=new Te(Z)),l=l.insert(o,a),i.hc[i.currentUser.toKey()]=l}(s,r.batchId,n),await $n(s,r.changes),await ar(s.remoteStore)}catch(r){const i=Ji(r,"Failed to persist write");n.reject(i)}}async function nc(t,e){const n=j(t);try{const s=await Dp(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.cc.get(i);o&&(te(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.nc=!0:r.modifiedDocuments.size>0?te(o.nc):r.removedDocuments.size>0&&(te(o.nc),o.nc=!1))}),await $n(n,s,e)}catch(s){await Qn(s)}}function Ca(t,e,n){const s=j(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.ic.forEach((i,o)=>{const a=o.view.bu(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=j(i);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const h of c.listeners)h.bu(o)&&(l=!0)}),l&&Zi(a)}(s.eventManager,e),r.length&&s.sc.Wo(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function m0(t,e,n){const s=j(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.cc.get(e),i=r&&r.key;if(i){let o=new Te(M.comparator);o=o.insert(i,Ae.newNoDocument(i,q.min()));const a=G().add(i),l=new rr(q.min(),new Map,new Ee(Z),o,a);await nc(s,l),s.uc=s.uc.remove(i),s.cc.delete(e),$i(s)}else await li(s.localStore,e,!1).then(()=>ui(s,e,n)).catch(Qn)}async function p0(t,e){const n=j(t),s=e.batch.batchId;try{const r=await Ap(n.localStore,e);rc(n,s,null),sc(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await $n(n,r)}catch(r){await Qn(r)}}async function y0(t,e,n){const s=j(t);try{const r=await function(i,o){const a=j(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(te(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(s.localStore,e);rc(s,e,n),sc(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await $n(s,r)}catch(r){await Qn(r)}}function sc(t,e){(t.lc.get(e)||[]).forEach(n=>{n.resolve()}),t.lc.delete(e)}function rc(t,e,n){const s=j(t);let r=s.hc[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.hc[s.currentUser.toKey()]=r}}function ui(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.rc.get(e))t.ic.delete(s),n&&t.sc.wc(s,n);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(s=>{t.ac.containsKey(s)||ic(t,s)})}function ic(t,e){t.oc.delete(e.path.canonicalString());const n=t.uc.get(e);n!==null&&(Wu(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),$i(t))}function Ia(t,e,n){for(const s of n)s instanceof ec?(t.ac.addReference(s.key,e),v0(t,s)):s instanceof tc?(D("SyncEngine","Document no longer in limbo: "+s.key),t.ac.removeReference(s.key,e),t.ac.containsKey(s.key)||ic(t,s.key)):B()}function v0(t,e){const n=e.key,s=n.path.canonicalString();t.uc.get(n)||t.oc.has(s)||(D("SyncEngine","New document in limbo: "+n),t.oc.add(s),$i(t))}function $i(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const n=new M(he.fromString(e)),s=t.fc.next();t.cc.set(s,new u0(n)),t.uc=t.uc.insert(n,s),Qu(t.remoteStore,new Ct(it(Bi(n.path)),s,2,Fi.at))}}async function $n(t,e,n){const s=j(t),r=[],i=[],o=[];s.ic.isEmpty()||(s.ic.forEach((a,l)=>{o.push(s._c(l,e,n).then(u=>{if((u||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){r.push(u);const c=Gi.Ci(l.targetId,u);i.push(c)}}))}),await Promise.all(o),s.sc.Wo(r),await async function(a,l){const u=j(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>k.forEach(l,h=>k.forEach(h.Si,f=>u.persistence.referenceDelegate.addReference(c,h.targetId,f)).next(()=>k.forEach(h.Di,f=>u.persistence.referenceDelegate.removeReference(c,h.targetId,f)))))}catch(c){if(!Wn(c))throw c;D("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const h=c.targetId;if(!c.fromCache){const f=u.Ui.get(h),g=f.snapshotVersion,d=f.withLastLimboFreeSnapshotVersion(g);u.Ui=u.Ui.insert(h,d)}}}(s.localStore,i))}async function b0(t,e){const n=j(t);if(!n.currentUser.isEqual(e)){D("SyncEngine","User change. New user:",e.toKey());const s=await qu(n.localStore,e);n.currentUser=e,function(r,i){r.lc.forEach(o=>{o.forEach(a=>{a.reject(new L(w.CANCELLED,i))})}),r.lc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await $n(n,s.ji)}}function _0(t,e){const n=j(t),s=n.cc.get(e);if(s&&s.nc)return G().add(s.key);{let r=G();const i=n.rc.get(e);if(!i)return r;for(const o of i){const a=n.ic.get(o);r=r.unionWith(a.view.ju)}return r}}function w0(t){const e=j(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m0.bind(null,e),e.sc.Wo=r0.bind(null,e.eventManager),e.sc.wc=i0.bind(null,e.eventManager),e}function k0(t){const e=j(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=p0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y0.bind(null,e),e}class E0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.It=ir(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,n){return null}Ec(e,n){return null}Ic(e){return Sp(this.persistence,new Cp,e.initialUser,this.It)}yc(e){return new Ep(Ki.Bs,this.It)}gc(e){return new Op}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class T0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ca(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=b0.bind(null,this.syncEngine),await $p(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new t0}createDatastore(e){const n=ir(e.databaseInfo.databaseId),s=(r=e.databaseInfo,new xp(r));var r;return function(i,o,a,l){return new jp(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return n=this.localStore,s=this.datastore,r=e.asyncQueue,i=a=>Ca(this.syncEngine,a,0),o=ka.C()?new ka:new Pp,new qp(n,s,r,i,o);var n,s,r,i,o}createSyncEngine(e,n){return function(s,r,i,o,a,l,u){const c=new c0(s,r,i,o,a,l);return u&&(c.dc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=j(e);D("RemoteStore","RemoteStore shutting down."),n._u.add(5),await Zn(n),n.mu.shutdown(),n.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t,e,n){if(!n)throw new L(w.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function C0(t,e,n,s){if(e===!0&&s===!0)throw new L(w.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Sa(t){if(!M.isDocumentKey(t))throw new L(w.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Aa(t){if(M.isDocumentKey(t))throw new L(w.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eo(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":B()}function _n(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=eo(t);throw new L(w.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new Map;class Na{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new L(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new L(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,C0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Na({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new L(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new L(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Na(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Jg;switch(n.type){case"gapi":const s=n.client;return new tm(s,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new L(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Da.get(e);n&&(D("ComponentProvider","Removing Datastore"),Da.delete(e),n.terminate())}(this),Promise.resolve()}}function I0(t,e,n,s={}){var r;const i=(t=_n(t,lr))._getSettings();if(i.host!=="firestore.googleapis.com"&&i.host!==e&&$r("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:`${e}:${n}`,ssl:!1})),s.mockUserToken){let o,a;if(typeof s.mockUserToken=="string")o=s.mockUserToken,a=Oe.MOCK_USER;else{o=Pf(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const l=s.mockUserToken.sub||s.mockUserToken.user_id;if(!l)throw new L(w.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Oe(l)}t._authCredentials=new Zg(new hu(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ut(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ge(this.firestore,e,this._key)}}class es{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new es(this.firestore,e,this._query)}}class ut extends es{constructor(e,n,s){super(e,n,Bi(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ge(this.firestore,null,new M(e))}withConverter(e){return new ut(this.firestore,e,this._path)}}function ac(t,e,...n){if(t=Ht(t),oc("collection","path",e),t instanceof lr){const s=he.fromString(e,...n);return Aa(s),new ut(t,null,s)}{if(!(t instanceof Ge||t instanceof ut))throw new L(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(he.fromString(e,...n));return Aa(s),new ut(t.firestore,null,s)}}function S0(t,e,...n){if(t=Ht(t),arguments.length===1&&(e=fu.R()),oc("doc","path",e),t instanceof lr){const s=he.fromString(e,...n);return Sa(s),new Ge(t,null,new M(s))}{if(!(t instanceof Ge||t instanceof ut))throw new L(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(he.fromString(e,...n));return Sa(s),new Ge(t.firestore,t instanceof ut?t.converter:null,new M(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):rt("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e,n,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Oe.UNAUTHENTICATED,this.clientId=fu.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async i=>{D("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(s,i=>(D("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new L(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Ji(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function N0(t,e){t.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await qu(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function R0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await L0(t);D("FirestoreClient","Initializing OnlineComponentProvider");const s=await t.getConfiguration();await e.initialize(n,s),t.setCredentialChangeListener(r=>Ea(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Ea(e.remoteStore,i)),t.onlineComponents=e}async function L0(t){return t.offlineComponents||(D("FirestoreClient","Using default OfflineComponentProvider"),await N0(t,new E0)),t.offlineComponents}async function lc(t){return t.onlineComponents||(D("FirestoreClient","Using default OnlineComponentProvider"),await R0(t,new T0)),t.onlineComponents}function M0(t){return lc(t).then(e=>e.syncEngine)}async function Ra(t){const e=await lc(t),n=e.eventManager;return n.onListen=h0.bind(null,e.syncEngine),n.onUnlisten=d0.bind(null,e.syncEngine),n}class O0{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Ku(this,"async_queue_retry"),this.Wc=()=>{const n=Nr();n&&D("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=Nr();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const n=Nr();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const n=new Tt;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!Wn(e))throw e;D("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(s=>{this.Kc=s,this.Gc=!1;const r=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(s);throw rt("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.Gc=!1,s))));return this.Bc=n,n}enqueueAfterDelay(e,n,s){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const r=Yi.createAndSchedule(this,e,n,s,i=>this.Yc(i));return this.qc.push(r),r}zc(){this.Kc&&B()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const n of this.qc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.qc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.qc.indexOf(e);this.qc.splice(n,1)}}function La(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Ps extends lr{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new O0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||cc(this),this._firestoreClient.terminate()}}function P0(t,e){const n=typeof t=="object"?t:Vd(),s=typeof t=="string"?t:e||"(default)",r=Md(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=Lf("firestore");i&&I0(r,...i)}return r}function uc(t){return t._firestoreClient||cc(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function cc(t){var e;const n=t._freezeSettings(),s=function(r,i,o,a){return new fm(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new D0(t._authCredentials,t._appCheckCredentials,t._queue,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jt(Be.fromBase64String(e))}catch(n){throw new L(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Jt(Be.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Z(this._lat,e._lat)||Z(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=/^__.*__$/;class V0{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Lt(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yn(e,this.data,n,this.fieldTransforms)}}function hc(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}class ro{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.It=s,this.ignoreUndefinedProperties=r,i===void 0&&this.na(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new ro(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ia({path:s,oa:!1});return r.ua(e),r}ca(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ia({path:s,oa:!1});return r.na(),r}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Fs(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(hc(this.sa)&&F0.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class x0{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.It=s||ir(e)}da(e,n,s,r=!1){return new ro({sa:e,methodName:n,fa:s,path:Pe.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function U0(t){const e=t._freezeSettings(),n=ir(t._databaseId);return new x0(t._databaseId,!!e.ignoreUndefinedProperties,n)}function B0(t,e,n,s,r,i={}){const o=t.da(i.merge||i.mergeFields?2:0,e,n,r);mc("Data must be an object, but it was:",o,s);const a=dc(s,o);let l,u;if(i.merge)l=new Je(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const c=[];for(const h of i.mergeFields){const f=j0(e,h,n);if(!o.contains(f))throw new L(w.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);q0(c,f)||c.push(f)}l=new Je(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new V0(new Ke(a),l,u)}class io extends no{_toFieldTransform(e){return new Lm(e.path,new On)}isEqual(e){return e instanceof io}}function fc(t,e){if(gc(t=Ht(t)))return mc("Unsupported field value:",e,t),dc(t,e);if(t instanceof no)return function(n,s){if(!hc(s.sa))throw s.ha(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.ha(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=fc(o,s.aa(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=Ht(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Dm(s.It,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=ke.fromDate(n);return{timestampValue:Ms(s.It,r)}}if(n instanceof ke){const r=new ke(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ms(s.It,r)}}if(n instanceof so)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Jt)return{bytesValue:xu(s.It,n._byteString)};if(n instanceof Ge){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s.ha(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:zi(n.firestore._databaseId||s.databaseId,n._key.path)}}throw s.ha(`Unsupported field value: ${eo(n)}`)}(t,e)}function dc(t,e){const n={};return du(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nn(t,(s,r)=>{const i=fc(r,e.ra(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function gc(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof so||t instanceof Jt||t instanceof Ge||t instanceof no)}function mc(t,e,n){if(!gc(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const s=eo(n);throw s==="an object"?e.ha(t+" a custom object"):e.ha(t+" "+s)}}function j0(t,e,n){if((e=Ht(e))instanceof to)return e._internalPath;if(typeof e=="string")return pc(t,e);throw Fs("Field path arguments must be of type string or ",t,!1,void 0,n)}const z0=new RegExp("[~\\*/\\[\\]]");function pc(t,e,n){if(e.search(z0)>=0)throw Fs(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new to(...e.split("."))._internalPath}catch{throw Fs(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fs(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new L(w.INVALID_ARGUMENT,a+t+l)}function q0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new H0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(oo("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class H0 extends yc{data(){return super.data()}}function oo(t,e){return typeof e=="string"?pc(t,e):e instanceof to?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class G0{}function Q0(t,...e){for(const n of e)t=n._apply(t);return t}class W0 extends G0{constructor(e,n){super(),this.ma=e,this.pa=n,this.type="orderBy"}_apply(e){const n=function(s,r,i){if(s.startAt!==null)throw new L(w.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new L(w.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new zt(r,i);return function(a,l){if(vu(a)===null){const u=bu(a);u!==null&&Y0(a,u,l.field)}}(s,o),o}(e._query,this.ma,this.pa);return new es(e.firestore,e.converter,function(s,r){const i=s.explicitOrderBy.concat([r]);return new Xn(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function X0(t,e="asc"){const n=e,s=oo("orderBy",t);return new W0(s,n)}function Y0(t,e,n){if(!n.isEqual(e))throw new L(w.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{convertValue(e,n="none"){switch(Dt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw B()}}convertObject(e,n){const s={};return nn(e.fields,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertGeoPoint(e){return new so(_e(e.latitude),_e(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=mu(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Nn(e));default:return null}}convertTimestamp(e){const n=ft(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=he.fromString(e);te(zu(s));const r=new Rn(s.get(1),s.get(3)),i=new M(s.popFirst(5));return r.isEqual(n)||rt(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vc extends yc{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ms(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(oo("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class ms extends vc{data(e={}){return super.data(e)}}class $0{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new fn(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new ms(this._firestore,this._userDataWriter,s.key,s,new fn(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new ms(s._firestore,s._userDataWriter,o.doc.key,o.doc,new fn(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new ms(s._firestore,s._userDataWriter,o.doc.key,o.doc,new fn(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:ey(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ey(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return B()}}class bc extends J0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}}function ty(t,e){const n=_n(t.firestore,Ps),s=S0(t),r=Z0(t.converter,e);return sy(n,[B0(U0(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,tt.exists(!1))]).then(()=>s)}function ny(t,...e){var n,s,r;t=Ht(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||La(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(La(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(s=h.error)===null||s===void 0?void 0:s.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let l,u,c;if(t instanceof Ge)u=_n(t.firestore,Ps),c=Bi(t._key.path),l={next:h=>{e[o]&&e[o](ry(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=_n(t,es);u=_n(h.firestore,Ps),c=h._query;const f=new bc(u);l={next:g=>{e[o]&&e[o](new $0(u,f,h,g))},error:e[o+1],complete:e[o+2]},K0(t._query)}return function(h,f,g,d){const v=new A0(d),E=new o0(f,v,g);return h.asyncQueue.enqueueAndForget(async()=>n0(await Ra(h),E)),()=>{v.bc(),h.asyncQueue.enqueueAndForget(async()=>s0(await Ra(h),E))}}(uc(u),c,a,l)}function sy(t,e){return function(n,s){const r=new Tt;return n.asyncQueue.enqueueAndForget(async()=>g0(await M0(n),s,r)),r.promise}(uc(t),e)}function ry(t,e,n){const s=n.docs.get(e._key),r=new bc(t);return new vc(t,r,e._key,s,new fn(n.hasPendingWrites,n.fromCache),e.converter)}function iy(){return new io("serverTimestamp")}(function(t,e=!0){(function(n){tn=n})(Fd),ws(new kn("firestore",(n,{instanceIdentifier:s,options:r})=>{const i=n.getProvider("app").getImmediate(),o=new Ps(new $g(n.getProvider("auth-internal")),new sm(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new L(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rn(a.options.projectId,l)}(i,s),i);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),Bt(ta,"3.7.3",t),Bt(ta,"3.7.3","esm2017")})();const oy={apiKey:"AIzaSyBE1xuFncad-cgFgkDgRwO0hQkNb8aF1KI",authDomain:"thiagometro-bf771.firebaseapp.com",projectId:"thiagometro-bf771",storageBucket:"thiagometro-bf771.appspot.com",messagingSenderId:"969109893719",appId:"1:969109893719:web:b0c85ed83f5ec031ab2912"},ay=ol(oy),_c=P0(ay);function ly(t){let e;return{c(){e=ve("Selecione uma categoria")},m(n,s){C(n,e,s)},d(n){n&&T(e)}}}function uy(t){let e,n;return e=new mn({props:{size:"base",weight:"semibold",$$slots:{default:[ly]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,r){const i={};r&64&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function cy(t){let e;return{c(){e=ve("Descri\xE7\xE3o")},m(n,s){C(n,e,s)},d(n){n&&T(e)}}}function hy(t){let e,n;return e=new mn({props:{size:"base",weight:"semibold",$$slots:{default:[cy]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,r){const i={};r&64&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function fy(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-6 h-6")},m(s,r){C(s,e,r),x(e,n)},p:X,d(s){s&&T(e)}}}function dy(t){let e,n,s;return{c(){e=ge("svg"),n=ge("path"),s=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"),m(s,"stroke-linecap","round"),m(s,"stroke-linejoin","round"),m(s,"d","M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-6 h-6")},m(r,i){C(r,e,i),x(e,n),x(e,s)},p:X,d(r){r&&T(e)}}}function gy(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-6 h-6")},m(s,r){C(s,e,r),x(e,n)},p:X,d(s){s&&T(e)}}}function my(t){let e,n,s,r,i,o;return e=new Ut({props:{name:"Attach file",$$slots:{default:[fy]},$$scope:{ctx:t}}}),s=new Ut({props:{name:"Embed map",$$slots:{default:[dy]},$$scope:{ctx:t}}}),i=new Ut({props:{name:"Upload image",$$slots:{default:[gy]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment),n=ae(),Q(s.$$.fragment),r=ae(),Q(i.$$.fragment)},m(a,l){H(e,a,l),C(a,n,l),H(s,a,l),C(a,r,l),H(i,a,l),o=!0},p(a,l){const u={};l&64&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const c={};l&64&&(c.$$scope={dirty:l,ctx:a}),s.$set(c);const h={};l&64&&(h.$$scope={dirty:l,ctx:a}),i.$set(h)},i(a){o||(p(e.$$.fragment,a),p(s.$$.fragment,a),p(i.$$.fragment,a),o=!0)},o(a){b(e.$$.fragment,a),b(s.$$.fragment,a),b(i.$$.fragment,a),o=!1},d(a){K(e,a),a&&T(n),K(s,a),a&&T(r),K(i,a)}}}function py(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-6 h-6")},m(s,r){C(s,e,r),x(e,n)},p:X,d(s){s&&T(e)}}}function yy(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-6 h-6")},m(s,r){C(s,e,r),x(e,n)},p:X,d(s){s&&T(e)}}}function vy(t){let e,n,s,r;return e=new Ut({props:{name:"Format code",$$slots:{default:[py]},$$scope:{ctx:t}}}),s=new Ut({props:{name:"Add emoji",$$slots:{default:[yy]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment),n=ae(),Q(s.$$.fragment)},m(i,o){H(e,i,o),C(i,n,o),H(s,i,o),r=!0},p(i,o){const a={};o&64&&(a.$$scope={dirty:o,ctx:i}),e.$set(a);const l={};o&64&&(l.$$scope={dirty:o,ctx:i}),s.$set(l)},i(i){r||(p(e.$$.fragment,i),p(s.$$.fragment,i),r=!0)},o(i){b(e.$$.fragment,i),b(s.$$.fragment,i),r=!1},d(i){K(e,i),i&&T(n),K(s,i)}}}function by(t){let e,n,s,r;return e=new Lo({props:{$$slots:{default:[my]},$$scope:{ctx:t}}}),s=new Lo({props:{$$slots:{default:[vy]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment),n=ae(),Q(s.$$.fragment)},m(i,o){H(e,i,o),C(i,n,o),H(s,i,o),r=!0},p(i,o){const a={};o&64&&(a.$$scope={dirty:o,ctx:i}),e.$set(a);const l={};o&64&&(l.$$scope={dirty:o,ctx:i}),s.$set(l)},i(i){r||(p(e.$$.fragment,i),p(s.$$.fragment,i),r=!0)},o(i){b(e.$$.fragment,i),b(s.$$.fragment,i),r=!1},d(i){K(e,i),i&&T(n),K(s,i)}}}function _y(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-7 h-7")},m(s,r){C(s,e,r),x(e,n)},p:X,d(s){s&&T(e)}}}function wy(t){let e,n;return e=new Ut({props:{name:"send",slot:"end",form:"form1",type:"submit",$$slots:{default:[_y]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,r){const i={};r&64&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function ky(t){let e,n;return e=new mf({props:{slot:"header",embedded:!0,$$slots:{end:[wy],default:[by]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,r){const i={};r&64&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function Ey(t){let e,n,s,r,i,o,a,l,u,c,h,f,g;n=new po({props:{for:"select-underline",align:"left",class:"sr-only",$$slots:{default:[uy]},$$scope:{ctx:t}}});function d(y){t[4](y)}let v={id:"select",items:t[2],placeholder:"Selecione uma categoria",required:!0};t[0]!==void 0&&(v.value=t[0]),r=new Ph({props:v}),It.push(()=>go(r,"value",d)),a=new po({props:{for:"editor",align:"left",class:"sr-only",$$slots:{default:[hy]},$$scope:{ctx:t}}});function E(y){t[5](y)}let _={id:"editor",rows:"5",placeholder:"Ex: Thiago comentou que sente saudades da ex",required:!0,$$slots:{header:[ky]},$$scope:{ctx:t}};return t[1]!==void 0&&(_.value=t[1]),u=new zh({props:_}),It.push(()=>go(u,"value",E)),{c(){e=U("form"),Q(n.$$.fragment),s=ae(),Q(r.$$.fragment),o=ae(),Q(a.$$.fragment),l=ae(),Q(u.$$.fragment),m(e,"id","form1")},m(y,N){C(y,e,N),H(n,e,null),x(e,s),H(r,e,null),x(e,o),H(a,e,null),x(e,l),H(u,e,null),h=!0,f||(g=F(e,"submit",Dc(t[3])),f=!0)},p(y,N){const ee={};N&64&&(ee.$$scope={dirty:N,ctx:y}),n.$set(ee);const we={};!i&&N&1&&(i=!0,we.value=y[0],ho(()=>i=!1)),r.$set(we);const Me={};N&64&&(Me.$$scope={dirty:N,ctx:y}),a.$set(Me);const ue={};N&64&&(ue.$$scope={dirty:N,ctx:y}),!c&&N&2&&(c=!0,ue.value=y[1],ho(()=>c=!1)),u.$set(ue)},i(y){h||(p(n.$$.fragment,y),p(r.$$.fragment,y),p(a.$$.fragment,y),p(u.$$.fragment,y),h=!0)},o(y){b(n.$$.fragment,y),b(r.$$.fragment,y),b(a.$$.fragment,y),b(u.$$.fragment,y),h=!1},d(y){y&&T(e),K(n),K(r),K(a),K(u),f=!1,g()}}}function Ty(t){let e,n;return e=new Eh({props:{style:"text-align:left; width:80rem; max-width:none; padding:0",class:"mt-4",$$slots:{default:[Ey]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,[r]){const i={};r&67&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function Cy(t,e,n){let s=[{value:"Jogos",name:"Jogos"},{value:"Culinaria",name:"Culinaria"},{value:"Relacionamento",name:"Relacionamento"},{value:"Trabalho",name:"Trabalho"},{value:"Caracteristicas",name:"Caracteristicas"},{value:"Amigas(os)",name:"Amigas(os)"},{value:"Teatro",name:"Teatro"},{value:"Danca",name:"Danca"},{value:"Mensagem",name:"Mensagem"},{value:"Atual namorado",name:"Atual namorado"},{value:"Doen\xE7as",name:"Doen\xE7as"},{value:"Sentimentos",name:"Sentimentos"},{value:"Outros",name:"Outros"}],r,i;const o=async()=>{if(console.log(r),r&&i){const u=await ty(ac(_c,"ex"),{categoria:r,descricao:i,horario:iy()}).then(n(0,r=""),n(1,i=""));console.log("Document written with ID: ",u.id)}};function a(u){r=u,n(0,r)}function l(u){i=u,n(1,i)}return[r,i,s,o,a,l]}class Iy extends ye{constructor(e){super(),pe(this,e,Cy,Ty,$,{})}}function Ma(t,e,n){const s=t.slice();return s[9]=e[n],s[11]=n,s}function Sy(t){let e,n,s,r,i,o,a,l,u;return{c(){e=ve("Estamos trabalhando h\xE1 "),n=U("span"),s=ve(t[1]),r=ve(":"),i=ve(t[0]),o=ve("hrs sem men\xE7\xF5es da EX. (teste) O atual recorde \xE9 de "),a=U("span"),l=ve(t[3]),u=ve(" dias!!!"),m(n,"class","dias svelte-1imh9op"),m(a,"class","dias svelte-1imh9op")},m(c,h){C(c,e,h),C(c,n,h),x(n,s),x(n,r),x(n,i),C(c,o,h),C(c,a,h),x(a,l),C(c,u,h)},p(c,h){h&2&&Xe(s,c[1]),h&1&&Xe(i,c[0]),h&8&&Xe(l,c[3])},d(c){c&&T(e),c&&T(n),c&&T(o),c&&T(a),c&&T(u)}}}function Ay(t){let e;return{c(){e=ve("Thiagometro")},m(n,s){C(n,e,s)},d(n){n&&T(e)}}}function Dy(t){let e,n,s;return n=new Za({}),{c(){e=U("h1"),Q(n.$$.fragment),m(e,"class","contador svelte-1imh9op")},m(r,i){C(r,e,i),H(n,e,null),s=!0},p:X,i(r){s||(p(n.$$.fragment,r),s=!0)},o(r){b(n.$$.fragment,r),s=!1},d(r){r&&T(e),K(n)}}}function Ny(t){let e,n=t[2].length+"",s;return{c(){e=U("h1"),s=ve(n),m(e,"class","contador svelte-1imh9op")},m(r,i){C(r,e,i),x(e,s)},p(r,i){i&4&&n!==(n=r[2].length+"")&&Xe(s,n)},i:X,o:X,d(r){r&&T(e)}}}function Ry(t){let e,n;return e=new Za({}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p:X,i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function Ly(t){let e,n,s,r;return e=new of({props:{style:"text-align:left; width:80rem",$$slots:{default:[Vy]},$$scope:{ctx:t}}}),s=new Iy({}),{c(){Q(e.$$.fragment),n=ae(),Q(s.$$.fragment)},m(i,o){H(e,i,o),C(i,n,o),H(s,i,o),r=!0},p(i,o){const a={};o&4100&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){r||(p(e.$$.fragment,i),p(s.$$.fragment,i),r=!0)},o(i){b(e.$$.fragment,i),b(s.$$.fragment,i),r=!1},d(i){K(e,i),i&&T(n),K(s,i)}}}function My(t){let e="Observa\xE7\xE3o "+(t[11]+1),n;return{c(){n=ve(e)},m(s,r){C(s,n,r)},p:X,d(s){s&&T(n)}}}function Oy(t){let e=t[9].data().descricao+"",n;return{c(){n=ve(e)},m(s,r){C(s,n,r)},p(s,r){r&4&&e!==(e=s[9].data().descricao+"")&&Xe(n,e)},d(s){s&&T(n)}}}function Py(t){var s;let e=new Date(((s=t[9].data().horario)==null?void 0:s.seconds)*1e3).toLocaleString()+"",n;return{c(){n=ve(e)},m(r,i){C(r,n,i)},p(r,i){var o;i&4&&e!==(e=new Date(((o=r[9].data().horario)==null?void 0:o.seconds)*1e3).toLocaleString()+"")&&Xe(n,e)},d(r){r&&T(n)}}}function Fy(t){let e=t[9].data().categoria+"",n;return{c(){n=ve(e)},m(s,r){C(s,n,r)},p(s,r){r&4&&e!==(e=s[9].data().categoria+"")&&Xe(n,e)},d(s){s&&T(n)}}}function Oa(t){let e,n,s,r,i,o,a,l,u,c,h;return n=new mn({props:{size:"base",weight:"semibold",$$slots:{default:[My]},$$scope:{ctx:t}}}),r=new mn({props:{size:"base",color:"text-grey-500",$$slots:{default:[Oy]},$$scope:{ctx:t}}}),o=new mn({props:{size:"sm",align:"center",$$slots:{default:[Py]},$$scope:{ctx:t}}}),l=new yh({props:{large:!0,class:"inline-flex items-center justify-center -mb-0.5 rounded px-2.5 py-0.5 absolute font-bold border-2 border-white dark:border-gray-900  -top-3 -right-3",$$slots:{default:[Fy]},$$scope:{ctx:t}}}),{c(){e=U("div"),Q(n.$$.fragment),s=ae(),Q(r.$$.fragment),i=ae(),Q(o.$$.fragment),a=ae(),Q(l.$$.fragment),u=ae(),m(e,"class","relative")},m(f,g){C(f,e,g),H(n,e,null),x(e,s),H(r,e,null),x(e,i),H(o,e,null),x(e,a),H(l,e,null),x(e,u),h=!0},p(f,g){const d={};g&4096&&(d.$$scope={dirty:g,ctx:f}),n.$set(d);const v={};g&4100&&(v.$$scope={dirty:g,ctx:f}),r.$set(v);const E={};g&4100&&(E.$$scope={dirty:g,ctx:f}),o.$set(E);const _={};g&4100&&(_.$$scope={dirty:g,ctx:f}),l.$set(_)},i(f){h||(p(n.$$.fragment,f),p(r.$$.fragment,f),p(o.$$.fragment,f),p(l.$$.fragment,f),c||ct(()=>{c=jc(e,Xc,{duration:500}),c.start()}),h=!0)},o(f){b(n.$$.fragment,f),b(r.$$.fragment,f),b(o.$$.fragment,f),b(l.$$.fragment,f),h=!1},d(f){f&&T(e),K(n),K(r),K(o),K(l)}}}function Vy(t){let e,n,s=t[2],r=[];for(let o=0;o<s.length;o+=1)r[o]=Oa(Ma(t,s,o));const i=o=>b(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Ne()},m(o,a){for(let l=0;l<r.length;l+=1)r[l].m(o,a);C(o,e,a),n=!0},p(o,a){if(a&4){s=o[2];let l;for(l=0;l<s.length;l+=1){const u=Ma(o,s,l);r[l]?(r[l].p(u,a),p(r[l],1)):(r[l]=Oa(u),r[l].c(),p(r[l],1),r[l].m(e.parentNode,e))}for(xe(),l=s.length;l<r.length;l+=1)i(l);Ue()}},i(o){if(!n){for(let a=0;a<s.length;a+=1)p(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)b(r[a]);n=!1},d(o){fi(r,o),o&&T(e)}}}function xy(t){let e,n,s,r,i,o,a,l,u,c,h,f,g,d,v,E,_,y;s=new gh({props:{src:"https://firebasestorage.googleapis.com/v0/b/thiagometro-bf771.appspot.com/o/thiago.png?alt=media&token=36a9ddbd-5475-4e9e-bfa1-0025debba8b2",size:"lg"}}),i=new Mo({props:{tag:"h2",class:"pl-5",$$slots:{default:[Sy]},$$scope:{ctx:t}}}),l=new Mo({props:{tag:"h1",customeSize:"font-extrabold ",$$slots:{default:[Ay]},$$scope:{ctx:t}}});const N=[Ny,Dy],ee=[];function we(z,de){return z[2]?0:1}c=we(t),h=ee[c]=N[c](t);const Me=[Ly,Ry],ue=[];function We(z,de){return z[2]?0:1}return E=We(t),_=ue[E]=Me[E](t),{c(){e=U("marquee"),n=U("div"),Q(s.$$.fragment),r=ae(),Q(i.$$.fragment),o=ae(),a=U("div"),Q(l.$$.fragment),u=ae(),h.c(),f=ae(),g=U("div"),g.innerHTML='<h5 class="text-xl font-bold leading-none text-gray-900 dark:text-white">Ultimas cita\xE7\xF5es</h5>',d=ae(),v=U("div"),_.c(),m(n,"class","container-teste svelte-1imh9op"),m(e,"scrollamount","15"),m(g,"class","flex justify-between items-center mb-4"),m(v,"class","h-50"),m(a,"class","flex-col svelte-1imh9op")},m(z,de){C(z,e,de),x(e,n),H(s,n,null),x(n,r),H(i,n,null),C(z,o,de),C(z,a,de),H(l,a,null),x(a,u),ee[c].m(a,null),x(a,f),x(a,g),x(a,d),x(a,v),ue[E].m(v,null),y=!0},p(z,[de]){const I={};de&4107&&(I.$$scope={dirty:de,ctx:z}),i.$set(I);const pt={};de&4096&&(pt.$$scope={dirty:de,ctx:z}),l.$set(pt);let yt=c;c=we(z),c===yt?ee[c].p(z,de):(xe(),b(ee[yt],1,1,()=>{ee[yt]=null}),Ue(),h=ee[c],h?h.p(z,de):(h=ee[c]=N[c](z),h.c()),p(h,1),h.m(a,f));let vt=E;E=We(z),E===vt?ue[E].p(z,de):(xe(),b(ue[vt],1,1,()=>{ue[vt]=null}),Ue(),_=ue[E],_?_.p(z,de):(_=ue[E]=Me[E](z),_.c()),p(_,1),_.m(v,null))},i(z){y||(p(s.$$.fragment,z),p(i.$$.fragment,z),p(l.$$.fragment,z),p(h),p(_),y=!0)},o(z){b(s.$$.fragment,z),b(i.$$.fragment,z),b(l.$$.fragment,z),b(h),b(_),y=!1},d(z){z&&T(e),K(s),K(i),z&&T(o),z&&T(a),K(l),ee[c].d(),ue[E].d()}}}function Uy(t,e,n){let s,r,i,o;const a=ac(_c,"ex"),l=Q0(a,X0("horario","desc")),u=f=>{const v=(new Date-f)/(1e3*60*60*24);return v>=1?v:0},c=()=>{var f;return parseInt((new Date-new Date(((f=s[0].data().horario)==null?void 0:f.seconds)*1e3))/(1e3*60*60))},h=()=>{var f,g,d;return((new Date-new Date(((f=s[0].data().horario)==null?void 0:f.seconds)*1e3))/(1e3*60*60)%1*60).toFixed(0)>9?((new Date-new Date(((g=s[0].data().horario)==null?void 0:g.seconds)*1e3))/(1e3*60*60)%1*60).toFixed(0):"0"+((new Date-new Date(((d=s[0].data().horario)==null?void 0:d.seconds)*1e3))/(1e3*60*60)%1*60).toFixed(0)};return ny(l,f=>{var d;n(2,s=f.docs);let g=new Date(((d=s[0].data().horario)==null?void 0:d.seconds)*1e3);n(3,r=u(g))}),Fc(()=>{const f=setInterval(()=>{s?(n(1,i=c()),n(0,o=h())):console.log("teste")},1e3);return()=>{clearInterval(f)}}),n(2,s=null),n(3,r=void 0),n(1,i=void 0),n(0,o=void 0),[o,i,s,r]}class By extends ye{constructor(e){super(),pe(this,e,Uy,xy,$,{})}}function jy(t){let e,n,s;return n=new By({}),{c(){e=U("main"),Q(n.$$.fragment)},m(r,i){C(r,e,i),H(n,e,null),s=!0},p:X,i(r){s||(p(n.$$.fragment,r),s=!0)},o(r){b(n.$$.fragment,r),s=!1},d(r){r&&T(e),K(n)}}}class zy extends ye{constructor(e){super(),pe(this,e,null,jy,$,{})}}new zy({target:document.getElementById("app")});
