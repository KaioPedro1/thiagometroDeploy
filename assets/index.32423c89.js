(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function X(){}const Pa=t=>t;function O(t,e){for(const n in e)t[n]=e[n];return t}function Va(t){return t()}function ao(){return Object.create(null)}function Qe(t){t.forEach(Va)}function Dt(t){return typeof t=="function"}function $(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let es;function Nr(t,e){return es||(es=document.createElement("a")),es.href=e,t===es.href}function Tc(t){return Object.keys(t).length===0}function Cc(t,...e){if(t==null)return X;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Fa(t,e,n){t.$$.on_destroy.push(Cc(e,n))}function te(t,e,n,s){if(t){const r=xa(t,e,n,s);return t[0](r)}}function xa(t,e,n,s){return t[1]&&s?O(n.ctx.slice(),t[1](s(e))):n.ctx}function ne(t,e,n,s){if(t[2]&&s){const r=t[2](s(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const i=[],o=Math.max(e.dirty.length,r.length);for(let a=0;a<o;a+=1)i[a]=e.dirty[a]|r[a];return i}return e.dirty|r}return e.dirty}function se(t,e,n,s,r,i){if(r){const o=xa(e,n,s,i);t.p(o,r)}}function re(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function Y(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function ce(t,e){const n={};e=new Set(e);for(const s in t)!e.has(s)&&s[0]!=="$"&&(n[s]=t[s]);return n}function Ua(t){const e={};for(const n in t)e[n]=!0;return e}function Ic(t,e,n){return t.set(n),e}function ui(t){return t&&Dt(t.destroy)?t.destroy:X}const Ba=typeof window<"u";let ja=Ba?()=>window.performance.now():()=>Date.now(),ci=Ba?t=>requestAnimationFrame(t):X;const Ft=new Set;function za(t){Ft.forEach(e=>{e.c(t)||(Ft.delete(e),e.f())}),Ft.size!==0&&ci(za)}function qa(t){let e;return Ft.size===0&&ci(za),{promise:new Promise(n=>{Ft.add(e={c:t,f:n})}),abort(){Ft.delete(e)}}}function z(t,e){t.appendChild(e)}function Ha(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Sc(t){const e=B("style");return Ac(Ha(t),e),e.sheet}function Ac(t,e){return z(t.head||t,e),e.sheet}function C(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function hi(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function B(t){return document.createElement(t)}function ge(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function De(t){return document.createTextNode(t)}function oe(){return De(" ")}function Re(){return De("")}function V(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function Dc(t){return function(e){return e.preventDefault(),t.call(this,e)}}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ie(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const s in e)e[s]==null?t.removeAttribute(s):s==="style"?t.style.cssText=e[s]:s==="__value"?t.value=t[s]=e[s]:n[s]&&n[s].set?t[s]=e[s]:m(t,s,e[s])}function qe(t,e){Object.keys(e).forEach(n=>{Nc(t,n,e[n])})}function Nc(t,e,n){e in t?t[e]=typeof t[e]=="boolean"&&n===""?!0:n:m(t,e,n)}function Rc(t){return Array.from(t.childNodes)}function ot(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function lo(t,e){t.value=e==null?"":e}function ts(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function uo(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];s.selected=~e.indexOf(s.__value)}}function Lc(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function co(t,e,n){t.classList[n?"add":"remove"](e)}function Ka(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,s,e),r}const ms=new Map;let ps=0;function Mc(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Oc(t,e){const n={stylesheet:Sc(e),rules:{}};return ms.set(t,n),n}function Rr(t,e,n,s,r,i,o,a=0){const l=16.666/s;let u=`{
`;for(let k=0;k<=1;k+=l){const E=e+(n-e)*i(k);u+=k*100+`%{${o(E,1-E)}}
`}const c=u+`100% {${o(n,1-n)}}
}`,h=`__svelte_${Mc(c)}_${a}`,f=Ha(t),{stylesheet:g,rules:d}=ms.get(f)||Oc(f,t);d[h]||(d[h]=!0,g.insertRule(`@keyframes ${h} ${c}`,g.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${h} ${s}ms linear ${r}ms 1 both`,ps+=1,h}function Lr(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),r=n.length-s.length;r&&(t.style.animation=s.join(", "),ps-=r,ps||Pc())}function Pc(){ci(()=>{ps||(ms.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&T(e)}),ms.clear())})}let _n;function fn(t){_n=t}function fi(){if(!_n)throw new Error("Function called outside component initialization");return _n}function Vc(){const t=fi();return(e,n,{cancelable:s=!1}={})=>{const r=t.$$.callbacks[e];if(r){const i=Ka(e,n,{cancelable:s});return r.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}function ys(t,e){return fi().$$.context.set(t,e),e}function Vn(t){return fi().$$.context.get(t)}function R(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(s=>s.call(this,e))}const an=[],Ct=[],us=[],Mr=[],Fc=Promise.resolve();let Or=!1;function xc(){Or||(Or=!0,Fc.then(Ga))}function ht(t){us.push(t)}function ho(t){Mr.push(t)}const lr=new Set;let ns=0;function Ga(){const t=_n;do{for(;ns<an.length;){const e=an[ns];ns++,fn(e),Uc(e.$$)}for(fn(null),an.length=0,ns=0;Ct.length;)Ct.pop()();for(let e=0;e<us.length;e+=1){const n=us[e];lr.has(n)||(lr.add(n),n())}us.length=0}while(an.length);for(;Mr.length;)Mr.pop()();Or=!1,lr.clear(),fn(t)}function Uc(t){if(t.fragment!==null){t.update(),Qe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ht)}}let rn;function Qa(){return rn||(rn=Promise.resolve(),rn.then(()=>{rn=null})),rn}function dn(t,e,n){t.dispatchEvent(Ka(`${e?"intro":"outro"}${n}`))}const cs=new Set;let Ze;function xe(){Ze={r:0,c:[],p:Ze}}function Ue(){Ze.r||Qe(Ze.c),Ze=Ze.p}function p(t,e){t&&t.i&&(cs.delete(t),t.i(e))}function b(t,e,n,s){if(t&&t.o){if(cs.has(t))return;cs.add(t),Ze.c.push(()=>{cs.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}const Wa={duration:0};function Bc(t,e,n){let s=e(t,n),r=!1,i,o,a=0;function l(){i&&Lr(t,i)}function u(){const{delay:h=0,duration:f=300,easing:g=Pa,tick:d=X,css:y}=s||Wa;y&&(i=Rr(t,0,1,f,h,g,y,a++)),d(0,1);const k=ja()+h,E=k+f;o&&o.abort(),r=!0,ht(()=>dn(t,!0,"start")),o=qa(v=>{if(r){if(v>=E)return d(1,0),dn(t,!0,"end"),l(),r=!1;if(v>=k){const A=g((v-k)/f);d(A,1-A)}}return r})}let c=!1;return{start(){c||(c=!0,Lr(t),Dt(s)?(s=s(),Qa().then(u)):u())},invalidate(){c=!1},end(){r&&(l(),r=!1)}}}function fo(t,e,n,s){let r=e(t,n),i=s?0:1,o=null,a=null,l=null;function u(){l&&Lr(t,l)}function c(f,g){const d=f.b-i;return g*=Math.abs(d),{a:i,b:f.b,d,duration:g,start:f.start,end:f.start+g,group:f.group}}function h(f){const{delay:g=0,duration:d=300,easing:y=Pa,tick:k=X,css:E}=r||Wa,v={start:ja()+g,b:f};f||(v.group=Ze,Ze.r+=1),o||a?a=v:(E&&(u(),l=Rr(t,i,f,d,g,y,E)),f&&k(0,1),o=c(v,d),ht(()=>dn(t,f,"start")),qa(A=>{if(a&&A>a.start&&(o=c(a,d),a=null,dn(t,o.b,"start"),E&&(u(),l=Rr(t,i,o.b,o.duration,0,y,r.css))),o){if(A>=o.end)k(i=o.b,1-i),dn(t,o.b,"end"),a||(o.b?u():--o.group.r||Qe(o.group.c)),o=null;else if(A>=o.start){const he=A-o.start;i=o.a+o.d*y(he/o.duration),k(i,1-i)}}return!!(o||a)}))}return{run(f){Dt(r)?Qa().then(()=>{r=r(),h(f)}):h(f)},end(){u(),o=a=null}}}function Le(t,e){const n={},s={},r={$$scope:1};let i=t.length;for(;i--;){const o=t[i],a=e[i];if(a){for(const l in o)l in a||(s[l]=1);for(const l in a)r[l]||(n[l]=a[l],r[l]=1);t[i]=a}else for(const l in o)r[l]=1}for(const o in s)o in n||(n[o]=void 0);return n}function Vs(t){return typeof t=="object"&&t!==null?t:{}}function go(t,e,n){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function Q(t){t&&t.c()}function H(t,e,n,s){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),s||ht(()=>{const o=t.$$.on_mount.map(Va).filter(Dt);t.$$.on_destroy?t.$$.on_destroy.push(...o):Qe(o),t.$$.on_mount=[]}),i.forEach(ht)}function K(t,e){const n=t.$$;n.fragment!==null&&(Qe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function jc(t,e){t.$$.dirty[0]===-1&&(an.push(t),xc(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function pe(t,e,n,s,r,i,o,a=[-1]){const l=_n;fn(t);const u=t.$$={fragment:null,ctx:[],props:i,update:X,not_equal:r,bound:ao(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:ao(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(h,f,...g)=>{const d=g.length?g[0]:f;return u.ctx&&r(u.ctx[h],u.ctx[h]=d)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](d),c&&jc(t,h)),f}):[],u.update(),c=!0,Qe(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const h=Rc(e.target);u.fragment&&u.fragment.l(h),h.forEach(T)}else u.fragment&&u.fragment.c();e.intro&&p(t.$$.fragment),H(t,e.target,e.anchor,e.customElement),Ga()}fn(l)}class ye{$destroy(){K(this,1),this.$destroy=X}$on(e,n){if(!Dt(n))return X;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}$set(e){this.$$set&&!Tc(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Mt=[];function zc(t,e=X){let n;const s=new Set;function r(a){if($(t,a)&&(t=a,n)){const l=!Mt.length;for(const u of s)u[1](),Mt.push(u,t);if(l){for(let u=0;u<Mt.length;u+=2)Mt[u][0](Mt[u+1]);Mt.length=0}}}function i(a){r(a(t))}function o(a,l=X){const u=[a,l];return s.add(u),s.size===1&&(n=e(r)||X),a(t),()=>{s.delete(u),s.size===0&&(n(),n=null)}}return{set:r,update:i,subscribe:o}}var Xa={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s=[],r=0;r<arguments.length;r++){var i=arguments[r];if(!!i){var o=typeof i;if(o==="string"||o==="number")s.push(i);else if(Array.isArray(i)){if(i.length){var a=n.apply(null,i);a&&s.push(a)}}else if(o==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){s.push(i.toString());continue}for(var l in i)e.call(i,l)&&i[l]&&s.push(l)}}}return s.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(Xa);const ae=Xa.exports;function qc(t){let e=t[1],n,s,r=t[1]&&ur(t);return{c(){r&&r.c(),n=Re()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,o){i[1]?e?$(e,i[1])?(r.d(1),r=ur(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=ur(i),r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null),e=i[1]},i(i){s||(p(r),s=!0)},o(i){b(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function Hc(t){let e=t[1],n,s,r=t[1]&&cr(t);return{c(){r&&r.c(),n=Re()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,o){i[1]?e?$(e,i[1])?(r.d(1),r=cr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=cr(i),r.c(),p(r),r.m(n.parentNode,n)):e&&(xe(),b(r,1,1,()=>{r=null}),Ue()),e=i[1]},i(i){s||(p(r),s=!0)},o(i){b(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function ur(t){let e,n,s,r,i;const o=t[13].default,a=te(o,t,t[12],null);let l=[t[7],{class:t[6]}],u={};for(let c=0;c<l.length;c+=1)u=O(u,l[c]);return{c(){e=B(t[1]),a&&a.c(),/-/.test(t[1])?qe(e,u):ie(e,u)},m(c,h){C(c,e,h),a&&a.m(e,null),t[23](e),s=!0,r||(i=[ui(n=t[4].call(null,e,t[5])),V(e,"mouseenter",t[18]),V(e,"mouseleave",t[19]),V(e,"focusin",t[20]),V(e,"focusout",t[21])],r=!0)},p(c,h){a&&a.p&&(!s||h&4096)&&se(a,o,c,c[12],s?ne(o,c[12],h,null):re(c[12]),null),u=Le(l,[h&128&&c[7],(!s||h&64)&&{class:c[6]}]),/-/.test(c[1])?qe(e,u):ie(e,u),n&&Dt(n.update)&&h&32&&n.update.call(null,c[5])},i(c){s||(p(a,c),s=!0)},o(c){b(a,c),s=!1},d(c){c&&T(e),a&&a.d(c),t[23](null),r=!1,Qe(i)}}}function cr(t){let e,n,s,r,i,o;const a=t[13].default,l=te(a,t,t[12],null);let u=[t[7],{class:t[6]}],c={};for(let h=0;h<u.length;h+=1)c=O(c,u[h]);return{c(){e=B(t[1]),l&&l.c(),/-/.test(t[1])?qe(e,c):ie(e,c)},m(h,f){C(h,e,f),l&&l.m(e,null),t[22](e),r=!0,i||(o=[ui(n=t[4].call(null,e,t[5])),V(e,"mouseenter",t[14]),V(e,"mouseleave",t[15]),V(e,"focusin",t[16]),V(e,"focusout",t[17])],i=!0)},p(h,f){t=h,l&&l.p&&(!r||f&4096)&&se(l,a,t,t[12],r?ne(a,t[12],f,null):re(t[12]),null),c=Le(u,[f&128&&t[7],(!r||f&64)&&{class:t[6]}]),/-/.test(t[1])?qe(e,c):ie(e,c),n&&Dt(n.update)&&f&32&&n.update.call(null,t[5])},i(h){r||(p(l,h),ht(()=>{s||(s=fo(e,t[2],t[3],!0)),s.run(1)}),r=!0)},o(h){b(l,h),s||(s=fo(e,t[2],t[3],!1)),s.run(0),r=!1},d(h){h&&T(e),l&&l.d(h),t[22](null),h&&s&&s.end(),i=!1,Qe(o)}}}function Kc(t){let e,n,s,r;const i=[Hc,qc],o=[];function a(l,u){return l[2]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Re()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(xe(),b(o[c],1,1,()=>{o[c]=null}),Ue(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),p(n,1),n.m(s.parentNode,s))},i(l){r||(p(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function Gc(t,e,n){const s=["tag","color","rounded","border","shadow","transition","params","node","use","options"];let r=ce(e,s),{$$slots:i={},$$scope:o}=e;ys("background",!0);let{tag:a="div"}=e,{color:l="default"}=e,{rounded:u=!1}=e,{border:c=!1}=e,{shadow:h=!1}=e,{transition:f=void 0}=e,{params:g={}}=e,{node:d=void 0}=e,{use:y=X}=e,{options:k={}}=e;const E={gray:"bg-gray-100 dark:bg-gray-200 ",red:"bg-red-100 dark:bg-red-200",yellow:"bg-yellow-100 dark:bg-yellow-200 ",green:"bg-green-100 dark:bg-green-200 ",indigo:"bg-indigo-100 dark:bg-indigo-200 ",purple:"bg-purple-100 dark:bg-purple-200 ",pink:"bg-pink-100 dark:bg-pink-200 ",blue:"bg-blue-100 dark:bg-blue-200 ",light:"bg-gray-50 dark:bg-gray-700",dark:"bg-gray-100 dark:bg-gray-700",default:"bg-white dark:bg-gray-800",dropdown:"bg-white dark:bg-gray-700",navbar:"bg-white dark:bg-gray-900",navbarUl:"bg-gray-50 dark:bg-gray-800",form:"bg-gray-50 dark:bg-gray-700",primary:"bg-primary-100 dark:bg-primary-200 ",none:""},v={gray:"text-gray-700 dark:text-gray-800",red:"text-red-700 dark:text-red-800",yellow:"text-yellow-700 dark:text-yellow-800",green:"text-green-700 dark:text-green-800",indigo:"text-indigo-700 dark:text-indigo-800",purple:"text-purple-700 dark:text-purple-800",pink:"text-pink-700 dark:text-pink-800",blue:"text-blue-700 dark:text-blue-800",light:"text-gray-700 dark:text-gray-300",dark:"text-gray-700 dark:text-gray-300",default:"text-gray-500 dark:text-gray-400",dropdown:"text-gray-700 dark:text-gray-200",navbar:"text-gray-700 dark:text-gray-200",navbarUl:"text-gray-700 dark:text-gray-400",form:"text-gray-900 dark:text-white",primary:"text-primary-700 dark:text-primary-800",none:""},A={gray:"border-gray-500 dark:bg-gray-200 ",red:"border-red-500 dark:bg-red-200 ",yellow:"border-yellow-500 dark:bg-tellow-200 ",green:"border-green-500 dark:bg-green-200 ",indigo:"border-indigo-500 dark:bg-indigo-200 ",purple:"border-purple-500 dark:bg-purple-200 ",pink:"border-pink-500 dark:bg-pink-200 ",blue:"border-blue-500 dark:bg-blue-200 ",light:"border-gray-500",dark:"border-gray-500",default:"border-gray-200 dark:border-gray-700",dropdown:"border-gray-100 dark:border-gray-700",navbar:"border-gray-100 dark:border-gray-700",navbarUl:"border-gray-100 dark:border-gray-700",form:"border-gray-300 dark:border-gray-700",primary:"border-primary-500 dark:bg-primary-200 ",none:""};let he;function _e(S){R.call(this,t,S)}function de(S){R.call(this,t,S)}function Te(S){R.call(this,t,S)}function j(S){R.call(this,t,S)}function fe(S){R.call(this,t,S)}function We(S){R.call(this,t,S)}function I(S){R.call(this,t,S)}function at(S){R.call(this,t,S)}function yt(S){Ct[S?"unshift":"push"](()=>{d=S,n(0,d)})}function ar(S){Ct[S?"unshift":"push"](()=>{d=S,n(0,d)})}return t.$$set=S=>{n(27,e=O(O({},e),Y(S))),n(7,r=ce(e,s)),"tag"in S&&n(1,a=S.tag),"color"in S&&n(8,l=S.color),"rounded"in S&&n(9,u=S.rounded),"border"in S&&n(10,c=S.border),"shadow"in S&&n(11,h=S.shadow),"transition"in S&&n(2,f=S.transition),"params"in S&&n(3,g=S.params),"node"in S&&n(0,d=S.node),"use"in S&&n(4,y=S.use),"options"in S&&n(5,k=S.options),"$$scope"in S&&n(12,o=S.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&ys("color",l),n(6,he=ae(E[l],v[l],u&&(l==="dropdown"?"rounded":"rounded-lg"),c&&"border",A[l],h&&"shadow-md",e.class))},e=Y(e),[d,a,f,g,y,k,he,r,l,u,c,h,o,i,_e,de,Te,j,fe,We,I,at,yt,ar]}class Ya extends ye{constructor(e){super(),pe(this,e,Gc,Kc,$,{tag:1,color:8,rounded:9,border:10,shadow:11,transition:2,params:3,node:0,use:4,options:5})}}function Qc(t){const e=t-1;return e*e*e+1}function Wc(t,{delay:e=0,duration:n=400,easing:s=Qc,start:r=0,opacity:i=0}={}){const o=getComputedStyle(t),a=+o.opacity,l=o.transform==="none"?"":o.transform,u=1-r,c=a*(1-i);return{delay:e,duration:n,easing:s,css:(h,f)=>`
			transform: ${l} scale(${1-u*f});
			opacity: ${a-c*f}
		`}}function Xc(t){let e,n,s,r,i,o;return{c(){e=B("span"),n=De(t[0]),s=oe(),r=ge("svg"),i=ge("path"),m(e,"class","sr-only"),m(i,"fill-rule","evenodd"),m(i,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),m(i,"clip-rule","evenodd"),m(r,"class",o=t[3][t[1]]),m(r,"fill","currentColor"),m(r,"viewBox","0 0 20 20"),m(r,"xmlns","http://www.w3.org/2000/svg")},m(a,l){C(a,e,l),z(e,n),C(a,s,l),C(a,r,l),z(r,i)},p(a,l){l&1&&ot(n,a[0]),l&2&&o!==(o=a[3][a[1]])&&m(r,"class",o)},d(a){a&&T(e),a&&T(s),a&&T(r)}}}function Yc(t){let e,n,s,r;const i=t[6].default,o=te(i,t,t[5],null),a=o||Xc(t);return{c(){e=B("button"),a&&a.c(),m(e,"type","button"),m(e,"class",t[2]),m(e,"aria-label","Close")},m(l,u){C(l,e,u),a&&a.m(e,null),n=!0,s||(r=V(e,"click",t[7]),s=!0)},p(l,[u]){o?o.p&&(!n||u&32)&&se(o,i,l,l[5],n?ne(i,l[5],u,null):re(l[5]),null):a&&a.p&&(!n||u&3)&&a.p(l,n?u:-1),(!n||u&4)&&m(e,"class",l[2])},i(l){n||(p(a,l),n=!0)},o(l){b(a,l),n=!1},d(l){l&&T(e),a&&a.d(l),s=!1,r()}}}function Jc(t,e,n){let{$$slots:s={},$$scope:r}=e;const i=Vn("background");let{color:o="default"}=e,{name:a="Close"}=e,{size:l="md"}=e;const u={dark:"hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600",gray:"focus:ring-gray-400 hover:bg-gray-200 dark:hover:bg-gray-300",red:"focus:ring-red-400 hover:bg-red-200 dark:hover:bg-red-300",yellow:"focus:ring-yellow-400 hover:bg-yellow-200 dark:hover:bg-yellow-300",green:"focus:ring-green-400 hover:bg-green-200 dark:hover:bg-green-300",indigo:"focus:ring-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-300",purple:"focus:ring-purple-400 hover:bg-purple-200 dark:hover:bg-purple-300",pink:"focus:ring-pink-400 hover:bg-pink-200 dark:hover:bg-pink-300",blue:"focus:ring-blue-400 hover:bg-blue-200 dark:hover:bg-blue-300",default:"focus:ring-gray-300 "},c={xs:"m-0.5 rounded focus:ring-1 p-0.5",sm:"m-0.5 rounded focus:ring-1 p-0.5",md:"rounded-lg focus:ring-2 p-1.5"};let h="";const f={xs:"w-3 h-3",sm:"w-3.5 h-3.5",md:"w-5 h-5"};function g(d){R.call(this,t,d)}return t.$$set=d=>{n(11,e=O(O({},e),Y(d))),"color"in d&&n(4,o=d.color),"name"in d&&n(0,a=d.name),"size"in d&&n(1,l=d.size),"$$scope"in d&&n(5,r=d.$$scope)},t.$$.update=()=>{n(2,h=ae("ml-auto focus:outline-none whitespace-normal",c[l],u[o],o==="default"&&(i?"hover:bg-gray-100 dark:hover:bg-gray-600":"hover:bg-gray-100 dark:hover:bg-gray-700"),e.class))},e=Y(e),[a,l,h,f,o,r,s,g]}class Zc extends ye{constructor(e){super(),pe(this,e,Jc,Yc,$,{color:4,name:0,size:1})}}function $c(t){let e,n,s;return{c(){e=ge("svg"),n=ge("path"),m(n,"fill-rule","evenodd"),m(n,"d","M8 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"),m(n,"clip-rule","evenodd"),m(e,"class",s="text-gray-400 bg-gray-100 dark:bg-gray-600 "+(t[0]?"rounded":"rounded-full")),m(e,"fill","currentColor"),m(e,"viewBox","0 0 16 16"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(r,i){C(r,e,i),z(e,n)},p(r,[i]){i&1&&s!==(s="text-gray-400 bg-gray-100 dark:bg-gray-600 "+(r[0]?"rounded":"rounded-full"))&&m(e,"class",s)},i:X,o:X,d(r){r&&T(e)}}}function eh(t,e,n){let{rounded:s=!1}=e;return t.$$set=r=>{"rounded"in r&&n(0,s=r.rounded)},[s]}class th extends ye{constructor(e){super(),pe(this,e,eh,$c,$,{rounded:0})}}function nh(t){let e;const n=t[8].default,s=te(n,t,t[7],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&128)&&se(s,n,r,r[7],e?ne(n,r[7],i,null):re(r[7]),null)},i(r){e||(p(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function sh(t){let e,n,s,r;const i=t[8].default,o=te(i,t,t[7],null);return{c(){e=B("div"),o&&o.c(),n=oe(),s=B("span"),m(s,"class",t[1]),m(e,"class",t[2])},m(a,l){C(a,e,l),o&&o.m(e,null),z(e,n),z(e,s),r=!0},p(a,l){o&&o.p&&(!r||l&128)&&se(o,i,a,a[7],r?ne(i,a[7],l,null):re(a[7]),null),(!r||l&2)&&m(s,"class",a[1]),(!r||l&4)&&m(e,"class",a[2])},i(a){r||(p(o,a),r=!0)},o(a){b(o,a),r=!1},d(a){a&&T(e),o&&o.d(a)}}}function rh(t){let e,n,s,r;const i=[sh,nh],o=[];function a(l,u){return l[0]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Re()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(xe(),b(o[c],1,1,()=>{o[c]=null}),Ue(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),p(n,1),n.m(s.parentNode,s))},i(l){r||(p(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function ih(t,e,n){let{$$slots:s={},$$scope:r}=e,{show:i=!1}=e,{top:o=!1}=e,{color:a="bg-gray-300 dark:bg-gray-500"}=e,{rounded:l=!1}=e,{size:u="md"}=e;const c={xs:"w-2.5 h-2.5",sm:"w-3 h-3",md:"w-3.5 h-3.5",lg:"w-6 h-6",xl:"w-10 h-10"},h={xs:["left-4","left-5"],sm:["left-6","left-6"],md:["left-7","left-8"],lg:["left-14","left-16"],xl:["left-24","left-32"]};let f,g;return t.$$set=d=>{n(11,e=O(O({},e),Y(d))),"show"in d&&n(0,i=d.show),"top"in d&&n(3,o=d.top),"color"in d&&n(4,a=d.color),"rounded"in d&&n(5,l=d.rounded),"size"in d&&n(6,u=d.size),"$$scope"in d&&n(7,r=d.$$scope)},t.$$.update=()=>{t.$$.dirty&120&&n(1,f=ae("absolute rounded-full border-white dark:border-gray-800 border-2",c[u],h[u][+l],o?"top-0":"bottom-0",l&&o&&"transform -translate-y-1/2",l&&!o&&"transform translate-y-1/4",a)),n(2,g=ae("relative flex-shrink-0",e.class))},e=Y(e),[i,f,g,o,a,l,u,r,s]}class oh extends ye{constructor(e){super(),pe(this,e,ih,rh,$,{show:0,top:3,color:4,rounded:5,size:6})}}function ah(t){let e=t[1]?"a":"div",n,s=(t[1]?"a":"div")&&hr(t);return{c(){s&&s.c(),n=Re()},m(r,i){s&&s.m(r,i),C(r,n,i)},p(r,i){r[1],e?$(e,r[1]?"a":"div")?(s.d(1),s=hr(r),s.c(),s.m(n.parentNode,n)):s.p(r,i):(s=hr(r),s.c(),s.m(n.parentNode,n)),e=r[1]?"a":"div"},i:X,o(r){b(s)},d(r){r&&T(n),s&&s.d(r)}}}function lh(t){let e=t[1]?"a":"div",n,s,r=(t[1]?"a":"div")&&fr(t);return{c(){r&&r.c(),n=Re()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,o){i[1],e?$(e,i[1]?"a":"div")?(r.d(1),r=fr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=fr(i),r.c(),r.m(n.parentNode,n)),e=i[1]?"a":"div"},i(i){s||(p(r),s=!0)},o(i){b(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function uh(t){let e,n,s=[{alt:t[4]},{src:n=t[0]},t[9],{class:t[6]}],r={};for(let i=0;i<s.length;i+=1)r=O(r,s[i]);return{c(){e=B("img"),ie(e,r)},m(i,o){C(i,e,o)},p(i,o){ie(e,r=Le(s,[o&16&&{alt:i[4]},o&1&&!Nr(e.src,n=i[0])&&{src:n},o&512&&i[9],o&64&&{class:i[6]}]))},i:X,o:X,d(i){i&&T(e)}}}function hr(t){let e,n,s;n=new th({props:{rounded:t[2]}});let r=[t[9],{class:t[6]}],i={};for(let o=0;o<r.length;o+=1)i=O(i,r[o]);return{c(){e=B(t[1]?"a":"div"),Q(n.$$.fragment),/-/.test(t[1]?"a":"div")?qe(e,i):ie(e,i)},m(o,a){C(o,e,a),H(n,e,null),s=!0},p(o,a){const l={};a&4&&(l.rounded=o[2]),n.$set(l),i=Le(r,[a&512&&o[9],(!s||a&64)&&{class:o[6]}]),/-/.test(o[1]?"a":"div")?qe(e,i):ie(e,i)},i(o){s||(p(n.$$.fragment,o),s=!0)},o(o){b(n.$$.fragment,o),s=!1},d(o){o&&T(e),K(n)}}}function fr(t){let e,n,s;const r=t[13].default,i=te(r,t,t[14],null);let o=[{href:t[1]},t[9],{class:n="flex justify-center items-center text-xs font-medium "+t[6]}],a={};for(let l=0;l<o.length;l+=1)a=O(a,o[l]);return{c(){e=B(t[1]?"a":"div"),i&&i.c(),/-/.test(t[1]?"a":"div")?qe(e,a):ie(e,a)},m(l,u){C(l,e,u),i&&i.m(e,null),s=!0},p(l,u){i&&i.p&&(!s||u&16384)&&se(i,r,l,l[14],s?ne(r,l[14],u,null):re(l[14]),null),a=Le(o,[(!s||u&2)&&{href:l[1]},u&512&&l[9],(!s||u&64&&n!==(n="flex justify-center items-center text-xs font-medium "+l[6]))&&{class:n}]),/-/.test(l[1]?"a":"div")?qe(e,a):ie(e,a)},i(l){s||(p(i,l),s=!0)},o(l){b(i,l),s=!1},d(l){l&&T(e),i&&i.d(l)}}}function ch(t){let e,n,s,r;const i=[uh,lh,ah],o=[];function a(l,u){return l[0]?0:l[10].default?1:2}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Re()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,u){let c=e;e=a(l),e===c?o[e].p(l,u):(xe(),b(o[c],1,1,()=>{o[c]=null}),Ue(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),p(n,1),n.m(s.parentNode,s))},i(l){r||(p(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function hh(t){let e,n;const s=[{show:t[8].dot},{rounded:t[2]},t[3],{size:t[5]},{class:t[7][t[5]]}];let r={$$slots:{default:[ch]},$$scope:{ctx:t}};for(let i=0;i<s.length;i+=1)r=O(r,s[i]);return e=new oh({props:r}),{c(){Q(e.$$.fragment)},m(i,o){H(e,i,o),n=!0},p(i,[o]){const a=o&428?Le(s,[o&256&&{show:i[8].dot},o&4&&{rounded:i[2]},o&8&&Vs(i[3]),o&32&&{size:i[5]},o&160&&{class:i[7][i[5]]}]):{};o&18007&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){n||(p(e.$$.fragment,i),n=!0)},o(i){b(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function fh(t,e,n){const s=["src","href","rounded","border","stacked","dot","alt","size"];let r=ce(e,s),{$$slots:i={},$$scope:o}=e;const a=Ua(i);let{src:l=""}=e,{href:u="#"}=e,{rounded:c=!1}=e,{border:h=!1}=e,{stacked:f=!1}=e,{dot:g={top:!1,color:"bg-gray-300 dark:bg-gray-500"}}=e,{alt:d=""}=e,{size:y="md"}=e;const k={xs:"w-6 h-6",sm:"w-8 h-8",md:"w-10 h-10",lg:"w-20 h-20",xl:"w-36 h-36"};let E;return t.$$set=v=>{n(8,e=O(O({},e),Y(v))),n(9,r=ce(e,s)),"src"in v&&n(0,l=v.src),"href"in v&&n(1,u=v.href),"rounded"in v&&n(2,c=v.rounded),"border"in v&&n(11,h=v.border),"stacked"in v&&n(12,f=v.stacked),"dot"in v&&n(3,g=v.dot),"alt"in v&&n(4,d=v.alt),"size"in v&&n(5,y=v.size),"$$scope"in v&&n(14,o=v.$$scope)},t.$$.update=()=>{n(6,E=ae(c?"rounded":"rounded-full",h&&"p-1 ring-2 ring-gray-300 dark:ring-gray-500",k[y],f&&"border-2 -ml-4 border-white dark:border-gray-800","bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300",e.class))},e=Y(e),[l,u,c,g,d,y,E,k,e,r,a,h,f,i,o]}class dh extends ye{constructor(e){super(),pe(this,e,fh,hh,$,{src:0,href:1,rounded:2,border:11,stacked:12,dot:3,alt:4,size:5})}}function mo(t){let e,n;return e=new Zc({props:{color:t[0],size:t[1]?"sm":"xs",class:"ml-1.5 -mr-1.5"}}),e.$on("click",t[6]),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,r){const i={};r&1&&(i.color=s[0]),r&2&&(i.size=s[1]?"sm":"xs"),e.$set(i)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function dr(t){let e,n,s;const r=t[12].default,i=te(r,t,t[11],null);let o=t[3]&&mo(t),a=[{href:t[2]},t[7],{class:t[5]}],l={};for(let u=0;u<a.length;u+=1)l=O(l,a[u]);return{c(){e=B(t[2]?"a":"span"),i&&i.c(),n=oe(),o&&o.c(),/-/.test(t[2]?"a":"span")?qe(e,l):ie(e,l),co(e,"hidden",t[4])},m(u,c){C(u,e,c),i&&i.m(e,null),z(e,n),o&&o.m(e,null),s=!0},p(u,c){i&&i.p&&(!s||c&2048)&&se(i,r,u,u[11],s?ne(r,u[11],c,null):re(u[11]),null),u[3]?o?(o.p(u,c),c&8&&p(o,1)):(o=mo(u),o.c(),p(o,1),o.m(e,null)):o&&(xe(),b(o,1,1,()=>{o=null}),Ue()),l=Le(a,[(!s||c&4)&&{href:u[2]},c&128&&u[7],(!s||c&32)&&{class:u[5]}]),/-/.test(u[2]?"a":"span")?qe(e,l):ie(e,l),co(e,"hidden",u[4])},i(u){s||(p(i,u),p(o),s=!0)},o(u){b(i,u),b(o),s=!1},d(u){u&&T(e),i&&i.d(u),o&&o.d()}}}function gh(t){let e=t[2]?"a":"span",n,s,r=(t[2]?"a":"span")&&dr(t);return{c(){r&&r.c(),n=Re()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,[o]){i[2],e?$(e,i[2]?"a":"span")?(r.d(1),r=dr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=dr(i),r.c(),r.m(n.parentNode,n)),e=i[2]?"a":"span"},i(i){s||(p(r),s=!0)},o(i){b(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function mh(t,e,n){const s=["color","large","href","rounded","index","dismissable","baseClass"];let r=ce(e,s),{$$slots:i={},$$scope:o}=e,{color:a="blue"}=e,{large:l=!1}=e,{href:u=void 0}=e,{rounded:c=!1}=e,{index:h=!1}=e,{dismissable:f=!1}=e,{baseClass:g="inline-flex items-center justify-center -mb-0.5"}=e,d=!1;const y={blue:"bg-blue-100 text-blue-800 dark:bg-blue-200 dark:text-blue-800",dark:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",red:"bg-red-100 text-red-800 dark:bg-red-200 dark:text-red-900",green:"bg-green-100 text-green-800 dark:bg-green-200 dark:text-green-900",yellow:"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900",indigo:"bg-indigo-100 text-indigo-800 dark:bg-indigo-200 dark:text-indigo-900",purple:"bg-purple-100 text-purple-800 dark:bg-purple-200 dark:text-purple-900",pink:"bg-pink-100 text-pink-800 dark:bg-pink-200 dark:text-pink-900",["!blue"]:"bg-blue-500 text-blue-100",["!dark"]:"bg-gray-500 text-gray-100",["!red"]:"bg-red-500 text-white",["!green"]:"bg-green-500 text-green-100",["!yellow"]:"bg-yellow-300 text-yellow-800",["!indigo"]:"bg-indigo-500 text-indigo-100",["!purple"]:"bg-purple-500 text-purple-100",["!pink"]:"bg-pink-500 text-pink-100"},k={blue:"hover:bg-blue-200 dark:hover:bg-blue-300",dark:"hover:bg-gray-200 dark:hover:bg-gray-300",red:"hover:bg-red-200 dark:hover:bg-red-300",green:"hover:bg-green-200 dark:hover:bg-green-300",yellow:"hover:bg-yellow-200 dark:hover:bg-yellow-300",indigo:"hover:bg-indigo-200 dark:hover:bg-indigo-300",purple:"hover:bg-purple-200 dark:hover:bg-purple-300",pink:"hover:bg-pink-200 dark:hover:bg-pink-300"};let E;const v=()=>{n(4,d=!d)};return t.$$set=A=>{n(15,e=O(O({},e),Y(A))),n(7,r=ce(e,s)),"color"in A&&n(0,a=A.color),"large"in A&&n(1,l=A.large),"href"in A&&n(2,u=A.href),"rounded"in A&&n(8,c=A.rounded),"index"in A&&n(9,h=A.index),"dismissable"in A&&n(3,f=A.dismissable),"baseClass"in A&&n(10,g=A.baseClass),"$$scope"in A&&n(11,o=A.$$scope)},t.$$.update=()=>{var A;n(5,E=ae(g,l?"text-sm font-medium":"text-xs font-semibold",y[a],u&&((A=k[a])!=null?A:k.blue),c?"rounded-full p-1":"rounded px-2.5 py-0.5",h&&"absolute font-bold border-2 border-white dark:border-gray-900",h&&(l?"w-7 h-7 -top-3 -right-3":"w-6 h-6 -top-2 -right-2"),e.class))},e=Y(e),[a,l,u,f,d,E,v,r,c,h,g,o,i]}class ph extends ye{constructor(e){super(),pe(this,e,mh,gh,$,{color:0,large:1,href:2,rounded:8,index:9,dismissable:3,baseClass:10})}}function yh(t){let e;const n=t[10].default,s=te(n,t,t[11],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&2048)&&se(s,n,r,r[11],e?ne(n,r[11],i,null):re(r[11]),null)},i(r){e||(p(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function vh(t){let e,n,s,r,i;const o=t[10].default,a=te(o,t,t[11],null);return{c(){e=B("img"),s=oe(),r=B("div"),a&&a.c(),m(e,"class",t[4]),Nr(e.src,n=t[1])||m(e,"src",n),m(e,"alt",""),m(r,"class",t[2])},m(l,u){C(l,e,u),C(l,s,u),C(l,r,u),a&&a.m(r,null),i=!0},p(l,u){(!i||u&16)&&m(e,"class",l[4]),(!i||u&2&&!Nr(e.src,n=l[1]))&&m(e,"src",n),a&&a.p&&(!i||u&2048)&&se(a,o,l,l[11],i?ne(o,l[11],u,null):re(l[11]),null),(!i||u&4)&&m(r,"class",l[2])},i(l){i||(p(a,l),i=!0)},o(l){b(a,l),i=!1},d(l){l&&T(e),l&&T(s),l&&T(r),a&&a.d(l)}}}function bh(t){let e,n,s,r;const i=[vh,yh],o=[];function a(l,u){return l[1]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Re()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,u){let c=e;e=a(l),e===c?o[e].p(l,u):(xe(),b(o[c],1,1,()=>{o[c]=null}),Ue(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),p(n,1),n.m(s.parentNode,s))},i(l){r||(p(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function _h(t){let e,n;const s=[{tag:t[0]?"a":"div"},{rounded:!0},{shadow:!0},{border:!0},{href:t[0]},t[5],{class:t[3]}];let r={$$slots:{default:[bh]},$$scope:{ctx:t}};for(let i=0;i<s.length;i+=1)r=O(r,s[i]);return e=new Ya({props:r}),{c(){Q(e.$$.fragment)},m(i,o){H(e,i,o),n=!0},p(i,[o]){const a=o&41?Le(s,[o&1&&{tag:i[0]?"a":"div"},s[1],s[2],s[3],o&1&&{href:i[0]},o&32&&Vs(i[5]),o&8&&{class:i[3]}]):{};o&2070&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){n||(p(e.$$.fragment,i),n=!0)},o(i){b(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function wh(t,e,n){const s=["href","horizontal","reverse","img","padding","size"];let r=ce(e,s),{$$slots:i={},$$scope:o}=e,{href:a=void 0}=e,{horizontal:l=!1}=e,{reverse:u=!1}=e,{img:c=void 0}=e,{padding:h="lg"}=e,{size:f="sm"}=e;const g={none:"p-0",sm:"p-4 sm:p-6 md:p-8",md:"p-4 sm:p-5",lg:"p-4 sm:p-6",xl:"p-4 sm:p-8"},d={xs:"max-w-xs",sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-screen-xl"};let y,k,E;return t.$$set=v=>{n(14,e=O(O({},e),Y(v))),n(5,r=ce(e,s)),"href"in v&&n(0,a=v.href),"horizontal"in v&&n(6,l=v.horizontal),"reverse"in v&&n(7,u=v.reverse),"img"in v&&n(1,c=v.img),"padding"in v&&n(8,h=v.padding),"size"in v&&n(9,f=v.size),"$$scope"in v&&n(11,o=v.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&n(2,y=g[h]),n(3,k=ae("flex",d[f],u?"flex-col-reverse":"flex-col",l&&(u?"md:flex-row-reverse md:max-w-xl":"md:flex-row md:max-w-xl"),a&&"hover:bg-gray-100 dark:hover:bg-gray-700",!c&&y,e.class)),t.$$.dirty&192&&n(4,E=ae(u?"rounded-b-lg":"rounded-t-lg",l&&"object-cover w-full h-96 md:h-auto md:w-48 md:rounded-none",l&&(u?"md:rounded-r-lg":"md:rounded-l-lg")))},e=Y(e),[a,c,y,k,E,r,l,u,h,f,i,o]}class kh extends ye{constructor(e){super(),pe(this,e,wh,_h,$,{href:0,horizontal:6,reverse:7,img:1,padding:8,size:9})}}function Eh(t){let e;const n=t[5].default,s=te(n,t,t[4],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&16)&&se(s,n,r,r[4],e?ne(n,r[4],i,null):re(r[4]),null)},i(r){e||(p(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function Th(t){let e=t[0],n,s,r=t[0]&&gr(t);return{c(){r&&r.c(),n=Re()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,o){i[0]?e?$(e,i[0])?(r.d(1),r=gr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=gr(i),r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null),e=i[0]},i(i){s||(p(r),s=!0)},o(i){b(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function gr(t){let e,n,s,r;const i=t[5].default,o=te(i,t,t[4],null);let a=[t[3]],l={};for(let u=0;u<a.length;u+=1)l=O(l,a[u]);return{c(){e=B(t[0]),o&&o.c(),/-/.test(t[0])?qe(e,l):ie(e,l)},m(u,c){C(u,e,c),o&&o.m(e,null),n=!0,s||(r=ui(t[2].call(null,e)),s=!0)},p(u,c){o&&o.p&&(!n||c&16)&&se(o,i,u,u[4],n?ne(i,u[4],c,null):re(u[4]),null),l=Le(a,[c&8&&u[3]]),/-/.test(u[0])?qe(e,l):ie(e,l)},i(u){n||(p(o,u),n=!0)},o(u){b(o,u),n=!1},d(u){u&&T(e),o&&o.d(u),s=!1,r()}}}function Ch(t){let e,n,s,r;const i=[Th,Eh],o=[];function a(l,u){return l[1]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Re()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(xe(),b(o[c],1,1,()=>{o[c]=null}),Ue(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),p(n,1),n.m(s.parentNode,s))},i(l){r||(p(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function Ih(t,e,n){const s=["tag","show","use"];let r=ce(e,s),{$$slots:i={},$$scope:o}=e,{tag:a="div"}=e,{show:l}=e,{use:u=()=>{}}=e;return t.$$set=c=>{e=O(O({},e),Y(c)),n(3,r=ce(e,s)),"tag"in c&&n(0,a=c.tag),"show"in c&&n(1,l=c.show),"use"in c&&n(2,u=c.use),"$$scope"in c&&n(4,o=c.$$scope)},[a,l,u,r,o,i]}class Ja extends ye{constructor(e){super(),pe(this,e,Ih,Ch,$,{tag:0,show:1,use:2})}}function Sh(t){let e;const n=t[7].default,s=te(n,t,t[6],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&64)&&se(s,n,r,r[6],e?ne(n,r[6],i,null):re(r[6]),null)},i(r){e||(p(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function Ah(t){let e,n;const s=t[7].default,r=te(s,t,t[6],null);let i=[t[3],{class:t[2]}],o={};for(let a=0;a<i.length;a+=1)o=O(o,i[a]);return{c(){e=B("label"),r&&r.c(),ie(e,o)},m(a,l){C(a,e,l),r&&r.m(e,null),t[8](e),n=!0},p(a,l){r&&r.p&&(!n||l&64)&&se(r,s,a,a[6],n?ne(s,a[6],l,null):re(a[6]),null),ie(e,o=Le(i,[l&8&&a[3],(!n||l&4)&&{class:a[2]}]))},i(a){n||(p(r,a),n=!0)},o(a){b(r,a),n=!1},d(a){a&&T(e),r&&r.d(a),t[8](null)}}}function Dh(t){let e,n,s,r;const i=[Ah,Sh],o=[];function a(l,u){return l[0]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Re()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(xe(),b(o[c],1,1,()=>{o[c]=null}),Ue(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),p(n,1),n.m(s.parentNode,s))},i(l){r||(p(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function Nh(t,e,n){let s;const r=["color","defaultClass","show"];let i=ce(e,r),{$$slots:o={},$$scope:a}=e,{color:l="gray"}=e,{defaultClass:u="text-sm font-medium block"}=e,{show:c=!0}=e,h;const f={gray:"text-gray-900 dark:text-gray-300",green:"text-green-700 dark:text-green-500",red:"text-red-700 dark:text-red-500",disabled:"text-gray-400 dark:text-gray-500"};function g(d){Ct[d?"unshift":"push"](()=>{h=d,n(1,h)})}return t.$$set=d=>{n(10,e=O(O({},e),Y(d))),n(3,i=ce(e,r)),"color"in d&&n(4,l=d.color),"defaultClass"in d&&n(5,u=d.defaultClass),"show"in d&&n(0,c=d.show),"$$scope"in d&&n(6,a=d.$$scope)},t.$$.update=()=>{if(t.$$.dirty&18){const d=h==null?void 0:h.control;n(4,l=d!=null&&d.disabled?"disabled":l)}n(2,s=ae(u,f[l],e.class))},e=Y(e),[c,h,s,i,l,u,a,o,g]}class po extends ye{constructor(e){super(),pe(this,e,Nh,Dh,$,{color:4,defaultClass:5,show:0})}}function yo(t,e,n){const s=t.slice();return s[0]=e[n].value,s[13]=e[n].name,s}function vo(t){let e,n=t[13]+"",s,r;return{c(){e=B("option"),s=De(n),e.__value=r=t[0],e.value=e.__value},m(i,o){C(i,e,o),z(e,s)},p(i,o){o&2&&n!==(n=i[13]+"")&&ot(s,n),o&2&&r!==(r=i[0])&&(e.__value=r,e.value=e.__value)},d(i){i&&T(e)}}}function Rh(t){let e,n,s,r,i,o=t[1],a=[];for(let c=0;c<o.length;c+=1)a[c]=vo(yo(t,o,c));let l=[t[4],{class:t[3]}],u={};for(let c=0;c<l.length;c+=1)u=O(u,l[c]);return{c(){e=B("select"),n=B("option"),s=De(t[2]);for(let c=0;c<a.length;c+=1)a[c].c();n.disabled=!0,n.selected=!0,n.__value="",n.value=n.__value,ie(e,u),t[0]===void 0&&ht(()=>t[11].call(e))},m(c,h){C(c,e,h),z(e,n),z(n,s);for(let f=0;f<a.length;f+=1)a[f].m(e,null);(u.multiple?uo:ts)(e,u.value),e.autofocus&&e.focus(),ts(e,t[0]),r||(i=[V(e,"change",t[11]),V(e,"change",t[9]),V(e,"input",t[10])],r=!0)},p(c,[h]){if(h&4&&ot(s,c[2]),h&2){o=c[1];let f;for(f=0;f<o.length;f+=1){const g=yo(c,o,f);a[f]?a[f].p(g,h):(a[f]=vo(g),a[f].c(),a[f].m(e,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=o.length}ie(e,u=Le(l,[h&16&&c[4],h&8&&{class:c[3]}])),h&24&&"value"in u&&(u.multiple?uo:ts)(e,u.value),h&3&&ts(e,c[0])},i:X,o:X,d(c){c&&T(e),hi(a,c),r=!1,Qe(i)}}}const Lh="block w-full";function Mh(t,e,n){const s=["items","value","placeholder","underline","size","defaultClass","underlineClass"];let r=ce(e,s),{items:i=[]}=e,{value:o}=e,{placeholder:a="Choose option ..."}=e,{underline:l=!1}=e,{size:u="md"}=e,{defaultClass:c="text-gray-900 bg-gray-50 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"}=e,{underlineClass:h="text-gray-500 bg-transparent border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer"}=e;const f={sm:"text-sm p-2",md:"text-sm p-2.5",lg:"text-base py-3 px-4"};let g;function d(E){R.call(this,t,E)}function y(E){R.call(this,t,E)}function k(){o=Lc(this),n(0,o),n(1,i)}return t.$$set=E=>{e=O(O({},e),Y(E)),n(4,r=ce(e,s)),"items"in E&&n(1,i=E.items),"value"in E&&n(0,o=E.value),"placeholder"in E&&n(2,a=E.placeholder),"underline"in E&&n(5,l=E.underline),"size"in E&&n(6,u=E.size),"defaultClass"in E&&n(7,c=E.defaultClass),"underlineClass"in E&&n(8,h=E.underlineClass)},t.$$.update=()=>{n(3,g=ae(Lh,l?h:c,f[u],l&&"!px-0",r.class))},[o,i,a,g,r,l,u,c,h,d,y,k]}class Oh extends ye{constructor(e){super(),pe(this,e,Mh,Rh,$,{items:1,value:0,placeholder:2,underline:5,size:6,defaultClass:7,underlineClass:8})}}const Ph=t=>({}),bo=t=>({}),Vh=t=>({}),_o=t=>({});function wo(t){let e,n;const s=t[8].header,r=te(s,t,t[21],_o);return{c(){e=B("div"),r&&r.c(),m(e,"class",t[5](!0))},m(i,o){C(i,e,o),r&&r.m(e,null),n=!0},p(i,o){r&&r.p&&(!n||o&2097152)&&se(r,s,i,i[21],n?ne(s,i[21],o,Vh):re(i[21]),_o)},i(i){n||(p(r,i),n=!0)},o(i){b(r,i),n=!1},d(i){i&&T(e),r&&r.d(i)}}}function Fh(t){let e,n,s,r=[t[7],{class:t[3]}],i={};for(let o=0;o<r.length;o+=1)i=O(i,r[o]);return{c(){e=B("textarea"),ie(e,i)},m(o,a){C(o,e,a),e.autofocus&&e.focus(),lo(e,t[0]),n||(s=[V(e,"input",t[20]),V(e,"blur",t[9]),V(e,"change",t[10]),V(e,"click",t[11]),V(e,"focus",t[12]),V(e,"keydown",t[13]),V(e,"keypress",t[14]),V(e,"keyup",t[15]),V(e,"mouseenter",t[16]),V(e,"mouseleave",t[17]),V(e,"mouseover",t[18]),V(e,"paste",t[19])],n=!0)},p(o,a){ie(e,i=Le(r,[a&128&&o[7],a&8&&{class:o[3]}])),a&1&&lo(e,o[0])},d(o){o&&T(e),n=!1,Qe(s)}}}function ko(t){let e,n;const s=t[8].footer,r=te(s,t,t[21],bo);return{c(){e=B("div"),r&&r.c(),m(e,"class",t[5](!1))},m(i,o){C(i,e,o),r&&r.m(e,null),n=!0},p(i,o){r&&r.p&&(!n||o&2097152)&&se(r,s,i,i[21],n?ne(s,i[21],o,Ph):re(i[21]),bo)},i(i){n||(p(r,i),n=!0)},o(i){b(r,i),n=!1},d(i){i&&T(e),r&&r.d(i)}}}function xh(t){let e,n,s,r,i,o=t[6].header&&wo(t);n=new Ja({props:{show:t[1],class:t[4],$$slots:{default:[Fh]},$$scope:{ctx:t}}});let a=t[6].footer&&ko(t);return{c(){o&&o.c(),e=oe(),Q(n.$$.fragment),s=oe(),a&&a.c(),r=Re()},m(l,u){o&&o.m(l,u),C(l,e,u),H(n,l,u),C(l,s,u),a&&a.m(l,u),C(l,r,u),i=!0},p(l,u){l[6].header?o?(o.p(l,u),u&64&&p(o,1)):(o=wo(l),o.c(),p(o,1),o.m(e.parentNode,e)):o&&(xe(),b(o,1,1,()=>{o=null}),Ue());const c={};u&2&&(c.show=l[1]),u&16&&(c.class=l[4]),u&2097289&&(c.$$scope={dirty:u,ctx:l}),n.$set(c),l[6].footer?a?(a.p(l,u),u&64&&p(a,1)):(a=ko(l),a.c(),p(a,1),a.m(r.parentNode,r)):a&&(xe(),b(a,1,1,()=>{a=null}),Ue())},i(l){i||(p(o),p(n.$$.fragment,l),p(a),i=!0)},o(l){b(o),b(n.$$.fragment,l),b(a),i=!1},d(l){o&&o.d(l),l&&T(e),K(n,l),l&&T(s),a&&a.d(l),l&&T(r)}}}function Uh(t){let e,n;return e=new Ja({props:{show:t[1],class:t[2],$$slots:{default:[xh]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,[r]){const i={};r&2&&(i.show=s[1]),r&4&&(i.class=s[2]),r&2097371&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function Bh(t,e,n){const s=["value"];let r=ce(e,s),{$$slots:i={},$$scope:o}=e;const a=Ua(i),l=Vn("background");let{value:u=""}=e,c,h,f;const g=I=>ae(I?"border-b":"border-t","py-2 px-3 border-gray-200 dark:border-gray-600");let d;function y(I){R.call(this,t,I)}function k(I){R.call(this,t,I)}function E(I){R.call(this,t,I)}function v(I){R.call(this,t,I)}function A(I){R.call(this,t,I)}function he(I){R.call(this,t,I)}function _e(I){R.call(this,t,I)}function de(I){R.call(this,t,I)}function Te(I){R.call(this,t,I)}function j(I){R.call(this,t,I)}function fe(I){R.call(this,t,I)}function We(){u=this.value,n(0,u)}return t.$$set=I=>{n(23,e=O(O({},e),Y(I))),n(7,r=ce(e,s)),"value"in I&&n(0,u=I.value),"$$scope"in I&&n(21,o=I.$$scope)},t.$$.update=()=>{n(2,h=ae("w-full rounded-lg",l?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700","text-gray-900 dark:placeholder-gray-400 dark:text-white ","border border-gray-200 dark:border-gray-600",e.class)),t.$$.dirty&6&&n(3,f=c?ae("block w-full","text-sm","border-0 px-0","bg-inherit dark:bg-inherit","focus:outline-none focus:ring-0"):ae(h,"p-2.5 text-sm","focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500"))},n(1,c=a.header||a.footer),n(4,d=ae("py-2 px-4 bg-white dark:bg-gray-800",a.footer||"rounded-b-lg",a.header||"rounded-t-lg")),e=Y(e),[u,c,h,f,d,g,a,r,i,y,k,E,v,A,he,_e,de,Te,j,fe,We,o]}class jh extends ye{constructor(e){super(),pe(this,e,Bh,Uh,$,{value:0})}}const zh=t=>({item:t[0]&64}),Eo=t=>({item:t[6]}),qh=t=>({item:t[0]&64}),To=t=>({item:t[6]}),Hh=t=>({item:t[0]&64}),Co=t=>({item:t[6]});function Kh(t){let e,n,s,r,i;const o=t[9].default,a=te(o,t,t[8],Eo);return{c(){e=B("button"),a&&a.c(),m(e,"class",n="inline-flex relative items-center text-left "+t[4]),e.disabled=t[2],m(e,"aria-current",t[1])},m(l,u){C(l,e,u),a&&a.m(e,null),s=!0,r||(i=[V(e,"click",t[31]),V(e,"blur",t[20]),V(e,"change",t[21]),V(e,"click",t[22]),V(e,"focus",t[23]),V(e,"keydown",t[24]),V(e,"keypress",t[25]),V(e,"keyup",t[26]),V(e,"mouseenter",t[27]),V(e,"mouseleave",t[28]),V(e,"mouseover",t[29])],r=!0)},p(l,u){a&&a.p&&(!s||u[0]&320)&&se(a,o,l,l[8],s?ne(o,l[8],u,zh):re(l[8]),Eo),(!s||u[0]&16&&n!==(n="inline-flex relative items-center text-left "+l[4]))&&m(e,"class",n),(!s||u[0]&4)&&(e.disabled=l[2]),(!s||u[0]&2)&&m(e,"aria-current",l[1])},i(l){s||(p(a,l),s=!0)},o(l){b(a,l),s=!1},d(l){l&&T(e),a&&a.d(l),r=!1,Qe(i)}}}function Gh(t){let e,n,s,r,i;const o=t[9].default,a=te(o,t,t[8],To);return{c(){e=B("a"),a&&a.c(),m(e,"href",t[3]),m(e,"class",n="block "+t[4]),m(e,"aria-current",t[1])},m(l,u){C(l,e,u),a&&a.m(e,null),s=!0,r||(i=[V(e,"click",t[30]),V(e,"blur",t[10]),V(e,"change",t[11]),V(e,"click",t[12]),V(e,"focus",t[13]),V(e,"keydown",t[14]),V(e,"keypress",t[15]),V(e,"keyup",t[16]),V(e,"mouseenter",t[17]),V(e,"mouseleave",t[18]),V(e,"mouseover",t[19])],r=!0)},p(l,u){a&&a.p&&(!s||u[0]&320)&&se(a,o,l,l[8],s?ne(o,l[8],u,qh):re(l[8]),To),(!s||u[0]&8)&&m(e,"href",l[3]),(!s||u[0]&16&&n!==(n="block "+l[4]))&&m(e,"class",n),(!s||u[0]&2)&&m(e,"aria-current",l[1])},i(l){s||(p(a,l),s=!0)},o(l){b(a,l),s=!1},d(l){l&&T(e),a&&a.d(l),r=!1,Qe(i)}}}function Qh(t){let e,n;const s=t[9].default,r=te(s,t,t[8],Co);return{c(){e=B("li"),r&&r.c(),m(e,"class",t[4])},m(i,o){C(i,e,o),r&&r.m(e,null),n=!0},p(i,o){r&&r.p&&(!n||o[0]&320)&&se(r,s,i,i[8],n?ne(s,i[8],o,Hh):re(i[8]),Co),(!n||o[0]&16)&&m(e,"class",i[4])},i(i){n||(p(r,i),n=!0)},o(i){b(r,i),n=!1},d(i){i&&T(e),r&&r.d(i)}}}function Wh(t){let e,n,s,r;const i=[Qh,Gh,Kh],o=[];function a(l,u){return l[0]?l[3]?1:2:0}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Re()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,u){let c=e;e=a(l),e===c?o[e].p(l,u):(xe(),b(o[c],1,1,()=>{o[c]=null}),Ue(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),p(n,1),n.m(s.parentNode,s))},i(l){r||(p(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}let Xh="focus:z-40 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:focus:ring-gray-500 dark:focus:text-white",Yh="hover:bg-gray-100 hover:text-blue-700 dark:hover:bg-gray-600 dark:hover:text-white";function Jh(t,e,n){let{$$slots:s={},$$scope:r}=e,{active:i=Vn("active")}=e,{current:o=!1}=e,{disabled:a=!1}=e,{href:l=""}=e,u=Vc();const c={current:"text-white bg-blue-700 dark:text-white dark:bg-gray-800",normal:"",disabled:"text-gray-900 bg-gray-100 dark:bg-gray-600 dark:text-gray-400"};let h,f;function g(P){R.call(this,t,P)}function d(P){R.call(this,t,P)}function y(P){R.call(this,t,P)}function k(P){R.call(this,t,P)}function E(P){R.call(this,t,P)}function v(P){R.call(this,t,P)}function A(P){R.call(this,t,P)}function he(P){R.call(this,t,P)}function _e(P){R.call(this,t,P)}function de(P){R.call(this,t,P)}function Te(P){R.call(this,t,P)}function j(P){R.call(this,t,P)}function fe(P){R.call(this,t,P)}function We(P){R.call(this,t,P)}function I(P){R.call(this,t,P)}function at(P){R.call(this,t,P)}function yt(P){R.call(this,t,P)}function ar(P){R.call(this,t,P)}function S(P){R.call(this,t,P)}function wc(P){R.call(this,t,P)}const kc=()=>u("click",e),Ec=()=>u("click",e);return t.$$set=P=>{n(6,e=O(O({},e),Y(P))),"active"in P&&n(0,i=P.active),"current"in P&&n(1,o=P.current),"disabled"in P&&n(2,a=P.disabled),"href"in P&&n(3,l=P.href),"$$scope"in P&&n(8,r=P.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&6&&n(7,h=a?"disabled":o?"current":"normal"),n(4,f=ae("py-2 px-0 sm:px-4 w-full text-sm font-medium","first:rounded-t-lg last:rounded-b-lg",c[h],i&&h==="disabled"&&"cursor-not-allowed",i&&h==="normal"&&Yh,i&&h==="normal"&&Xh,e.class))},e=Y(e),[i,o,a,l,f,u,e,h,r,s,g,d,y,k,E,v,A,he,_e,de,Te,j,fe,We,I,at,yt,ar,S,wc,kc,Ec]}class Zh extends ye{constructor(e){super(),pe(this,e,Jh,Wh,$,{active:0,current:1,disabled:2,href:3},null,[-1,-1])}}function Io(t,e,n){const s=t.slice();return s[8]=e[n],s[10]=n,s}const $h=t=>({item:t&1}),So=t=>({item:t[8],index:t[10]});function Ao(t){let e;const n=t[4].default,s=te(n,t,t[6],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&64)&&se(s,n,r,r[6],e?ne(n,r[6],i,null):re(r[6]),null)},i(r){e||(p(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function ef(t){let e;const n=t[4].default,s=te(n,t,t[6],So);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&65)&&se(s,n,r,r[6],e?ne(n,r[6],i,$h):re(r[6]),So)},i(r){e||(p(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function Do(t){let e,n;const s=[{active:t[1]},t[8],{index:t[10]}];let r={$$slots:{default:[ef]},$$scope:{ctx:t}};for(let i=0;i<s.length;i+=1)r=O(r,s[i]);return e=new Zh({props:r}),e.$on("click",t[5]),{c(){Q(e.$$.fragment)},m(i,o){H(e,i,o),n=!0},p(i,o){const a=o&3?Le(s,[o&2&&{active:i[1]},o&1&&Vs(i[8]),s[2]]):{};o&65&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){n||(p(e.$$.fragment,i),n=!0)},o(i){b(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function tf(t){let e,n,s=t[0],r=[];for(let a=0;a<s.length;a+=1)r[a]=Do(Io(t,s,a));const i=a=>b(r[a],1,1,()=>{r[a]=null});let o=null;return s.length||(o=Ao(t)),{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Re(),o&&o.c()},m(a,l){for(let u=0;u<r.length;u+=1)r[u].m(a,l);C(a,e,l),o&&o.m(a,l),n=!0},p(a,l){if(l&67){s=a[0];let u;for(u=0;u<s.length;u+=1){const c=Io(a,s,u);r[u]?(r[u].p(c,l),p(r[u],1)):(r[u]=Do(c),r[u].c(),p(r[u],1),r[u].m(e.parentNode,e))}for(xe(),u=s.length;u<r.length;u+=1)i(u);Ue(),!s.length&&o?o.p(a,l):s.length?o&&(xe(),b(o,1,1,()=>{o=null}),Ue()):(o=Ao(a),o.c(),p(o,1),o.m(e.parentNode,e))}},i(a){if(!n){for(let l=0;l<s.length;l+=1)p(r[l]);n=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)b(r[l]);n=!1},d(a){hi(r,a),a&&T(e),o&&o.d(a)}}}function nf(t){let e,n;const s=[{tag:t[1]?"div":"ul"},t[3],{rounded:!0},{border:!0},{class:t[2]}];let r={$$slots:{default:[tf]},$$scope:{ctx:t}};for(let i=0;i<s.length;i+=1)r=O(r,s[i]);return e=new Ya({props:r}),{c(){Q(e.$$.fragment)},m(i,o){H(e,i,o),n=!0},p(i,[o]){const a=o&14?Le(s,[o&2&&{tag:i[1]?"div":"ul"},o&8&&Vs(i[3]),s[2],s[3],o&4&&{class:i[2]}]):{};o&67&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){n||(p(e.$$.fragment,i),n=!0)},o(i){b(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function sf(t,e,n){const s=["items","active"];let r=ce(e,s),{$$slots:i={},$$scope:o}=e,{items:a=[]}=e,{active:l=!1}=e,u;function c(h){R.call(this,t,h)}return t.$$set=h=>{n(7,e=O(O({},e),Y(h))),n(3,r=ce(e,s)),"items"in h&&n(0,a=h.items),"active"in h&&n(1,l=h.active),"$$scope"in h&&n(6,o=h.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&ys("active",l),n(2,u=ae("divide-y divide-gray-200 dark:divide-gray-600",e.class))},e=Y(e),[a,l,u,r,i,c,o]}class rf extends ye{constructor(e){super(),pe(this,e,sf,nf,$,{items:0,active:1})}}function No(t){let e,n;return{c(){e=B("span"),n=De(t[0]),m(e,"class","sr-only")},m(s,r){C(s,e,r),z(e,n)},p(s,r){r&1&&ot(n,s[0])},d(s){s&&T(e)}}}function of(t){let e,n,s;return{c(){e=ge("svg"),n=ge("path"),m(n,"fill-rule","evenodd"),m(n,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),m(n,"clip-rule","evenodd"),m(e,"class",s=t[4][t[2]]),m(e,"fill","currentColor"),m(e,"viewBox","0 0 20 20"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(r,i){C(r,e,i),z(e,n)},p(r,i){i&4&&s!==(s=r[4][r[2]])&&m(e,"class",s)},d(r){r&&T(e)}}}function af(t){var g;let e,n,s,r,i,o,a=t[0]&&No(t);const l=t[8].default,u=te(l,t,t[7],null),c=u||of(t);let h=[{type:"button"},t[5],{class:t[3]},{"aria-label":s=(g=t[1])!=null?g:t[0]}],f={};for(let d=0;d<h.length;d+=1)f=O(f,h[d]);return{c(){e=B("button"),a&&a.c(),n=oe(),c&&c.c(),ie(e,f)},m(d,y){C(d,e,y),a&&a.m(e,null),z(e,n),c&&c.m(e,null),e.autofocus&&e.focus(),r=!0,i||(o=V(e,"click",t[9]),i=!0)},p(d,[y]){var k;d[0]?a?a.p(d,y):(a=No(d),a.c(),a.m(e,n)):a&&(a.d(1),a=null),u?u.p&&(!r||y&128)&&se(u,l,d,d[7],r?ne(l,d[7],y,null):re(d[7]),null):c&&c.p&&(!r||y&4)&&c.p(d,r?y:-1),ie(e,f=Le(h,[{type:"button"},y&32&&d[5],(!r||y&8)&&{class:d[3]},(!r||y&3&&s!==(s=(k=d[1])!=null?k:d[0]))&&{"aria-label":s}]))},i(d){r||(p(c,d),r=!0)},o(d){b(c,d),r=!1},d(d){d&&T(e),a&&a.d(),c&&c.d(d),i=!1,o()}}}function lf(t,e,n){const s=["color","name","ariaLabel","size"];let r=ce(e,s),{$$slots:i={},$$scope:o}=e;const a=Vn("background");let{color:l="default"}=e,{name:u=void 0}=e,{ariaLabel:c=void 0}=e,{size:h="md"}=e;const f={default:"hover:text-gray-900 hover:bg-gray-100 text-gray-500 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600",gray:"focus:ring-gray-400 hover:bg-gray-200 dark:hover:bg-gray-300",red:"focus:ring-red-400 hover:bg-red-200 dark:hover:bg-red-300",yellow:"focus:ring-yellow-400 hover:bg-yellow-200 dark:hover:bg-yellow-300",green:"focus:ring-green-400 hover:bg-green-200 dark:hover:bg-green-300",indigo:"focus:ring-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-300",purple:"focus:ring-purple-400 hover:bg-purple-200 dark:hover:bg-purple-300",pink:"focus:ring-pink-400 hover:bg-pink-200 dark:hover:bg-pink-300",blue:"focus:ring-blue-400 hover:bg-blue-200 dark:hover:bg-blue-300"},g={xs:"m-0.5 rounded focus:ring-1 p-0.5",sm:"m-0.5 rounded focus:ring-1 p-0.5",md:"rounded-lg focus:ring-2 p-1.5"};let d;const y={xs:"w-3 h-3",sm:"w-3.5 h-3.5",md:"w-5 h-5"};function k(E){R.call(this,t,E)}return t.$$set=E=>{n(13,e=O(O({},e),Y(E))),n(5,r=ce(e,s)),"color"in E&&n(6,l=E.color),"name"in E&&n(0,u=E.name),"ariaLabel"in E&&n(1,c=E.ariaLabel),"size"in E&&n(2,h=E.size),"$$scope"in E&&n(7,o=E.$$scope)},t.$$.update=()=>{n(3,d=ae("focus:outline-none whitespace-normal",g[h],f[l],l==="default"&&(a?"hover:bg-gray-100 dark:hover:bg-gray-600":"hover:bg-gray-100 dark:hover:bg-gray-700"),e.class))},e=Y(e),[u,c,h,d,y,r,l,o,i,k]}class xt extends ye{constructor(e){super(),pe(this,e,lf,af,$,{color:6,name:0,ariaLabel:1,size:2})}}function uf(t){let e,n,s,r;return{c(){e=ge("svg"),n=ge("path"),s=ge("path"),m(n,"d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z"),m(n,"fill",t[2]),m(s,"d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z"),m(s,"fill",t[1]),m(e,"role","status"),m(e,"class",r=ae("inline -mt-px animate-spin dark:text-gray-600",t[3],t[0],t[4],t[5].class)),m(e,"viewBox","0 0 100 101"),m(e,"fill","none"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(i,o){C(i,e,o),z(e,n),z(e,s)},p(i,[o]){o&4&&m(n,"fill",i[2]),o&2&&m(s,"fill",i[1]),o&33&&r!==(r=ae("inline -mt-px animate-spin dark:text-gray-600",i[3],i[0],i[4],i[5].class))&&m(e,"class",r)},i:X,o:X,d(i){i&&T(e)}}}function cf(t,e,n){var h;let{color:s="blue"}=e,{bg:r="text-gray-300"}=e,{size:i="8"}=e,{currentFill:o="currentFill"}=e,{currentColor:a="currentColor"}=e,l=`w-${i} h-${i}`;o!=="currentFill"&&(s=void 0);const u={blue:"fill-blue-600",gray:"fill-gray-600 dark:fill-gray-300",green:"fill-green-500",red:"fill-red-600",yellow:"fill-yellow-400",pink:"fill-pink-600",purple:"fill-purple-600",white:"fill-white"};let c=s===void 0?"":(h=u[s])!=null?h:u.blue;return t.$$set=f=>{n(5,e=O(O({},e),Y(f))),"color"in f&&n(6,s=f.color),"bg"in f&&n(0,r=f.bg),"size"in f&&n(7,i=f.size),"currentFill"in f&&n(1,o=f.currentFill),"currentColor"in f&&n(2,a=f.currentColor)},e=Y(e),[r,o,a,l,c,e,s,i]}class Za extends ye{constructor(e){super(),pe(this,e,cf,uf,$,{color:6,bg:0,size:7,currentFill:1,currentColor:2})}}const hf=t=>({}),Ro=t=>({});function ff(t){let e,n,s,r,i;const o=t[7].default,a=te(o,t,t[6],null),l=t[7].end,u=te(l,t,t[6],Ro);return{c(){e=B("div"),n=B("div"),a&&a.c(),r=oe(),u&&u.c(),m(n,"class",s="flex flex-wrap items-center "+t[1]),m(e,"class",t[0])},m(c,h){C(c,e,h),z(e,n),a&&a.m(n,null),z(e,r),u&&u.m(e,null),i=!0},p(c,[h]){a&&a.p&&(!i||h&64)&&se(a,o,c,c[6],i?ne(o,c[6],h,null):re(c[6]),null),(!i||h&2&&s!==(s="flex flex-wrap items-center "+c[1]))&&m(n,"class",s),u&&u.p&&(!i||h&64)&&se(u,l,c,c[6],i?ne(l,c[6],h,hf):re(c[6]),Ro),(!i||h&1)&&m(e,"class",c[0])},i(c){i||(p(a,c),p(u,c),i=!0)},o(c){b(a,c),b(u,c),i=!1},d(c){c&&T(e),a&&a.d(c),u&&u.d(c)}}}function df(t,e,n){let s,{$$slots:r={},$$scope:i}=e;const o=zc(!1);Fa(t,o,d=>n(5,s=d)),ys("toolbar",o);let{color:a="dark"}=e,{embedded:l=!1}=e;const u={gray:"bg-gray-100 dark:bg-gray-200 ",red:"bg-red-100 dark:bg-red-200",yellow:"bg-yellow-100 dark:bg-yellow-200 ",green:"bg-green-100 dark:bg-green-200 ",indigo:"bg-indigo-100 dark:bg-indigo-200 ",purple:"bg-purple-100 dark:bg-purple-200 ",pink:"bg-pink-100 dark:bg-pink-200 ",blue:"bg-blue-100 dark:bg-blue-200 ",dark:"bg-gray-50 dark:bg-gray-700"},c={gray:"text-gray-500 dark:text-gray-700",red:"text-red-500 dark:text-red-700",yellow:"text-yellow-500 dark:text-yellow-700",green:"text-green-500 dark:text-green-700",indigo:"text-indigo-500 dark:text-indigo-700",purple:"text-purple-500 dark:text-purple-700",pink:"text-pink-500 dark:text-pink-700",blue:"text-blue-500 dark:text-blue-700",dark:"text-gray-500 dark:text-gray-400"};let h;const f={gray:"divide-gray-200 dark:divide-gray-700",red:"divide-red-200 dark:divide-red-700",yellow:"divide-yellow-200 dark:divide-yellow-700",green:"divide-green-200 dark:divide-green-700",indigo:"divide-indigo-200 dark:divide-indigo-700",purple:"divide-purple-200 dark:divide-purple-700",pink:"divide-pink-200 dark:divide-pink-700",blue:"divide-blue-200 dark:divide-blue-700",dark:"divide-gray-200 dark:divide-gray-600"};let g;return t.$$set=d=>{n(11,e=O(O({},e),Y(d))),"color"in d&&n(3,a=d.color),"embedded"in d&&n(4,l=d.embedded),"$$scope"in d&&n(6,i=d.$$scope)},t.$$.update=()=>{n(0,h=ae("flex justify-between items-center",l||"rounded-lg border border-gray-200 dark:border-gray-600 py-2 px-3",l||c[a],l||u[a],e.class)),t.$$.dirty&40&&n(1,g=ae(s&&"divide-gray-200 sm:divide-x",f[a]))},e=Y(e),[h,g,o,a,l,s,i,r]}class gf extends ye{constructor(e){super(),pe(this,e,df,ff,$,{color:3,embedded:4})}}function mf(t){let e,n;const s=t[2].default,r=te(s,t,t[1],null);return{c(){e=B("div"),r&&r.c(),m(e,"class","flex items-center space-x-1 sm:pr-4 sm:pl-4 first:sm:pl-0 last:sm:pr-0")},m(i,o){C(i,e,o),r&&r.m(e,null),n=!0},p(i,[o]){r&&r.p&&(!n||o&2)&&se(r,s,i,i[1],n?ne(s,i[1],o,null):re(i[1]),null)},i(i){n||(p(r,i),n=!0)},o(i){b(r,i),n=!1},d(i){i&&T(e),r&&r.d(i)}}}function pf(t,e,n){let s,{$$slots:r={},$$scope:i}=e;const o=Vn("toolbar");return Fa(t,o,a=>n(3,s=a)),o&&Ic(o,s=!0,s),t.$$set=a=>{"$$scope"in a&&n(1,i=a.$$scope)},[o,i,r]}class Lo extends ye{constructor(e){super(),pe(this,e,pf,mf,$,{})}}function mr(t){let e,n,s;const r=t[7].default,i=te(r,t,t[6],null);let o=[t[4],{class:n=ae(t[2]?t[2]:t[3][t[0]],t[1],"w-full",t[5].class)}],a={};for(let l=0;l<o.length;l+=1)a=O(a,o[l]);return{c(){e=B(t[0]),i&&i.c(),/-/.test(t[0])?qe(e,a):ie(e,a)},m(l,u){C(l,e,u),i&&i.m(e,null),s=!0},p(l,u){i&&i.p&&(!s||u&64)&&se(i,r,l,l[6],s?ne(r,l[6],u,null):re(l[6]),null),a=Le(o,[u&16&&l[4],(!s||u&39&&n!==(n=ae(l[2]?l[2]:l[3][l[0]],l[1],"w-full",l[5].class)))&&{class:n}]),/-/.test(l[0])?qe(e,a):ie(e,a)},i(l){s||(p(i,l),s=!0)},o(l){b(i,l),s=!1},d(l){l&&T(e),i&&i.d(l)}}}function yf(t){let e=t[0],n,s,r=t[0]&&mr(t);return{c(){r&&r.c(),n=Re()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,[o]){i[0]?e?$(e,i[0])?(r.d(1),r=mr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=mr(i),r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null),e=i[0]},i(i){s||(p(r),s=!0)},o(i){b(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function vf(t,e,n){const s=["tag","color","customSize"];let r=ce(e,s),{$$slots:i={},$$scope:o}=e,{tag:a="h1"}=e,{color:l="text-gray-900 dark:text-white"}=e,{customSize:u=""}=e;const c={h1:"text-5xl font-extrabold",h2:"text-4xl font-bold",h3:"text-3xl font-bold",h4:"text-2xl font-bold",h5:"text-xl font-bold",h6:"text-lg font-bold"};return t.$$set=h=>{n(5,e=O(O({},e),Y(h))),n(4,r=ce(e,s)),"tag"in h&&n(0,a=h.tag),"color"in h&&n(1,l=h.color),"customSize"in h&&n(2,u=h.customSize),"$$scope"in h&&n(6,o=h.$$scope)},e=Y(e),[a,l,u,c,r,e,o,i]}class Mo extends ye{constructor(e){super(),pe(this,e,vf,yf,$,{tag:0,color:1,customSize:2})}}function bf(t){let e,n;const s=t[15].default,r=te(s,t,t[14],null);let i=[t[1],{class:t[0]}],o={};for(let a=0;a<i.length;a+=1)o=O(o,i[a]);return{c(){e=B("p"),r&&r.c(),ie(e,o)},m(a,l){C(a,e,l),r&&r.m(e,null),n=!0},p(a,[l]){r&&r.p&&(!n||l&16384)&&se(r,s,a,a[14],n?ne(s,a[14],l,null):re(a[14]),null),ie(e,o=Le(i,[l&2&&a[1],{class:a[0]}]))},i(a){n||(p(r,a),n=!0)},o(a){b(r,a),n=!1},d(a){a&&T(e),r&&r.d(a)}}}function _f(t,e,n){const s=["color","height","align","justify","italic","firstupper","upperClass","opacity","whitespace","size","space","weight"];let r=ce(e,s),{$$slots:i={},$$scope:o}=e,{color:a="text-gray-900 dark:text-white"}=e,{height:l="normal"}=e,{align:u="left"}=e,{justify:c=!1}=e,{italic:h=!1}=e,{firstupper:f=!1}=e,{upperClass:g="first-line:uppercase first-line:tracking-widest first-letter:text-7xl first-letter:font-bold first-letter:text-gray-900 dark:first-letter:text-gray-100 first-letter:mr-3 first-letter:float-left"}=e,{opacity:d=void 0}=e,{whitespace:y="normal"}=e,{size:k="base"}=e,{space:E=void 0}=e,{weight:v="normal"}=e;const A={xs:"text-xs",sm:"text-sm",base:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl","5xl":"text-5xl","6xl":"text-6xl","7xl":"text-7xl","8xl":"text-8xl","9xl":"text-9xl"},he={thin:"font-thin",extralight:"font-extralight",light:"font-light",normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold",extrabold:"font-extrabold",black:"font-black"},_e={tighter:"tracking-tighter",tight:"tracking-tight",normal:"tracking-normal",wide:"tracking-wide",wider:"tracking-wider",widest:"tracking-widest"},de={normal:"leading-normal",relaxed:"leading-relaxed",loose:"leading-loose"},Te={left:"text-left",center:"text-center",right:"text-right"},j={normal:"whitespace-normal",nowrap:"whitespace-nowrap",pre:"whitespace-pre",preline:"whitespace-pre-line",prewrap:"whitespace-pre-wrap"};let fe=a.split(" ").map(I=>I.trim()).map(I=>I+"/"+String(d)).join(" "),We=ae(k&&A[k],d&&fe||a&&a,l&&de[l],v&&he[v],E&&_e[E],u&&Te[u],c&&"text-justify",h&&"italic",f&&g,y&&j[y],e.class);return t.$$set=I=>{n(23,e=O(O({},e),Y(I))),n(1,r=ce(e,s)),"color"in I&&n(2,a=I.color),"height"in I&&n(3,l=I.height),"align"in I&&n(4,u=I.align),"justify"in I&&n(5,c=I.justify),"italic"in I&&n(6,h=I.italic),"firstupper"in I&&n(7,f=I.firstupper),"upperClass"in I&&n(8,g=I.upperClass),"opacity"in I&&n(9,d=I.opacity),"whitespace"in I&&n(10,y=I.whitespace),"size"in I&&n(11,k=I.size),"space"in I&&n(12,E=I.space),"weight"in I&&n(13,v=I.weight),"$$scope"in I&&n(14,o=I.$$scope)},e=Y(e),[We,r,a,l,u,c,h,f,g,d,y,k,E,v,o,i]}class gn extends ye{constructor(e){super(),pe(this,e,_f,bf,$,{color:2,height:3,align:4,justify:5,italic:6,firstupper:7,upperClass:8,opacity:9,whitespace:10,size:11,space:12,weight:13})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},wf=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},el={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,c=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(f=64)),s.push(n[c],n[h],n[f],n[g])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($a(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wf(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||u==null||h==null)throw Error();const f=i<<2|a>>4;if(s.push(f),u!==64){const g=a<<4&240|u>>2;if(s.push(g),h!==64){const d=u<<6&192|h;s.push(d)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},kf=function(t){const e=$a(t);return el.encodeByteArray(e,!0)},vs=function(t){return kf(t).replace(/\./g,"")},Ef=function(t){try{return el.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Tf(){return typeof indexedDB=="object"}function Cf(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function If(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=()=>If().__FIREBASE_DEFAULTS__,Af=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Df=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ef(t[1]);return e&&JSON.parse(e)},tl=()=>{try{return Sf()||Af()||Df()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Nf=t=>{var e,n;return(n=(e=tl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Rf=t=>{const e=Nf(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Lf=()=>{var t;return(t=tl())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[vs(JSON.stringify(n)),vs(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="FirebaseError";class Jt extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Pf,Object.setPrototypeOf(this,Jt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nl.prototype.create)}}class nl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?Vf(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Jt(r,a,s)}}function Vf(t,e){return t.replace(Ff,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Ff=/\{\$([^}]+)}/g;function Pr(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Oo(i)&&Oo(o)){if(!Pr(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Oo(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t){return t&&t._delegate?t._delegate:t}class wn{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Mf;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Bf(e))try{this.getOrInitializeService({instanceIdentifier:vt})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=vt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vt){return this.instances.has(e)}getOptions(e=vt){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(!!s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Uf(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=vt){return this.component?this.component.multipleInstances?e:vt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Uf(t){return t===vt?void 0:t}function Bf(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xf(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(J||(J={}));const zf={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},qf=J.INFO,Hf={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},Kf=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=Hf[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sl{constructor(e){this.name=e,this._logLevel=qf,this._logHandler=Kf,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in J))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zf[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...e),this._logHandler(this,J.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...e),this._logHandler(this,J.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,J.INFO,...e),this._logHandler(this,J.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,J.WARN,...e),this._logHandler(this,J.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...e),this._logHandler(this,J.ERROR,...e)}}const Gf=(t,e)=>e.some(n=>t instanceof n);let Po,Vo;function Qf(){return Po||(Po=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wf(){return Vo||(Vo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rl=new WeakMap,Vr=new WeakMap,il=new WeakMap,pr=new WeakMap,di=new WeakMap;function Xf(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(lt(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&rl.set(n,t)}).catch(()=>{}),di.set(e,t),e}function Yf(t){if(Vr.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Vr.set(t,e)}let Fr={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vr.get(t);if(e==="objectStoreNames")return t.objectStoreNames||il.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return lt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Jf(t){Fr=t(Fr)}function Zf(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(yr(this),e,...n);return il.set(s,e.sort?e.sort():[e]),lt(s)}:Wf().includes(t)?function(...e){return t.apply(yr(this),e),lt(rl.get(this))}:function(...e){return lt(t.apply(yr(this),e))}}function $f(t){return typeof t=="function"?Zf(t):(t instanceof IDBTransaction&&Yf(t),Gf(t,Qf())?new Proxy(t,Fr):t)}function lt(t){if(t instanceof IDBRequest)return Xf(t);if(pr.has(t))return pr.get(t);const e=$f(t);return e!==t&&(pr.set(t,e),di.set(e,t)),e}const yr=t=>di.get(t);function ed(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=lt(o);return s&&o.addEventListener("upgradeneeded",l=>{s(lt(o.result),l.oldVersion,l.newVersion,lt(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}const td=["get","getKey","getAll","getAllKeys","count"],nd=["put","add","delete","clear"],vr=new Map;function Fo(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(vr.get(e))return vr.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=nd.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||td.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return vr.set(e,i),i}Jf(t=>({...t,get:(e,n,s)=>Fo(e,n)||t.get(e,n,s),has:(e,n)=>!!Fo(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rd(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function rd(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xr="@firebase/app",xo="0.8.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It=new sl("@firebase/app"),id="@firebase/app-compat",od="@firebase/analytics-compat",ad="@firebase/analytics",ld="@firebase/app-check-compat",ud="@firebase/app-check",cd="@firebase/auth",hd="@firebase/auth-compat",fd="@firebase/database",dd="@firebase/database-compat",gd="@firebase/functions",md="@firebase/functions-compat",pd="@firebase/installations",yd="@firebase/installations-compat",vd="@firebase/messaging",bd="@firebase/messaging-compat",_d="@firebase/performance",wd="@firebase/performance-compat",kd="@firebase/remote-config",Ed="@firebase/remote-config-compat",Td="@firebase/storage",Cd="@firebase/storage-compat",Id="@firebase/firestore",Sd="@firebase/firestore-compat",Ad="firebase",Dd="9.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="[DEFAULT]",Nd={[xr]:"fire-core",[id]:"fire-core-compat",[ad]:"fire-analytics",[od]:"fire-analytics-compat",[ud]:"fire-app-check",[ld]:"fire-app-check-compat",[cd]:"fire-auth",[hd]:"fire-auth-compat",[fd]:"fire-rtdb",[dd]:"fire-rtdb-compat",[gd]:"fire-fn",[md]:"fire-fn-compat",[pd]:"fire-iid",[yd]:"fire-iid-compat",[vd]:"fire-fcm",[bd]:"fire-fcm-compat",[_d]:"fire-perf",[wd]:"fire-perf-compat",[kd]:"fire-rc",[Ed]:"fire-rc-compat",[Td]:"fire-gcs",[Cd]:"fire-gcs-compat",[Id]:"fire-fst",[Sd]:"fire-fst-compat","fire-js":"fire-js",[Ad]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs=new Map,Br=new Map;function Rd(t,e){try{t.container.addComponent(e)}catch(n){It.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _s(t){const e=t.name;if(Br.has(e))return It.debug(`There were multiple attempts to register component ${e}.`),!1;Br.set(e,t);for(const n of bs.values())Rd(n,t);return!0}function Ld(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ut=new nl("app","Firebase",Md);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new wn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ut.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=Dd;function ol(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Ur,automaticDataCollectionEnabled:!1},e),r=s.name;if(typeof r!="string"||!r)throw ut.create("bad-app-name",{appName:String(r)});if(n||(n=Lf()),!n)throw ut.create("no-options");const i=bs.get(r);if(i){if(Pr(n,i.options)&&Pr(s,i.config))return i;throw ut.create("duplicate-app",{appName:r})}const o=new jf(r);for(const l of Br.values())o.addComponent(l);const a=new Od(n,s,o);return bs.set(r,a),a}function Vd(t=Ur){const e=bs.get(t);if(!e&&t===Ur)return ol();if(!e)throw ut.create("no-app",{appName:t});return e}function Ut(t,e,n){var s;let r=(s=Nd[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),It.warn(a.join(" "));return}_s(new wn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="firebase-heartbeat-database",xd=1,kn="firebase-heartbeat-store";let br=null;function al(){return br||(br=ed(Fd,xd,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(kn)}}}).catch(t=>{throw ut.create("idb-open",{originalErrorMessage:t.message})})),br}async function Ud(t){var e;try{return(await al()).transaction(kn).objectStore(kn).get(ll(t))}catch(n){if(n instanceof Jt)It.warn(n.message);else{const s=ut.create("idb-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message});It.warn(s.message)}}}async function Uo(t,e){var n;try{const r=(await al()).transaction(kn,"readwrite");return await r.objectStore(kn).put(e,ll(t)),r.done}catch(s){if(s instanceof Jt)It.warn(s.message);else{const r=ut.create("idb-set",{originalErrorMessage:(n=s)===null||n===void 0?void 0:n.message});It.warn(r.message)}}}function ll(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd=1024,jd=30*24*60*60*1e3;class zd{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Hd(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Bo();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const i=new Date(r.date).valueOf();return Date.now()-i<=jd}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Bo(),{heartbeatsToSend:n,unsentEntries:s}=qd(this._heartbeatsCache.heartbeats),r=vs(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Bo(){return new Date().toISOString().substring(0,10)}function qd(t,e=Bd){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),jo(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),jo(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Hd{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tf()?Cf().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Ud(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Uo(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Uo(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function jo(t){return vs(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t){_s(new wn("platform-logger",e=>new sd(e),"PRIVATE")),_s(new wn("heartbeat",e=>new zd(e),"PRIVATE")),Ut(xr,xo,t),Ut(xr,xo,"esm2017"),Ut("fire-js","")}Kd("");var Gd="firebase",Qd="9.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ut(Gd,Qd,"app");var Wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},D,gi=gi||{},F=Wd||self;function ws(){}function Fs(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Fn(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Xd(t){return Object.prototype.hasOwnProperty.call(t,_r)&&t[_r]||(t[_r]=++Yd)}var _r="closure_uid_"+(1e9*Math.random()>>>0),Yd=0;function Jd(t,e,n){return t.call.apply(t.bind,arguments)}function Zd(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,s),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Ve(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ve=Jd:Ve=Zd,Ve.apply(null,arguments)}function ss(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),t.apply(this,s)}}function Me(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(s,r,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(s,o)}}function mt(){this.s=this.s,this.o=this.o}var $d=0;mt.prototype.s=!1;mt.prototype.na=function(){!this.s&&(this.s=!0,this.M(),$d!=0)&&Xd(this)};mt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ul=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function mi(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function zo(t,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(Fs(s)){const r=t.length||0,i=s.length||0;t.length=r+i;for(let o=0;o<i;o++)t[r+o]=s[o]}else t.push(s)}}function Fe(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Fe.prototype.h=function(){this.defaultPrevented=!0};var eg=function(){if(!F.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{F.addEventListener("test",ws,e),F.removeEventListener("test",ws,e)}catch{}return t}();function ks(t){return/^[\s\xa0]*$/.test(t)}var qo=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function wr(t,e){return t<e?-1:t>e?1:0}function xs(){var t=F.navigator;return t&&(t=t.userAgent)?t:""}function Xe(t){return xs().indexOf(t)!=-1}function pi(t){return pi[" "](t),t}pi[" "]=ws;function tg(t){var e=rg;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var ng=Xe("Opera"),Ht=Xe("Trident")||Xe("MSIE"),cl=Xe("Edge"),jr=cl||Ht,hl=Xe("Gecko")&&!(xs().toLowerCase().indexOf("webkit")!=-1&&!Xe("Edge"))&&!(Xe("Trident")||Xe("MSIE"))&&!Xe("Edge"),sg=xs().toLowerCase().indexOf("webkit")!=-1&&!Xe("Edge");function fl(){var t=F.document;return t?t.documentMode:void 0}var Es;e:{var kr="",Er=function(){var t=xs();if(hl)return/rv:([^\);]+)(\)|;)/.exec(t);if(cl)return/Edge\/([\d\.]+)/.exec(t);if(Ht)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(sg)return/WebKit\/(\S+)/.exec(t);if(ng)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Er&&(kr=Er?Er[1]:""),Ht){var Tr=fl();if(Tr!=null&&Tr>parseFloat(kr)){Es=String(Tr);break e}}Es=kr}var rg={};function ig(){return tg(function(){let t=0;const e=qo(String(Es)).split("."),n=qo("9").split("."),s=Math.max(e.length,n.length);for(let o=0;t==0&&o<s;o++){var r=e[o]||"",i=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],r[0].length==0&&i[0].length==0)break;t=wr(r[1].length==0?0:parseInt(r[1],10),i[1].length==0?0:parseInt(i[1],10))||wr(r[2].length==0,i[2].length==0)||wr(r[2],i[2]),r=r[3],i=i[3]}while(t==0)}return 0<=t})}var zr;if(F.document&&Ht){var Ho=fl();zr=Ho||parseInt(Es,10)||void 0}else zr=void 0;var og=zr;function En(t,e){if(Fe.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(hl){e:{try{pi(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:ag[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&En.X.h.call(this)}}Me(En,Fe);var ag={2:"touch",3:"pen",4:"mouse"};En.prototype.h=function(){En.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var xn="closure_listenable_"+(1e6*Math.random()|0),lg=0;function ug(t,e,n,s,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.ha=r,this.key=++lg,this.ba=this.ea=!1}function Us(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function yi(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function dl(t){const e={};for(const n in t)e[n]=t[n];return e}const Ko="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gl(t,e){let n,s;for(let r=1;r<arguments.length;r++){s=arguments[r];for(n in s)t[n]=s[n];for(let i=0;i<Ko.length;i++)n=Ko[i],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function Bs(t){this.src=t,this.g={},this.h=0}Bs.prototype.add=function(t,e,n,s,r){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Hr(t,e,s,r);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new ug(e,this.src,i,!!s,r),e.ea=n,t.push(e)),e};function qr(t,e){var n=e.type;if(n in t.g){var s=t.g[n],r=ul(s,e),i;(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(Us(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Hr(t,e,n,s){for(var r=0;r<t.length;++r){var i=t[r];if(!i.ba&&i.listener==e&&i.capture==!!n&&i.ha==s)return r}return-1}var vi="closure_lm_"+(1e6*Math.random()|0),Cr={};function ml(t,e,n,s,r){if(s&&s.once)return yl(t,e,n,s,r);if(Array.isArray(e)){for(var i=0;i<e.length;i++)ml(t,e[i],n,s,r);return null}return n=wi(n),t&&t[xn]?t.N(e,n,Fn(s)?!!s.capture:!!s,r):pl(t,e,n,!1,s,r)}function pl(t,e,n,s,r,i){if(!e)throw Error("Invalid event type");var o=Fn(r)?!!r.capture:!!r,a=_i(t);if(a||(t[vi]=a=new Bs(t)),n=a.add(e,n,s,o,i),n.proxy)return n;if(s=cg(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)eg||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),s,r);else if(t.attachEvent)t.attachEvent(bl(e.toString()),s);else if(t.addListener&&t.removeListener)t.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function cg(){function t(n){return e.call(t.src,t.listener,n)}const e=hg;return t}function yl(t,e,n,s,r){if(Array.isArray(e)){for(var i=0;i<e.length;i++)yl(t,e[i],n,s,r);return null}return n=wi(n),t&&t[xn]?t.O(e,n,Fn(s)?!!s.capture:!!s,r):pl(t,e,n,!0,s,r)}function vl(t,e,n,s,r){if(Array.isArray(e))for(var i=0;i<e.length;i++)vl(t,e[i],n,s,r);else s=Fn(s)?!!s.capture:!!s,n=wi(n),t&&t[xn]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Hr(i,n,s,r),-1<n&&(Us(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=_i(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Hr(e,n,s,r)),(n=-1<t?e[t]:null)&&bi(n))}function bi(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[xn])qr(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(bl(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=_i(e))?(qr(n,t),n.h==0&&(n.src=null,e[vi]=null)):Us(t)}}}function bl(t){return t in Cr?Cr[t]:Cr[t]="on"+t}function hg(t,e){if(t.ba)t=!0;else{e=new En(e,this);var n=t.listener,s=t.ha||t.src;t.ea&&bi(t),t=n.call(s,e)}return t}function _i(t){return t=t[vi],t instanceof Bs?t:null}var Ir="__closure_events_fn_"+(1e9*Math.random()>>>0);function wi(t){return typeof t=="function"?t:(t[Ir]||(t[Ir]=function(e){return t.handleEvent(e)}),t[Ir])}function Ie(){mt.call(this),this.i=new Bs(this),this.P=this,this.I=null}Me(Ie,mt);Ie.prototype[xn]=!0;Ie.prototype.removeEventListener=function(t,e,n,s){vl(this,t,e,n,s)};function Ne(t,e){var n,s=t.I;if(s)for(n=[];s;s=s.I)n.push(s);if(t=t.P,s=e.type||e,typeof e=="string")e=new Fe(e,t);else if(e instanceof Fe)e.target=e.target||t;else{var r=e;e=new Fe(s,t),gl(e,r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];r=rs(o,s,!0,e)&&r}if(o=e.g=t,r=rs(o,s,!0,e)&&r,r=rs(o,s,!1,e)&&r,n)for(i=0;i<n.length;i++)o=e.g=n[i],r=rs(o,s,!1,e)&&r}Ie.prototype.M=function(){if(Ie.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)Us(n[s]);delete t.g[e],t.h--}}this.I=null};Ie.prototype.N=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)};Ie.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};function rs(t,e,n,s){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ba&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.ea&&qr(t.i,o),r=a.call(l,s)!==!1&&r}}return r&&!s.defaultPrevented}var ki=F.JSON.stringify;function fg(){var t=kl;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class dg{constructor(){this.h=this.g=null}add(e,n){const s=_l.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}}var _l=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new gg,t=>t.reset());class gg{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function mg(t){F.setTimeout(()=>{throw t},0)}function wl(t,e){Kr||pg(),Gr||(Kr(),Gr=!0),kl.add(t,e)}var Kr;function pg(){var t=F.Promise.resolve(void 0);Kr=function(){t.then(yg)}}var Gr=!1,kl=new dg;function yg(){for(var t;t=fg();){try{t.h.call(t.g)}catch(n){mg(n)}var e=_l;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Gr=!1}function js(t,e){Ie.call(this),this.h=t||1,this.g=e||F,this.j=Ve(this.lb,this),this.l=Date.now()}Me(js,Ie);D=js.prototype;D.ca=!1;D.R=null;D.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ne(this,"tick"),this.ca&&(Ei(this),this.start()))}};D.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Ei(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}D.M=function(){js.X.M.call(this),Ei(this),delete this.g};function Ti(t,e,n){if(typeof t=="function")n&&(t=Ve(t,n));else if(t&&typeof t.handleEvent=="function")t=Ve(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:F.setTimeout(t,e||0)}function El(t){t.g=Ti(()=>{t.g=null,t.i&&(t.i=!1,El(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class vg extends mt{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:El(this)}M(){super.M(),this.g&&(F.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tn(t){mt.call(this),this.h=t,this.g={}}Me(Tn,mt);var Go=[];function Tl(t,e,n,s){Array.isArray(n)||(n&&(Go[0]=n.toString()),n=Go);for(var r=0;r<n.length;r++){var i=ml(e,n[r],s||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Cl(t){yi(t.g,function(e,n){this.g.hasOwnProperty(n)&&bi(e)},t),t.g={}}Tn.prototype.M=function(){Tn.X.M.call(this),Cl(this)};Tn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function zs(){this.g=!0}zs.prototype.Aa=function(){this.g=!1};function bg(t,e,n,s,r,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function _g(t,e,n,s,r,i,o){t.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+e+`
`+n+`
`+i+" "+o})}function Pt(t,e,n,s){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+kg(t,n)+(s?" "+s:"")})}function wg(t,e){t.info(function(){return"TIMEOUT: "+e})}zs.prototype.info=function(){};function kg(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var r=s[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return ki(n)}catch{return e}}var Nt={},Qo=null;function qs(){return Qo=Qo||new Ie}Nt.Pa="serverreachability";function Il(t){Fe.call(this,Nt.Pa,t)}Me(Il,Fe);function Cn(t){const e=qs();Ne(e,new Il(e))}Nt.STAT_EVENT="statevent";function Sl(t,e){Fe.call(this,Nt.STAT_EVENT,t),this.stat=e}Me(Sl,Fe);function je(t){const e=qs();Ne(e,new Sl(e,t))}Nt.Qa="timingevent";function Al(t,e){Fe.call(this,Nt.Qa,t),this.size=e}Me(Al,Fe);function Un(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return F.setTimeout(function(){t()},e)}var Hs={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Dl={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ci(){}Ci.prototype.h=null;function Wo(t){return t.h||(t.h=t.i())}function Nl(){}var Bn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Ii(){Fe.call(this,"d")}Me(Ii,Fe);function Si(){Fe.call(this,"c")}Me(Si,Fe);var Qr;function Ks(){}Me(Ks,Ci);Ks.prototype.g=function(){return new XMLHttpRequest};Ks.prototype.i=function(){return{}};Qr=new Ks;function jn(t,e,n,s){this.l=t,this.j=e,this.m=n,this.U=s||1,this.S=new Tn(this),this.O=Eg,t=jr?125:void 0,this.T=new js(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Rl}function Rl(){this.i=null,this.g="",this.h=!1}var Eg=45e3,Wr={},Ts={};D=jn.prototype;D.setTimeout=function(t){this.O=t};function Xr(t,e,n){t.K=1,t.v=Qs(nt(e)),t.s=n,t.P=!0,Ll(t,null)}function Ll(t,e){t.F=Date.now(),zn(t),t.A=nt(t.v);var n=t.A,s=t.U;Array.isArray(s)||(s=[String(s)]),Bl(n.i,"t",s),t.C=0,n=t.l.H,t.h=new Rl,t.g=au(t.l,n?e:null,!t.s),0<t.N&&(t.L=new vg(Ve(t.La,t,t.g),t.N)),Tl(t.S,t.g,"readystatechange",t.ib),e=t.H?dl(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Cn(),bg(t.j,t.u,t.A,t.m,t.U,t.s)}D.ib=function(t){t=t.target;const e=this.L;e&&$e(t)==3?e.l():this.La(t)};D.La=function(t){try{if(t==this.g)e:{const c=$e(this.g);var e=this.g.Ea();const h=this.g.aa();if(!(3>c)&&(c!=3||jr||this.g&&(this.h.h||this.g.fa()||Zo(this.g)))){this.I||c!=4||e==7||(e==8||0>=h?Cn(3):Cn(2)),Gs(this);var n=this.g.aa();this.Y=n;t:if(Ml(this)){var s=Zo(this.g);t="";var r=s.length,i=$e(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bt(this),mn(this);var o="";break t}this.h.i=new F.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:i&&e==r-1});s.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,_g(this.j,this.u,this.A,this.m,this.U,c,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ks(a)){var u=a;break t}}u=null}if(n=u)Pt(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Yr(this,n);else{this.i=!1,this.o=3,je(12),bt(this),mn(this);break e}}this.P?(Ol(this,c,o),jr&&this.i&&c==3&&(Tl(this.S,this.T,"tick",this.hb),this.T.start())):(Pt(this.j,this.m,o,null),Yr(this,o)),c==4&&bt(this),this.i&&!this.I&&(c==4?su(this.l,this):(this.i=!1,zn(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,je(12)):(this.o=0,je(13)),bt(this),mn(this)}}}catch{}finally{}};function Ml(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function Ol(t,e,n){let s=!0,r;for(;!t.I&&t.C<n.length;)if(r=Tg(t,n),r==Ts){e==4&&(t.o=4,je(14),s=!1),Pt(t.j,t.m,null,"[Incomplete Response]");break}else if(r==Wr){t.o=4,je(15),Pt(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}else Pt(t.j,t.m,r,null),Yr(t,r);Ml(t)&&r!=Ts&&r!=Wr&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,je(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Oi(e),e.K=!0,je(11))):(Pt(t.j,t.m,n,"[Invalid Chunked Response]"),bt(t),mn(t))}D.hb=function(){if(this.g){var t=$e(this.g),e=this.g.fa();this.C<e.length&&(Gs(this),Ol(this,t,e),this.i&&t!=4&&zn(this))}};function Tg(t,e){var n=t.C,s=e.indexOf(`
`,n);return s==-1?Ts:(n=Number(e.substring(n,s)),isNaN(n)?Wr:(s+=1,s+n>e.length?Ts:(e=e.substr(s,n),t.C=s+n,e)))}D.cancel=function(){this.I=!0,bt(this)};function zn(t){t.V=Date.now()+t.O,Pl(t,t.O)}function Pl(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Un(Ve(t.gb,t),e)}function Gs(t){t.B&&(F.clearTimeout(t.B),t.B=null)}D.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(wg(this.j,this.A),this.K!=2&&(Cn(),je(17)),bt(this),this.o=2,mn(this)):Pl(this,this.V-t)};function mn(t){t.l.G==0||t.I||su(t.l,t)}function bt(t){Gs(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Ei(t.T),Cl(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Yr(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||Jr(n.h,t))){if(!t.J&&Jr(n.h,t)&&n.G==3){try{var s=n.Fa.g.parse(e)}catch{s=null}if(Array.isArray(s)&&s.length==3){var r=s;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Ss(n),Ys(n);else break e;Mi(n),je(18)}}else n.Ba=r[1],0<n.Ba-n.T&&37500>r[2]&&n.L&&n.A==0&&!n.v&&(n.v=Un(Ve(n.cb,n),6e3));if(1>=ql(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else _t(n,11)}else if((t.J||n.g==t)&&Ss(n),!ks(e))for(r=n.Fa.g.parse(e),e=0;e<r.length;e++){let u=r[e];if(n.T=u[0],u=u[1],n.G==2)if(u[0]=="c"){n.I=u[1],n.ka=u[2];const c=u[3];c!=null&&(n.ma=c,n.j.info("VER="+n.ma));const h=u[4];h!=null&&(n.Ca=h,n.j.info("SVER="+n.Ca));const f=u[5];f!=null&&typeof f=="number"&&0<f&&(s=1.5*f,n.J=s,n.j.info("backChannelRequestTimeoutMs_="+s)),s=n;const g=t.g;if(g){const d=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(d){var i=s.h;i.g||d.indexOf("spdy")==-1&&d.indexOf("quic")==-1&&d.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Ai(i,i.h),i.h=null))}if(s.D){const y=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(s.za=y,le(s.F,s.D,y))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),s=n;var o=t;if(s.sa=ou(s,s.H?s.ka:null,s.V),o.J){Hl(s.h,o);var a=o,l=s.J;l&&a.setTimeout(l),a.B&&(Gs(a),zn(a)),s.g=o}else tu(s);0<n.i.length&&Js(n)}else u[0]!="stop"&&u[0]!="close"||_t(n,7);else n.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?_t(n,7):Li(n):u[0]!="noop"&&n.l&&n.l.wa(u),n.A=0)}}Cn(4)}catch{}}function Cg(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Fs(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}e=[],n=0;for(s in t)e[n++]=t[s];return e}function Ig(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Fs(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const s in t)e[n++]=s;return e}}}function Vl(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Fs(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Ig(t),s=Cg(t),r=s.length,i=0;i<r;i++)e.call(void 0,s[i],n&&n[i],t)}var Fl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sg(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),r=null;if(0<=s){var i=t[n].substring(0,s);r=t[n].substring(s+1)}else i=t[n];e(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function kt(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof kt){this.h=e!==void 0?e:t.h,Cs(this,t.j),this.s=t.s,this.g=t.g,Is(this,t.m),this.l=t.l,e=t.i;var n=new In;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Xo(this,n),this.o=t.o}else t&&(n=String(t).match(Fl))?(this.h=!!e,Cs(this,n[1]||"",!0),this.s=ln(n[2]||""),this.g=ln(n[3]||"",!0),Is(this,n[4]),this.l=ln(n[5]||"",!0),Xo(this,n[6]||"",!0),this.o=ln(n[7]||"")):(this.h=!!e,this.i=new In(null,this.h))}kt.prototype.toString=function(){var t=[],e=this.j;e&&t.push(un(e,Yo,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(un(e,Yo,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(un(n,n.charAt(0)=="/"?Ng:Dg,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",un(n,Lg)),t.join("")};function nt(t){return new kt(t)}function Cs(t,e,n){t.j=n?ln(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Is(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Xo(t,e,n){e instanceof In?(t.i=e,Mg(t.i,t.h)):(n||(e=un(e,Rg)),t.i=new In(e,t.h))}function le(t,e,n){t.i.set(e,n)}function Qs(t){return le(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ln(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function un(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Ag),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ag(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Yo=/[#\/\?@]/g,Dg=/[#\?:]/g,Ng=/[#\?]/g,Rg=/[#\?@]/g,Lg=/#/g;function In(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function pt(t){t.g||(t.g=new Map,t.h=0,t.i&&Sg(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}D=In.prototype;D.add=function(t,e){pt(this),this.i=null,t=Zt(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function xl(t,e){pt(t),e=Zt(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Ul(t,e){return pt(t),e=Zt(t,e),t.g.has(e)}D.forEach=function(t,e){pt(this),this.g.forEach(function(n,s){n.forEach(function(r){t.call(e,r,s,this)},this)},this)};D.oa=function(){pt(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const r=t[s];for(let i=0;i<r.length;i++)n.push(e[s])}return n};D.W=function(t){pt(this);let e=[];if(typeof t=="string")Ul(this,t)&&(e=e.concat(this.g.get(Zt(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};D.set=function(t,e){return pt(this),this.i=null,t=Zt(this,t),Ul(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};D.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function Bl(t,e,n){xl(t,e),0<n.length&&(t.i=null,t.g.set(Zt(t,e),mi(n)),t.h+=n.length)}D.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const i=encodeURIComponent(String(s)),o=this.W(s);for(s=0;s<o.length;s++){var r=i;o[s]!==""&&(r+="="+encodeURIComponent(String(o[s]))),t.push(r)}}return this.i=t.join("&")};function Zt(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Mg(t,e){e&&!t.j&&(pt(t),t.i=null,t.g.forEach(function(n,s){var r=s.toLowerCase();s!=r&&(xl(this,s),Bl(this,r,n))},t)),t.j=e}var Og=class{constructor(t,e){this.h=t,this.g=e}};function jl(t){this.l=t||Pg,F.PerformanceNavigationTiming?(t=F.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(F.g&&F.g.Ga&&F.g.Ga()&&F.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Pg=10;function zl(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function ql(t){return t.h?1:t.g?t.g.size:0}function Jr(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Ai(t,e){t.g?t.g.add(e):t.h=e}function Hl(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}jl.prototype.cancel=function(){if(this.i=Kl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Kl(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return mi(t.i)}function Di(){}Di.prototype.stringify=function(t){return F.JSON.stringify(t,void 0)};Di.prototype.parse=function(t){return F.JSON.parse(t,void 0)};function Vg(){this.g=new Di}function Fg(t,e,n){const s=n||"";try{Vl(t,function(r,i){let o=r;Fn(r)&&(o=ki(r)),e.push(s+i+"="+encodeURIComponent(o))})}catch(r){throw e.push(s+"type="+encodeURIComponent("_badmap")),r}}function xg(t,e){const n=new zs;if(F.Image){const s=new Image;s.onload=ss(is,n,s,"TestLoadImage: loaded",!0,e),s.onerror=ss(is,n,s,"TestLoadImage: error",!1,e),s.onabort=ss(is,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=ss(is,n,s,"TestLoadImage: timeout",!1,e),F.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=t}else e(!1)}function is(t,e,n,s,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(s)}catch{}}function qn(t){this.l=t.ac||null,this.j=t.jb||!1}Me(qn,Ci);qn.prototype.g=function(){return new Ws(this.l,this.j)};qn.prototype.i=function(t){return function(){return t}}({});function Ws(t,e){Ie.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Ni,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Me(Ws,Ie);var Ni=0;D=Ws.prototype;D.open=function(t,e){if(this.readyState!=Ni)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Sn(this)};D.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||F).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};D.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hn(this)),this.readyState=Ni};D.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Sn(this)),this.g&&(this.readyState=3,Sn(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof F.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Gl(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function Gl(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}D.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Hn(this):Sn(this),this.readyState==3&&Gl(this)}};D.Va=function(t){this.g&&(this.response=this.responseText=t,Hn(this))};D.Ua=function(t){this.g&&(this.response=t,Hn(this))};D.ga=function(){this.g&&Hn(this)};function Hn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Sn(t)}D.setRequestHeader=function(t,e){this.v.append(t,e)};D.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};D.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Sn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Ws.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Ug=F.JSON.parse;function me(t){Ie.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ql,this.K=this.L=!1}Me(me,Ie);var Ql="",Bg=/^https?$/i,jg=["POST","PUT"];D=me.prototype;D.Ka=function(t){this.L=t};D.da=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Qr.g(),this.C=this.u?Wo(this.u):Wo(Qr),this.g.onreadystatechange=Ve(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){Jo(this,i);return}if(t=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var r in s)n.set(r,s[r]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const i of s.keys())n.set(i,s.get(i));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),r=F.FormData&&t instanceof F.FormData,!(0<=ul(jg,e))||s||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Yl(this),0<this.B&&((this.K=zg(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ve(this.qa,this)):this.A=Ti(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){Jo(this,i)}};function zg(t){return Ht&&ig()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}D.qa=function(){typeof gi<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ne(this,"timeout"),this.abort(8))};function Jo(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Wl(t),Xs(t)}function Wl(t){t.D||(t.D=!0,Ne(t,"complete"),Ne(t,"error"))}D.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ne(this,"complete"),Ne(this,"abort"),Xs(this))};D.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xs(this,!0)),me.X.M.call(this)};D.Ha=function(){this.s||(this.F||this.v||this.l?Xl(this):this.fb())};D.fb=function(){Xl(this)};function Xl(t){if(t.h&&typeof gi<"u"&&(!t.C[1]||$e(t)!=4||t.aa()!=2)){if(t.v&&$e(t)==4)Ti(t.Ha,0,t);else if(Ne(t,"readystatechange"),$e(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=a===0){var r=String(t.H).match(Fl)[1]||null;if(!r&&F.self&&F.self.location){var i=F.self.location.protocol;r=i.substr(0,i.length-1)}s=!Bg.test(r?r.toLowerCase():"")}n=s}if(n)Ne(t,"complete"),Ne(t,"success");else{t.m=6;try{var o=2<$e(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",Wl(t)}}finally{Xs(t)}}}}function Xs(t,e){if(t.g){Yl(t);const n=t.g,s=t.C[0]?ws:null;t.g=null,t.C=null,e||Ne(t,"ready");try{n.onreadystatechange=s}catch{}}}function Yl(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(F.clearTimeout(t.A),t.A=null)}function $e(t){return t.g?t.g.readyState:0}D.aa=function(){try{return 2<$e(this)?this.g.status:-1}catch{return-1}};D.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};D.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Ug(e)}};function Zo(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Ql:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}D.Ea=function(){return this.m};D.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Jl(t){let e="";return yi(t,function(n,s){e+=s,e+=":",e+=n,e+=`\r
`}),e}function Ri(t,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=Jl(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):le(t,e,n))}function on(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Zl(t){this.Ca=0,this.i=[],this.j=new zs,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=on("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=on("baseRetryDelayMs",5e3,t),this.bb=on("retryDelaySeedMs",1e4,t),this.$a=on("forwardChannelMaxRetries",2,t),this.ta=on("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new jl(t&&t.concurrentRequestLimit),this.Fa=new Vg,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}D=Zl.prototype;D.ma=8;D.G=1;function Li(t){if($l(t),t.G==3){var e=t.U++,n=nt(t.F);le(n,"SID",t.I),le(n,"RID",e),le(n,"TYPE","terminate"),Kn(t,n),e=new jn(t,t.j,e,void 0),e.K=2,e.v=Qs(nt(n)),n=!1,F.navigator&&F.navigator.sendBeacon&&(n=F.navigator.sendBeacon(e.v.toString(),"")),!n&&F.Image&&(new Image().src=e.v,n=!0),n||(e.g=au(e.l,null),e.g.da(e.v)),e.F=Date.now(),zn(e)}iu(t)}function Ys(t){t.g&&(Oi(t),t.g.cancel(),t.g=null)}function $l(t){Ys(t),t.u&&(F.clearTimeout(t.u),t.u=null),Ss(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&F.clearTimeout(t.m),t.m=null)}function Js(t){zl(t.h)||t.m||(t.m=!0,wl(t.Ja,t),t.C=0)}function qg(t,e){return ql(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=Un(Ve(t.Ja,t,e),ru(t,t.C)),t.C++,!0)}D.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new jn(this,this.j,t,void 0);let i=this.s;if(this.S&&(i?(i=dl(i),gl(i,this.S)):i=this.S),this.o!==null||this.N||(r.H=i,i=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var s=this.i[n];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(e+=s,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=eu(this,r,e),n=nt(this.F),le(n,"RID",t),le(n,"CVER",22),this.D&&le(n,"X-HTTP-Session-Id",this.D),Kn(this,n),i&&(this.N?e="headers="+encodeURIComponent(String(Jl(i)))+"&"+e:this.o&&Ri(n,this.o,i)),Ai(this.h,r),this.Ya&&le(n,"TYPE","init"),this.O?(le(n,"$req",e),le(n,"SID","null"),r.Z=!0,Xr(r,n,null)):Xr(r,n,e),this.G=2}}else this.G==3&&(t?$o(this,t):this.i.length==0||zl(this.h)||$o(this))};function $o(t,e){var n;e?n=e.m:n=t.U++;const s=nt(t.F);le(s,"SID",t.I),le(s,"RID",n),le(s,"AID",t.T),Kn(t,s),t.o&&t.s&&Ri(s,t.o,t.s),n=new jn(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=eu(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),Ai(t.h,n),Xr(n,s,e)}function Kn(t,e){t.ia&&yi(t.ia,function(n,s){le(e,s,n)}),t.l&&Vl({},function(n,s){le(e,s,n)})}function eu(t,e,n){n=Math.min(t.i.length,n);var s=t.l?Ve(t.l.Ra,t.l,t):null;e:{var r=t.i;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=r[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let u=r[l].h;const c=r[l].g;if(u-=i,0>u)i=Math.max(0,r[l].h-100),a=!1;else try{Fg(c,o,"req"+u+"_")}catch{s&&s(c)}}if(a){s=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,s}function tu(t){t.g||t.u||(t.Z=1,wl(t.Ia,t),t.A=0)}function Mi(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=Un(Ve(t.Ia,t),ru(t,t.A)),t.A++,!0)}D.Ia=function(){if(this.u=null,nu(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=Un(Ve(this.eb,this),t)}};D.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,je(10),Ys(this),nu(this))};function Oi(t){t.B!=null&&(F.clearTimeout(t.B),t.B=null)}function nu(t){t.g=new jn(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=nt(t.sa);le(e,"RID","rpc"),le(e,"SID",t.I),le(e,"CI",t.L?"0":"1"),le(e,"AID",t.T),le(e,"TYPE","xmlhttp"),Kn(t,e),t.o&&t.s&&Ri(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=Qs(nt(e)),n.s=null,n.P=!0,Ll(n,t)}D.cb=function(){this.v!=null&&(this.v=null,Ys(this),Mi(this),je(19))};function Ss(t){t.v!=null&&(F.clearTimeout(t.v),t.v=null)}function su(t,e){var n=null;if(t.g==e){Ss(t),Oi(t),t.g=null;var s=2}else if(Jr(t.h,e))n=e.D,Hl(t.h,e),s=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(s==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;s=qs(),Ne(s,new Al(s,n)),Js(t)}else tu(t);else if(r=e.o,r==3||r==0&&0<t.pa||!(s==1&&qg(t,e)||s==2&&Mi(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:_t(t,5);break;case 4:_t(t,10);break;case 3:_t(t,6);break;default:_t(t,2)}}}function ru(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function _t(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var s=Ve(t.kb,t);n||(n=new kt("//www.google.com/images/cleardot.gif"),F.location&&F.location.protocol=="http"||Cs(n,"https"),Qs(n)),xg(n.toString(),s)}else je(2);t.G=0,t.l&&t.l.va(e),iu(t),$l(t)}D.kb=function(t){t?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))};function iu(t){if(t.G=0,t.la=[],t.l){const e=Kl(t.h);(e.length!=0||t.i.length!=0)&&(zo(t.la,e),zo(t.la,t.i),t.h.i.length=0,mi(t.i),t.i.length=0),t.l.ua()}}function ou(t,e,n){var s=n instanceof kt?nt(n):new kt(n,void 0);if(s.g!="")e&&(s.g=e+"."+s.g),Is(s,s.m);else{var r=F.location;s=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var i=new kt(null,void 0);s&&Cs(i,s),e&&(i.g=e),r&&Is(i,r),n&&(i.l=n),s=i}return n=t.D,e=t.za,n&&e&&le(s,n,e),le(s,"VER",t.ma),Kn(t,s),s}function au(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new me(new qn({jb:!0})):new me(t.ra),e.Ka(t.H),e}function lu(){}D=lu.prototype;D.xa=function(){};D.wa=function(){};D.va=function(){};D.ua=function(){};D.Ra=function(){};function As(){if(Ht&&!(10<=Number(og)))throw Error("Environmental error: no available transport.")}As.prototype.g=function(t,e){return new He(t,e)};function He(t,e){Ie.call(this),this.g=new Zl(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!ks(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ks(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new $t(this)}Me(He,Ie);He.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;je(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=ou(t,null,t.V),Js(t)};He.prototype.close=function(){Li(this.g)};He.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=ki(t),t=n);e.i.push(new Og(e.ab++,t)),e.G==3&&Js(e)};He.prototype.M=function(){this.g.l=null,delete this.j,Li(this.g),delete this.g,He.X.M.call(this)};function uu(t){Ii.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Me(uu,Ii);function cu(){Si.call(this),this.status=1}Me(cu,Si);function $t(t){this.g=t}Me($t,lu);$t.prototype.xa=function(){Ne(this.g,"a")};$t.prototype.wa=function(t){Ne(this.g,new uu(t))};$t.prototype.va=function(t){Ne(this.g,new cu)};$t.prototype.ua=function(){Ne(this.g,"b")};As.prototype.createWebChannel=As.prototype.g;He.prototype.send=He.prototype.u;He.prototype.open=He.prototype.m;He.prototype.close=He.prototype.close;Hs.NO_ERROR=0;Hs.TIMEOUT=8;Hs.HTTP_ERROR=6;Dl.COMPLETE="complete";Nl.EventType=Bn;Bn.OPEN="a";Bn.CLOSE="b";Bn.ERROR="c";Bn.MESSAGE="d";Ie.prototype.listen=Ie.prototype.N;me.prototype.listenOnce=me.prototype.O;me.prototype.getLastError=me.prototype.Oa;me.prototype.getLastErrorCode=me.prototype.Ea;me.prototype.getStatus=me.prototype.aa;me.prototype.getResponseJson=me.prototype.Sa;me.prototype.getResponseText=me.prototype.fa;me.prototype.send=me.prototype.da;me.prototype.setWithCredentials=me.prototype.Ka;var Hg=function(){return new As},Kg=function(){return qs()},Sr=Hs,Gg=Dl,Qg=Nt,ea={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Wg=qn,os=Nl,Xg=me;const ta="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Oe.UNAUTHENTICATED=new Oe(null),Oe.GOOGLE_CREDENTIALS=new Oe("google-credentials-uid"),Oe.FIRST_PARTY=new Oe("first-party-uid"),Oe.MOCK_USER=new Oe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let en="9.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St=new sl("@firebase/firestore");function na(){return St.logLevel}function N(t,...e){if(St.logLevel<=J.DEBUG){const n=e.map(Pi);St.debug(`Firestore (${en}): ${t}`,...n)}}function st(t,...e){if(St.logLevel<=J.ERROR){const n=e.map(Pi);St.error(`Firestore (${en}): ${t}`,...n)}}function Zr(t,...e){if(St.logLevel<=J.WARN){const n=e.map(Pi);St.warn(`Firestore (${en}): ${t}`,...n)}}function Pi(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x(t="Unexpected state"){const e=`FIRESTORE (${en}) INTERNAL ASSERTION FAILED: `+t;throw st(e),new Error(e)}function ee(t,e){t||x()}function U(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends Jt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yg{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Oe.UNAUTHENTICATED))}shutdown(){}}class Jg{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Zg{constructor(e){this.t=e,this.currentUser=Oe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new Et;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Et,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{N("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(N("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Et)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(N("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ee(typeof s.accessToken=="string"),new hu(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ee(e===null||typeof e=="string"),new Oe(e)}}class $g{constructor(e,n,s,r){this.h=e,this.l=n,this.m=s,this.g=r,this.type="FirstParty",this.user=Oe.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ee(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class em{constructor(e,n,s,r){this.h=e,this.l=n,this.m=s,this.g=r}getToken(){return Promise.resolve(new $g(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(Oe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nm{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const s=i=>{i.error!=null&&N("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.A;return this.A=i.token,N("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{N("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.T.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.T.getImmediate({optional:!0});i?r(i):N("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ee(typeof n.token=="string"),this.A=n.token,new tm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const r=sm(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%e.length))}return s}}function Z(t,e){return t<e?-1:t>e?1:0}function Kt(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new L(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return we.fromMillis(Date.now())}static fromDate(e){return we.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new we(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.timestamp=e}static fromTimestamp(e){return new q(e)}static min(){return new q(new we(0,0))}static max(){return new q(new we(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n,s){n===void 0?n=0:n>e.length&&x(),s===void 0?s=e.length-n:s>e.length-n&&x(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return An.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof An?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=e.get(r),o=n.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ue extends An{construct(e,n,s){return new ue(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new L(_.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new ue(n)}static emptyPath(){return new ue([])}}const rm=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pe extends An{construct(e,n,s){return new Pe(e,n,s)}static isValidIdentifier(e){return rm.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pe(["__name__"])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new L(_.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new L(_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new L(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new L(_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pe(n)}static emptyPath(){return new Pe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.path=e}static fromPath(e){return new M(ue.fromString(e))}static fromName(e){return new M(ue.fromString(e).popFirst(5))}static empty(){return new M(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new M(new ue(e.slice()))}}function im(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=q.fromTimestamp(s===1e9?new we(n+1,0):new we(n,s));return new ft(r,M.empty(),e)}function om(t){return new ft(t.readTime,t.key,-1)}class ft{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ft(q.min(),M.empty(),-1)}static max(){return new ft(q.max(),M.empty(),-1)}}function am(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=M.comparator(t.documentKey,e.documentKey),n!==0?n:Z(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class um{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gn(t){if(t.code!==_.FAILED_PRECONDITION||t.message!==lm)throw t;N("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&x(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new w((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof w?n:w.resolve(n)}catch(n){return w.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):w.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):w.reject(n)}static resolve(e){return new w((n,s)=>{n(e)})}static reject(e){return new w((n,s)=>{s(e)})}static waitFor(e){return new w((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(e){let n=w.resolve(!1);for(const s of e)n=n.next(r=>r?w.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new w((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===i&&s(o)},c=>r(c))}})}static doWhile(e,n){return new w((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function Qn(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ut(s),this.ct=s=>n.writeSequenceNumber(s))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function tn(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function du(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vi.at=-1;class Ee{constructor(e,n){this.comparator=e,this.root=n||Se.EMPTY}insert(e,n){return new Ee(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Se.BLACK,null,null))}remove(e){return new Ee(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Se.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new as(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new as(this.root,e,this.comparator,!1)}getReverseIterator(){return new as(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new as(this.root,e,this.comparator,!0)}}class as{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Se{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s!=null?s:Se.RED,this.left=r!=null?r:Se.EMPTY,this.right=i!=null?i:Se.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Se(e!=null?e:this.key,n!=null?n:this.value,s!=null?s:this.color,r!=null?r:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Se.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Se.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Se.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Se.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw x();const e=this.left.check();if(e!==this.right.check())throw x();return e+(this.isRed()?0:1)}}Se.EMPTY=null,Se.RED=!0,Se.BLACK=!1;Se.EMPTY=new class{constructor(){this.size=0}get key(){throw x()}get value(){throw x()}get color(){throw x()}get left(){throw x()}get right(){throw x()}copy(t,e,n,s,r){return this}insert(t,e,n){return new Se(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.comparator=e,this.data=new Ee(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ra(this.data.getIterator())}getIteratorFrom(e){return new ra(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ke(this.comparator);return n.data=e,n}}class ra{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.fields=e,e.sort(Pe.comparator)}static empty(){return new Ye([])}unionWith(e){let n=new ke(Pe.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Ye(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Kt(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Be(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new Be(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Z(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Be.EMPTY_BYTE_STRING=new Be("");const cm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dt(t){if(ee(!!t),typeof t=="string"){let e=0;const n=cm.exec(t);if(ee(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:be(t.seconds),nanos:be(t.nanos)}}function be(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Gt(t){return typeof t=="string"?Be.fromBase64String(t):Be.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function mu(t){const e=t.mapValue.fields.__previous_value__;return gu(e)?mu(e):e}function Dn(t){const e=dt(t.mapValue.fields.__local_write_time__.timestampValue);return new we(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n,s,r,i,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Nn{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Nn("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Nn&&e.projectId===this.projectId&&e.database===this.database}}function Zs(t){return t==null}function Ds(t){return t===0&&1/t==-1/0}function fm(t){return typeof t=="number"&&Number.isInteger(t)&&!Ds(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function At(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?gu(t)?4:dm(t)?9007199254740991:10:x()}function Je(t,e){if(t===e)return!0;const n=At(t);if(n!==At(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Dn(t).isEqual(Dn(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=dt(s.timestampValue),o=dt(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Gt(s.bytesValue).isEqual(Gt(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return be(s.geoPointValue.latitude)===be(r.geoPointValue.latitude)&&be(s.geoPointValue.longitude)===be(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return be(s.integerValue)===be(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=be(s.doubleValue),o=be(r.doubleValue);return i===o?Ds(i)===Ds(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Kt(t.arrayValue.values||[],e.arrayValue.values||[],Je);case 10:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(sa(i)!==sa(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!Je(i[a],o[a])))return!1;return!0}(t,e);default:return x()}}function Rn(t,e){return(t.values||[]).find(n=>Je(n,e))!==void 0}function Qt(t,e){if(t===e)return 0;const n=At(t),s=At(e);if(n!==s)return Z(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Z(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=be(r.integerValue||r.doubleValue),a=be(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return ia(t.timestampValue,e.timestampValue);case 4:return ia(Dn(t),Dn(e));case 5:return Z(t.stringValue,e.stringValue);case 6:return function(r,i){const o=Gt(r),a=Gt(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=Z(o[l],a[l]);if(u!==0)return u}return Z(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=Z(be(r.latitude),be(i.latitude));return o!==0?o:Z(be(r.longitude),be(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,i){const o=r.values||[],a=i.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=Qt(o[l],a[l]);if(u)return u}return Z(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,i){if(r===ls.mapValue&&i===ls.mapValue)return 0;if(r===ls.mapValue)return 1;if(i===ls.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const h=Z(a[c],u[c]);if(h!==0)return h;const f=Qt(o[a[c]],l[u[c]]);if(f!==0)return f}return Z(a.length,u.length)}(t.mapValue,e.mapValue);default:throw x()}}function ia(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Z(t,e);const n=dt(t),s=dt(e),r=Z(n.seconds,s.seconds);return r!==0?r:Z(n.nanos,s.nanos)}function Bt(t){return $r(t)}function $r(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const r=dt(s);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Gt(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,M.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(s){let r="[",i=!0;for(const o of s.values||[])i?i=!1:r+=",",r+=$r(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(s){const r=Object.keys(s.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${$r(s.fields[a])}`;return i+"}"}(t.mapValue):x();var e,n}function ei(t){return!!t&&"integerValue"in t}function Fi(t){return!!t&&"arrayValue"in t}function oa(t){return!!t&&"nullValue"in t}function aa(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hs(t){return!!t&&"mapValue"in t}function pn(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return tn(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=pn(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=pn(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dm(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.value=e}static empty(){return new Ke({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!hs(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=pn(n)}setAll(e){let n=Pe.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=pn(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());hs(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Je(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];hs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){tn(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Ke(pn(this.value))}}function pu(t){const e=[];return tn(t.fields,(n,s)=>{const r=new Pe([n]);if(hs(s)){const i=pu(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Ye(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n,s,r,i,o){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Ae(e,0,q.min(),q.min(),Ke.empty(),0)}static newFoundDocument(e,n,s){return new Ae(e,1,n,q.min(),s,0)}static newNoDocument(e,n){return new Ae(e,2,n,q.min(),Ke.empty(),0)}static newUnknownDocument(e,n){return new Ae(e,3,n,q.min(),Ke.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ke.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ke.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=q.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ae&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ae(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ht=null}}function la(t,e=null,n=[],s=[],r=null,i=null,o=null){return new gm(t,e,n,s,r,i,o)}function xi(t){const e=U(t);if(e.ht===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>{return(r=s).field.canonicalString()+r.op.toString()+Bt(r.value);var r}).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),Zs(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Bt(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Bt(s)).join(",")),e.ht=n}return e.ht}function mm(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(s=n).field.canonicalString()} ${s.op} ${Bt(s.value)}`;var s}).join(", ")}]`),Zs(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Bt(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Bt(n)).join(",")),`Target(${e})`}function Ui(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Em(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(n=t.filters[r],s=e.filters[r],n.op!==s.op||!n.field.isEqual(s.field)||!Je(n.value,s.value))return!1;var n,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ca(t.startAt,e.startAt)&&ca(t.endAt,e.endAt)}function ti(t){return M.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class ze extends class{}{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.lt(e,n,s):new pm(e,n,s):n==="array-contains"?new bm(e,s):n==="in"?new _m(e,s):n==="not-in"?new wm(e,s):n==="array-contains-any"?new km(e,s):new ze(e,n,s)}static lt(e,n,s){return n==="in"?new ym(e,s):new vm(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.ft(Qt(n,this.value)):n!==null&&At(this.value)===At(n)&&this.ft(Qt(n,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return x()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class pm extends ze{constructor(e,n,s){super(e,n,s),this.key=M.fromName(s.referenceValue)}matches(e){const n=M.comparator(e.key,this.key);return this.ft(n)}}class ym extends ze{constructor(e,n){super(e,"in",n),this.keys=yu("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class vm extends ze{constructor(e,n){super(e,"not-in",n),this.keys=yu("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yu(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>M.fromName(s.referenceValue))}class bm extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fi(n)&&Rn(n.arrayValue,this.value)}}class _m extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Rn(this.value.arrayValue,n)}}class wm extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Rn(this.value.arrayValue,n)}}class km extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fi(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Rn(this.value.arrayValue,s))}}class Ns{constructor(e,n){this.position=e,this.inclusive=n}}class jt{constructor(e,n="asc"){this.field=e,this.dir=n}}function Em(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ua(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=M.comparator(M.fromName(o.referenceValue),n.key):s=Qt(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function ca(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Je(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this._t=null,this.wt=null,this.startAt,this.endAt}}function Tm(t,e,n,s,r,i,o,a){return new Wn(t,e,n,s,r,i,o,a)}function Bi(t){return new Wn(t)}function ha(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vu(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function bu(t){for(const e of t.filters)if(e.dt())return e.field;return null}function Cm(t){return t.collectionGroup!==null}function Ln(t){const e=U(t);if(e._t===null){e._t=[];const n=bu(e),s=vu(e);if(n!==null&&s===null)n.isKeyField()||e._t.push(new jt(n)),e._t.push(new jt(Pe.keyField(),"asc"));else{let r=!1;for(const i of e.explicitOrderBy)e._t.push(i),i.field.isKeyField()&&(r=!0);if(!r){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new jt(Pe.keyField(),i))}}}return e._t}function rt(t){const e=U(t);if(!e.wt)if(e.limitType==="F")e.wt=la(e.path,e.collectionGroup,Ln(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of Ln(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new jt(i.field,o))}const s=e.endAt?new Ns(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ns(e.startAt.position,e.startAt.inclusive):null;e.wt=la(e.path,e.collectionGroup,n,e.filters,e.limit,s,r)}return e.wt}function ni(t,e,n){return new Wn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $s(t,e){return Ui(rt(t),rt(e))&&t.limitType===e.limitType}function _u(t){return`${xi(rt(t))}|lt:${t.limitType}`}function si(t){return`Query(target=${mm(rt(t))}; limitType=${t.limitType})`}function ji(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):M.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of n.explicitOrderBy)if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=ua(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,Ln(n),s)||n.endAt&&!function(r,i,o){const a=ua(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,Ln(n),s))}(t,e)}function Im(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wu(t){return(e,n)=>{let s=!1;for(const r of Ln(t)){const i=Sm(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function Sm(t,e,n){const s=t.field.isKeyField()?M.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),l=o.data.field(r);return a!==null&&l!==null?Qt(a,l):x()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return x()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(t,e){if(t.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ds(e)?"-0":e}}function Eu(t){return{integerValue:""+t}}function Am(t,e){return fm(e)?Eu(e):ku(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(){this._=void 0}}function Dm(t,e,n){return t instanceof Mn?function(s,r){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&(i.fields.__previous_value__=r),{mapValue:i}}(n,e):t instanceof On?Cu(t,e):t instanceof Pn?Iu(t,e):function(s,r){const i=Tu(s,r),o=fa(i)+fa(s.yt);return ei(i)&&ei(s.yt)?Eu(o):ku(s.It,o)}(t,e)}function Nm(t,e,n){return t instanceof On?Cu(t,e):t instanceof Pn?Iu(t,e):n}function Tu(t,e){return t instanceof Rs?ei(n=e)||function(s){return!!s&&"doubleValue"in s}(n)?e:{integerValue:0}:null;var n}class Mn extends er{}class On extends er{constructor(e){super(),this.elements=e}}function Cu(t,e){const n=Su(e);for(const s of t.elements)n.some(r=>Je(r,s))||n.push(s);return{arrayValue:{values:n}}}class Pn extends er{constructor(e){super(),this.elements=e}}function Iu(t,e){let n=Su(e);for(const s of t.elements)n=n.filter(r=>!Je(r,s));return{arrayValue:{values:n}}}class Rs extends er{constructor(e,n){super(),this.It=e,this.yt=n}}function fa(t){return be(t.integerValue||t.doubleValue)}function Su(t){return Fi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n){this.field=e,this.transform=n}}function Lm(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof On&&s instanceof On||n instanceof Pn&&s instanceof Pn?Kt(n.elements,s.elements,Je):n instanceof Rs&&s instanceof Rs?Je(n.yt,s.yt):n instanceof Mn&&s instanceof Mn}(t.transform,e.transform)}class Mm{constructor(e,n){this.version=e,this.transformResults=n}}class et{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new et}static exists(e){return new et(void 0,e)}static updateTime(e){return new et(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fs(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class tr{}function Au(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nu(t.key,et.none()):new Xn(t.key,t.data,et.none());{const n=t.data,s=Ke.empty();let r=new ke(Pe.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Rt(t.key,s,new Ye(r.toArray()),et.none())}}function Om(t,e,n){t instanceof Xn?function(s,r,i){const o=s.value.clone(),a=ga(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Rt?function(s,r,i){if(!fs(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=ga(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(Du(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function yn(t,e,n,s){return t instanceof Xn?function(r,i,o,a){if(!fs(r.precondition,i))return o;const l=r.value.clone(),u=ma(r.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,s):t instanceof Rt?function(r,i,o,a){if(!fs(r.precondition,i))return o;const l=ma(r.fieldTransforms,a,i),u=i.data;return u.setAll(Du(r)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(c=>c.field))}(t,e,n,s):function(r,i,o){return fs(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function Pm(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=Tu(s.transform,r||null);i!=null&&(n===null&&(n=Ke.empty()),n.set(s.field,i))}return n||null}function da(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Kt(n,s,(r,i)=>Lm(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xn extends tr{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Rt extends tr{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Du(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function ga(t,e,n){const s=new Map;ee(t.length===n.length);for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,Nm(o,a,n[r]))}return s}function ma(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,Dm(i,o,e))}return s}class Nu extends tr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vm extends tr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve,W;function xm(t){switch(t){default:return x();case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0}}function Ru(t){if(t===void 0)return st("GRPC error has no .code"),_.UNKNOWN;switch(t){case ve.OK:return _.OK;case ve.CANCELLED:return _.CANCELLED;case ve.UNKNOWN:return _.UNKNOWN;case ve.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case ve.INTERNAL:return _.INTERNAL;case ve.UNAVAILABLE:return _.UNAVAILABLE;case ve.UNAUTHENTICATED:return _.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case ve.NOT_FOUND:return _.NOT_FOUND;case ve.ALREADY_EXISTS:return _.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return _.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case ve.ABORTED:return _.ABORTED;case ve.OUT_OF_RANGE:return _.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return _.UNIMPLEMENTED;case ve.DATA_LOSS:return _.DATA_LOSS;default:return x()}}(W=ve||(ve={}))[W.OK=0]="OK",W[W.CANCELLED=1]="CANCELLED",W[W.UNKNOWN=2]="UNKNOWN",W[W.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",W[W.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",W[W.NOT_FOUND=5]="NOT_FOUND",W[W.ALREADY_EXISTS=6]="ALREADY_EXISTS",W[W.PERMISSION_DENIED=7]="PERMISSION_DENIED",W[W.UNAUTHENTICATED=16]="UNAUTHENTICATED",W[W.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",W[W.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",W[W.ABORTED=10]="ABORTED",W[W.OUT_OF_RANGE=11]="OUT_OF_RANGE",W[W.UNIMPLEMENTED=12]="UNIMPLEMENTED",W[W.INTERNAL=13]="INTERNAL",W[W.UNAVAILABLE=14]="UNAVAILABLE",W[W.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){tn(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return du(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um=new Ee(M.comparator);function it(){return Um}const Lu=new Ee(M.comparator);function cn(...t){let e=Lu;for(const n of t)e=e.insert(n.key,n);return e}function Mu(t){let e=Lu;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function wt(){return vn()}function Ou(){return vn()}function vn(){return new nn(t=>t.toString(),(t,e)=>t.isEqual(e))}const Bm=new Ee(M.comparator),jm=new ke(M.comparator);function G(...t){let e=jm;for(const n of t)e=e.add(n);return e}const zm=new ke(Z);function Pu(){return zm}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,Yn.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new nr(q.min(),r,Pu(),it(),G())}}class Yn{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Yn(s,n,G(),G(),G())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n,s,r){this.Tt=e,this.removedTargetIds=n,this.key=s,this.Et=r}}class Vu{constructor(e,n){this.targetId=e,this.At=n}}class Fu{constructor(e,n,s=Be.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class pa{constructor(){this.Rt=0,this.bt=va(),this.Pt=Be.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return this.Rt!==0}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=G(),n=G(),s=G();return this.bt.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:x()}}),new Yn(this.Pt,this.vt,e,n,s)}Nt(){this.Vt=!1,this.bt=va()}kt(e,n){this.Vt=!0,this.bt=this.bt.insert(e,n)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class qm{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=it(),this.qt=ya(),this.Kt=new ke(Z)}Gt(e){for(const n of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(n,e.Et):this.jt(n,e.key,e.Et);for(const n of e.removedTargetIds)this.jt(n,e.key,e.Et)}Wt(e){this.forEachTarget(e,n=>{const s=this.zt(n);switch(e.state){case 0:this.Ht(n)&&s.Ct(e.resumeToken);break;case 1:s.Ft(),s.St||s.Nt(),s.Ct(e.resumeToken);break;case 2:s.Ft(),s.St||this.removeTarget(n);break;case 3:this.Ht(n)&&(s.$t(),s.Ct(e.resumeToken));break;case 4:this.Ht(n)&&(this.Jt(n),s.Ct(e.resumeToken));break;default:x()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Lt.forEach((s,r)=>{this.Ht(r)&&n(r)})}Yt(e){const n=e.targetId,s=e.At.count,r=this.Xt(n);if(r){const i=r.target;if(ti(i))if(s===0){const o=new M(i.path);this.jt(n,o,Ae.newNoDocument(o,q.min()))}else ee(s===1);else this.Zt(n)!==s&&(this.Jt(n),this.Kt=this.Kt.add(n))}}te(e){const n=new Map;this.Lt.forEach((i,o)=>{const a=this.Xt(o);if(a){if(i.current&&ti(a.target)){const l=new M(a.target.path);this.Ut.get(l)!==null||this.ee(o,l)||this.jt(o,l,Ae.newNoDocument(l,e))}i.Dt&&(n.set(o,i.xt()),i.Nt())}});let s=G();this.qt.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Xt(l);return!u||u.purpose===2||(a=!1,!1)}),a&&(s=s.add(i))}),this.Ut.forEach((i,o)=>o.setReadTime(e));const r=new nr(e,n,this.Kt,this.Ut,s);return this.Ut=it(),this.qt=ya(),this.Kt=new ke(Z),r}Qt(e,n){if(!this.Ht(e))return;const s=this.ee(e,n.key)?2:0;this.zt(e).kt(n.key,s),this.Ut=this.Ut.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ne(n.key).add(e))}jt(e,n,s){if(!this.Ht(e))return;const r=this.zt(e);this.ee(e,n)?r.kt(n,1):r.Ot(n),this.qt=this.qt.insert(n,this.ne(n).delete(e)),s&&(this.Ut=this.Ut.insert(n,s))}removeTarget(e){this.Lt.delete(e)}Zt(e){const n=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let n=this.Lt.get(e);return n||(n=new pa,this.Lt.set(e,n)),n}ne(e){let n=this.qt.get(e);return n||(n=new ke(Z),this.qt=this.qt.insert(e,n)),n}Ht(e){const n=this.Xt(e)!==null;return n||N("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.Lt.get(e);return n&&n.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new pa),this.Bt.getRemoteKeysForTarget(e).forEach(n=>{this.jt(e,n,null)})}ee(e,n){return this.Bt.getRemoteKeysForTarget(e).has(n)}}function ya(){return new Ee(M.comparator)}function va(){return new Ee(M.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Km=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class Gm{constructor(e,n){this.databaseId=e,this.gt=n}}function Ls(t,e){return t.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xu(t,e){return t.gt?e.toBase64():e.toUint8Array()}function Qm(t,e){return Ls(t,e.toTimestamp())}function tt(t){return ee(!!t),q.fromTimestamp(function(e){const n=dt(e);return new we(n.seconds,n.nanos)}(t))}function zi(t,e){return function(n){return new ue(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Uu(t){const e=ue.fromString(t);return ee(zu(e)),e}function ri(t,e){return zi(t.databaseId,e.path)}function Ar(t,e){const n=Uu(e);if(n.get(1)!==t.databaseId.projectId)throw new L(_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new M(Bu(n))}function ii(t,e){return zi(t.databaseId,e)}function Wm(t){const e=Uu(t);return e.length===4?ue.emptyPath():Bu(e)}function oi(t){return new ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Bu(t){return ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ba(t,e,n){return{name:ri(t,e),fields:n.value.mapValue.fields}}function Xm(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:x()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(l,u){return l.gt?(ee(u===void 0||typeof u=="string"),Be.fromBase64String(u||"")):(ee(u===void 0||u instanceof Uint8Array),Be.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?_.UNKNOWN:Ru(l.code);return new L(u,l.message||"")}(o);n=new Fu(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Ar(t,s.document.name),i=tt(s.document.updateTime),o=new Ke({mapValue:{fields:s.document.fields}}),a=Ae.newFoundDocument(r,i,o),l=s.targetIds||[],u=s.removedTargetIds||[];n=new ds(l,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Ar(t,s.document),i=s.readTime?tt(s.readTime):q.min(),o=Ae.newNoDocument(r,i),a=s.removedTargetIds||[];n=new ds([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Ar(t,s.document),i=s.removedTargetIds||[];n=new ds([],i,r,null)}else{if(!("filter"in e))return x();{e.filter;const s=e.filter;s.targetId;const r=s.count||0,i=new Fm(r),o=s.targetId;n=new Vu(o,i)}}return n}function Ym(t,e){let n;if(e instanceof Xn)n={update:ba(t,e.key,e.value)};else if(e instanceof Nu)n={delete:ri(t,e.key)};else if(e instanceof Rt)n={update:ba(t,e.key,e.data),updateMask:op(e.fieldMask)};else{if(!(e instanceof Vm))return x();n={verify:ri(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof Mn)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof On)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Pn)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Rs)return{fieldPath:i.field.canonicalString(),increment:o.yt};throw x()}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:Qm(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:x()}(t,e.precondition)),n}function Jm(t,e){return t&&t.length>0?(ee(e!==void 0),t.map(n=>function(s,r){let i=s.updateTime?tt(s.updateTime):tt(r);return i.isEqual(q.min())&&(i=tt(r)),new Mm(i,s.transformResults||[])}(n,e))):[]}function Zm(t,e){return{documents:[ii(t,e.path)]}}function $m(t,e){const n={structuredQuery:{}},s=e.path;e.collectionGroup!==null?(n.parent=ii(t,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ii(t,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const r=function(l){if(l.length===0)return;const u=l.map(c=>function(h){if(h.op==="=="){if(aa(h.value))return{unaryFilter:{field:Ot(h.field),op:"IS_NAN"}};if(oa(h.value))return{unaryFilter:{field:Ot(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(aa(h.value))return{unaryFilter:{field:Ot(h.field),op:"IS_NOT_NAN"}};if(oa(h.value))return{unaryFilter:{field:Ot(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ot(h.field),op:sp(h.op),value:h.value}}}(c));return u.length===1?u[0]:{compositeFilter:{op:"AND",filters:u}}}(e.filters);r&&(n.structuredQuery.where=r);const i=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:Ot(c.field),direction:np(c.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(l,u){return l.gt||Zs(u)?u:{value:u}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function ep(t){let e=Wm(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){ee(s===1);const c=n.from[0];c.allDescendants?r=c.collectionId:e=e.child(c.collectionId)}let i=[];n.where&&(i=ju(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new jt(Vt(h.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,Zs(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(c){const h=!!c.before,f=c.values||[];return new Ns(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const h=!c.before,f=c.values||[];return new Ns(f,h)}(n.endAt)),Tm(e,r,o,i,a,"F",l,u)}function tp(t,e){const n=function(s,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return x()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function ju(t){return t?t.unaryFilter!==void 0?[ip(t)]:t.fieldFilter!==void 0?[rp(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>ju(e)).reduce((e,n)=>e.concat(n)):x():[]}function np(t){return Hm[t]}function sp(t){return Km[t]}function Ot(t){return{fieldPath:t.canonicalString()}}function Vt(t){return Pe.fromServerFormat(t.fieldPath)}function rp(t){return ze.create(Vt(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return x()}}(t.fieldFilter.op),t.fieldFilter.value)}function ip(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Vt(t.unaryFilter.field);return ze.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Vt(t.unaryFilter.field);return ze.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Vt(t.unaryFilter.field);return ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Vt(t.unaryFilter.field);return ze.create(r,"!=",{nullValue:"NULL_VALUE"});default:return x()}}function op(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zu(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&Om(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=yn(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=yn(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Ou();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=Au(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(q.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),G())}isEqual(e){return this.batchId===e.batchId&&Kt(this.mutations,e.mutations,(n,s)=>da(n,s))&&Kt(this.baseMutations,e.baseMutations,(n,s)=>da(n,s))}}class qi{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){ee(e.mutations.length===s.length);let r=Bm;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new qi(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n,s,r,i=q.min(),o=q.min(),a=Be.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Tt(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Tt(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Tt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this.re=e}}function cp(t){const e=ep({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ni(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(){this.Ye=new fp}addToCollectionParentIndex(e,n){return this.Ye.add(n),w.resolve()}getCollectionParents(e,n){return w.resolve(this.Ye.getEntries(n))}addFieldIndex(e,n){return w.resolve()}deleteFieldIndex(e,n){return w.resolve()}getDocumentsMatchingTarget(e,n){return w.resolve(null)}getIndexType(e,n){return w.resolve(0)}getFieldIndexes(e,n){return w.resolve([])}getNextCollectionGroupToUpdate(e){return w.resolve(null)}getMinOffset(e,n){return w.resolve(ft.min())}getMinOffsetFromCollectionGroup(e,n){return w.resolve(ft.min())}updateCollectionGroup(e,n,s){return w.resolve()}updateIndexEntries(e,n){return w.resolve()}}class fp{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new ke(ue.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new ke(ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Wt(0)}static vn(){return new Wt(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(){this.changes=new nn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ae.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?w.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.getBaseDocument(e,n,s))).next(r=>(s!==null&&yn(s.mutation,r,Ye.empty(),we.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,G()).next(()=>s))}getLocalViewOfDocuments(e,n,s=G()){const r=wt();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=cn();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=wt();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,G()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=it();const o=vn(),a=vn();return n.forEach((l,u)=>{const c=s.get(u.key);r.has(u.key)&&(c===void 0||c.mutation instanceof Rt)?i=i.insert(u.key,u):c!==void 0&&(o.set(u.key,c.mutation.getFieldMask()),yn(c.mutation,u,c.mutation.getFieldMask(),we.now()))}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new gp(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const s=vn();let r=new Ee((o,a)=>o-a),i=G();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=s.get(l)||Ye.empty();c=a.applyToLocalView(u,c),s.set(l,c);const h=(r.get(a.batchId)||G()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=Ou();c.forEach(f=>{if(!i.has(f)){const g=Au(n.get(f),s.get(f));g!==null&&h.set(f,g),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return w.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s){return function(r){return M.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Cm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s):this.getDocumentsMatchingCollectionQuery(e,n,s)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):w.resolve(wt());let a=-1,l=i;return o.next(u=>w.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(c)?w.resolve():this.getBaseDocument(e,c,h).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,G())).next(c=>({batchId:a,changes:Mu(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new M(n)).next(s=>{let r=cn();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s){const r=n.collectionGroup;let i=cn();return this.indexManager.getCollectionParents(e,r).next(o=>w.forEach(o,a=>{const l=function(u,c){return new Wn(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,l,s).next(u=>{u.forEach((c,h)=>{i=i.insert(c,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,s){let r;return this.remoteDocumentCache.getAllFromCollection(e,n.path,s).next(i=>(r=i,this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId))).next(i=>{i.forEach((a,l)=>{const u=l.getKey();r.get(u)===null&&(r=r.insert(u,Ae.newInvalidDocument(u)))});let o=cn();return r.forEach((a,l)=>{const u=i.get(a);u!==void 0&&yn(u.mutation,l,Ye.empty(),we.now()),ji(n,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(e,n,s){return s===null||s.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):w.resolve(Ae.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return w.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var s;return this.Zn.set(n.id,{id:(s=n).id,version:s.version,createTime:tt(s.createTime)}),w.resolve()}getNamedQuery(e,n){return w.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,function(s){return{name:s.name,query:cp(s.bundledQuery),readTime:tt(s.readTime)}}(n)),w.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(){this.overlays=new Ee(M.comparator),this.es=new Map}getOverlay(e,n){return w.resolve(this.overlays.get(n))}getOverlays(e,n){const s=wt();return w.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.ue(e,n,i)}),w.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.es.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.es.delete(s)),w.resolve()}getOverlaysForCollection(e,n,s){const r=wt(),i=n.length+1,o=new M(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return w.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ee((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let c=i.get(u.largestBatchId);c===null&&(c=wt(),i=i.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=wt(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=r)););return w.resolve(a)}ue(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.es.get(r.largestBatchId).delete(s.key);this.es.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new lp(n,s));let i=this.es.get(n);i===void 0&&(i=G(),this.es.set(n,i)),this.es.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.ns=new ke(Ce.ss),this.rs=new ke(Ce.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const s=new Ce(e,n);this.ns=this.ns.add(s),this.rs=this.rs.add(s)}us(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.cs(new Ce(e,n))}hs(e,n){e.forEach(s=>this.removeReference(s,n))}ls(e){const n=new M(new ue([])),s=new Ce(n,e),r=new Ce(n,e+1),i=[];return this.rs.forEachInRange([s,r],o=>{this.cs(o),i.push(o.key)}),i}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new M(new ue([])),s=new Ce(n,e),r=new Ce(n,e+1);let i=G();return this.rs.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ce(e,0),s=this.ns.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ce{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return M.comparator(e.key,n.key)||Z(e._s,n._s)}static os(e,n){return Z(e._s,n._s)||M.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new ke(Ce.ss)}checkEmpty(e){return w.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ap(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.gs=this.gs.add(new Ce(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return w.resolve(o)}lookupMutationBatch(e,n){return w.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ps(s),i=r<0?0:r;return w.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return w.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return w.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ce(n,0),r=new Ce(n,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([s,r],o=>{const a=this.ys(o._s);i.push(a)}),w.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new ke(Z);return n.forEach(r=>{const i=new Ce(r,0),o=new Ce(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([i,o],a=>{s=s.add(a._s)})}),w.resolve(this.Is(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;M.isDocumentKey(i)||(i=i.child(""));const o=new Ce(new M(i),0);let a=new ke(Z);return this.gs.forEachWhile(l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(l._s)),!0)},o),w.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(s=>{const r=this.ys(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ee(this.Ts(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.gs;return w.forEach(n.mutations,r=>{const i=new Ce(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.gs=s})}An(e){}containsKey(e,n){const s=new Ce(n,0),r=this.gs.firstAfterOrEqual(s);return w.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,w.resolve()}Ts(e,n){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e){this.Es=e,this.docs=new Ee(M.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.Es(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return w.resolve(s?s.document.mutableCopy():Ae.newInvalidDocument(n))}getEntries(e,n){let s=it();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Ae.newInvalidDocument(r))}),w.resolve(s)}getAllFromCollection(e,n,s){let r=it();const i=new M(n.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||am(om(l),s)<=0||(r=r.insert(l.key,l.mutableCopy()))}return w.resolve(r)}getAllFromCollectionGroup(e,n,s,r){x()}As(e,n){return w.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new _p(this)}getSize(e){return w.resolve(this.size)}}class _p extends dp{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(s)}),w.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e){this.persistence=e,this.Rs=new nn(n=>xi(n),Ui),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Hi,this.targetCount=0,this.vs=Wt.Pn()}forEachTarget(e,n){return this.Rs.forEach((s,r)=>n(r)),w.resolve()}getLastRemoteSnapshotVersion(e){return w.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return w.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),w.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.bs&&(this.bs=n),w.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new Wt(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,w.resolve()}updateTargetData(e,n){return this.Dn(n),w.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,w.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.Rs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),w.waitFor(i).next(()=>r)}getTargetCount(e){return w.resolve(this.targetCount)}getTargetData(e,n){const s=this.Rs.get(n)||null;return w.resolve(s)}addMatchingKeys(e,n,s){return this.Ps.us(n,s),w.resolve()}removeMatchingKeys(e,n,s){this.Ps.hs(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),w.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),w.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ps.ds(n);return w.resolve(s)}containsKey(e,n){return w.resolve(this.Ps.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new Vi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new wp(this),this.indexManager=new hp,this.remoteDocumentCache=function(s){return new bp(s)}(s=>this.referenceDelegate.xs(s)),this.It=new up(n),this.Ns=new pp(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yp,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Vs[e.toKey()];return s||(s=new vp(n,this.referenceDelegate),this.Vs[e.toKey()]=s),s}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,s){N("MemoryPersistence","Starting transaction:",e);const r=new Ep(this.Ss.next());return this.referenceDelegate.ks(),s(r).next(i=>this.referenceDelegate.Os(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ms(e,n){return w.or(Object.values(this.Vs).map(s=>()=>s.containsKey(e,n)))}}class Ep extends um{constructor(e){super(),this.currentSequenceNumber=e}}class Ki{constructor(e){this.persistence=e,this.Fs=new Hi,this.$s=null}static Bs(e){return new Ki(e)}get Ls(){if(this.$s)return this.$s;throw x()}addReference(e,n,s){return this.Fs.addReference(s,n),this.Ls.delete(s.toString()),w.resolve()}removeReference(e,n,s){return this.Fs.removeReference(s,n),this.Ls.add(s.toString()),w.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),w.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(r=>this.Ls.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.Ls.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}ks(){this.$s=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return w.forEach(this.Ls,s=>{const r=M.fromPath(s);return this.Us(e,r).next(i=>{i||n.removeEntry(r,q.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.Us(e,n).next(s=>{s?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}Us(e,n){return w.or([()=>w.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ms(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Si=s,this.Di=r}static Ci(e,n){let s=G(),r=G();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Gi(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,s,r){return this.ki(e,n).next(i=>i||this.Oi(e,n,r,s)).next(i=>i||this.Mi(e,n))}ki(e,n){if(ha(n))return w.resolve(null);let s=rt(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=ni(n,null,"F"),s=rt(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=G(...i);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const u=this.Fi(n,a);return this.$i(n,u,o,l.readTime)?this.ki(e,ni(n,null,"F")):this.Bi(e,u,n,l)}))})))}Oi(e,n,s,r){return ha(n)||r.isEqual(q.min())?this.Mi(e,n):this.Ni.getDocuments(e,s).next(i=>{const o=this.Fi(n,i);return this.$i(n,o,s,r)?this.Mi(e,n):(na()<=J.DEBUG&&N("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),si(n)),this.Bi(e,o,n,im(r,-1)))})}Fi(e,n){let s=new ke(wu(e));return n.forEach((r,i)=>{ji(e,i)&&(s=s.add(i))}),s}$i(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Mi(e,n){return na()<=J.DEBUG&&N("QueryEngine","Using full collection scan to execute query:",si(n)),this.Ni.getDocumentsMatchingQuery(e,n,ft.min())}Bi(e,n,s,r){return this.Ni.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n,s,r){this.persistence=e,this.Li=n,this.It=r,this.Ui=new Ee(Z),this.qi=new nn(i=>xi(i),Ui),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(s)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mp(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ui))}}function Ip(t,e,n,s){return new Cp(t,e,n,s)}async function qu(t,e){const n=U(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Qi(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=G();for(const u of r){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of i){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(s,l).next(u=>({ji:u,removedBatchIds:o,addedBatchIds:a}))})})}function Sp(t,e){const n=U(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,h=c.keys();let f=w.resolve();return h.forEach(g=>{f=f.next(()=>u.getEntry(a,g)).next(d=>{const y=l.docVersions.get(g);ee(y!==null),d.version.compareTo(y)<0&&(c.applyToRemoteDocument(d,l),d.isValidDocument()&&(d.setReadTime(l.commitVersion),u.addEntry(d)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=G();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function Hu(t){const e=U(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function Ap(t,e){const n=U(t),s=e.snapshotVersion;let r=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});r=n.Ui;const a=[];e.targetChanges.forEach((c,h)=>{const f=r.get(h);if(!f)return;a.push(n.Cs.removeMatchingKeys(i,c.removedDocuments,h).next(()=>n.Cs.addMatchingKeys(i,c.addedDocuments,h)));let g=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(h)?g=g.withResumeToken(Be.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):c.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(c.resumeToken,s)),r=r.insert(h,g),function(d,y,k){return d.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-d.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(f,g,c)&&a.push(n.Cs.updateTargetData(i,g))});let l=it(),u=G();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))}),a.push(Dp(i,o,e.documentUpdates).next(c=>{l=c.Wi,u=c.zi})),!s.isEqual(q.min())){const c=n.Cs.getLastRemoteSnapshotVersion(i).next(h=>n.Cs.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(c)}return w.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ui=r,i))}function Dp(t,e,n){let s=G(),r=G();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=it();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(q.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):N("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Wi:o,zi:r}})}function Np(t,e){const n=U(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Rp(t,e){const n=U(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Cs.getTargetData(s,e).next(i=>i?(r=i,w.resolve(r)):n.Cs.allocateTargetId(s).next(o=>(r=new Tt(e,o,0,s.currentSequenceNumber),n.Cs.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ui.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(s.targetId,s),n.qi.set(e,s.targetId)),s})}async function ai(t,e,n){const s=U(t),r=s.Ui.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Qn(o))throw o;N("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ui=s.Ui.remove(e),s.qi.delete(r.target)}function _a(t,e,n){const s=U(t);let r=q.min(),i=G();return s.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=U(a),h=c.qi.get(u);return h!==void 0?w.resolve(c.Ui.get(h)):c.Cs.getTargetData(l,u)}(s,o,rt(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Li.getDocumentsMatchingQuery(o,e,n?r:q.min(),n?i:G())).next(a=>(Lp(s,Im(e),a),{documents:a,Hi:i})))}function Lp(t,e,n){let s=t.Ki.get(e)||q.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Ki.set(e,s)}class wa{constructor(){this.activeTargetIds=Pu()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mp{constructor(){this.Lr=new wa,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,n,s){this.Ur[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new wa,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{qr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){N("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){N("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.oo=n+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,n,s,r,i){const o=this.ho(e,n);N("RestConnection","Sending: ",o,s);const a={};return this.lo(a,r,i),this.fo(e,o,a,s).then(l=>(N("RestConnection","Received: ",l),l),l=>{throw Zr("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",s),l})}_o(e,n,s,r,i,o){return this.ao(e,n,s,r,i)}lo(e,n,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+en,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}ho(e,n){const s=Pp[e];return`${this.oo}/v1/${n}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,s,r){return new Promise((i,o)=>{const a=new Xg;a.setWithCredentials(!0),a.listenOnce(Gg.COMPLETE,()=>{var u;try{switch(a.getLastErrorCode()){case Sr.NO_ERROR:const c=a.getResponseJson();N("Connection","XHR received:",JSON.stringify(c)),i(c);break;case Sr.TIMEOUT:N("Connection",'RPC "'+e+'" timed out'),o(new L(_.DEADLINE_EXCEEDED,"Request time out"));break;case Sr.HTTP_ERROR:const h=a.getStatus();if(N("Connection",'RPC "'+e+'" failed with status:',h,"response text:",a.getResponseText()),h>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=(u=f)===null||u===void 0?void 0:u.error;if(g&&g.status&&g.message){const d=function(y){const k=y.toLowerCase().replace(/_/g,"-");return Object.values(_).indexOf(k)>=0?k:_.UNKNOWN}(g.status);o(new L(d,g.message))}else o(new L(_.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new L(_.UNAVAILABLE,"Connection failed."));break;default:x()}}finally{N("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(r);a.send(n,"POST",l,s,15)})}wo(e,n,s){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Hg(),o=Kg(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Wg({})),this.lo(a.initMessageHeaders,n,s),a.encodeInitMessageHeaders=!0;const l=r.join("");N("Connection","Creating WebChannel: "+l,a);const u=i.createWebChannel(l,a);let c=!1,h=!1;const f=new Vp({Hr:d=>{h?N("Connection","Not sending because WebChannel is closed:",d):(c||(N("Connection","Opening WebChannel transport."),u.open(),c=!0),N("Connection","WebChannel sending:",d),u.send(d))},Jr:()=>u.close()}),g=(d,y,k)=>{d.listen(y,E=>{try{k(E)}catch(v){setTimeout(()=>{throw v},0)}})};return g(u,os.EventType.OPEN,()=>{h||N("Connection","WebChannel transport opened.")}),g(u,os.EventType.CLOSE,()=>{h||(h=!0,N("Connection","WebChannel transport closed"),f.io())}),g(u,os.EventType.ERROR,d=>{h||(h=!0,Zr("Connection","WebChannel transport errored:",d),f.io(new L(_.UNAVAILABLE,"The operation could not be completed")))}),g(u,os.EventType.MESSAGE,d=>{var y;if(!h){const k=d.data[0];ee(!!k);const E=k,v=E.error||((y=E[0])===null||y===void 0?void 0:y.error);if(v){N("Connection","WebChannel received error:",v);const A=v.status;let he=function(de){const Te=ve[de];if(Te!==void 0)return Ru(Te)}(A),_e=v.message;he===void 0&&(he=_.INTERNAL,_e="Unknown error status: "+A+" with message "+v.message),h=!0,f.io(new L(he,_e)),u.close()}else N("Connection","WebChannel received:",k),f.ro(k)}}),g(o,Qg.STAT_EVENT,d=>{d.stat===ea.PROXY?N("Connection","Detected buffering proxy"):d.stat===ea.NOPROXY&&N("Connection","Detected no buffering proxy")}),setTimeout(()=>{f.so()},0),f}}function Dr(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t){return new Gm(t,!0)}class Ku{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Hs=e,this.timerId=n,this.mo=s,this.yo=r,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),s=Math.max(0,Date.now()-this.Eo),r=Math.max(0,n-s);r>0&&N("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,n,s,r,i,o,a,l){this.Hs=e,this.vo=s,this.Vo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Ku(e,n)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,n){this.Lo(),this.Uo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():n&&n.code===_.RESOURCE_EXHAUSTED?(st(n.toString()),st("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===_.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.qo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}qo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.So===n&&this.Go(s,r)},s=>{e(()=>{const r=new L(_.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Qo(r)})})}Go(e,n){const s=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{s(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{s(()=>this.Qo(r))}),this.stream.onMessage(r=>{s(()=>this.onMessage(r))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return N("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(N("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xp extends Gu{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.It=i}jo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.xo.reset();const n=Xm(this.It,e),s=function(r){if(!("targetChange"in r))return q.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?q.min():i.readTime?tt(i.readTime):q.min()}(e);return this.listener.Wo(n,s)}zo(e){const n={};n.database=oi(this.It),n.addTarget=function(r,i){let o;const a=i.target;return o=ti(a)?{documents:Zm(r,a)}:{query:$m(r,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?o.resumeToken=xu(r,i.resumeToken):i.snapshotVersion.compareTo(q.min())>0&&(o.readTime=Ls(r,i.snapshotVersion.toTimestamp())),o}(this.It,e);const s=tp(this.It,e);s&&(n.labels=s),this.Bo(n)}Ho(e){const n={};n.database=oi(this.It),n.removeTarget=e,this.Bo(n)}}class Up extends Gu{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.It=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=Jm(e.writeResults,e.commitTime),s=tt(e.commitTime);return this.listener.Zo(s,n)}return ee(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=oi(this.It),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>Ym(this.It,s))};this.Bo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp extends class{}{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.It=r,this.nu=!1}su(){if(this.nu)throw new L(_.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,n,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.connection.ao(e,n,s,r,i)).catch(r=>{throw r.name==="FirebaseError"?(r.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new L(_.UNKNOWN,r.toString())})}_o(e,n,s,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection._o(e,n,s,i,o,r)).catch(i=>{throw i.name==="FirebaseError"?(i.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new L(_.UNKNOWN,i.toString())})}terminate(){this.nu=!0}}class jp{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(st(n),this.ou=!1):N("OnlineStateTracker",n)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.qr(o=>{s.enqueueAndForget(async()=>{Lt(this)&&(N("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=U(a);l._u.add(4),await Jn(l),l.gu.set("Unknown"),l._u.delete(4),await rr(l)}(this))})}),this.gu=new jp(s,r)}}async function rr(t){if(Lt(t))for(const e of t.wu)await e(!0)}async function Jn(t){for(const e of t.wu)await e(!1)}function Qu(t,e){const n=U(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),Xi(n)?Wi(n):sn(n).ko()&&Qi(n,e))}function Wu(t,e){const n=U(t),s=sn(n);n.du.delete(e),s.ko()&&Xu(n,e),n.du.size===0&&(s.ko()?s.Fo():Lt(n)&&n.gu.set("Unknown"))}function Qi(t,e){t.yu.Mt(e.targetId),sn(t).zo(e)}function Xu(t,e){t.yu.Mt(e),sn(t).Ho(e)}function Wi(t){t.yu=new qm({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),se:e=>t.du.get(e)||null}),sn(t).start(),t.gu.uu()}function Xi(t){return Lt(t)&&!sn(t).No()&&t.du.size>0}function Lt(t){return U(t)._u.size===0}function Yu(t){t.yu=void 0}async function qp(t){t.du.forEach((e,n)=>{Qi(t,e)})}async function Hp(t,e){Yu(t),Xi(t)?(t.gu.hu(e),Wi(t)):t.gu.set("Unknown")}async function Kp(t,e,n){if(t.gu.set("Online"),e instanceof Fu&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.du.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.du.delete(o),s.yu.removeTarget(o))}(t,e)}catch(s){N("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Ms(t,s)}else if(e instanceof ds?t.yu.Gt(e):e instanceof Vu?t.yu.Yt(e):t.yu.Wt(e),!n.isEqual(q.min()))try{const s=await Hu(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.yu.te(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=r.du.get(l);u&&r.du.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach(a=>{const l=r.du.get(a);if(!l)return;r.du.set(a,l.withResumeToken(Be.EMPTY_BYTE_STRING,l.snapshotVersion)),Xu(r,a);const u=new Tt(l.target,a,1,l.sequenceNumber);Qi(r,u)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){N("RemoteStore","Failed to raise snapshot:",s),await Ms(t,s)}}async function Ms(t,e,n){if(!Qn(e))throw e;t._u.add(1),await Jn(t),t.gu.set("Offline"),n||(n=()=>Hu(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{N("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await rr(t)})}function Ju(t,e){return e().catch(n=>Ms(t,n,e))}async function ir(t){const e=U(t),n=gt(e);let s=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Gp(e);)try{const r=await Np(e.localStore,s);if(r===null){e.fu.length===0&&n.Fo();break}s=r.batchId,Qp(e,r)}catch(r){await Ms(e,r)}Zu(e)&&$u(e)}function Gp(t){return Lt(t)&&t.fu.length<10}function Qp(t,e){t.fu.push(e);const n=gt(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function Zu(t){return Lt(t)&&!gt(t).No()&&t.fu.length>0}function $u(t){gt(t).start()}async function Wp(t){gt(t).eu()}async function Xp(t){const e=gt(t);for(const n of t.fu)e.Xo(n.mutations)}async function Yp(t,e,n){const s=t.fu.shift(),r=qi.from(s,e,n);await Ju(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await ir(t)}async function Jp(t,e){e&&gt(t).Yo&&await async function(n,s){if(r=s.code,xm(r)&&r!==_.ABORTED){const i=n.fu.shift();gt(n).Mo(),await Ju(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ir(n)}var r}(t,e),Zu(t)&&$u(t)}async function Ea(t,e){const n=U(t);n.asyncQueue.verifyOperationInProgress(),N("RemoteStore","RemoteStore received new credentials");const s=Lt(n);n._u.add(3),await Jn(n),s&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await rr(n)}async function Zp(t,e){const n=U(t);e?(n._u.delete(2),await rr(n)):e||(n._u.add(2),await Jn(n),n.gu.set("Unknown"))}function sn(t){return t.pu||(t.pu=function(e,n,s){const r=U(e);return r.su(),new xp(n,r.connection,r.authCredentials,r.appCheckCredentials,r.It,s)}(t.datastore,t.asyncQueue,{Yr:qp.bind(null,t),Zr:Hp.bind(null,t),Wo:Kp.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Mo(),Xi(t)?Wi(t):t.gu.set("Unknown")):(await t.pu.stop(),Yu(t))})),t.pu}function gt(t){return t.Iu||(t.Iu=function(e,n,s){const r=U(e);return r.su(),new Up(n,r.connection,r.authCredentials,r.appCheckCredentials,r.It,s)}(t.datastore,t.asyncQueue,{Yr:Wp.bind(null,t),Zr:Jp.bind(null,t),tu:Xp.bind(null,t),Zo:Yp.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Mo(),await ir(t)):(await t.Iu.stop(),t.fu.length>0&&(N("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new Et,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new Yi(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ji(t,e){if(st("AsyncQueue",`${e}: ${t}`),Qn(t))return new L(_.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e?(n,s)=>e(n,s)||M.comparator(n.key,s.key):(n,s)=>M.comparator(n.key,s.key),this.keyedMap=cn(),this.sortedSet=new Ee(this.comparator)}static emptySet(e){return new zt(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new zt;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.Tu=new Ee(M.comparator)}track(e){const n=e.doc.key,s=this.Tu.get(n);s?e.type!==0&&s.type===3?this.Tu=this.Tu.insert(n,e):e.type===3&&s.type!==1?this.Tu=this.Tu.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Tu=this.Tu.remove(n):e.type===1&&s.type===2?this.Tu=this.Tu.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):x():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,s)=>{e.push(s)}),e}}class Xt{constructor(e,n,s,r,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Xt(e,n,zt.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$s(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.Au=void 0,this.listeners=[]}}class e0{constructor(){this.queries=new nn(e=>_u(e),$s),this.onlineState="Unknown",this.Ru=new Set}}async function t0(t,e){const n=U(t),s=e.query;let r=!1,i=n.queries.get(s);if(i||(r=!0,i=new $p),r)try{i.Au=await n.onListen(s)}catch(o){const a=Ji(o,`Initialization of query '${si(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.listeners.push(e),e.bu(n.onlineState),i.Au&&e.Pu(i.Au)&&Zi(n)}async function n0(t,e){const n=U(t),s=e.query;let r=!1;const i=n.queries.get(s);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),r=i.listeners.length===0)}if(r)return n.queries.delete(s),n.onUnlisten(s)}function s0(t,e){const n=U(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Pu(r)&&(s=!0);o.Au=r}}s&&Zi(n)}function r0(t,e,n){const s=U(t),r=s.queries.get(e);if(r)for(const i of r.listeners)i.onError(n);s.queries.delete(e)}function Zi(t){t.Ru.forEach(e=>{e.next()})}class i0{constructor(e,n,s){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=s||{}}Pu(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Xt(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){if(!e.fromCache)return!0;const s=n!=="Offline";return(!this.options.Nu||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const n=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}xu(e){e=Xt.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e){this.key=e}}class tc{constructor(e){this.key=e}}class o0{constructor(e,n){this.query=e,this.Uu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=G(),this.mutatedKeys=G(),this.Gu=wu(e),this.Qu=new zt(this.Gu)}get ju(){return this.Uu}Wu(e,n){const s=n?n.zu:new Ta,r=n?n.Qu:this.Qu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((c,h)=>{const f=r.get(c),g=ji(this.query,h)?h:null,d=!!f&&this.mutatedKeys.has(f.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let k=!1;f&&g?f.data.isEqual(g.data)?d!==y&&(s.track({type:3,doc:g}),k=!0):this.Hu(f,g)||(s.track({type:2,doc:g}),k=!0,(l&&this.Gu(g,l)>0||u&&this.Gu(g,u)<0)&&(a=!0)):!f&&g?(s.track({type:0,doc:g}),k=!0):f&&!g&&(s.track({type:1,doc:f}),k=!0,(l||u)&&(a=!0)),k&&(g?(o=o.add(g),i=y?i.add(c):i.delete(c)):(o=o.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),i=i.delete(c.key),s.track({type:1,doc:c})}return{Qu:o,zu:s,$i:a,mutatedKeys:i}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const i=e.zu.Eu();i.sort((u,c)=>function(h,f){const g=d=>{switch(d){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return x()}};return g(h)-g(f)}(u.type,c.type)||this.Gu(u.doc,c.doc)),this.Ju(s);const o=n?this.Yu():[],a=this.Ku.size===0&&this.current?1:0,l=a!==this.qu;return this.qu=a,i.length!==0||l?{snapshot:new Xt(this.query,e.Qu,r,i,e.mutatedKeys,a===0,l,!1,!!s&&s.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Ta,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.Uu=this.Uu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Uu=this.Uu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=G(),this.Qu.forEach(s=>{this.Zu(s.key)&&(this.Ku=this.Ku.add(s.key))});const n=[];return e.forEach(s=>{this.Ku.has(s)||n.push(new tc(s))}),this.Ku.forEach(s=>{e.has(s)||n.push(new ec(s))}),n}tc(e){this.Uu=e.Hi,this.Ku=G();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ec(){return Xt.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.qu===0,this.hasCachedResults)}}class a0{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class l0{constructor(e){this.key=e,this.nc=!1}}class u0{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new nn(a=>_u(a),$s),this.rc=new Map,this.oc=new Set,this.uc=new Ee(M.comparator),this.cc=new Map,this.ac=new Hi,this.hc={},this.lc=new Map,this.fc=Wt.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function c0(t,e){const n=_0(t);let s,r;const i=n.ic.get(e);if(i)s=i.targetId,n.sharedClientState.addLocalQueryTarget(s),r=i.view.ec();else{const o=await Rp(n.localStore,rt(e));n.isPrimaryClient&&Qu(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);s=o.targetId,r=await h0(n,e,s,a==="current",o.resumeToken)}return r}async function h0(t,e,n,s,r){t._c=(h,f,g)=>async function(d,y,k,E){let v=y.view.Wu(k);v.$i&&(v=await _a(d.localStore,y.query,!1).then(({documents:_e})=>y.view.Wu(_e,v)));const A=E&&E.targetChanges.get(y.targetId),he=y.view.applyChanges(v,d.isPrimaryClient,A);return Ia(d,y.targetId,he.Xu),he.snapshot}(t,h,f,g);const i=await _a(t.localStore,e,!0),o=new o0(e,i.Hi),a=o.Wu(i.documents),l=Yn.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);Ia(t,n,u.Xu);const c=new a0(e,n,o);return t.ic.set(e,c),t.rc.has(n)?t.rc.get(n).push(e):t.rc.set(n,[e]),u.snapshot}async function f0(t,e){const n=U(t),s=n.ic.get(e),r=n.rc.get(s.targetId);if(r.length>1)return n.rc.set(s.targetId,r.filter(i=>!$s(i,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await ai(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),Wu(n.remoteStore,s.targetId),li(n,s.targetId)}).catch(Gn)):(li(n,s.targetId),await ai(n.localStore,s.targetId,!0))}async function d0(t,e,n){const s=w0(t);try{const r=await function(i,o){const a=U(i),l=we.now(),u=o.reduce((f,g)=>f.add(g.key),G());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=it(),d=G();return a.Gi.getEntries(f,u).next(y=>{g=y,g.forEach((k,E)=>{E.isValidDocument()||(d=d.add(k))})}).next(()=>a.localDocuments.getOverlayedDocuments(f,g)).next(y=>{c=y;const k=[];for(const E of o){const v=Pm(E,c.get(E.key).overlayedDocument);v!=null&&k.push(new Rt(E.key,v,pu(v.value.mapValue),et.exists(!0)))}return a.mutationQueue.addMutationBatch(f,l,k,o)}).next(y=>{h=y;const k=y.applyToLocalDocumentSet(c,d);return a.documentOverlayCache.saveOverlays(f,y.batchId,k)})}).then(()=>({batchId:h.batchId,changes:Mu(c)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let l=i.hc[i.currentUser.toKey()];l||(l=new Ee(Z)),l=l.insert(o,a),i.hc[i.currentUser.toKey()]=l}(s,r.batchId,n),await Zn(s,r.changes),await ir(s.remoteStore)}catch(r){const i=Ji(r,"Failed to persist write");n.reject(i)}}async function nc(t,e){const n=U(t);try{const s=await Ap(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.cc.get(i);o&&(ee(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.nc=!0:r.modifiedDocuments.size>0?ee(o.nc):r.removedDocuments.size>0&&(ee(o.nc),o.nc=!1))}),await Zn(n,s,e)}catch(s){await Gn(s)}}function Ca(t,e,n){const s=U(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.ic.forEach((i,o)=>{const a=o.view.bu(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=U(i);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const h of c.listeners)h.bu(o)&&(l=!0)}),l&&Zi(a)}(s.eventManager,e),r.length&&s.sc.Wo(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function g0(t,e,n){const s=U(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.cc.get(e),i=r&&r.key;if(i){let o=new Ee(M.comparator);o=o.insert(i,Ae.newNoDocument(i,q.min()));const a=G().add(i),l=new nr(q.min(),new Map,new ke(Z),o,a);await nc(s,l),s.uc=s.uc.remove(i),s.cc.delete(e),$i(s)}else await ai(s.localStore,e,!1).then(()=>li(s,e,n)).catch(Gn)}async function m0(t,e){const n=U(t),s=e.batch.batchId;try{const r=await Sp(n.localStore,e);rc(n,s,null),sc(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Zn(n,r)}catch(r){await Gn(r)}}async function p0(t,e,n){const s=U(t);try{const r=await function(i,o){const a=U(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(ee(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(s.localStore,e);rc(s,e,n),sc(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Zn(s,r)}catch(r){await Gn(r)}}function sc(t,e){(t.lc.get(e)||[]).forEach(n=>{n.resolve()}),t.lc.delete(e)}function rc(t,e,n){const s=U(t);let r=s.hc[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.hc[s.currentUser.toKey()]=r}}function li(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.rc.get(e))t.ic.delete(s),n&&t.sc.wc(s,n);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(s=>{t.ac.containsKey(s)||ic(t,s)})}function ic(t,e){t.oc.delete(e.path.canonicalString());const n=t.uc.get(e);n!==null&&(Wu(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),$i(t))}function Ia(t,e,n){for(const s of n)s instanceof ec?(t.ac.addReference(s.key,e),y0(t,s)):s instanceof tc?(N("SyncEngine","Document no longer in limbo: "+s.key),t.ac.removeReference(s.key,e),t.ac.containsKey(s.key)||ic(t,s.key)):x()}function y0(t,e){const n=e.key,s=n.path.canonicalString();t.uc.get(n)||t.oc.has(s)||(N("SyncEngine","New document in limbo: "+n),t.oc.add(s),$i(t))}function $i(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const n=new M(ue.fromString(e)),s=t.fc.next();t.cc.set(s,new l0(n)),t.uc=t.uc.insert(n,s),Qu(t.remoteStore,new Tt(rt(Bi(n.path)),s,2,Vi.at))}}async function Zn(t,e,n){const s=U(t),r=[],i=[],o=[];s.ic.isEmpty()||(s.ic.forEach((a,l)=>{o.push(s._c(l,e,n).then(u=>{if((u||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){r.push(u);const c=Gi.Ci(l.targetId,u);i.push(c)}}))}),await Promise.all(o),s.sc.Wo(r),await async function(a,l){const u=U(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>w.forEach(l,h=>w.forEach(h.Si,f=>u.persistence.referenceDelegate.addReference(c,h.targetId,f)).next(()=>w.forEach(h.Di,f=>u.persistence.referenceDelegate.removeReference(c,h.targetId,f)))))}catch(c){if(!Qn(c))throw c;N("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const h=c.targetId;if(!c.fromCache){const f=u.Ui.get(h),g=f.snapshotVersion,d=f.withLastLimboFreeSnapshotVersion(g);u.Ui=u.Ui.insert(h,d)}}}(s.localStore,i))}async function v0(t,e){const n=U(t);if(!n.currentUser.isEqual(e)){N("SyncEngine","User change. New user:",e.toKey());const s=await qu(n.localStore,e);n.currentUser=e,function(r,i){r.lc.forEach(o=>{o.forEach(a=>{a.reject(new L(_.CANCELLED,i))})}),r.lc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Zn(n,s.ji)}}function b0(t,e){const n=U(t),s=n.cc.get(e);if(s&&s.nc)return G().add(s.key);{let r=G();const i=n.rc.get(e);if(!i)return r;for(const o of i){const a=n.ic.get(o);r=r.unionWith(a.view.ju)}return r}}function _0(t){const e=U(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g0.bind(null,e),e.sc.Wo=s0.bind(null,e.eventManager),e.sc.wc=r0.bind(null,e.eventManager),e}function w0(t){const e=U(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p0.bind(null,e),e}class k0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.It=sr(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,n){return null}Ec(e,n){return null}Ic(e){return Ip(this.persistence,new Tp,e.initialUser,this.It)}yc(e){return new kp(Ki.Bs,this.It)}gc(e){return new Mp}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class E0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ca(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=v0.bind(null,this.syncEngine),await Zp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new e0}createDatastore(e){const n=sr(e.databaseInfo.databaseId),s=(r=e.databaseInfo,new Fp(r));var r;return function(i,o,a,l){return new Bp(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return n=this.localStore,s=this.datastore,r=e.asyncQueue,i=a=>Ca(this.syncEngine,a,0),o=ka.C()?new ka:new Op,new zp(n,s,r,i,o);var n,s,r,i,o}createSyncEngine(e,n){return function(s,r,i,o,a,l,u){const c=new u0(s,r,i,o,a,l);return u&&(c.dc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=U(e);N("RemoteStore","RemoteStore shutting down."),n._u.add(5),await Jn(n),n.mu.shutdown(),n.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oc(t,e,n){if(!n)throw new L(_.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function T0(t,e,n,s){if(e===!0&&s===!0)throw new L(_.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Sa(t){if(!M.isDocumentKey(t))throw new L(_.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Aa(t){if(M.isDocumentKey(t))throw new L(_.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eo(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":x()}function bn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=eo(t);throw new L(_.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=new Map;class Na{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new L(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new L(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,T0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Na({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new L(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new L(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Na(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Yg;switch(n.type){case"gapi":const s=n.client;return new em(s,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new L(_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Da.get(e);n&&(N("ComponentProvider","Removing Datastore"),Da.delete(e),n.terminate())}(this),Promise.resolve()}}function C0(t,e,n,s={}){var r;const i=(t=bn(t,or))._getSettings();if(i.host!=="firestore.googleapis.com"&&i.host!==e&&Zr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:`${e}:${n}`,ssl:!1})),s.mockUserToken){let o,a;if(typeof s.mockUserToken=="string")o=s.mockUserToken,a=Oe.MOCK_USER;else{o=Of(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const l=s.mockUserToken.sub||s.mockUserToken.user_id;if(!l)throw new L(_.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Oe(l)}t._authCredentials=new Jg(new hu(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ct(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ge(this.firestore,e,this._key)}}class $n{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new $n(this.firestore,e,this._query)}}class ct extends $n{constructor(e,n,s){super(e,n,Bi(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ge(this.firestore,null,new M(e))}withConverter(e){return new ct(this.firestore,e,this._path)}}function ac(t,e,...n){if(t=qt(t),oc("collection","path",e),t instanceof or){const s=ue.fromString(e,...n);return Aa(s),new ct(t,null,s)}{if(!(t instanceof Ge||t instanceof ct))throw new L(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ue.fromString(e,...n));return Aa(s),new ct(t.firestore,null,s)}}function I0(t,e,...n){if(t=qt(t),arguments.length===1&&(e=fu.R()),oc("doc","path",e),t instanceof or){const s=ue.fromString(e,...n);return Sa(s),new Ge(t,null,new M(s))}{if(!(t instanceof Ge||t instanceof ct))throw new L(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ue.fromString(e,...n));return Sa(s),new Ge(t.firestore,t instanceof ct?t.converter:null,new M(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):st("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e,n,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Oe.UNAUTHENTICATED,this.clientId=fu.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async i=>{N("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(s,i=>(N("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new L(_.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Et;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Ji(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function D0(t,e){t.asyncQueue.verifyOperationInProgress(),N("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await qu(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function N0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await R0(t);N("FirestoreClient","Initializing OnlineComponentProvider");const s=await t.getConfiguration();await e.initialize(n,s),t.setCredentialChangeListener(r=>Ea(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Ea(e.remoteStore,i)),t.onlineComponents=e}async function R0(t){return t.offlineComponents||(N("FirestoreClient","Using default OfflineComponentProvider"),await D0(t,new k0)),t.offlineComponents}async function lc(t){return t.onlineComponents||(N("FirestoreClient","Using default OnlineComponentProvider"),await N0(t,new E0)),t.onlineComponents}function L0(t){return lc(t).then(e=>e.syncEngine)}async function Ra(t){const e=await lc(t),n=e.eventManager;return n.onListen=c0.bind(null,e.syncEngine),n.onUnlisten=f0.bind(null,e.syncEngine),n}class M0{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Ku(this,"async_queue_retry"),this.Wc=()=>{const n=Dr();n&&N("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=Dr();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const n=Dr();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const n=new Et;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!Qn(e))throw e;N("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(s=>{this.Kc=s,this.Gc=!1;const r=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(s);throw st("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.Gc=!1,s))));return this.Bc=n,n}enqueueAfterDelay(e,n,s){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const r=Yi.createAndSchedule(this,e,n,s,i=>this.Yc(i));return this.qc.push(r),r}zc(){this.Kc&&x()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const n of this.qc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.qc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.qc.indexOf(e);this.qc.splice(n,1)}}function La(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Os extends or{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new M0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||cc(this),this._firestoreClient.terminate()}}function O0(t,e){const n=typeof t=="object"?t:Vd(),s=typeof t=="string"?t:e||"(default)",r=Ld(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=Rf("firestore");i&&C0(r,...i)}return r}function uc(t){return t._firestoreClient||cc(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function cc(t){var e;const n=t._freezeSettings(),s=function(r,i,o,a){return new hm(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new A0(t._authCredentials,t._appCheckCredentials,t._queue,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yt(Be.fromBase64String(e))}catch(n){throw new L(_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Yt(Be.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Z(this._lat,e._lat)||Z(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=/^__.*__$/;class V0{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Rt(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xn(e,this.data,n,this.fieldTransforms)}}function hc(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw x()}}class ro{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.It=s,this.ignoreUndefinedProperties=r,i===void 0&&this.na(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new ro(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ia({path:s,oa:!1});return r.ua(e),r}ca(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ia({path:s,oa:!1});return r.na(),r}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Ps(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(hc(this.sa)&&P0.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class F0{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.It=s||sr(e)}da(e,n,s,r=!1){return new ro({sa:e,methodName:n,fa:s,path:Pe.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function x0(t){const e=t._freezeSettings(),n=sr(t._databaseId);return new F0(t._databaseId,!!e.ignoreUndefinedProperties,n)}function U0(t,e,n,s,r,i={}){const o=t.da(i.merge||i.mergeFields?2:0,e,n,r);mc("Data must be an object, but it was:",o,s);const a=dc(s,o);let l,u;if(i.merge)l=new Ye(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const c=[];for(const h of i.mergeFields){const f=B0(e,h,n);if(!o.contains(f))throw new L(_.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);z0(c,f)||c.push(f)}l=new Ye(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new V0(new Ke(a),l,u)}class io extends no{_toFieldTransform(e){return new Rm(e.path,new Mn)}isEqual(e){return e instanceof io}}function fc(t,e){if(gc(t=qt(t)))return mc("Unsupported field value:",e,t),dc(t,e);if(t instanceof no)return function(n,s){if(!hc(s.sa))throw s.ha(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.ha(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=fc(o,s.aa(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=qt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Am(s.It,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=we.fromDate(n);return{timestampValue:Ls(s.It,r)}}if(n instanceof we){const r=new we(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ls(s.It,r)}}if(n instanceof so)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Yt)return{bytesValue:xu(s.It,n._byteString)};if(n instanceof Ge){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s.ha(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:zi(n.firestore._databaseId||s.databaseId,n._key.path)}}throw s.ha(`Unsupported field value: ${eo(n)}`)}(t,e)}function dc(t,e){const n={};return du(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tn(t,(s,r)=>{const i=fc(r,e.ra(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function gc(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof we||t instanceof so||t instanceof Yt||t instanceof Ge||t instanceof no)}function mc(t,e,n){if(!gc(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const s=eo(n);throw s==="an object"?e.ha(t+" a custom object"):e.ha(t+" "+s)}}function B0(t,e,n){if((e=qt(e))instanceof to)return e._internalPath;if(typeof e=="string")return pc(t,e);throw Ps("Field path arguments must be of type string or ",t,!1,void 0,n)}const j0=new RegExp("[~\\*/\\[\\]]");function pc(t,e,n){if(e.search(j0)>=0)throw Ps(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new to(...e.split("."))._internalPath}catch{throw Ps(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ps(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new L(_.INVALID_ARGUMENT,a+t+l)}function z0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new q0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(oo("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class q0 extends yc{data(){return super.data()}}function oo(t,e){return typeof e=="string"?pc(t,e):e instanceof to?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class K0{}function G0(t,...e){for(const n of e)t=n._apply(t);return t}class Q0 extends K0{constructor(e,n){super(),this.ma=e,this.pa=n,this.type="orderBy"}_apply(e){const n=function(s,r,i){if(s.startAt!==null)throw new L(_.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new L(_.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new jt(r,i);return function(a,l){if(vu(a)===null){const u=bu(a);u!==null&&X0(a,u,l.field)}}(s,o),o}(e._query,this.ma,this.pa);return new $n(e.firestore,e.converter,function(s,r){const i=s.explicitOrderBy.concat([r]);return new Wn(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function W0(t,e="asc"){const n=e,s=oo("orderBy",t);return new Q0(s,n)}function X0(t,e,n){if(!n.isEqual(e))throw new L(_.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{convertValue(e,n="none"){switch(At(e)){case 0:return null;case 1:return e.booleanValue;case 2:return be(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw x()}}convertObject(e,n){const s={};return tn(e.fields,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertGeoPoint(e){return new so(be(e.latitude),be(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=mu(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Dn(e));default:return null}}convertTimestamp(e){const n=dt(e);return new we(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ue.fromString(e);ee(zu(s));const r=new Nn(s.get(1),s.get(3)),i=new M(s.popFirst(5));return r.isEqual(n)||st(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vc extends yc{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new gs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(oo("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class gs extends vc{data(e={}){return super.data(e)}}class Z0{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new hn(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new gs(this._firestore,this._userDataWriter,s.key,s,new hn(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new gs(s._firestore,s._userDataWriter,o.doc.key,o.doc,new hn(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new gs(s._firestore,s._userDataWriter,o.doc.key,o.doc,new hn(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:$0(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function $0(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return x()}}class bc extends Y0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,n)}}function ey(t,e){const n=bn(t.firestore,Os),s=I0(t),r=J0(t.converter,e);return ny(n,[U0(x0(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,et.exists(!1))]).then(()=>s)}function ty(t,...e){var n,s,r;t=qt(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||La(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(La(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(s=h.error)===null||s===void 0?void 0:s.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let l,u,c;if(t instanceof Ge)u=bn(t.firestore,Os),c=Bi(t._key.path),l={next:h=>{e[o]&&e[o](sy(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=bn(t,$n);u=bn(h.firestore,Os),c=h._query;const f=new bc(u);l={next:g=>{e[o]&&e[o](new Z0(u,f,h,g))},error:e[o+1],complete:e[o+2]},H0(t._query)}return function(h,f,g,d){const y=new S0(d),k=new i0(f,y,g);return h.asyncQueue.enqueueAndForget(async()=>t0(await Ra(h),k)),()=>{y.bc(),h.asyncQueue.enqueueAndForget(async()=>n0(await Ra(h),k))}}(uc(u),c,a,l)}function ny(t,e){return function(n,s){const r=new Et;return n.asyncQueue.enqueueAndForget(async()=>d0(await L0(n),s,r)),r.promise}(uc(t),e)}function sy(t,e,n){const s=n.docs.get(e._key),r=new bc(t);return new vc(t,r,e._key,s,new hn(n.hasPendingWrites,n.fromCache),e.converter)}function ry(){return new io("serverTimestamp")}(function(t,e=!0){(function(n){en=n})(Pd),_s(new wn("firestore",(n,{instanceIdentifier:s,options:r})=>{const i=n.getProvider("app").getImmediate(),o=new Os(new Zg(n.getProvider("auth-internal")),new nm(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new L(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Nn(a.options.projectId,l)}(i,s),i);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),Ut(ta,"3.7.3",t),Ut(ta,"3.7.3","esm2017")})();const iy={apiKey:"AIzaSyBE1xuFncad-cgFgkDgRwO0hQkNb8aF1KI",authDomain:"thiagometro-bf771.firebaseapp.com",projectId:"thiagometro-bf771",storageBucket:"thiagometro-bf771.appspot.com",messagingSenderId:"969109893719",appId:"1:969109893719:web:b0c85ed83f5ec031ab2912"},oy=ol(iy),_c=O0(oy);function ay(t){let e;return{c(){e=De("Selecione uma categoria")},m(n,s){C(n,e,s)},d(n){n&&T(e)}}}function ly(t){let e,n;return e=new gn({props:{size:"base",weight:"semibold",$$slots:{default:[ay]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,r){const i={};r&64&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function uy(t){let e;return{c(){e=De("Descri\xE7\xE3o")},m(n,s){C(n,e,s)},d(n){n&&T(e)}}}function cy(t){let e,n;return e=new gn({props:{size:"base",weight:"semibold",$$slots:{default:[uy]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,r){const i={};r&64&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function hy(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-6 h-6")},m(s,r){C(s,e,r),z(e,n)},p:X,d(s){s&&T(e)}}}function fy(t){let e,n,s;return{c(){e=ge("svg"),n=ge("path"),s=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"),m(s,"stroke-linecap","round"),m(s,"stroke-linejoin","round"),m(s,"d","M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-6 h-6")},m(r,i){C(r,e,i),z(e,n),z(e,s)},p:X,d(r){r&&T(e)}}}function dy(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-6 h-6")},m(s,r){C(s,e,r),z(e,n)},p:X,d(s){s&&T(e)}}}function gy(t){let e,n,s,r,i,o;return e=new xt({props:{name:"Attach file",$$slots:{default:[hy]},$$scope:{ctx:t}}}),s=new xt({props:{name:"Embed map",$$slots:{default:[fy]},$$scope:{ctx:t}}}),i=new xt({props:{name:"Upload image",$$slots:{default:[dy]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment),n=oe(),Q(s.$$.fragment),r=oe(),Q(i.$$.fragment)},m(a,l){H(e,a,l),C(a,n,l),H(s,a,l),C(a,r,l),H(i,a,l),o=!0},p(a,l){const u={};l&64&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const c={};l&64&&(c.$$scope={dirty:l,ctx:a}),s.$set(c);const h={};l&64&&(h.$$scope={dirty:l,ctx:a}),i.$set(h)},i(a){o||(p(e.$$.fragment,a),p(s.$$.fragment,a),p(i.$$.fragment,a),o=!0)},o(a){b(e.$$.fragment,a),b(s.$$.fragment,a),b(i.$$.fragment,a),o=!1},d(a){K(e,a),a&&T(n),K(s,a),a&&T(r),K(i,a)}}}function my(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-6 h-6")},m(s,r){C(s,e,r),z(e,n)},p:X,d(s){s&&T(e)}}}function py(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-6 h-6")},m(s,r){C(s,e,r),z(e,n)},p:X,d(s){s&&T(e)}}}function yy(t){let e,n,s,r;return e=new xt({props:{name:"Format code",$$slots:{default:[my]},$$scope:{ctx:t}}}),s=new xt({props:{name:"Add emoji",$$slots:{default:[py]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment),n=oe(),Q(s.$$.fragment)},m(i,o){H(e,i,o),C(i,n,o),H(s,i,o),r=!0},p(i,o){const a={};o&64&&(a.$$scope={dirty:o,ctx:i}),e.$set(a);const l={};o&64&&(l.$$scope={dirty:o,ctx:i}),s.$set(l)},i(i){r||(p(e.$$.fragment,i),p(s.$$.fragment,i),r=!0)},o(i){b(e.$$.fragment,i),b(s.$$.fragment,i),r=!1},d(i){K(e,i),i&&T(n),K(s,i)}}}function vy(t){let e,n,s,r;return e=new Lo({props:{$$slots:{default:[gy]},$$scope:{ctx:t}}}),s=new Lo({props:{$$slots:{default:[yy]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment),n=oe(),Q(s.$$.fragment)},m(i,o){H(e,i,o),C(i,n,o),H(s,i,o),r=!0},p(i,o){const a={};o&64&&(a.$$scope={dirty:o,ctx:i}),e.$set(a);const l={};o&64&&(l.$$scope={dirty:o,ctx:i}),s.$set(l)},i(i){r||(p(e.$$.fragment,i),p(s.$$.fragment,i),r=!0)},o(i){b(e.$$.fragment,i),b(s.$$.fragment,i),r=!1},d(i){K(e,i),i&&T(n),K(s,i)}}}function by(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-7 h-7")},m(s,r){C(s,e,r),z(e,n)},p:X,d(s){s&&T(e)}}}function _y(t){let e,n;return e=new xt({props:{name:"send",slot:"end",form:"form1",type:"submit",$$slots:{default:[by]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,r){const i={};r&64&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function wy(t){let e,n;return e=new gf({props:{slot:"header",embedded:!0,$$slots:{end:[_y],default:[vy]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,r){const i={};r&64&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function ky(t){let e,n,s,r,i,o,a,l,u,c,h,f,g;n=new po({props:{for:"select-underline",align:"left",class:"sr-only",$$slots:{default:[ly]},$$scope:{ctx:t}}});function d(v){t[4](v)}let y={id:"select",items:t[2],placeholder:"Selecione uma categoria",required:!0};t[0]!==void 0&&(y.value=t[0]),r=new Oh({props:y}),Ct.push(()=>go(r,"value",d)),a=new po({props:{for:"editor",align:"left",class:"sr-only",$$slots:{default:[cy]},$$scope:{ctx:t}}});function k(v){t[5](v)}let E={id:"editor",rows:"5",placeholder:"Ex: Thiago comentou que sente saudades da ex",required:!0,$$slots:{header:[wy]},$$scope:{ctx:t}};return t[1]!==void 0&&(E.value=t[1]),u=new jh({props:E}),Ct.push(()=>go(u,"value",k)),{c(){e=B("form"),Q(n.$$.fragment),s=oe(),Q(r.$$.fragment),o=oe(),Q(a.$$.fragment),l=oe(),Q(u.$$.fragment),m(e,"id","form1")},m(v,A){C(v,e,A),H(n,e,null),z(e,s),H(r,e,null),z(e,o),H(a,e,null),z(e,l),H(u,e,null),h=!0,f||(g=V(e,"submit",Dc(t[3])),f=!0)},p(v,A){const he={};A&64&&(he.$$scope={dirty:A,ctx:v}),n.$set(he);const _e={};!i&&A&1&&(i=!0,_e.value=v[0],ho(()=>i=!1)),r.$set(_e);const de={};A&64&&(de.$$scope={dirty:A,ctx:v}),a.$set(de);const Te={};A&64&&(Te.$$scope={dirty:A,ctx:v}),!c&&A&2&&(c=!0,Te.value=v[1],ho(()=>c=!1)),u.$set(Te)},i(v){h||(p(n.$$.fragment,v),p(r.$$.fragment,v),p(a.$$.fragment,v),p(u.$$.fragment,v),h=!0)},o(v){b(n.$$.fragment,v),b(r.$$.fragment,v),b(a.$$.fragment,v),b(u.$$.fragment,v),h=!1},d(v){v&&T(e),K(n),K(r),K(a),K(u),f=!1,g()}}}function Ey(t){let e,n;return e=new kh({props:{style:"text-align:left; width:80rem; max-width:none; padding:0",class:"mt-4",$$slots:{default:[ky]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,[r]){const i={};r&67&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function Ty(t,e,n){let s=[{value:"Jogos",name:"Jogos"},{value:"Culinaria",name:"Culinaria"},{value:"Relacionamento",name:"Relacionamento"},{value:"Trabalho",name:"Trabalho"},{value:"Caracteristicas",name:"Caracteristicas"},{value:"Amigas",name:"Amigas"},{value:"Teatro",name:"Teatro"},{value:"Danca",name:"Danca"},{value:"Mensagem",name:"Mensagem"},{value:"Atual namorado",name:"Atual namorado"},{value:"Outros",name:"Outros"}],r,i;const o=async()=>{if(console.log(r),r&&i){const u=await ey(ac(_c,"ex"),{categoria:r,descricao:i,horario:ry()}).then(n(0,r=""),n(1,i=""));console.log("Document written with ID: ",u.id)}};function a(u){r=u,n(0,r)}function l(u){i=u,n(1,i)}return[r,i,s,o,a,l]}class Cy extends ye{constructor(e){super(),pe(this,e,Ty,Ey,$,{})}}function Ma(t,e,n){const s=t.slice();return s[4]=e[n],s[6]=n,s}function Iy(t){let e,n,s,r;return{c(){e=De("Estamos trabalhando h\xE1 "),n=B("span"),s=De(t[0]),r=De(` dias\r
            sem men\xE7\xF5es da EX`),m(n,"class","dias svelte-1imh9op")},m(i,o){C(i,e,o),C(i,n,o),z(n,s),C(i,r,o)},p(i,o){o&1&&ot(s,i[0])},d(i){i&&T(e),i&&T(n),i&&T(r)}}}function Sy(t){let e;return{c(){e=De("Thiagometro")},m(n,s){C(n,e,s)},d(n){n&&T(e)}}}function Ay(t){let e,n,s;return n=new Za({}),{c(){e=B("h1"),Q(n.$$.fragment),m(e,"class","contador svelte-1imh9op")},m(r,i){C(r,e,i),H(n,e,null),s=!0},p:X,i(r){s||(p(n.$$.fragment,r),s=!0)},o(r){b(n.$$.fragment,r),s=!1},d(r){r&&T(e),K(n)}}}function Dy(t){let e,n=t[1].length+"",s;return{c(){e=B("h1"),s=De(n),m(e,"class","contador svelte-1imh9op")},m(r,i){C(r,e,i),z(e,s)},p(r,i){i&2&&n!==(n=r[1].length+"")&&ot(s,n)},i:X,o:X,d(r){r&&T(e)}}}function Ny(t){let e,n;return e=new Za({}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p:X,i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function Ry(t){let e,n,s,r;return e=new rf({props:{style:"text-align:left; width:80rem",$$slots:{default:[Vy]},$$scope:{ctx:t}}}),s=new Cy({}),{c(){Q(e.$$.fragment),n=oe(),Q(s.$$.fragment)},m(i,o){H(e,i,o),C(i,n,o),H(s,i,o),r=!0},p(i,o){const a={};o&130&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){r||(p(e.$$.fragment,i),p(s.$$.fragment,i),r=!0)},o(i){b(e.$$.fragment,i),b(s.$$.fragment,i),r=!1},d(i){K(e,i),i&&T(n),K(s,i)}}}function Ly(t){let e="Observa\xE7\xE3o "+(t[6]+1),n;return{c(){n=De(e)},m(s,r){C(s,n,r)},p:X,d(s){s&&T(n)}}}function My(t){let e=t[4].data().descricao+"",n;return{c(){n=De(e)},m(s,r){C(s,n,r)},p(s,r){r&2&&e!==(e=s[4].data().descricao+"")&&ot(n,e)},d(s){s&&T(n)}}}function Oy(t){var s;let e=new Date(((s=t[4].data().horario)==null?void 0:s.seconds)*1e3).toLocaleString()+"",n;return{c(){n=De(e)},m(r,i){C(r,n,i)},p(r,i){var o;i&2&&e!==(e=new Date(((o=r[4].data().horario)==null?void 0:o.seconds)*1e3).toLocaleString()+"")&&ot(n,e)},d(r){r&&T(n)}}}function Py(t){let e=t[4].data().categoria+"",n;return{c(){n=De(e)},m(s,r){C(s,n,r)},p(s,r){r&2&&e!==(e=s[4].data().categoria+"")&&ot(n,e)},d(s){s&&T(n)}}}function Oa(t){let e,n,s,r,i,o,a,l,u,c,h;return n=new gn({props:{size:"base",weight:"semibold",$$slots:{default:[Ly]},$$scope:{ctx:t}}}),r=new gn({props:{size:"base",color:"text-grey-500",$$slots:{default:[My]},$$scope:{ctx:t}}}),o=new gn({props:{size:"sm",align:"center",$$slots:{default:[Oy]},$$scope:{ctx:t}}}),l=new ph({props:{large:!0,class:"inline-flex items-center justify-center -mb-0.5 rounded px-2.5 py-0.5 absolute font-bold border-2 border-white dark:border-gray-900  -top-3 -right-3",$$slots:{default:[Py]},$$scope:{ctx:t}}}),{c(){e=B("div"),Q(n.$$.fragment),s=oe(),Q(r.$$.fragment),i=oe(),Q(o.$$.fragment),a=oe(),Q(l.$$.fragment),u=oe(),m(e,"class","relative")},m(f,g){C(f,e,g),H(n,e,null),z(e,s),H(r,e,null),z(e,i),H(o,e,null),z(e,a),H(l,e,null),z(e,u),h=!0},p(f,g){const d={};g&128&&(d.$$scope={dirty:g,ctx:f}),n.$set(d);const y={};g&130&&(y.$$scope={dirty:g,ctx:f}),r.$set(y);const k={};g&130&&(k.$$scope={dirty:g,ctx:f}),o.$set(k);const E={};g&130&&(E.$$scope={dirty:g,ctx:f}),l.$set(E)},i(f){h||(p(n.$$.fragment,f),p(r.$$.fragment,f),p(o.$$.fragment,f),p(l.$$.fragment,f),c||ht(()=>{c=Bc(e,Wc,{duration:500}),c.start()}),h=!0)},o(f){b(n.$$.fragment,f),b(r.$$.fragment,f),b(o.$$.fragment,f),b(l.$$.fragment,f),h=!1},d(f){f&&T(e),K(n),K(r),K(o),K(l)}}}function Vy(t){let e,n,s=t[1],r=[];for(let o=0;o<s.length;o+=1)r[o]=Oa(Ma(t,s,o));const i=o=>b(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Re()},m(o,a){for(let l=0;l<r.length;l+=1)r[l].m(o,a);C(o,e,a),n=!0},p(o,a){if(a&2){s=o[1];let l;for(l=0;l<s.length;l+=1){const u=Ma(o,s,l);r[l]?(r[l].p(u,a),p(r[l],1)):(r[l]=Oa(u),r[l].c(),p(r[l],1),r[l].m(e.parentNode,e))}for(xe(),l=s.length;l<r.length;l+=1)i(l);Ue()}},i(o){if(!n){for(let a=0;a<s.length;a+=1)p(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)b(r[a]);n=!1},d(o){hi(r,o),o&&T(e)}}}function Fy(t){let e,n,s,r,i,o,a,l,u,c,h,f,g,d,y,k,E;s=new dh({props:{src:"/images/thiago.png",size:"lg"}}),i=new Mo({props:{tag:"h2",class:"pl-5",$$slots:{default:[Iy]},$$scope:{ctx:t}}}),l=new Mo({props:{tag:"h1",customeSize:"font-extrabold ",$$slots:{default:[Sy]},$$scope:{ctx:t}}});const v=[Dy,Ay],A=[];function he(j,fe){return j[1]?0:1}c=he(t),h=A[c]=v[c](t);const _e=[Ry,Ny],de=[];function Te(j,fe){return j[1]?0:1}return y=Te(t),k=de[y]=_e[y](t),{c(){e=B("marquee"),n=B("div"),Q(s.$$.fragment),r=oe(),Q(i.$$.fragment),o=oe(),a=B("div"),Q(l.$$.fragment),u=oe(),h.c(),f=oe(),g=B("div"),g.innerHTML='<h5 class="text-xl font-bold leading-none text-gray-900 dark:text-white">Ultimas cita\xE7\xF5es</h5>',d=oe(),k.c(),m(n,"class","container-teste svelte-1imh9op"),m(g,"class","flex justify-between items-center mb-4"),m(a,"class","flex-col svelte-1imh9op")},m(j,fe){C(j,e,fe),z(e,n),H(s,n,null),z(n,r),H(i,n,null),C(j,o,fe),C(j,a,fe),H(l,a,null),z(a,u),A[c].m(a,null),z(a,f),z(a,g),z(a,d),de[y].m(a,null),E=!0},p(j,[fe]){const We={};fe&129&&(We.$$scope={dirty:fe,ctx:j}),i.$set(We);const I={};fe&128&&(I.$$scope={dirty:fe,ctx:j}),l.$set(I);let at=c;c=he(j),c===at?A[c].p(j,fe):(xe(),b(A[at],1,1,()=>{A[at]=null}),Ue(),h=A[c],h?h.p(j,fe):(h=A[c]=v[c](j),h.c()),p(h,1),h.m(a,f));let yt=y;y=Te(j),y===yt?de[y].p(j,fe):(xe(),b(de[yt],1,1,()=>{de[yt]=null}),Ue(),k=de[y],k?k.p(j,fe):(k=de[y]=_e[y](j),k.c()),p(k,1),k.m(a,null))},i(j){E||(p(s.$$.fragment,j),p(i.$$.fragment,j),p(l.$$.fragment,j),p(h),p(k),E=!0)},o(j){b(s.$$.fragment,j),b(i.$$.fragment,j),b(l.$$.fragment,j),b(h),b(k),E=!1},d(j){j&&T(e),K(s),K(i),j&&T(o),j&&T(a),K(l),A[c].d(),de[y].d()}}}function xy(t,e,n){let s,r;const i=ac(_c,"ex"),o=G0(i,W0("horario","desc"));return ty(o,a=>{var c;n(1,s=a.docs),console.log(a.docs);let l=new Date(((c=s[0].data().horario)==null?void 0:c.seconds)*1e3).getUTCDate(),u=new Date().getUTCDate();n(0,r=u-l)}),n(1,s=null),n(0,r=void 0),[r,s]}class Uy extends ye{constructor(e){super(),pe(this,e,xy,Fy,$,{})}}function By(t){let e,n,s;return n=new Uy({}),{c(){e=B("main"),Q(n.$$.fragment)},m(r,i){C(r,e,i),H(n,e,null),s=!0},p:X,i(r){s||(p(n.$$.fragment,r),s=!0)},o(r){b(n.$$.fragment,r),s=!1},d(r){r&&T(e),K(n)}}}class jy extends ye{constructor(e){super(),pe(this,e,null,By,$,{})}}new jy({target:document.getElementById("app")});
