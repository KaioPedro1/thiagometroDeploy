(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function X(){}const Xa=t=>t;function F(t,e){for(const n in e)t[n]=e[n];return t}function Ya(t){return t()}function go(){return Object.create(null)}function Ze(t){t.forEach(Ya)}function Lt(t){return typeof t=="function"}function Z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let as;function ks(t,e){return as||(as=document.createElement("a")),as.href=e,t===as.href}function xc(t){return Object.keys(t).length===0}function Bc(t,...e){if(t==null)return X;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ja(t,e,n){t.$$.on_destroy.push(Bc(e,n))}function se(t,e,n,s){if(t){const r=Za(t,e,n,s);return t[0](r)}}function Za(t,e,n,s){return t[1]&&s?F(n.ctx.slice(),t[1](s(e))):n.ctx}function re(t,e,n,s){if(t[2]&&s){const r=t[2](s(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const i=[],o=Math.max(e.dirty.length,r.length);for(let a=0;a<o;a+=1)i[a]=e.dirty[a]|r[a];return i}return e.dirty|r}return e.dirty}function ie(t,e,n,s,r,i){if(r){const o=Za(e,n,s,i);t.p(o,r)}}function oe(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function J(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function he(t,e){const n={};e=new Set(e);for(const s in t)!e.has(s)&&s[0]!=="$"&&(n[s]=t[s]);return n}function $a(t){const e={};for(const n in t)e[n]=!0;return e}function jc(t,e,n){return t.set(n),e}function yi(t){return t&&Lt(t.destroy)?t.destroy:X}const el=typeof window<"u";let tl=el?()=>window.performance.now():()=>Date.now(),vi=el?t=>requestAnimationFrame(t):X;const zt=new Set;function nl(t){zt.forEach(e=>{e.c(t)||(zt.delete(e),e.f())}),zt.size!==0&&vi(nl)}function sl(t){let e;return zt.size===0&&vi(nl),{promise:new Promise(n=>{zt.add(e={c:t,f:n})}),abort(){zt.delete(e)}}}function B(t,e){t.appendChild(e)}function rl(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function zc(t){const e=P("style");return qc(rl(t),e),e.sheet}function qc(t,e){return B(t.head||t,e),e.sheet}function C(t,e,n){t.insertBefore(e,n||null)}function k(t){t.parentNode&&t.parentNode.removeChild(t)}function Wt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function P(t){return document.createElement(t)}function pe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ge(t){return document.createTextNode(t)}function te(){return ge(" ")}function Ne(){return ge("")}function x(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function Hc(t){return function(e){return e.preventDefault(),t.call(this,e)}}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ae(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const s in e)e[s]==null?t.removeAttribute(s):s==="style"?t.style.cssText=e[s]:s==="__value"?t.value=t[s]=e[s]:n[s]&&n[s].set?t[s]=e[s]:m(t,s,e[s])}function Ge(t,e){Object.keys(e).forEach(n=>{Kc(t,n,e[n])})}function Kc(t,e,n){e in t?t[e]=typeof t[e]=="boolean"&&n===""?!0:n:m(t,e,n)}function Gc(t){return Array.from(t.childNodes)}function Ye(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function mo(t,e){t.value=e==null?"":e}function be(t,e,n,s){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function ls(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function po(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];s.selected=~e.indexOf(s.__value)}}function Qc(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function ft(t,e,n){t.classList[n?"add":"remove"](e)}function il(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,s,e),r}const Es=new Map;let Ts=0;function Wc(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Xc(t,e){const n={stylesheet:zc(e),rules:{}};return Es.set(t,n),n}function xr(t,e,n,s,r,i,o,a=0){const l=16.666/s;let u=`{
`;for(let p=0;p<=1;p+=l){const _=e+(n-e)*i(p);u+=p*100+`%{${o(_,1-_)}}
`}const c=u+`100% {${o(n,1-n)}}
}`,h=`__svelte_${Wc(c)}_${a}`,f=rl(t),{stylesheet:g,rules:d}=Es.get(f)||Xc(f,t);d[h]||(d[h]=!0,g.insertRule(`@keyframes ${h} ${c}`,g.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${h} ${s}ms linear ${r}ms 1 both`,Ts+=1,h}function Br(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),r=n.length-s.length;r&&(t.style.animation=s.join(", "),Ts-=r,Ts||Yc())}function Yc(){vi(()=>{Ts||(Es.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&k(e)}),Es.clear())})}let Sn;function bn(t){Sn=t}function Ks(){if(!Sn)throw new Error("Function called outside component initialization");return Sn}function ol(t){Ks().$$.on_mount.push(t)}function Jc(){const t=Ks();return(e,n,{cancelable:s=!1}={})=>{const r=t.$$.callbacks[e];if(r){const i=il(e,n,{cancelable:s});return r.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}function Cs(t,e){return Ks().$$.context.set(t,e),e}function qn(t){return Ks().$$.context.get(t)}function M(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(s=>s.call(this,e))}const gn=[],At=[],ps=[],jr=[],Zc=Promise.resolve();let zr=!1;function $c(){zr||(zr=!0,Zc.then(al))}function at(t){ps.push(t)}function yo(t){jr.push(t)}const yr=new Set;let us=0;function al(){const t=Sn;do{for(;us<gn.length;){const e=gn[us];us++,bn(e),eh(e.$$)}for(bn(null),gn.length=0,us=0;At.length;)At.pop()();for(let e=0;e<ps.length;e+=1){const n=ps[e];yr.has(n)||(yr.add(n),n())}ps.length=0}while(gn.length);for(;jr.length;)jr.pop()();zr=!1,yr.clear(),bn(t)}function eh(t){if(t.fragment!==null){t.update(),Ze(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(at)}}let fn;function ll(){return fn||(fn=Promise.resolve(),fn.then(()=>{fn=null})),fn}function _n(t,e,n){t.dispatchEvent(il(`${e?"intro":"outro"}${n}`))}const ys=new Set;let st;function Se(){st={r:0,c:[],p:st}}function Ae(){st.r||Ze(st.c),st=st.p}function v(t,e){t&&t.i&&(ys.delete(t),t.i(e))}function b(t,e,n,s){if(t&&t.o){if(ys.has(t))return;ys.add(t),st.c.push(()=>{ys.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}const ul={duration:0};function th(t,e,n){let s=e(t,n),r=!1,i,o,a=0;function l(){i&&Br(t,i)}function u(){const{delay:h=0,duration:f=300,easing:g=Xa,tick:d=X,css:y}=s||ul;y&&(i=xr(t,0,1,f,h,g,y,a++)),d(0,1);const p=tl()+h,_=p+f;o&&o.abort(),r=!0,at(()=>_n(t,!0,"start")),o=sl(I=>{if(r){if(I>=_)return d(1,0),_n(t,!0,"end"),l(),r=!1;if(I>=p){const A=g((I-p)/f);d(A,1-A)}}return r})}let c=!1;return{start(){c||(c=!0,Br(t),Lt(s)?(s=s(),ll().then(u)):u())},invalidate(){c=!1},end(){r&&(l(),r=!1)}}}function Is(t,e,n,s){let r=e(t,n),i=s?0:1,o=null,a=null,l=null;function u(){l&&Br(t,l)}function c(f,g){const d=f.b-i;return g*=Math.abs(d),{a:i,b:f.b,d,duration:g,start:f.start,end:f.start+g,group:f.group}}function h(f){const{delay:g=0,duration:d=300,easing:y=Xa,tick:p=X,css:_}=r||ul,I={start:tl()+g,b:f};f||(I.group=st,st.r+=1),o||a?a=I:(_&&(u(),l=xr(t,i,f,d,g,y,_)),f&&p(0,1),o=c(I,d),at(()=>_n(t,f,"start")),sl(A=>{if(a&&A>a.start&&(o=c(a,d),a=null,_n(t,o.b,"start"),_&&(u(),l=xr(t,i,o.b,o.duration,0,y,r.css))),o){if(A>=o.end)p(i=o.b,1-i),_n(t,o.b,"end"),a||(o.b?u():--o.group.r||Ze(o.group.c)),o=null;else if(A>=o.start){const L=A-o.start;i=o.a+o.d*y(L/o.duration),p(i,1-i)}}return!!(o||a)}))}return{run(f){Lt(r)?ll().then(()=>{r=r(),h(f)}):h(f)},end(){u(),o=a=null}}}function Pe(t,e){const n={},s={},r={$$scope:1};let i=t.length;for(;i--;){const o=t[i],a=e[i];if(a){for(const l in o)l in a||(s[l]=1);for(const l in a)r[l]||(n[l]=a[l],r[l]=1);t[i]=a}else for(const l in o)r[l]=1}for(const o in s)o in n||(n[o]=void 0);return n}function Gs(t){return typeof t=="object"&&t!==null?t:{}}function vo(t,e,n){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function Q(t){t&&t.c()}function H(t,e,n,s){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),s||at(()=>{const o=t.$$.on_mount.map(Ya).filter(Lt);t.$$.on_destroy?t.$$.on_destroy.push(...o):Ze(o),t.$$.on_mount=[]}),i.forEach(at)}function K(t,e){const n=t.$$;n.fragment!==null&&(Ze(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nh(t,e){t.$$.dirty[0]===-1&&(gn.push(t),$c(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function fe(t,e,n,s,r,i,o,a=[-1]){const l=Sn;bn(t);const u=t.$$={fragment:null,ctx:[],props:i,update:X,not_equal:r,bound:go(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:go(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(h,f,...g)=>{const d=g.length?g[0]:f;return u.ctx&&r(u.ctx[h],u.ctx[h]=d)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](d),c&&nh(t,h)),f}):[],u.update(),c=!0,Ze(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const h=Gc(e.target);u.fragment&&u.fragment.l(h),h.forEach(k)}else u.fragment&&u.fragment.c();e.intro&&v(t.$$.fragment),H(t,e.target,e.anchor,e.customElement),al()}bn(l)}class de{$destroy(){K(this,1),this.$destroy=X}$on(e,n){if(!Lt(n))return X;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}$set(e){this.$$set&&!xc(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ut=[];function sh(t,e=X){let n;const s=new Set;function r(a){if(Z(t,a)&&(t=a,n)){const l=!Ut.length;for(const u of s)u[1](),Ut.push(u,t);if(l){for(let u=0;u<Ut.length;u+=2)Ut[u][0](Ut[u+1]);Ut.length=0}}}function i(a){r(a(t))}function o(a,l=X){const u=[a,l];return s.add(u),s.size===1&&(n=e(r)||X),a(t),()=>{s.delete(u),s.size===0&&(n(),n=null)}}return{set:r,update:i,subscribe:o}}var cl={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s=[],r=0;r<arguments.length;r++){var i=arguments[r];if(!!i){var o=typeof i;if(o==="string"||o==="number")s.push(i);else if(Array.isArray(i)){if(i.length){var a=n.apply(null,i);a&&s.push(a)}}else if(o==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){s.push(i.toString());continue}for(var l in i)e.call(i,l)&&i[l]&&s.push(l)}}}return s.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(cl);const le=cl.exports;function rh(t){let e=t[1],n,s,r=t[1]&&vr(t);return{c(){r&&r.c(),n=Ne()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,o){i[1]?e?Z(e,i[1])?(r.d(1),r=vr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=vr(i),r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null),e=i[1]},i(i){s||(v(r),s=!0)},o(i){b(r),s=!1},d(i){i&&k(n),r&&r.d(i)}}}function ih(t){let e=t[1],n,s,r=t[1]&&br(t);return{c(){r&&r.c(),n=Ne()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,o){i[1]?e?Z(e,i[1])?(r.d(1),r=br(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=br(i),r.c(),v(r),r.m(n.parentNode,n)):e&&(Se(),b(r,1,1,()=>{r=null}),Ae()),e=i[1]},i(i){s||(v(r),s=!0)},o(i){b(r),s=!1},d(i){i&&k(n),r&&r.d(i)}}}function vr(t){let e,n,s,r,i;const o=t[13].default,a=se(o,t,t[12],null);let l=[t[7],{class:t[6]}],u={};for(let c=0;c<l.length;c+=1)u=F(u,l[c]);return{c(){e=P(t[1]),a&&a.c(),/-/.test(t[1])?Ge(e,u):ae(e,u)},m(c,h){C(c,e,h),a&&a.m(e,null),t[23](e),s=!0,r||(i=[yi(n=t[4].call(null,e,t[5])),x(e,"mouseenter",t[18]),x(e,"mouseleave",t[19]),x(e,"focusin",t[20]),x(e,"focusout",t[21])],r=!0)},p(c,h){a&&a.p&&(!s||h&4096)&&ie(a,o,c,c[12],s?re(o,c[12],h,null):oe(c[12]),null),u=Pe(l,[h&128&&c[7],(!s||h&64)&&{class:c[6]}]),/-/.test(c[1])?Ge(e,u):ae(e,u),n&&Lt(n.update)&&h&32&&n.update.call(null,c[5])},i(c){s||(v(a,c),s=!0)},o(c){b(a,c),s=!1},d(c){c&&k(e),a&&a.d(c),t[23](null),r=!1,Ze(i)}}}function br(t){let e,n,s,r,i,o;const a=t[13].default,l=se(a,t,t[12],null);let u=[t[7],{class:t[6]}],c={};for(let h=0;h<u.length;h+=1)c=F(c,u[h]);return{c(){e=P(t[1]),l&&l.c(),/-/.test(t[1])?Ge(e,c):ae(e,c)},m(h,f){C(h,e,f),l&&l.m(e,null),t[22](e),r=!0,i||(o=[yi(n=t[4].call(null,e,t[5])),x(e,"mouseenter",t[14]),x(e,"mouseleave",t[15]),x(e,"focusin",t[16]),x(e,"focusout",t[17])],i=!0)},p(h,f){t=h,l&&l.p&&(!r||f&4096)&&ie(l,a,t,t[12],r?re(a,t[12],f,null):oe(t[12]),null),c=Pe(u,[f&128&&t[7],(!r||f&64)&&{class:t[6]}]),/-/.test(t[1])?Ge(e,c):ae(e,c),n&&Lt(n.update)&&f&32&&n.update.call(null,t[5])},i(h){r||(v(l,h),at(()=>{s||(s=Is(e,t[2],t[3],!0)),s.run(1)}),r=!0)},o(h){b(l,h),s||(s=Is(e,t[2],t[3],!1)),s.run(0),r=!1},d(h){h&&k(e),l&&l.d(h),t[22](null),h&&s&&s.end(),i=!1,Ze(o)}}}function oh(t){let e,n,s,r;const i=[ih,rh],o=[];function a(l,u){return l[2]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Ne()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(Se(),b(o[c],1,1,()=>{o[c]=null}),Ae(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),v(n,1),n.m(s.parentNode,s))},i(l){r||(v(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&k(s)}}}function ah(t,e,n){const s=["tag","color","rounded","border","shadow","transition","params","node","use","options"];let r=he(e,s),{$$slots:i={},$$scope:o}=e;Cs("background",!0);let{tag:a="div"}=e,{color:l="default"}=e,{rounded:u=!1}=e,{border:c=!1}=e,{shadow:h=!1}=e,{transition:f=void 0}=e,{params:g={}}=e,{node:d=void 0}=e,{use:y=X}=e,{options:p={}}=e;const _={gray:"bg-gray-100 dark:bg-gray-200 ",red:"bg-red-100 dark:bg-red-200",yellow:"bg-yellow-100 dark:bg-yellow-200 ",green:"bg-green-100 dark:bg-green-200 ",indigo:"bg-indigo-100 dark:bg-indigo-200 ",purple:"bg-purple-100 dark:bg-purple-200 ",pink:"bg-pink-100 dark:bg-pink-200 ",blue:"bg-blue-100 dark:bg-blue-200 ",light:"bg-gray-50 dark:bg-gray-700",dark:"bg-gray-100 dark:bg-gray-700",default:"bg-white dark:bg-gray-800",dropdown:"bg-white dark:bg-gray-700",navbar:"bg-white dark:bg-gray-900",navbarUl:"bg-gray-50 dark:bg-gray-800",form:"bg-gray-50 dark:bg-gray-700",primary:"bg-primary-100 dark:bg-primary-200 ",none:""},I={gray:"text-gray-700 dark:text-gray-800",red:"text-red-700 dark:text-red-800",yellow:"text-yellow-700 dark:text-yellow-800",green:"text-green-700 dark:text-green-800",indigo:"text-indigo-700 dark:text-indigo-800",purple:"text-purple-700 dark:text-purple-800",pink:"text-pink-700 dark:text-pink-800",blue:"text-blue-700 dark:text-blue-800",light:"text-gray-700 dark:text-gray-300",dark:"text-gray-700 dark:text-gray-300",default:"text-gray-500 dark:text-gray-400",dropdown:"text-gray-700 dark:text-gray-200",navbar:"text-gray-700 dark:text-gray-200",navbarUl:"text-gray-700 dark:text-gray-400",form:"text-gray-900 dark:text-white",primary:"text-primary-700 dark:text-primary-800",none:""},A={gray:"border-gray-500 dark:bg-gray-200 ",red:"border-red-500 dark:bg-red-200 ",yellow:"border-yellow-500 dark:bg-tellow-200 ",green:"border-green-500 dark:bg-green-200 ",indigo:"border-indigo-500 dark:bg-indigo-200 ",purple:"border-purple-500 dark:bg-purple-200 ",pink:"border-pink-500 dark:bg-pink-200 ",blue:"border-blue-500 dark:bg-blue-200 ",light:"border-gray-500",dark:"border-gray-500",default:"border-gray-200 dark:border-gray-700",dropdown:"border-gray-100 dark:border-gray-700",navbar:"border-gray-100 dark:border-gray-700",navbarUl:"border-gray-100 dark:border-gray-700",form:"border-gray-300 dark:border-gray-700",primary:"border-primary-500 dark:bg-primary-200 ",none:""};let L;function S(D){M.call(this,t,D)}function me(D){M.call(this,t,D)}function Re(D){M.call(this,t,D)}function qe(D){M.call(this,t,D)}function ve(D){M.call(this,t,D)}function $e(D){M.call(this,t,D)}function w(D){M.call(this,t,D)}function ke(D){M.call(this,t,D)}function Vt(D){At[D?"unshift":"push"](()=>{d=D,n(0,d)})}function Ft(D){At[D?"unshift":"push"](()=>{d=D,n(0,d)})}return t.$$set=D=>{n(27,e=F(F({},e),J(D))),n(7,r=he(e,s)),"tag"in D&&n(1,a=D.tag),"color"in D&&n(8,l=D.color),"rounded"in D&&n(9,u=D.rounded),"border"in D&&n(10,c=D.border),"shadow"in D&&n(11,h=D.shadow),"transition"in D&&n(2,f=D.transition),"params"in D&&n(3,g=D.params),"node"in D&&n(0,d=D.node),"use"in D&&n(4,y=D.use),"options"in D&&n(5,p=D.options),"$$scope"in D&&n(12,o=D.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&Cs("color",l),n(6,L=le(_[l],I[l],u&&(l==="dropdown"?"rounded":"rounded-lg"),c&&"border",A[l],h&&"shadow-md",e.class))},e=J(e),[d,a,f,g,y,p,L,r,l,u,c,h,o,i,S,me,Re,qe,ve,$e,w,ke,Vt,Ft]}class hl extends de{constructor(e){super(),fe(this,e,ah,oh,Z,{tag:1,color:8,rounded:9,border:10,shadow:11,transition:2,params:3,node:0,use:4,options:5})}}function fl(t){const e=t-1;return e*e*e+1}function bo(t,{delay:e=0,duration:n=400,easing:s=fl,x:r=0,y:i=0,opacity:o=0}={}){const a=getComputedStyle(t),l=+a.opacity,u=a.transform==="none"?"":a.transform,c=l*(1-o);return{delay:e,duration:n,easing:s,css:(h,f)=>`
			transform: ${u} translate(${(1-h)*r}px, ${(1-h)*i}px);
			opacity: ${l-c*f}`}}function lh(t,{delay:e=0,duration:n=400,easing:s=fl,start:r=0,opacity:i=0}={}){const o=getComputedStyle(t),a=+o.opacity,l=o.transform==="none"?"":o.transform,u=1-r,c=a*(1-i);return{delay:e,duration:n,easing:s,css:(h,f)=>`
			transform: ${l} scale(${1-u*f});
			opacity: ${a-c*f}
		`}}function uh(t){let e,n,s,r,i,o;return{c(){e=P("span"),n=ge(t[0]),s=te(),r=pe("svg"),i=pe("path"),m(e,"class","sr-only"),m(i,"fill-rule","evenodd"),m(i,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),m(i,"clip-rule","evenodd"),m(r,"class",o=t[3][t[1]]),m(r,"fill","currentColor"),m(r,"viewBox","0 0 20 20"),m(r,"xmlns","http://www.w3.org/2000/svg")},m(a,l){C(a,e,l),B(e,n),C(a,s,l),C(a,r,l),B(r,i)},p(a,l){l&1&&Ye(n,a[0]),l&2&&o!==(o=a[3][a[1]])&&m(r,"class",o)},d(a){a&&k(e),a&&k(s),a&&k(r)}}}function ch(t){let e,n,s,r;const i=t[6].default,o=se(i,t,t[5],null),a=o||uh(t);return{c(){e=P("button"),a&&a.c(),m(e,"type","button"),m(e,"class",t[2]),m(e,"aria-label","Close")},m(l,u){C(l,e,u),a&&a.m(e,null),n=!0,s||(r=x(e,"click",t[7]),s=!0)},p(l,[u]){o?o.p&&(!n||u&32)&&ie(o,i,l,l[5],n?re(i,l[5],u,null):oe(l[5]),null):a&&a.p&&(!n||u&3)&&a.p(l,n?u:-1),(!n||u&4)&&m(e,"class",l[2])},i(l){n||(v(a,l),n=!0)},o(l){b(a,l),n=!1},d(l){l&&k(e),a&&a.d(l),s=!1,r()}}}function hh(t,e,n){let{$$slots:s={},$$scope:r}=e;const i=qn("background");let{color:o="default"}=e,{name:a="Close"}=e,{size:l="md"}=e;const u={dark:"hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600",gray:"focus:ring-gray-400 hover:bg-gray-200 dark:hover:bg-gray-300",red:"focus:ring-red-400 hover:bg-red-200 dark:hover:bg-red-300",yellow:"focus:ring-yellow-400 hover:bg-yellow-200 dark:hover:bg-yellow-300",green:"focus:ring-green-400 hover:bg-green-200 dark:hover:bg-green-300",indigo:"focus:ring-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-300",purple:"focus:ring-purple-400 hover:bg-purple-200 dark:hover:bg-purple-300",pink:"focus:ring-pink-400 hover:bg-pink-200 dark:hover:bg-pink-300",blue:"focus:ring-blue-400 hover:bg-blue-200 dark:hover:bg-blue-300",default:"focus:ring-gray-300 "},c={xs:"m-0.5 rounded focus:ring-1 p-0.5",sm:"m-0.5 rounded focus:ring-1 p-0.5",md:"rounded-lg focus:ring-2 p-1.5"};let h="";const f={xs:"w-3 h-3",sm:"w-3.5 h-3.5",md:"w-5 h-5"};function g(d){M.call(this,t,d)}return t.$$set=d=>{n(11,e=F(F({},e),J(d))),"color"in d&&n(4,o=d.color),"name"in d&&n(0,a=d.name),"size"in d&&n(1,l=d.size),"$$scope"in d&&n(5,r=d.$$scope)},t.$$.update=()=>{n(2,h=le("ml-auto focus:outline-none whitespace-normal",c[l],u[o],o==="default"&&(i?"hover:bg-gray-100 dark:hover:bg-gray-600":"hover:bg-gray-100 dark:hover:bg-gray-700"),e.class))},e=J(e),[a,l,h,f,o,r,s,g]}class fh extends de{constructor(e){super(),fe(this,e,hh,ch,Z,{color:4,name:0,size:1})}}function dh(t){let e,n,s;return{c(){e=pe("svg"),n=pe("path"),m(n,"fill-rule","evenodd"),m(n,"d","M8 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"),m(n,"clip-rule","evenodd"),m(e,"class",s="text-gray-400 bg-gray-100 dark:bg-gray-600 "+(t[0]?"rounded":"rounded-full")),m(e,"fill","currentColor"),m(e,"viewBox","0 0 16 16"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(r,i){C(r,e,i),B(e,n)},p(r,[i]){i&1&&s!==(s="text-gray-400 bg-gray-100 dark:bg-gray-600 "+(r[0]?"rounded":"rounded-full"))&&m(e,"class",s)},i:X,o:X,d(r){r&&k(e)}}}function gh(t,e,n){let{rounded:s=!1}=e;return t.$$set=r=>{"rounded"in r&&n(0,s=r.rounded)},[s]}class mh extends de{constructor(e){super(),fe(this,e,gh,dh,Z,{rounded:0})}}function ph(t){let e;const n=t[8].default,s=se(n,t,t[7],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&128)&&ie(s,n,r,r[7],e?re(n,r[7],i,null):oe(r[7]),null)},i(r){e||(v(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function yh(t){let e,n,s,r;const i=t[8].default,o=se(i,t,t[7],null);return{c(){e=P("div"),o&&o.c(),n=te(),s=P("span"),m(s,"class",t[1]),m(e,"class",t[2])},m(a,l){C(a,e,l),o&&o.m(e,null),B(e,n),B(e,s),r=!0},p(a,l){o&&o.p&&(!r||l&128)&&ie(o,i,a,a[7],r?re(i,a[7],l,null):oe(a[7]),null),(!r||l&2)&&m(s,"class",a[1]),(!r||l&4)&&m(e,"class",a[2])},i(a){r||(v(o,a),r=!0)},o(a){b(o,a),r=!1},d(a){a&&k(e),o&&o.d(a)}}}function vh(t){let e,n,s,r;const i=[yh,ph],o=[];function a(l,u){return l[0]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Ne()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(Se(),b(o[c],1,1,()=>{o[c]=null}),Ae(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),v(n,1),n.m(s.parentNode,s))},i(l){r||(v(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&k(s)}}}function bh(t,e,n){let{$$slots:s={},$$scope:r}=e,{show:i=!1}=e,{top:o=!1}=e,{color:a="bg-gray-300 dark:bg-gray-500"}=e,{rounded:l=!1}=e,{size:u="md"}=e;const c={xs:"w-2.5 h-2.5",sm:"w-3 h-3",md:"w-3.5 h-3.5",lg:"w-6 h-6",xl:"w-10 h-10"},h={xs:["left-4","left-5"],sm:["left-6","left-6"],md:["left-7","left-8"],lg:["left-14","left-16"],xl:["left-24","left-32"]};let f,g;return t.$$set=d=>{n(11,e=F(F({},e),J(d))),"show"in d&&n(0,i=d.show),"top"in d&&n(3,o=d.top),"color"in d&&n(4,a=d.color),"rounded"in d&&n(5,l=d.rounded),"size"in d&&n(6,u=d.size),"$$scope"in d&&n(7,r=d.$$scope)},t.$$.update=()=>{t.$$.dirty&120&&n(1,f=le("absolute rounded-full border-white dark:border-gray-800 border-2",c[u],h[u][+l],o?"top-0":"bottom-0",l&&o&&"transform -translate-y-1/2",l&&!o&&"transform translate-y-1/4",a)),n(2,g=le("relative flex-shrink-0",e.class))},e=J(e),[i,f,g,o,a,l,u,r,s]}class _h extends de{constructor(e){super(),fe(this,e,bh,vh,Z,{show:0,top:3,color:4,rounded:5,size:6})}}function wh(t){let e=t[1]?"a":"div",n,s=(t[1]?"a":"div")&&_r(t);return{c(){s&&s.c(),n=Ne()},m(r,i){s&&s.m(r,i),C(r,n,i)},p(r,i){r[1],e?Z(e,r[1]?"a":"div")?(s.d(1),s=_r(r),s.c(),s.m(n.parentNode,n)):s.p(r,i):(s=_r(r),s.c(),s.m(n.parentNode,n)),e=r[1]?"a":"div"},i:X,o(r){b(s)},d(r){r&&k(n),s&&s.d(r)}}}function kh(t){let e=t[1]?"a":"div",n,s,r=(t[1]?"a":"div")&&wr(t);return{c(){r&&r.c(),n=Ne()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,o){i[1],e?Z(e,i[1]?"a":"div")?(r.d(1),r=wr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=wr(i),r.c(),r.m(n.parentNode,n)),e=i[1]?"a":"div"},i(i){s||(v(r),s=!0)},o(i){b(r),s=!1},d(i){i&&k(n),r&&r.d(i)}}}function Eh(t){let e,n,s=[{alt:t[4]},{src:n=t[0]},t[9],{class:t[6]}],r={};for(let i=0;i<s.length;i+=1)r=F(r,s[i]);return{c(){e=P("img"),ae(e,r)},m(i,o){C(i,e,o)},p(i,o){ae(e,r=Pe(s,[o&16&&{alt:i[4]},o&1&&!ks(e.src,n=i[0])&&{src:n},o&512&&i[9],o&64&&{class:i[6]}]))},i:X,o:X,d(i){i&&k(e)}}}function _r(t){let e,n,s;n=new mh({props:{rounded:t[2]}});let r=[t[9],{class:t[6]}],i={};for(let o=0;o<r.length;o+=1)i=F(i,r[o]);return{c(){e=P(t[1]?"a":"div"),Q(n.$$.fragment),/-/.test(t[1]?"a":"div")?Ge(e,i):ae(e,i)},m(o,a){C(o,e,a),H(n,e,null),s=!0},p(o,a){const l={};a&4&&(l.rounded=o[2]),n.$set(l),i=Pe(r,[a&512&&o[9],(!s||a&64)&&{class:o[6]}]),/-/.test(o[1]?"a":"div")?Ge(e,i):ae(e,i)},i(o){s||(v(n.$$.fragment,o),s=!0)},o(o){b(n.$$.fragment,o),s=!1},d(o){o&&k(e),K(n)}}}function wr(t){let e,n,s;const r=t[13].default,i=se(r,t,t[14],null);let o=[{href:t[1]},t[9],{class:n="flex justify-center items-center text-xs font-medium "+t[6]}],a={};for(let l=0;l<o.length;l+=1)a=F(a,o[l]);return{c(){e=P(t[1]?"a":"div"),i&&i.c(),/-/.test(t[1]?"a":"div")?Ge(e,a):ae(e,a)},m(l,u){C(l,e,u),i&&i.m(e,null),s=!0},p(l,u){i&&i.p&&(!s||u&16384)&&ie(i,r,l,l[14],s?re(r,l[14],u,null):oe(l[14]),null),a=Pe(o,[(!s||u&2)&&{href:l[1]},u&512&&l[9],(!s||u&64&&n!==(n="flex justify-center items-center text-xs font-medium "+l[6]))&&{class:n}]),/-/.test(l[1]?"a":"div")?Ge(e,a):ae(e,a)},i(l){s||(v(i,l),s=!0)},o(l){b(i,l),s=!1},d(l){l&&k(e),i&&i.d(l)}}}function Th(t){let e,n,s,r;const i=[Eh,kh,wh],o=[];function a(l,u){return l[0]?0:l[10].default?1:2}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Ne()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,u){let c=e;e=a(l),e===c?o[e].p(l,u):(Se(),b(o[c],1,1,()=>{o[c]=null}),Ae(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),v(n,1),n.m(s.parentNode,s))},i(l){r||(v(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&k(s)}}}function Ch(t){let e,n;const s=[{show:t[8].dot},{rounded:t[2]},t[3],{size:t[5]},{class:t[7][t[5]]}];let r={$$slots:{default:[Th]},$$scope:{ctx:t}};for(let i=0;i<s.length;i+=1)r=F(r,s[i]);return e=new _h({props:r}),{c(){Q(e.$$.fragment)},m(i,o){H(e,i,o),n=!0},p(i,[o]){const a=o&428?Pe(s,[o&256&&{show:i[8].dot},o&4&&{rounded:i[2]},o&8&&Gs(i[3]),o&32&&{size:i[5]},o&160&&{class:i[7][i[5]]}]):{};o&18007&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){b(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function Ih(t,e,n){const s=["src","href","rounded","border","stacked","dot","alt","size"];let r=he(e,s),{$$slots:i={},$$scope:o}=e;const a=$a(i);let{src:l=""}=e,{href:u="#"}=e,{rounded:c=!1}=e,{border:h=!1}=e,{stacked:f=!1}=e,{dot:g={top:!1,color:"bg-gray-300 dark:bg-gray-500"}}=e,{alt:d=""}=e,{size:y="md"}=e;const p={xs:"w-6 h-6",sm:"w-8 h-8",md:"w-10 h-10",lg:"w-20 h-20",xl:"w-36 h-36"};let _;return t.$$set=I=>{n(8,e=F(F({},e),J(I))),n(9,r=he(e,s)),"src"in I&&n(0,l=I.src),"href"in I&&n(1,u=I.href),"rounded"in I&&n(2,c=I.rounded),"border"in I&&n(11,h=I.border),"stacked"in I&&n(12,f=I.stacked),"dot"in I&&n(3,g=I.dot),"alt"in I&&n(4,d=I.alt),"size"in I&&n(5,y=I.size),"$$scope"in I&&n(14,o=I.$$scope)},t.$$.update=()=>{n(6,_=le(c?"rounded":"rounded-full",h&&"p-1 ring-2 ring-gray-300 dark:ring-gray-500",p[y],f&&"border-2 -ml-4 border-white dark:border-gray-800","bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300",e.class))},e=J(e),[l,u,c,g,d,y,_,p,e,r,a,h,f,i,o]}class Sh extends de{constructor(e){super(),fe(this,e,Ih,Ch,Z,{src:0,href:1,rounded:2,border:11,stacked:12,dot:3,alt:4,size:5})}}function _o(t){let e,n;return e=new fh({props:{color:t[0],size:t[1]?"sm":"xs",class:"ml-1.5 -mr-1.5"}}),e.$on("click",t[6]),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,r){const i={};r&1&&(i.color=s[0]),r&2&&(i.size=s[1]?"sm":"xs"),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function kr(t){let e,n,s;const r=t[12].default,i=se(r,t,t[11],null);let o=t[3]&&_o(t),a=[{href:t[2]},t[7],{class:t[5]}],l={};for(let u=0;u<a.length;u+=1)l=F(l,a[u]);return{c(){e=P(t[2]?"a":"span"),i&&i.c(),n=te(),o&&o.c(),/-/.test(t[2]?"a":"span")?Ge(e,l):ae(e,l),ft(e,"hidden",t[4])},m(u,c){C(u,e,c),i&&i.m(e,null),B(e,n),o&&o.m(e,null),s=!0},p(u,c){i&&i.p&&(!s||c&2048)&&ie(i,r,u,u[11],s?re(r,u[11],c,null):oe(u[11]),null),u[3]?o?(o.p(u,c),c&8&&v(o,1)):(o=_o(u),o.c(),v(o,1),o.m(e,null)):o&&(Se(),b(o,1,1,()=>{o=null}),Ae()),l=Pe(a,[(!s||c&4)&&{href:u[2]},c&128&&u[7],(!s||c&32)&&{class:u[5]}]),/-/.test(u[2]?"a":"span")?Ge(e,l):ae(e,l),ft(e,"hidden",u[4])},i(u){s||(v(i,u),v(o),s=!0)},o(u){b(i,u),b(o),s=!1},d(u){u&&k(e),i&&i.d(u),o&&o.d()}}}function Ah(t){let e=t[2]?"a":"span",n,s,r=(t[2]?"a":"span")&&kr(t);return{c(){r&&r.c(),n=Ne()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,[o]){i[2],e?Z(e,i[2]?"a":"span")?(r.d(1),r=kr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=kr(i),r.c(),r.m(n.parentNode,n)),e=i[2]?"a":"span"},i(i){s||(v(r),s=!0)},o(i){b(r),s=!1},d(i){i&&k(n),r&&r.d(i)}}}function Dh(t,e,n){const s=["color","large","href","rounded","index","dismissable","baseClass"];let r=he(e,s),{$$slots:i={},$$scope:o}=e,{color:a="blue"}=e,{large:l=!1}=e,{href:u=void 0}=e,{rounded:c=!1}=e,{index:h=!1}=e,{dismissable:f=!1}=e,{baseClass:g="inline-flex items-center justify-center -mb-0.5"}=e,d=!1;const y={blue:"bg-blue-100 text-blue-800 dark:bg-blue-200 dark:text-blue-800",dark:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",red:"bg-red-100 text-red-800 dark:bg-red-200 dark:text-red-900",green:"bg-green-100 text-green-800 dark:bg-green-200 dark:text-green-900",yellow:"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900",indigo:"bg-indigo-100 text-indigo-800 dark:bg-indigo-200 dark:text-indigo-900",purple:"bg-purple-100 text-purple-800 dark:bg-purple-200 dark:text-purple-900",pink:"bg-pink-100 text-pink-800 dark:bg-pink-200 dark:text-pink-900",["!blue"]:"bg-blue-500 text-blue-100",["!dark"]:"bg-gray-500 text-gray-100",["!red"]:"bg-red-500 text-white",["!green"]:"bg-green-500 text-green-100",["!yellow"]:"bg-yellow-300 text-yellow-800",["!indigo"]:"bg-indigo-500 text-indigo-100",["!purple"]:"bg-purple-500 text-purple-100",["!pink"]:"bg-pink-500 text-pink-100"},p={blue:"hover:bg-blue-200 dark:hover:bg-blue-300",dark:"hover:bg-gray-200 dark:hover:bg-gray-300",red:"hover:bg-red-200 dark:hover:bg-red-300",green:"hover:bg-green-200 dark:hover:bg-green-300",yellow:"hover:bg-yellow-200 dark:hover:bg-yellow-300",indigo:"hover:bg-indigo-200 dark:hover:bg-indigo-300",purple:"hover:bg-purple-200 dark:hover:bg-purple-300",pink:"hover:bg-pink-200 dark:hover:bg-pink-300"};let _;const I=()=>{n(4,d=!d)};return t.$$set=A=>{n(15,e=F(F({},e),J(A))),n(7,r=he(e,s)),"color"in A&&n(0,a=A.color),"large"in A&&n(1,l=A.large),"href"in A&&n(2,u=A.href),"rounded"in A&&n(8,c=A.rounded),"index"in A&&n(9,h=A.index),"dismissable"in A&&n(3,f=A.dismissable),"baseClass"in A&&n(10,g=A.baseClass),"$$scope"in A&&n(11,o=A.$$scope)},t.$$.update=()=>{var A;n(5,_=le(g,l?"text-sm font-medium":"text-xs font-semibold",y[a],u&&((A=p[a])!=null?A:p.blue),c?"rounded-full p-1":"rounded px-2.5 py-0.5",h&&"absolute font-bold border-2 border-white dark:border-gray-900",h&&(l?"w-7 h-7 -top-3 -right-3":"w-6 h-6 -top-2 -right-2"),e.class))},e=J(e),[a,l,u,f,d,_,I,r,c,h,g,o,i]}class Nh extends de{constructor(e){super(),fe(this,e,Dh,Ah,Z,{color:0,large:1,href:2,rounded:8,index:9,dismissable:3,baseClass:10})}}function Rh(t){let e;const n=t[10].default,s=se(n,t,t[11],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&2048)&&ie(s,n,r,r[11],e?re(n,r[11],i,null):oe(r[11]),null)},i(r){e||(v(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function Lh(t){let e,n,s,r,i;const o=t[10].default,a=se(o,t,t[11],null);return{c(){e=P("img"),s=te(),r=P("div"),a&&a.c(),m(e,"class",t[4]),ks(e.src,n=t[1])||m(e,"src",n),m(e,"alt",""),m(r,"class",t[2])},m(l,u){C(l,e,u),C(l,s,u),C(l,r,u),a&&a.m(r,null),i=!0},p(l,u){(!i||u&16)&&m(e,"class",l[4]),(!i||u&2&&!ks(e.src,n=l[1]))&&m(e,"src",n),a&&a.p&&(!i||u&2048)&&ie(a,o,l,l[11],i?re(o,l[11],u,null):oe(l[11]),null),(!i||u&4)&&m(r,"class",l[2])},i(l){i||(v(a,l),i=!0)},o(l){b(a,l),i=!1},d(l){l&&k(e),l&&k(s),l&&k(r),a&&a.d(l)}}}function Mh(t){let e,n,s,r;const i=[Lh,Rh],o=[];function a(l,u){return l[1]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Ne()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,u){let c=e;e=a(l),e===c?o[e].p(l,u):(Se(),b(o[c],1,1,()=>{o[c]=null}),Ae(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),v(n,1),n.m(s.parentNode,s))},i(l){r||(v(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&k(s)}}}function Oh(t){let e,n;const s=[{tag:t[0]?"a":"div"},{rounded:!0},{shadow:!0},{border:!0},{href:t[0]},t[5],{class:t[3]}];let r={$$slots:{default:[Mh]},$$scope:{ctx:t}};for(let i=0;i<s.length;i+=1)r=F(r,s[i]);return e=new hl({props:r}),{c(){Q(e.$$.fragment)},m(i,o){H(e,i,o),n=!0},p(i,[o]){const a=o&41?Pe(s,[o&1&&{tag:i[0]?"a":"div"},s[1],s[2],s[3],o&1&&{href:i[0]},o&32&&Gs(i[5]),o&8&&{class:i[3]}]):{};o&2070&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){b(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function Ph(t,e,n){const s=["href","horizontal","reverse","img","padding","size"];let r=he(e,s),{$$slots:i={},$$scope:o}=e,{href:a=void 0}=e,{horizontal:l=!1}=e,{reverse:u=!1}=e,{img:c=void 0}=e,{padding:h="lg"}=e,{size:f="sm"}=e;const g={none:"p-0",sm:"p-4 sm:p-6 md:p-8",md:"p-4 sm:p-5",lg:"p-4 sm:p-6",xl:"p-4 sm:p-8"},d={xs:"max-w-xs",sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-screen-xl"};let y,p,_;return t.$$set=I=>{n(14,e=F(F({},e),J(I))),n(5,r=he(e,s)),"href"in I&&n(0,a=I.href),"horizontal"in I&&n(6,l=I.horizontal),"reverse"in I&&n(7,u=I.reverse),"img"in I&&n(1,c=I.img),"padding"in I&&n(8,h=I.padding),"size"in I&&n(9,f=I.size),"$$scope"in I&&n(11,o=I.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&n(2,y=g[h]),n(3,p=le("flex",d[f],u?"flex-col-reverse":"flex-col",l&&(u?"md:flex-row-reverse md:max-w-xl":"md:flex-row md:max-w-xl"),a&&"hover:bg-gray-100 dark:hover:bg-gray-700",!c&&y,e.class)),t.$$.dirty&192&&n(4,_=le(u?"rounded-b-lg":"rounded-t-lg",l&&"object-cover w-full h-96 md:h-auto md:w-48 md:rounded-none",l&&(u?"md:rounded-r-lg":"md:rounded-l-lg")))},e=J(e),[a,c,y,p,_,r,l,u,h,f,i,o]}class Vh extends de{constructor(e){super(),fe(this,e,Ph,Oh,Z,{href:0,horizontal:6,reverse:7,img:1,padding:8,size:9})}}function Fh(t){let e;const n=t[5].default,s=se(n,t,t[4],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&16)&&ie(s,n,r,r[4],e?re(n,r[4],i,null):oe(r[4]),null)},i(r){e||(v(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function Uh(t){let e=t[0],n,s,r=t[0]&&Er(t);return{c(){r&&r.c(),n=Ne()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,o){i[0]?e?Z(e,i[0])?(r.d(1),r=Er(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=Er(i),r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null),e=i[0]},i(i){s||(v(r),s=!0)},o(i){b(r),s=!1},d(i){i&&k(n),r&&r.d(i)}}}function Er(t){let e,n,s,r;const i=t[5].default,o=se(i,t,t[4],null);let a=[t[3]],l={};for(let u=0;u<a.length;u+=1)l=F(l,a[u]);return{c(){e=P(t[0]),o&&o.c(),/-/.test(t[0])?Ge(e,l):ae(e,l)},m(u,c){C(u,e,c),o&&o.m(e,null),n=!0,s||(r=yi(t[2].call(null,e)),s=!0)},p(u,c){o&&o.p&&(!n||c&16)&&ie(o,i,u,u[4],n?re(i,u[4],c,null):oe(u[4]),null),l=Pe(a,[c&8&&u[3]]),/-/.test(u[0])?Ge(e,l):ae(e,l)},i(u){n||(v(o,u),n=!0)},o(u){b(o,u),n=!1},d(u){u&&k(e),o&&o.d(u),s=!1,r()}}}function xh(t){let e,n,s,r;const i=[Uh,Fh],o=[];function a(l,u){return l[1]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Ne()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(Se(),b(o[c],1,1,()=>{o[c]=null}),Ae(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),v(n,1),n.m(s.parentNode,s))},i(l){r||(v(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&k(s)}}}function Bh(t,e,n){const s=["tag","show","use"];let r=he(e,s),{$$slots:i={},$$scope:o}=e,{tag:a="div"}=e,{show:l}=e,{use:u=()=>{}}=e;return t.$$set=c=>{e=F(F({},e),J(c)),n(3,r=he(e,s)),"tag"in c&&n(0,a=c.tag),"show"in c&&n(1,l=c.show),"use"in c&&n(2,u=c.use),"$$scope"in c&&n(4,o=c.$$scope)},[a,l,u,r,o,i]}class dl extends de{constructor(e){super(),fe(this,e,Bh,xh,Z,{tag:0,show:1,use:2})}}function jh(t){let e;const n=t[7].default,s=se(n,t,t[6],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&64)&&ie(s,n,r,r[6],e?re(n,r[6],i,null):oe(r[6]),null)},i(r){e||(v(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function zh(t){let e,n;const s=t[7].default,r=se(s,t,t[6],null);let i=[t[3],{class:t[2]}],o={};for(let a=0;a<i.length;a+=1)o=F(o,i[a]);return{c(){e=P("label"),r&&r.c(),ae(e,o)},m(a,l){C(a,e,l),r&&r.m(e,null),t[8](e),n=!0},p(a,l){r&&r.p&&(!n||l&64)&&ie(r,s,a,a[6],n?re(s,a[6],l,null):oe(a[6]),null),ae(e,o=Pe(i,[l&8&&a[3],(!n||l&4)&&{class:a[2]}]))},i(a){n||(v(r,a),n=!0)},o(a){b(r,a),n=!1},d(a){a&&k(e),r&&r.d(a),t[8](null)}}}function qh(t){let e,n,s,r;const i=[zh,jh],o=[];function a(l,u){return l[0]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Ne()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(Se(),b(o[c],1,1,()=>{o[c]=null}),Ae(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),v(n,1),n.m(s.parentNode,s))},i(l){r||(v(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&k(s)}}}function Hh(t,e,n){let s;const r=["color","defaultClass","show"];let i=he(e,r),{$$slots:o={},$$scope:a}=e,{color:l="gray"}=e,{defaultClass:u="text-sm font-medium block"}=e,{show:c=!0}=e,h;const f={gray:"text-gray-900 dark:text-gray-300",green:"text-green-700 dark:text-green-500",red:"text-red-700 dark:text-red-500",disabled:"text-gray-400 dark:text-gray-500"};function g(d){At[d?"unshift":"push"](()=>{h=d,n(1,h)})}return t.$$set=d=>{n(10,e=F(F({},e),J(d))),n(3,i=he(e,r)),"color"in d&&n(4,l=d.color),"defaultClass"in d&&n(5,u=d.defaultClass),"show"in d&&n(0,c=d.show),"$$scope"in d&&n(6,a=d.$$scope)},t.$$.update=()=>{if(t.$$.dirty&18){const d=h==null?void 0:h.control;n(4,l=d!=null&&d.disabled?"disabled":l)}n(2,s=le(u,f[l],e.class))},e=J(e),[c,h,s,i,l,u,a,o,g]}class wo extends de{constructor(e){super(),fe(this,e,Hh,qh,Z,{color:4,defaultClass:5,show:0})}}function ko(t,e,n){const s=t.slice();return s[0]=e[n].value,s[13]=e[n].name,s}function Eo(t){let e,n=t[13]+"",s,r;return{c(){e=P("option"),s=ge(n),e.__value=r=t[0],e.value=e.__value},m(i,o){C(i,e,o),B(e,s)},p(i,o){o&2&&n!==(n=i[13]+"")&&Ye(s,n),o&2&&r!==(r=i[0])&&(e.__value=r,e.value=e.__value)},d(i){i&&k(e)}}}function Kh(t){let e,n,s,r,i,o=t[1],a=[];for(let c=0;c<o.length;c+=1)a[c]=Eo(ko(t,o,c));let l=[t[4],{class:t[3]}],u={};for(let c=0;c<l.length;c+=1)u=F(u,l[c]);return{c(){e=P("select"),n=P("option"),s=ge(t[2]);for(let c=0;c<a.length;c+=1)a[c].c();n.disabled=!0,n.selected=!0,n.__value="",n.value=n.__value,ae(e,u),t[0]===void 0&&at(()=>t[11].call(e))},m(c,h){C(c,e,h),B(e,n),B(n,s);for(let f=0;f<a.length;f+=1)a[f].m(e,null);(u.multiple?po:ls)(e,u.value),e.autofocus&&e.focus(),ls(e,t[0]),r||(i=[x(e,"change",t[11]),x(e,"change",t[9]),x(e,"input",t[10])],r=!0)},p(c,[h]){if(h&4&&Ye(s,c[2]),h&2){o=c[1];let f;for(f=0;f<o.length;f+=1){const g=ko(c,o,f);a[f]?a[f].p(g,h):(a[f]=Eo(g),a[f].c(),a[f].m(e,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=o.length}ae(e,u=Pe(l,[h&16&&c[4],h&8&&{class:c[3]}])),h&24&&"value"in u&&(u.multiple?po:ls)(e,u.value),h&3&&ls(e,c[0])},i:X,o:X,d(c){c&&k(e),Wt(a,c),r=!1,Ze(i)}}}const Gh="block w-full";function Qh(t,e,n){const s=["items","value","placeholder","underline","size","defaultClass","underlineClass"];let r=he(e,s),{items:i=[]}=e,{value:o}=e,{placeholder:a="Choose option ..."}=e,{underline:l=!1}=e,{size:u="md"}=e,{defaultClass:c="text-gray-900 bg-gray-50 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"}=e,{underlineClass:h="text-gray-500 bg-transparent border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer"}=e;const f={sm:"text-sm p-2",md:"text-sm p-2.5",lg:"text-base py-3 px-4"};let g;function d(_){M.call(this,t,_)}function y(_){M.call(this,t,_)}function p(){o=Qc(this),n(0,o),n(1,i)}return t.$$set=_=>{e=F(F({},e),J(_)),n(4,r=he(e,s)),"items"in _&&n(1,i=_.items),"value"in _&&n(0,o=_.value),"placeholder"in _&&n(2,a=_.placeholder),"underline"in _&&n(5,l=_.underline),"size"in _&&n(6,u=_.size),"defaultClass"in _&&n(7,c=_.defaultClass),"underlineClass"in _&&n(8,h=_.underlineClass)},t.$$.update=()=>{n(3,g=le(Gh,l?h:c,f[u],l&&"!px-0",r.class))},[o,i,a,g,r,l,u,c,h,d,y,p]}class Wh extends de{constructor(e){super(),fe(this,e,Qh,Kh,Z,{items:1,value:0,placeholder:2,underline:5,size:6,defaultClass:7,underlineClass:8})}}const Xh=t=>({}),To=t=>({}),Yh=t=>({}),Co=t=>({});function Io(t){let e,n;const s=t[8].header,r=se(s,t,t[21],Co);return{c(){e=P("div"),r&&r.c(),m(e,"class",t[5](!0))},m(i,o){C(i,e,o),r&&r.m(e,null),n=!0},p(i,o){r&&r.p&&(!n||o&2097152)&&ie(r,s,i,i[21],n?re(s,i[21],o,Yh):oe(i[21]),Co)},i(i){n||(v(r,i),n=!0)},o(i){b(r,i),n=!1},d(i){i&&k(e),r&&r.d(i)}}}function Jh(t){let e,n,s,r=[t[7],{class:t[3]}],i={};for(let o=0;o<r.length;o+=1)i=F(i,r[o]);return{c(){e=P("textarea"),ae(e,i)},m(o,a){C(o,e,a),e.autofocus&&e.focus(),mo(e,t[0]),n||(s=[x(e,"input",t[20]),x(e,"blur",t[9]),x(e,"change",t[10]),x(e,"click",t[11]),x(e,"focus",t[12]),x(e,"keydown",t[13]),x(e,"keypress",t[14]),x(e,"keyup",t[15]),x(e,"mouseenter",t[16]),x(e,"mouseleave",t[17]),x(e,"mouseover",t[18]),x(e,"paste",t[19])],n=!0)},p(o,a){ae(e,i=Pe(r,[a&128&&o[7],a&8&&{class:o[3]}])),a&1&&mo(e,o[0])},d(o){o&&k(e),n=!1,Ze(s)}}}function So(t){let e,n;const s=t[8].footer,r=se(s,t,t[21],To);return{c(){e=P("div"),r&&r.c(),m(e,"class",t[5](!1))},m(i,o){C(i,e,o),r&&r.m(e,null),n=!0},p(i,o){r&&r.p&&(!n||o&2097152)&&ie(r,s,i,i[21],n?re(s,i[21],o,Xh):oe(i[21]),To)},i(i){n||(v(r,i),n=!0)},o(i){b(r,i),n=!1},d(i){i&&k(e),r&&r.d(i)}}}function Zh(t){let e,n,s,r,i,o=t[6].header&&Io(t);n=new dl({props:{show:t[1],class:t[4],$$slots:{default:[Jh]},$$scope:{ctx:t}}});let a=t[6].footer&&So(t);return{c(){o&&o.c(),e=te(),Q(n.$$.fragment),s=te(),a&&a.c(),r=Ne()},m(l,u){o&&o.m(l,u),C(l,e,u),H(n,l,u),C(l,s,u),a&&a.m(l,u),C(l,r,u),i=!0},p(l,u){l[6].header?o?(o.p(l,u),u&64&&v(o,1)):(o=Io(l),o.c(),v(o,1),o.m(e.parentNode,e)):o&&(Se(),b(o,1,1,()=>{o=null}),Ae());const c={};u&2&&(c.show=l[1]),u&16&&(c.class=l[4]),u&2097289&&(c.$$scope={dirty:u,ctx:l}),n.$set(c),l[6].footer?a?(a.p(l,u),u&64&&v(a,1)):(a=So(l),a.c(),v(a,1),a.m(r.parentNode,r)):a&&(Se(),b(a,1,1,()=>{a=null}),Ae())},i(l){i||(v(o),v(n.$$.fragment,l),v(a),i=!0)},o(l){b(o),b(n.$$.fragment,l),b(a),i=!1},d(l){o&&o.d(l),l&&k(e),K(n,l),l&&k(s),a&&a.d(l),l&&k(r)}}}function $h(t){let e,n;return e=new dl({props:{show:t[1],class:t[2],$$slots:{default:[Zh]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,[r]){const i={};r&2&&(i.show=s[1]),r&4&&(i.class=s[2]),r&2097371&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function ef(t,e,n){const s=["value"];let r=he(e,s),{$$slots:i={},$$scope:o}=e;const a=$a(i),l=qn("background");let{value:u=""}=e,c,h,f;const g=w=>le(w?"border-b":"border-t","py-2 px-3 border-gray-200 dark:border-gray-600");let d;function y(w){M.call(this,t,w)}function p(w){M.call(this,t,w)}function _(w){M.call(this,t,w)}function I(w){M.call(this,t,w)}function A(w){M.call(this,t,w)}function L(w){M.call(this,t,w)}function S(w){M.call(this,t,w)}function me(w){M.call(this,t,w)}function Re(w){M.call(this,t,w)}function qe(w){M.call(this,t,w)}function ve(w){M.call(this,t,w)}function $e(){u=this.value,n(0,u)}return t.$$set=w=>{n(23,e=F(F({},e),J(w))),n(7,r=he(e,s)),"value"in w&&n(0,u=w.value),"$$scope"in w&&n(21,o=w.$$scope)},t.$$.update=()=>{n(2,h=le("w-full rounded-lg",l?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700","text-gray-900 dark:placeholder-gray-400 dark:text-white ","border border-gray-200 dark:border-gray-600",e.class)),t.$$.dirty&6&&n(3,f=c?le("block w-full","text-sm","border-0 px-0","bg-inherit dark:bg-inherit","focus:outline-none focus:ring-0"):le(h,"p-2.5 text-sm","focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500"))},n(1,c=a.header||a.footer),n(4,d=le("py-2 px-4 bg-white dark:bg-gray-800",a.footer||"rounded-b-lg",a.header||"rounded-t-lg")),e=J(e),[u,c,h,f,d,g,a,r,i,y,p,_,I,A,L,S,me,Re,qe,ve,$e,o]}class tf extends de{constructor(e){super(),fe(this,e,ef,$h,Z,{value:0})}}const nf=t=>({item:t[0]&64}),Ao=t=>({item:t[6]}),sf=t=>({item:t[0]&64}),Do=t=>({item:t[6]}),rf=t=>({item:t[0]&64}),No=t=>({item:t[6]});function of(t){let e,n,s,r,i;const o=t[9].default,a=se(o,t,t[8],Ao);return{c(){e=P("button"),a&&a.c(),m(e,"class",n="inline-flex relative items-center text-left "+t[4]),e.disabled=t[2],m(e,"aria-current",t[1])},m(l,u){C(l,e,u),a&&a.m(e,null),s=!0,r||(i=[x(e,"click",t[31]),x(e,"blur",t[20]),x(e,"change",t[21]),x(e,"click",t[22]),x(e,"focus",t[23]),x(e,"keydown",t[24]),x(e,"keypress",t[25]),x(e,"keyup",t[26]),x(e,"mouseenter",t[27]),x(e,"mouseleave",t[28]),x(e,"mouseover",t[29])],r=!0)},p(l,u){a&&a.p&&(!s||u[0]&320)&&ie(a,o,l,l[8],s?re(o,l[8],u,nf):oe(l[8]),Ao),(!s||u[0]&16&&n!==(n="inline-flex relative items-center text-left "+l[4]))&&m(e,"class",n),(!s||u[0]&4)&&(e.disabled=l[2]),(!s||u[0]&2)&&m(e,"aria-current",l[1])},i(l){s||(v(a,l),s=!0)},o(l){b(a,l),s=!1},d(l){l&&k(e),a&&a.d(l),r=!1,Ze(i)}}}function af(t){let e,n,s,r,i;const o=t[9].default,a=se(o,t,t[8],Do);return{c(){e=P("a"),a&&a.c(),m(e,"href",t[3]),m(e,"class",n="block "+t[4]),m(e,"aria-current",t[1])},m(l,u){C(l,e,u),a&&a.m(e,null),s=!0,r||(i=[x(e,"click",t[30]),x(e,"blur",t[10]),x(e,"change",t[11]),x(e,"click",t[12]),x(e,"focus",t[13]),x(e,"keydown",t[14]),x(e,"keypress",t[15]),x(e,"keyup",t[16]),x(e,"mouseenter",t[17]),x(e,"mouseleave",t[18]),x(e,"mouseover",t[19])],r=!0)},p(l,u){a&&a.p&&(!s||u[0]&320)&&ie(a,o,l,l[8],s?re(o,l[8],u,sf):oe(l[8]),Do),(!s||u[0]&8)&&m(e,"href",l[3]),(!s||u[0]&16&&n!==(n="block "+l[4]))&&m(e,"class",n),(!s||u[0]&2)&&m(e,"aria-current",l[1])},i(l){s||(v(a,l),s=!0)},o(l){b(a,l),s=!1},d(l){l&&k(e),a&&a.d(l),r=!1,Ze(i)}}}function lf(t){let e,n;const s=t[9].default,r=se(s,t,t[8],No);return{c(){e=P("li"),r&&r.c(),m(e,"class",t[4])},m(i,o){C(i,e,o),r&&r.m(e,null),n=!0},p(i,o){r&&r.p&&(!n||o[0]&320)&&ie(r,s,i,i[8],n?re(s,i[8],o,rf):oe(i[8]),No),(!n||o[0]&16)&&m(e,"class",i[4])},i(i){n||(v(r,i),n=!0)},o(i){b(r,i),n=!1},d(i){i&&k(e),r&&r.d(i)}}}function uf(t){let e,n,s,r;const i=[lf,af,of],o=[];function a(l,u){return l[0]?l[3]?1:2:0}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Ne()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,u){let c=e;e=a(l),e===c?o[e].p(l,u):(Se(),b(o[c],1,1,()=>{o[c]=null}),Ae(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),v(n,1),n.m(s.parentNode,s))},i(l){r||(v(n),r=!0)},o(l){b(n),r=!1},d(l){o[e].d(l),l&&k(s)}}}let cf="focus:z-40 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:focus:ring-gray-500 dark:focus:text-white",hf="hover:bg-gray-100 hover:text-blue-700 dark:hover:bg-gray-600 dark:hover:text-white";function ff(t,e,n){let{$$slots:s={},$$scope:r}=e,{active:i=qn("active")}=e,{current:o=!1}=e,{disabled:a=!1}=e,{href:l=""}=e,u=Jc();const c={current:"text-white bg-blue-700 dark:text-white dark:bg-gray-800",normal:"",disabled:"text-gray-900 bg-gray-100 dark:bg-gray-600 dark:text-gray-400"};let h,f;function g(U){M.call(this,t,U)}function d(U){M.call(this,t,U)}function y(U){M.call(this,t,U)}function p(U){M.call(this,t,U)}function _(U){M.call(this,t,U)}function I(U){M.call(this,t,U)}function A(U){M.call(this,t,U)}function L(U){M.call(this,t,U)}function S(U){M.call(this,t,U)}function me(U){M.call(this,t,U)}function Re(U){M.call(this,t,U)}function qe(U){M.call(this,t,U)}function ve(U){M.call(this,t,U)}function $e(U){M.call(this,t,U)}function w(U){M.call(this,t,U)}function ke(U){M.call(this,t,U)}function Vt(U){M.call(this,t,U)}function Ft(U){M.call(this,t,U)}function D(U){M.call(this,t,U)}function hn(U){M.call(this,t,U)}const Fc=()=>u("click",e),Uc=()=>u("click",e);return t.$$set=U=>{n(6,e=F(F({},e),J(U))),"active"in U&&n(0,i=U.active),"current"in U&&n(1,o=U.current),"disabled"in U&&n(2,a=U.disabled),"href"in U&&n(3,l=U.href),"$$scope"in U&&n(8,r=U.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&6&&n(7,h=a?"disabled":o?"current":"normal"),n(4,f=le("py-2 px-0 sm:px-4 w-full text-sm font-medium","first:rounded-t-lg last:rounded-b-lg",c[h],i&&h==="disabled"&&"cursor-not-allowed",i&&h==="normal"&&hf,i&&h==="normal"&&cf,e.class))},e=J(e),[i,o,a,l,f,u,e,h,r,s,g,d,y,p,_,I,A,L,S,me,Re,qe,ve,$e,w,ke,Vt,Ft,D,hn,Fc,Uc]}class df extends de{constructor(e){super(),fe(this,e,ff,uf,Z,{active:0,current:1,disabled:2,href:3},null,[-1,-1])}}function Ro(t,e,n){const s=t.slice();return s[8]=e[n],s[10]=n,s}const gf=t=>({item:t&1}),Lo=t=>({item:t[8],index:t[10]});function Mo(t){let e;const n=t[4].default,s=se(n,t,t[6],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&64)&&ie(s,n,r,r[6],e?re(n,r[6],i,null):oe(r[6]),null)},i(r){e||(v(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function mf(t){let e;const n=t[4].default,s=se(n,t,t[6],Lo);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&65)&&ie(s,n,r,r[6],e?re(n,r[6],i,gf):oe(r[6]),Lo)},i(r){e||(v(s,r),e=!0)},o(r){b(s,r),e=!1},d(r){s&&s.d(r)}}}function Oo(t){let e,n;const s=[{active:t[1]},t[8],{index:t[10]}];let r={$$slots:{default:[mf]},$$scope:{ctx:t}};for(let i=0;i<s.length;i+=1)r=F(r,s[i]);return e=new df({props:r}),e.$on("click",t[5]),{c(){Q(e.$$.fragment)},m(i,o){H(e,i,o),n=!0},p(i,o){const a=o&3?Pe(s,[o&2&&{active:i[1]},o&1&&Gs(i[8]),s[2]]):{};o&65&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){b(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function pf(t){let e,n,s=t[0],r=[];for(let a=0;a<s.length;a+=1)r[a]=Oo(Ro(t,s,a));const i=a=>b(r[a],1,1,()=>{r[a]=null});let o=null;return s.length||(o=Mo(t)),{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Ne(),o&&o.c()},m(a,l){for(let u=0;u<r.length;u+=1)r[u].m(a,l);C(a,e,l),o&&o.m(a,l),n=!0},p(a,l){if(l&67){s=a[0];let u;for(u=0;u<s.length;u+=1){const c=Ro(a,s,u);r[u]?(r[u].p(c,l),v(r[u],1)):(r[u]=Oo(c),r[u].c(),v(r[u],1),r[u].m(e.parentNode,e))}for(Se(),u=s.length;u<r.length;u+=1)i(u);Ae(),!s.length&&o?o.p(a,l):s.length?o&&(Se(),b(o,1,1,()=>{o=null}),Ae()):(o=Mo(a),o.c(),v(o,1),o.m(e.parentNode,e))}},i(a){if(!n){for(let l=0;l<s.length;l+=1)v(r[l]);n=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)b(r[l]);n=!1},d(a){Wt(r,a),a&&k(e),o&&o.d(a)}}}function yf(t){let e,n;const s=[{tag:t[1]?"div":"ul"},t[3],{rounded:!0},{border:!0},{class:t[2]}];let r={$$slots:{default:[pf]},$$scope:{ctx:t}};for(let i=0;i<s.length;i+=1)r=F(r,s[i]);return e=new hl({props:r}),{c(){Q(e.$$.fragment)},m(i,o){H(e,i,o),n=!0},p(i,[o]){const a=o&14?Pe(s,[o&2&&{tag:i[1]?"div":"ul"},o&8&&Gs(i[3]),s[2],s[3],o&4&&{class:i[2]}]):{};o&67&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){b(e.$$.fragment,i),n=!1},d(i){K(e,i)}}}function vf(t,e,n){const s=["items","active"];let r=he(e,s),{$$slots:i={},$$scope:o}=e,{items:a=[]}=e,{active:l=!1}=e,u;function c(h){M.call(this,t,h)}return t.$$set=h=>{n(7,e=F(F({},e),J(h))),n(3,r=he(e,s)),"items"in h&&n(0,a=h.items),"active"in h&&n(1,l=h.active),"$$scope"in h&&n(6,o=h.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&Cs("active",l),n(2,u=le("divide-y divide-gray-200 dark:divide-gray-600",e.class))},e=J(e),[a,l,u,r,i,c,o]}class bf extends de{constructor(e){super(),fe(this,e,vf,yf,Z,{items:0,active:1})}}function Po(t){let e,n;return{c(){e=P("span"),n=ge(t[0]),m(e,"class","sr-only")},m(s,r){C(s,e,r),B(e,n)},p(s,r){r&1&&Ye(n,s[0])},d(s){s&&k(e)}}}function _f(t){let e,n,s;return{c(){e=pe("svg"),n=pe("path"),m(n,"fill-rule","evenodd"),m(n,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),m(n,"clip-rule","evenodd"),m(e,"class",s=t[4][t[2]]),m(e,"fill","currentColor"),m(e,"viewBox","0 0 20 20"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(r,i){C(r,e,i),B(e,n)},p(r,i){i&4&&s!==(s=r[4][r[2]])&&m(e,"class",s)},d(r){r&&k(e)}}}function wf(t){var g;let e,n,s,r,i,o,a=t[0]&&Po(t);const l=t[8].default,u=se(l,t,t[7],null),c=u||_f(t);let h=[{type:"button"},t[5],{class:t[3]},{"aria-label":s=(g=t[1])!=null?g:t[0]}],f={};for(let d=0;d<h.length;d+=1)f=F(f,h[d]);return{c(){e=P("button"),a&&a.c(),n=te(),c&&c.c(),ae(e,f)},m(d,y){C(d,e,y),a&&a.m(e,null),B(e,n),c&&c.m(e,null),e.autofocus&&e.focus(),r=!0,i||(o=x(e,"click",t[9]),i=!0)},p(d,[y]){var p;d[0]?a?a.p(d,y):(a=Po(d),a.c(),a.m(e,n)):a&&(a.d(1),a=null),u?u.p&&(!r||y&128)&&ie(u,l,d,d[7],r?re(l,d[7],y,null):oe(d[7]),null):c&&c.p&&(!r||y&4)&&c.p(d,r?y:-1),ae(e,f=Pe(h,[{type:"button"},y&32&&d[5],(!r||y&8)&&{class:d[3]},(!r||y&3&&s!==(s=(p=d[1])!=null?p:d[0]))&&{"aria-label":s}]))},i(d){r||(v(c,d),r=!0)},o(d){b(c,d),r=!1},d(d){d&&k(e),a&&a.d(),c&&c.d(d),i=!1,o()}}}function kf(t,e,n){const s=["color","name","ariaLabel","size"];let r=he(e,s),{$$slots:i={},$$scope:o}=e;const a=qn("background");let{color:l="default"}=e,{name:u=void 0}=e,{ariaLabel:c=void 0}=e,{size:h="md"}=e;const f={default:"hover:text-gray-900 hover:bg-gray-100 text-gray-500 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600",gray:"focus:ring-gray-400 hover:bg-gray-200 dark:hover:bg-gray-300",red:"focus:ring-red-400 hover:bg-red-200 dark:hover:bg-red-300",yellow:"focus:ring-yellow-400 hover:bg-yellow-200 dark:hover:bg-yellow-300",green:"focus:ring-green-400 hover:bg-green-200 dark:hover:bg-green-300",indigo:"focus:ring-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-300",purple:"focus:ring-purple-400 hover:bg-purple-200 dark:hover:bg-purple-300",pink:"focus:ring-pink-400 hover:bg-pink-200 dark:hover:bg-pink-300",blue:"focus:ring-blue-400 hover:bg-blue-200 dark:hover:bg-blue-300"},g={xs:"m-0.5 rounded focus:ring-1 p-0.5",sm:"m-0.5 rounded focus:ring-1 p-0.5",md:"rounded-lg focus:ring-2 p-1.5"};let d;const y={xs:"w-3 h-3",sm:"w-3.5 h-3.5",md:"w-5 h-5"};function p(_){M.call(this,t,_)}return t.$$set=_=>{n(13,e=F(F({},e),J(_))),n(5,r=he(e,s)),"color"in _&&n(6,l=_.color),"name"in _&&n(0,u=_.name),"ariaLabel"in _&&n(1,c=_.ariaLabel),"size"in _&&n(2,h=_.size),"$$scope"in _&&n(7,o=_.$$scope)},t.$$.update=()=>{n(3,d=le("focus:outline-none whitespace-normal",g[h],f[l],l==="default"&&(a?"hover:bg-gray-100 dark:hover:bg-gray-600":"hover:bg-gray-100 dark:hover:bg-gray-700"),e.class))},e=J(e),[u,c,h,d,y,r,l,o,i,p]}class qt extends de{constructor(e){super(),fe(this,e,kf,wf,Z,{color:6,name:0,ariaLabel:1,size:2})}}function Ef(t){let e,n,s,r;return{c(){e=pe("svg"),n=pe("path"),s=pe("path"),m(n,"d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z"),m(n,"fill",t[2]),m(s,"d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z"),m(s,"fill",t[1]),m(e,"role","status"),m(e,"class",r=le("inline -mt-px animate-spin dark:text-gray-600",t[3],t[0],t[4],t[5].class)),m(e,"viewBox","0 0 100 101"),m(e,"fill","none"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(i,o){C(i,e,o),B(e,n),B(e,s)},p(i,[o]){o&4&&m(n,"fill",i[2]),o&2&&m(s,"fill",i[1]),o&33&&r!==(r=le("inline -mt-px animate-spin dark:text-gray-600",i[3],i[0],i[4],i[5].class))&&m(e,"class",r)},i:X,o:X,d(i){i&&k(e)}}}function Tf(t,e,n){var h;let{color:s="blue"}=e,{bg:r="text-gray-300"}=e,{size:i="8"}=e,{currentFill:o="currentFill"}=e,{currentColor:a="currentColor"}=e,l=`w-${i} h-${i}`;o!=="currentFill"&&(s=void 0);const u={blue:"fill-blue-600",gray:"fill-gray-600 dark:fill-gray-300",green:"fill-green-500",red:"fill-red-600",yellow:"fill-yellow-400",pink:"fill-pink-600",purple:"fill-purple-600",white:"fill-white"};let c=s===void 0?"":(h=u[s])!=null?h:u.blue;return t.$$set=f=>{n(5,e=F(F({},e),J(f))),"color"in f&&n(6,s=f.color),"bg"in f&&n(0,r=f.bg),"size"in f&&n(7,i=f.size),"currentFill"in f&&n(1,o=f.currentFill),"currentColor"in f&&n(2,a=f.currentColor)},e=J(e),[r,o,a,l,c,e,s,i]}class gl extends de{constructor(e){super(),fe(this,e,Tf,Ef,Z,{color:6,bg:0,size:7,currentFill:1,currentColor:2})}}const Cf=t=>({}),Vo=t=>({});function If(t){let e,n,s,r,i;const o=t[7].default,a=se(o,t,t[6],null),l=t[7].end,u=se(l,t,t[6],Vo);return{c(){e=P("div"),n=P("div"),a&&a.c(),r=te(),u&&u.c(),m(n,"class",s="flex flex-wrap items-center "+t[1]),m(e,"class",t[0])},m(c,h){C(c,e,h),B(e,n),a&&a.m(n,null),B(e,r),u&&u.m(e,null),i=!0},p(c,[h]){a&&a.p&&(!i||h&64)&&ie(a,o,c,c[6],i?re(o,c[6],h,null):oe(c[6]),null),(!i||h&2&&s!==(s="flex flex-wrap items-center "+c[1]))&&m(n,"class",s),u&&u.p&&(!i||h&64)&&ie(u,l,c,c[6],i?re(l,c[6],h,Cf):oe(c[6]),Vo),(!i||h&1)&&m(e,"class",c[0])},i(c){i||(v(a,c),v(u,c),i=!0)},o(c){b(a,c),b(u,c),i=!1},d(c){c&&k(e),a&&a.d(c),u&&u.d(c)}}}function Sf(t,e,n){let s,{$$slots:r={},$$scope:i}=e;const o=sh(!1);Ja(t,o,d=>n(5,s=d)),Cs("toolbar",o);let{color:a="dark"}=e,{embedded:l=!1}=e;const u={gray:"bg-gray-100 dark:bg-gray-200 ",red:"bg-red-100 dark:bg-red-200",yellow:"bg-yellow-100 dark:bg-yellow-200 ",green:"bg-green-100 dark:bg-green-200 ",indigo:"bg-indigo-100 dark:bg-indigo-200 ",purple:"bg-purple-100 dark:bg-purple-200 ",pink:"bg-pink-100 dark:bg-pink-200 ",blue:"bg-blue-100 dark:bg-blue-200 ",dark:"bg-gray-50 dark:bg-gray-700"},c={gray:"text-gray-500 dark:text-gray-700",red:"text-red-500 dark:text-red-700",yellow:"text-yellow-500 dark:text-yellow-700",green:"text-green-500 dark:text-green-700",indigo:"text-indigo-500 dark:text-indigo-700",purple:"text-purple-500 dark:text-purple-700",pink:"text-pink-500 dark:text-pink-700",blue:"text-blue-500 dark:text-blue-700",dark:"text-gray-500 dark:text-gray-400"};let h;const f={gray:"divide-gray-200 dark:divide-gray-700",red:"divide-red-200 dark:divide-red-700",yellow:"divide-yellow-200 dark:divide-yellow-700",green:"divide-green-200 dark:divide-green-700",indigo:"divide-indigo-200 dark:divide-indigo-700",purple:"divide-purple-200 dark:divide-purple-700",pink:"divide-pink-200 dark:divide-pink-700",blue:"divide-blue-200 dark:divide-blue-700",dark:"divide-gray-200 dark:divide-gray-600"};let g;return t.$$set=d=>{n(11,e=F(F({},e),J(d))),"color"in d&&n(3,a=d.color),"embedded"in d&&n(4,l=d.embedded),"$$scope"in d&&n(6,i=d.$$scope)},t.$$.update=()=>{n(0,h=le("flex justify-between items-center",l||"rounded-lg border border-gray-200 dark:border-gray-600 py-2 px-3",l||c[a],l||u[a],e.class)),t.$$.dirty&40&&n(1,g=le(s&&"divide-gray-200 sm:divide-x",f[a]))},e=J(e),[h,g,o,a,l,s,i,r]}class Af extends de{constructor(e){super(),fe(this,e,Sf,If,Z,{color:3,embedded:4})}}function Df(t){let e,n;const s=t[2].default,r=se(s,t,t[1],null);return{c(){e=P("div"),r&&r.c(),m(e,"class","flex items-center space-x-1 sm:pr-4 sm:pl-4 first:sm:pl-0 last:sm:pr-0")},m(i,o){C(i,e,o),r&&r.m(e,null),n=!0},p(i,[o]){r&&r.p&&(!n||o&2)&&ie(r,s,i,i[1],n?re(s,i[1],o,null):oe(i[1]),null)},i(i){n||(v(r,i),n=!0)},o(i){b(r,i),n=!1},d(i){i&&k(e),r&&r.d(i)}}}function Nf(t,e,n){let s,{$$slots:r={},$$scope:i}=e;const o=qn("toolbar");return Ja(t,o,a=>n(3,s=a)),o&&jc(o,s=!0,s),t.$$set=a=>{"$$scope"in a&&n(1,i=a.$$scope)},[o,i,r]}class Fo extends de{constructor(e){super(),fe(this,e,Nf,Df,Z,{})}}function Tr(t){let e,n,s;const r=t[7].default,i=se(r,t,t[6],null);let o=[t[4],{class:n=le(t[2]?t[2]:t[3][t[0]],t[1],"w-full",t[5].class)}],a={};for(let l=0;l<o.length;l+=1)a=F(a,o[l]);return{c(){e=P(t[0]),i&&i.c(),/-/.test(t[0])?Ge(e,a):ae(e,a)},m(l,u){C(l,e,u),i&&i.m(e,null),s=!0},p(l,u){i&&i.p&&(!s||u&64)&&ie(i,r,l,l[6],s?re(r,l[6],u,null):oe(l[6]),null),a=Pe(o,[u&16&&l[4],(!s||u&39&&n!==(n=le(l[2]?l[2]:l[3][l[0]],l[1],"w-full",l[5].class)))&&{class:n}]),/-/.test(l[0])?Ge(e,a):ae(e,a)},i(l){s||(v(i,l),s=!0)},o(l){b(i,l),s=!1},d(l){l&&k(e),i&&i.d(l)}}}function Rf(t){let e=t[0],n,s,r=t[0]&&Tr(t);return{c(){r&&r.c(),n=Ne()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,[o]){i[0]?e?Z(e,i[0])?(r.d(1),r=Tr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=Tr(i),r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null),e=i[0]},i(i){s||(v(r),s=!0)},o(i){b(r),s=!1},d(i){i&&k(n),r&&r.d(i)}}}function Lf(t,e,n){const s=["tag","color","customSize"];let r=he(e,s),{$$slots:i={},$$scope:o}=e,{tag:a="h1"}=e,{color:l="text-gray-900 dark:text-white"}=e,{customSize:u=""}=e;const c={h1:"text-5xl font-extrabold",h2:"text-4xl font-bold",h3:"text-3xl font-bold",h4:"text-2xl font-bold",h5:"text-xl font-bold",h6:"text-lg font-bold"};return t.$$set=h=>{n(5,e=F(F({},e),J(h))),n(4,r=he(e,s)),"tag"in h&&n(0,a=h.tag),"color"in h&&n(1,l=h.color),"customSize"in h&&n(2,u=h.customSize),"$$scope"in h&&n(6,o=h.$$scope)},e=J(e),[a,l,u,c,r,e,o,i]}class Uo extends de{constructor(e){super(),fe(this,e,Lf,Rf,Z,{tag:0,color:1,customSize:2})}}function Mf(t){let e,n;const s=t[15].default,r=se(s,t,t[14],null);let i=[t[1],{class:t[0]}],o={};for(let a=0;a<i.length;a+=1)o=F(o,i[a]);return{c(){e=P("p"),r&&r.c(),ae(e,o)},m(a,l){C(a,e,l),r&&r.m(e,null),n=!0},p(a,[l]){r&&r.p&&(!n||l&16384)&&ie(r,s,a,a[14],n?re(s,a[14],l,null):oe(a[14]),null),ae(e,o=Pe(i,[l&2&&a[1],{class:a[0]}]))},i(a){n||(v(r,a),n=!0)},o(a){b(r,a),n=!1},d(a){a&&k(e),r&&r.d(a)}}}function Of(t,e,n){const s=["color","height","align","justify","italic","firstupper","upperClass","opacity","whitespace","size","space","weight"];let r=he(e,s),{$$slots:i={},$$scope:o}=e,{color:a="text-gray-900 dark:text-white"}=e,{height:l="normal"}=e,{align:u="left"}=e,{justify:c=!1}=e,{italic:h=!1}=e,{firstupper:f=!1}=e,{upperClass:g="first-line:uppercase first-line:tracking-widest first-letter:text-7xl first-letter:font-bold first-letter:text-gray-900 dark:first-letter:text-gray-100 first-letter:mr-3 first-letter:float-left"}=e,{opacity:d=void 0}=e,{whitespace:y="normal"}=e,{size:p="base"}=e,{space:_=void 0}=e,{weight:I="normal"}=e;const A={xs:"text-xs",sm:"text-sm",base:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl","5xl":"text-5xl","6xl":"text-6xl","7xl":"text-7xl","8xl":"text-8xl","9xl":"text-9xl"},L={thin:"font-thin",extralight:"font-extralight",light:"font-light",normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold",extrabold:"font-extrabold",black:"font-black"},S={tighter:"tracking-tighter",tight:"tracking-tight",normal:"tracking-normal",wide:"tracking-wide",wider:"tracking-wider",widest:"tracking-widest"},me={normal:"leading-normal",relaxed:"leading-relaxed",loose:"leading-loose"},Re={left:"text-left",center:"text-center",right:"text-right"},qe={normal:"whitespace-normal",nowrap:"whitespace-nowrap",pre:"whitespace-pre",preline:"whitespace-pre-line",prewrap:"whitespace-pre-wrap"};let ve=a.split(" ").map(w=>w.trim()).map(w=>w+"/"+String(d)).join(" "),$e=le(p&&A[p],d&&ve||a&&a,l&&me[l],I&&L[I],_&&S[_],u&&Re[u],c&&"text-justify",h&&"italic",f&&g,y&&qe[y],e.class);return t.$$set=w=>{n(23,e=F(F({},e),J(w))),n(1,r=he(e,s)),"color"in w&&n(2,a=w.color),"height"in w&&n(3,l=w.height),"align"in w&&n(4,u=w.align),"justify"in w&&n(5,c=w.justify),"italic"in w&&n(6,h=w.italic),"firstupper"in w&&n(7,f=w.firstupper),"upperClass"in w&&n(8,g=w.upperClass),"opacity"in w&&n(9,d=w.opacity),"whitespace"in w&&n(10,y=w.whitespace),"size"in w&&n(11,p=w.size),"space"in w&&n(12,_=w.space),"weight"in w&&n(13,I=w.weight),"$$scope"in w&&n(14,o=w.$$scope)},e=J(e),[$e,r,a,l,u,c,h,f,g,d,y,p,_,I,o,i]}class wn extends de{constructor(e){super(),fe(this,e,Of,Mf,Z,{color:2,height:3,align:4,justify:5,italic:6,firstupper:7,upperClass:8,opacity:9,whitespace:10,size:11,space:12,weight:13})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Pf=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},pl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,c=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(f=64)),s.push(n[c],n[h],n[f],n[g])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ml(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Pf(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||u==null||h==null)throw Error();const f=i<<2|a>>4;if(s.push(f),u!==64){const g=a<<4&240|u>>2;if(s.push(g),h!==64){const d=u<<6&192|h;s.push(d)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Vf=function(t){const e=ml(t);return pl.encodeByteArray(e,!0)},Ss=function(t){return Vf(t).replace(/\./g,"")},Ff=function(t){try{return pl.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Uf(){return typeof indexedDB=="object"}function xf(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function Bf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=()=>Bf().__FIREBASE_DEFAULTS__,zf=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qf=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ff(t[1]);return e&&JSON.parse(e)},yl=()=>{try{return jf()||zf()||qf()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Hf=t=>{var e,n;return(n=(e=yl())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Kf=t=>{const e=Hf(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Gf=()=>{var t;return(t=yl())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Ss(JSON.stringify(n)),Ss(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="FirebaseError";class sn extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Xf,Object.setPrototypeOf(this,sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vl.prototype.create)}}class vl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?Yf(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new sn(r,a,s)}}function Yf(t,e){return t.replace(Jf,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Jf=/\{\$([^}]+)}/g;function qr(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(xo(i)&&xo(o)){if(!qr(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function xo(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(t){return t&&t._delegate?t._delegate:t}class An{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Qf;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ed(e))try{this.getOrInitializeService({instanceIdentifier:wt})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=wt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wt){return this.instances.has(e)}getOptions(e=wt){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(!!s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:$f(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=wt){return this.component?this.component.multipleInstances?e:wt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $f(t){return t===wt?void 0:t}function ed(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Zf(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($||($={}));const nd={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},sd=$.INFO,rd={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},id=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=rd[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bl{constructor(e){this.name=e,this._logLevel=sd,this._logHandler=id,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nd[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...e),this._logHandler(this,$.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...e),this._logHandler(this,$.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$.INFO,...e),this._logHandler(this,$.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$.WARN,...e),this._logHandler(this,$.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...e),this._logHandler(this,$.ERROR,...e)}}const od=(t,e)=>e.some(n=>t instanceof n);let Bo,jo;function ad(){return Bo||(Bo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ld(){return jo||(jo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _l=new WeakMap,Hr=new WeakMap,wl=new WeakMap,Cr=new WeakMap,bi=new WeakMap;function ud(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(dt(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&_l.set(n,t)}).catch(()=>{}),bi.set(e,t),e}function cd(t){if(Hr.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Hr.set(t,e)}let Kr={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hr.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wl.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return dt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hd(t){Kr=t(Kr)}function fd(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(Ir(this),e,...n);return wl.set(s,e.sort?e.sort():[e]),dt(s)}:ld().includes(t)?function(...e){return t.apply(Ir(this),e),dt(_l.get(this))}:function(...e){return dt(t.apply(Ir(this),e))}}function dd(t){return typeof t=="function"?fd(t):(t instanceof IDBTransaction&&cd(t),od(t,ad())?new Proxy(t,Kr):t)}function dt(t){if(t instanceof IDBRequest)return ud(t);if(Cr.has(t))return Cr.get(t);const e=dd(t);return e!==t&&(Cr.set(t,e),bi.set(e,t)),e}const Ir=t=>bi.get(t);function gd(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=dt(o);return s&&o.addEventListener("upgradeneeded",l=>{s(dt(o.result),l.oldVersion,l.newVersion,dt(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}const md=["get","getKey","getAll","getAllKeys","count"],pd=["put","add","delete","clear"],Sr=new Map;function zo(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Sr.get(e))return Sr.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=pd.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||md.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return Sr.set(e,i),i}hd(t=>({...t,get:(e,n,s)=>zo(e,n)||t.get(e,n,s),has:(e,n)=>!!zo(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vd(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function vd(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gr="@firebase/app",qo="0.8.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt=new bl("@firebase/app"),bd="@firebase/app-compat",_d="@firebase/analytics-compat",wd="@firebase/analytics",kd="@firebase/app-check-compat",Ed="@firebase/app-check",Td="@firebase/auth",Cd="@firebase/auth-compat",Id="@firebase/database",Sd="@firebase/database-compat",Ad="@firebase/functions",Dd="@firebase/functions-compat",Nd="@firebase/installations",Rd="@firebase/installations-compat",Ld="@firebase/messaging",Md="@firebase/messaging-compat",Od="@firebase/performance",Pd="@firebase/performance-compat",Vd="@firebase/remote-config",Fd="@firebase/remote-config-compat",Ud="@firebase/storage",xd="@firebase/storage-compat",Bd="@firebase/firestore",jd="@firebase/firestore-compat",zd="firebase",qd="9.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="[DEFAULT]",Hd={[Gr]:"fire-core",[bd]:"fire-core-compat",[wd]:"fire-analytics",[_d]:"fire-analytics-compat",[Ed]:"fire-app-check",[kd]:"fire-app-check-compat",[Td]:"fire-auth",[Cd]:"fire-auth-compat",[Id]:"fire-rtdb",[Sd]:"fire-rtdb-compat",[Ad]:"fire-fn",[Dd]:"fire-fn-compat",[Nd]:"fire-iid",[Rd]:"fire-iid-compat",[Ld]:"fire-fcm",[Md]:"fire-fcm-compat",[Od]:"fire-perf",[Pd]:"fire-perf-compat",[Vd]:"fire-rc",[Fd]:"fire-rc-compat",[Ud]:"fire-gcs",[xd]:"fire-gcs-compat",[Bd]:"fire-fst",[jd]:"fire-fst-compat","fire-js":"fire-js",[zd]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new Map,Wr=new Map;function Kd(t,e){try{t.container.addComponent(e)}catch(n){Dt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ds(t){const e=t.name;if(Wr.has(e))return Dt.debug(`There were multiple attempts to register component ${e}.`),!1;Wr.set(e,t);for(const n of As.values())Kd(n,t);return!0}function Gd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},gt=new vl("app","Firebase",Qd);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new An("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd=qd;function kl(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Qr,automaticDataCollectionEnabled:!1},e),r=s.name;if(typeof r!="string"||!r)throw gt.create("bad-app-name",{appName:String(r)});if(n||(n=Gf()),!n)throw gt.create("no-options");const i=As.get(r);if(i){if(qr(n,i.options)&&qr(s,i.config))return i;throw gt.create("duplicate-app",{appName:r})}const o=new td(r);for(const l of Wr.values())o.addComponent(l);const a=new Wd(n,s,o);return As.set(r,a),a}function Yd(t=Qr){const e=As.get(t);if(!e&&t===Qr)return kl();if(!e)throw gt.create("no-app",{appName:t});return e}function Ht(t,e,n){var s;let r=(s=Hd[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dt.warn(a.join(" "));return}Ds(new An(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="firebase-heartbeat-database",Zd=1,Dn="firebase-heartbeat-store";let Ar=null;function El(){return Ar||(Ar=gd(Jd,Zd,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Dn)}}}).catch(t=>{throw gt.create("idb-open",{originalErrorMessage:t.message})})),Ar}async function $d(t){var e;try{return(await El()).transaction(Dn).objectStore(Dn).get(Tl(t))}catch(n){if(n instanceof sn)Dt.warn(n.message);else{const s=gt.create("idb-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message});Dt.warn(s.message)}}}async function Ho(t,e){var n;try{const r=(await El()).transaction(Dn,"readwrite");return await r.objectStore(Dn).put(e,Tl(t)),r.done}catch(s){if(s instanceof sn)Dt.warn(s.message);else{const r=gt.create("idb-set",{originalErrorMessage:(n=s)===null||n===void 0?void 0:n.message});Dt.warn(r.message)}}}function Tl(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=1024,tg=30*24*60*60*1e3;class ng{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rg(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ko();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const i=new Date(r.date).valueOf();return Date.now()-i<=tg}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Ko(),{heartbeatsToSend:n,unsentEntries:s}=sg(this._heartbeatsCache.heartbeats),r=Ss(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Ko(){return new Date().toISOString().substring(0,10)}function sg(t,e=eg){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),Go(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Go(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class rg{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Uf()?xf().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await $d(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ho(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ho(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Go(t){return Ss(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t){Ds(new An("platform-logger",e=>new yd(e),"PRIVATE")),Ds(new An("heartbeat",e=>new ng(e),"PRIVATE")),Ht(Gr,qo,t),Ht(Gr,qo,"esm2017"),Ht("fire-js","")}ig("");var og="firebase",ag="9.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ht(og,ag,"app");var lg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},N,_i=_i||{},j=lg||self;function Ns(){}function Qs(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Hn(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function ug(t){return Object.prototype.hasOwnProperty.call(t,Dr)&&t[Dr]||(t[Dr]=++cg)}var Dr="closure_uid_"+(1e9*Math.random()>>>0),cg=0;function hg(t,e,n){return t.call.apply(t.bind,arguments)}function fg(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,s),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function xe(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?xe=hg:xe=fg,xe.apply(null,arguments)}function cs(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),t.apply(this,s)}}function Ve(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(s,r,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(s,o)}}function bt(){this.s=this.s,this.o=this.o}var dg=0;bt.prototype.s=!1;bt.prototype.na=function(){!this.s&&(this.s=!0,this.M(),dg!=0)&&ug(this)};bt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Cl=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function wi(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function Qo(t,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(Qs(s)){const r=t.length||0,i=s.length||0;t.length=r+i;for(let o=0;o<i;o++)t[r+o]=s[o]}else t.push(s)}}function Be(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Be.prototype.h=function(){this.defaultPrevented=!0};var gg=function(){if(!j.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{j.addEventListener("test",Ns,e),j.removeEventListener("test",Ns,e)}catch{}return t}();function Rs(t){return/^[\s\xa0]*$/.test(t)}var Wo=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Nr(t,e){return t<e?-1:t>e?1:0}function Ws(){var t=j.navigator;return t&&(t=t.userAgent)?t:""}function et(t){return Ws().indexOf(t)!=-1}function ki(t){return ki[" "](t),t}ki[" "]=Ns;function mg(t){var e=vg;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var pg=et("Opera"),Yt=et("Trident")||et("MSIE"),Il=et("Edge"),Xr=Il||Yt,Sl=et("Gecko")&&!(Ws().toLowerCase().indexOf("webkit")!=-1&&!et("Edge"))&&!(et("Trident")||et("MSIE"))&&!et("Edge"),yg=Ws().toLowerCase().indexOf("webkit")!=-1&&!et("Edge");function Al(){var t=j.document;return t?t.documentMode:void 0}var Ls;e:{var Rr="",Lr=function(){var t=Ws();if(Sl)return/rv:([^\);]+)(\)|;)/.exec(t);if(Il)return/Edge\/([\d\.]+)/.exec(t);if(Yt)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(yg)return/WebKit\/(\S+)/.exec(t);if(pg)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Lr&&(Rr=Lr?Lr[1]:""),Yt){var Mr=Al();if(Mr!=null&&Mr>parseFloat(Rr)){Ls=String(Mr);break e}}Ls=Rr}var vg={};function bg(){return mg(function(){let t=0;const e=Wo(String(Ls)).split("."),n=Wo("9").split("."),s=Math.max(e.length,n.length);for(let o=0;t==0&&o<s;o++){var r=e[o]||"",i=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],r[0].length==0&&i[0].length==0)break;t=Nr(r[1].length==0?0:parseInt(r[1],10),i[1].length==0?0:parseInt(i[1],10))||Nr(r[2].length==0,i[2].length==0)||Nr(r[2],i[2]),r=r[3],i=i[3]}while(t==0)}return 0<=t})}var Yr;if(j.document&&Yt){var Xo=Al();Yr=Xo||parseInt(Ls,10)||void 0}else Yr=void 0;var _g=Yr;function Nn(t,e){if(Be.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Sl){e:{try{ki(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:wg[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Nn.X.h.call(this)}}Ve(Nn,Be);var wg={2:"touch",3:"pen",4:"mouse"};Nn.prototype.h=function(){Nn.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Kn="closure_listenable_"+(1e6*Math.random()|0),kg=0;function Eg(t,e,n,s,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.ha=r,this.key=++kg,this.ba=this.ea=!1}function Xs(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function Ei(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function Dl(t){const e={};for(const n in t)e[n]=t[n];return e}const Yo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nl(t,e){let n,s;for(let r=1;r<arguments.length;r++){s=arguments[r];for(n in s)t[n]=s[n];for(let i=0;i<Yo.length;i++)n=Yo[i],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function Ys(t){this.src=t,this.g={},this.h=0}Ys.prototype.add=function(t,e,n,s,r){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Zr(t,e,s,r);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new Eg(e,this.src,i,!!s,r),e.ea=n,t.push(e)),e};function Jr(t,e){var n=e.type;if(n in t.g){var s=t.g[n],r=Cl(s,e),i;(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(Xs(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Zr(t,e,n,s){for(var r=0;r<t.length;++r){var i=t[r];if(!i.ba&&i.listener==e&&i.capture==!!n&&i.ha==s)return r}return-1}var Ti="closure_lm_"+(1e6*Math.random()|0),Or={};function Rl(t,e,n,s,r){if(s&&s.once)return Ml(t,e,n,s,r);if(Array.isArray(e)){for(var i=0;i<e.length;i++)Rl(t,e[i],n,s,r);return null}return n=Si(n),t&&t[Kn]?t.N(e,n,Hn(s)?!!s.capture:!!s,r):Ll(t,e,n,!1,s,r)}function Ll(t,e,n,s,r,i){if(!e)throw Error("Invalid event type");var o=Hn(r)?!!r.capture:!!r,a=Ii(t);if(a||(t[Ti]=a=new Ys(t)),n=a.add(e,n,s,o,i),n.proxy)return n;if(s=Tg(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)gg||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),s,r);else if(t.attachEvent)t.attachEvent(Pl(e.toString()),s);else if(t.addListener&&t.removeListener)t.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Tg(){function t(n){return e.call(t.src,t.listener,n)}const e=Cg;return t}function Ml(t,e,n,s,r){if(Array.isArray(e)){for(var i=0;i<e.length;i++)Ml(t,e[i],n,s,r);return null}return n=Si(n),t&&t[Kn]?t.O(e,n,Hn(s)?!!s.capture:!!s,r):Ll(t,e,n,!0,s,r)}function Ol(t,e,n,s,r){if(Array.isArray(e))for(var i=0;i<e.length;i++)Ol(t,e[i],n,s,r);else s=Hn(s)?!!s.capture:!!s,n=Si(n),t&&t[Kn]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Zr(i,n,s,r),-1<n&&(Xs(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=Ii(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Zr(e,n,s,r)),(n=-1<t?e[t]:null)&&Ci(n))}function Ci(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[Kn])Jr(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(Pl(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=Ii(e))?(Jr(n,t),n.h==0&&(n.src=null,e[Ti]=null)):Xs(t)}}}function Pl(t){return t in Or?Or[t]:Or[t]="on"+t}function Cg(t,e){if(t.ba)t=!0;else{e=new Nn(e,this);var n=t.listener,s=t.ha||t.src;t.ea&&Ci(t),t=n.call(s,e)}return t}function Ii(t){return t=t[Ti],t instanceof Ys?t:null}var Pr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Si(t){return typeof t=="function"?t:(t[Pr]||(t[Pr]=function(e){return t.handleEvent(e)}),t[Pr])}function De(){bt.call(this),this.i=new Ys(this),this.P=this,this.I=null}Ve(De,bt);De.prototype[Kn]=!0;De.prototype.removeEventListener=function(t,e,n,s){Ol(this,t,e,n,s)};function Oe(t,e){var n,s=t.I;if(s)for(n=[];s;s=s.I)n.push(s);if(t=t.P,s=e.type||e,typeof e=="string")e=new Be(e,t);else if(e instanceof Be)e.target=e.target||t;else{var r=e;e=new Be(s,t),Nl(e,r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];r=hs(o,s,!0,e)&&r}if(o=e.g=t,r=hs(o,s,!0,e)&&r,r=hs(o,s,!1,e)&&r,n)for(i=0;i<n.length;i++)o=e.g=n[i],r=hs(o,s,!1,e)&&r}De.prototype.M=function(){if(De.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)Xs(n[s]);delete t.g[e],t.h--}}this.I=null};De.prototype.N=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)};De.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};function hs(t,e,n,s){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ba&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.ea&&Jr(t.i,o),r=a.call(l,s)!==!1&&r}}return r&&!s.defaultPrevented}var Ai=j.JSON.stringify;function Ig(){var t=Ul;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Sg{constructor(){this.h=this.g=null}add(e,n){const s=Vl.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}}var Vl=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new Ag,t=>t.reset());class Ag{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Dg(t){j.setTimeout(()=>{throw t},0)}function Fl(t,e){$r||Ng(),ei||($r(),ei=!0),Ul.add(t,e)}var $r;function Ng(){var t=j.Promise.resolve(void 0);$r=function(){t.then(Rg)}}var ei=!1,Ul=new Sg;function Rg(){for(var t;t=Ig();){try{t.h.call(t.g)}catch(n){Dg(n)}var e=Vl;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ei=!1}function Js(t,e){De.call(this),this.h=t||1,this.g=e||j,this.j=xe(this.lb,this),this.l=Date.now()}Ve(Js,De);N=Js.prototype;N.ca=!1;N.R=null;N.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Oe(this,"tick"),this.ca&&(Di(this),this.start()))}};N.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Di(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}N.M=function(){Js.X.M.call(this),Di(this),delete this.g};function Ni(t,e,n){if(typeof t=="function")n&&(t=xe(t,n));else if(t&&typeof t.handleEvent=="function")t=xe(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:j.setTimeout(t,e||0)}function xl(t){t.g=Ni(()=>{t.g=null,t.i&&(t.i=!1,xl(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Lg extends bt{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:xl(this)}M(){super.M(),this.g&&(j.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rn(t){bt.call(this),this.h=t,this.g={}}Ve(Rn,bt);var Jo=[];function Bl(t,e,n,s){Array.isArray(n)||(n&&(Jo[0]=n.toString()),n=Jo);for(var r=0;r<n.length;r++){var i=Rl(e,n[r],s||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function jl(t){Ei(t.g,function(e,n){this.g.hasOwnProperty(n)&&Ci(e)},t),t.g={}}Rn.prototype.M=function(){Rn.X.M.call(this),jl(this)};Rn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Zs(){this.g=!0}Zs.prototype.Aa=function(){this.g=!1};function Mg(t,e,n,s,r,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function Og(t,e,n,s,r,i,o){t.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+e+`
`+n+`
`+i+" "+o})}function Bt(t,e,n,s){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Vg(t,n)+(s?" "+s:"")})}function Pg(t,e){t.info(function(){return"TIMEOUT: "+e})}Zs.prototype.info=function(){};function Vg(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var r=s[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return Ai(n)}catch{return e}}var Mt={},Zo=null;function $s(){return Zo=Zo||new De}Mt.Pa="serverreachability";function zl(t){Be.call(this,Mt.Pa,t)}Ve(zl,Be);function Ln(t){const e=$s();Oe(e,new zl(e))}Mt.STAT_EVENT="statevent";function ql(t,e){Be.call(this,Mt.STAT_EVENT,t),this.stat=e}Ve(ql,Be);function ze(t){const e=$s();Oe(e,new ql(e,t))}Mt.Qa="timingevent";function Hl(t,e){Be.call(this,Mt.Qa,t),this.size=e}Ve(Hl,Be);function Gn(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return j.setTimeout(function(){t()},e)}var er={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Kl={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ri(){}Ri.prototype.h=null;function $o(t){return t.h||(t.h=t.i())}function Gl(){}var Qn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Li(){Be.call(this,"d")}Ve(Li,Be);function Mi(){Be.call(this,"c")}Ve(Mi,Be);var ti;function tr(){}Ve(tr,Ri);tr.prototype.g=function(){return new XMLHttpRequest};tr.prototype.i=function(){return{}};ti=new tr;function Wn(t,e,n,s){this.l=t,this.j=e,this.m=n,this.U=s||1,this.S=new Rn(this),this.O=Fg,t=Xr?125:void 0,this.T=new Js(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ql}function Ql(){this.i=null,this.g="",this.h=!1}var Fg=45e3,ni={},Ms={};N=Wn.prototype;N.setTimeout=function(t){this.O=t};function si(t,e,n){t.K=1,t.v=sr(lt(e)),t.s=n,t.P=!0,Wl(t,null)}function Wl(t,e){t.F=Date.now(),Xn(t),t.A=lt(t.v);var n=t.A,s=t.U;Array.isArray(s)||(s=[String(s)]),nu(n.i,"t",s),t.C=0,n=t.l.H,t.h=new Ql,t.g=Eu(t.l,n?e:null,!t.s),0<t.N&&(t.L=new Lg(xe(t.La,t,t.g),t.N)),Bl(t.S,t.g,"readystatechange",t.ib),e=t.H?Dl(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Ln(),Mg(t.j,t.u,t.A,t.m,t.U,t.s)}N.ib=function(t){t=t.target;const e=this.L;e&&rt(t)==3?e.l():this.La(t)};N.La=function(t){try{if(t==this.g)e:{const c=rt(this.g);var e=this.g.Ea();const h=this.g.aa();if(!(3>c)&&(c!=3||Xr||this.g&&(this.h.h||this.g.fa()||sa(this.g)))){this.I||c!=4||e==7||(e==8||0>=h?Ln(3):Ln(2)),nr(this);var n=this.g.aa();this.Y=n;t:if(Xl(this)){var s=sa(this.g);t="";var r=s.length,i=rt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kt(this),kn(this);var o="";break t}this.h.i=new j.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:i&&e==r-1});s.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,Og(this.j,this.u,this.A,this.m,this.U,c,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Rs(a)){var u=a;break t}}u=null}if(n=u)Bt(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ri(this,n);else{this.i=!1,this.o=3,ze(12),kt(this),kn(this);break e}}this.P?(Yl(this,c,o),Xr&&this.i&&c==3&&(Bl(this.S,this.T,"tick",this.hb),this.T.start())):(Bt(this.j,this.m,o,null),ri(this,o)),c==4&&kt(this),this.i&&!this.I&&(c==4?bu(this.l,this):(this.i=!1,Xn(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,ze(12)):(this.o=0,ze(13)),kt(this),kn(this)}}}catch{}finally{}};function Xl(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function Yl(t,e,n){let s=!0,r;for(;!t.I&&t.C<n.length;)if(r=Ug(t,n),r==Ms){e==4&&(t.o=4,ze(14),s=!1),Bt(t.j,t.m,null,"[Incomplete Response]");break}else if(r==ni){t.o=4,ze(15),Bt(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}else Bt(t.j,t.m,r,null),ri(t,r);Xl(t)&&r!=Ms&&r!=ni&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,ze(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Bi(e),e.K=!0,ze(11))):(Bt(t.j,t.m,n,"[Invalid Chunked Response]"),kt(t),kn(t))}N.hb=function(){if(this.g){var t=rt(this.g),e=this.g.fa();this.C<e.length&&(nr(this),Yl(this,t,e),this.i&&t!=4&&Xn(this))}};function Ug(t,e){var n=t.C,s=e.indexOf(`
`,n);return s==-1?Ms:(n=Number(e.substring(n,s)),isNaN(n)?ni:(s+=1,s+n>e.length?Ms:(e=e.substr(s,n),t.C=s+n,e)))}N.cancel=function(){this.I=!0,kt(this)};function Xn(t){t.V=Date.now()+t.O,Jl(t,t.O)}function Jl(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Gn(xe(t.gb,t),e)}function nr(t){t.B&&(j.clearTimeout(t.B),t.B=null)}N.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(Pg(this.j,this.A),this.K!=2&&(Ln(),ze(17)),kt(this),this.o=2,kn(this)):Jl(this,this.V-t)};function kn(t){t.l.G==0||t.I||bu(t.l,t)}function kt(t){nr(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Di(t.T),jl(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function ri(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||ii(n.h,t))){if(!t.J&&ii(n.h,t)&&n.G==3){try{var s=n.Fa.g.parse(e)}catch{s=null}if(Array.isArray(s)&&s.length==3){var r=s;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Vs(n),or(n);else break e;xi(n),ze(18)}}else n.Ba=r[1],0<n.Ba-n.T&&37500>r[2]&&n.L&&n.A==0&&!n.v&&(n.v=Gn(xe(n.cb,n),6e3));if(1>=iu(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else Et(n,11)}else if((t.J||n.g==t)&&Vs(n),!Rs(e))for(r=n.Fa.g.parse(e),e=0;e<r.length;e++){let u=r[e];if(n.T=u[0],u=u[1],n.G==2)if(u[0]=="c"){n.I=u[1],n.ka=u[2];const c=u[3];c!=null&&(n.ma=c,n.j.info("VER="+n.ma));const h=u[4];h!=null&&(n.Ca=h,n.j.info("SVER="+n.Ca));const f=u[5];f!=null&&typeof f=="number"&&0<f&&(s=1.5*f,n.J=s,n.j.info("backChannelRequestTimeoutMs_="+s)),s=n;const g=t.g;if(g){const d=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(d){var i=s.h;i.g||d.indexOf("spdy")==-1&&d.indexOf("quic")==-1&&d.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Oi(i,i.h),i.h=null))}if(s.D){const y=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(s.za=y,ue(s.F,s.D,y))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),s=n;var o=t;if(s.sa=ku(s,s.H?s.ka:null,s.V),o.J){ou(s.h,o);var a=o,l=s.J;l&&a.setTimeout(l),a.B&&(nr(a),Xn(a)),s.g=o}else yu(s);0<n.i.length&&ar(n)}else u[0]!="stop"&&u[0]!="close"||Et(n,7);else n.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Et(n,7):Ui(n):u[0]!="noop"&&n.l&&n.l.wa(u),n.A=0)}}Ln(4)}catch{}}function xg(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Qs(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}e=[],n=0;for(s in t)e[n++]=t[s];return e}function Bg(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Qs(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const s in t)e[n++]=s;return e}}}function Zl(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Qs(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Bg(t),s=xg(t),r=s.length,i=0;i<r;i++)e.call(void 0,s[i],n&&n[i],t)}var $l=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jg(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),r=null;if(0<=s){var i=t[n].substring(0,s);r=t[n].substring(s+1)}else i=t[n];e(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Ct(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ct){this.h=e!==void 0?e:t.h,Os(this,t.j),this.s=t.s,this.g=t.g,Ps(this,t.m),this.l=t.l,e=t.i;var n=new Mn;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ea(this,n),this.o=t.o}else t&&(n=String(t).match($l))?(this.h=!!e,Os(this,n[1]||"",!0),this.s=mn(n[2]||""),this.g=mn(n[3]||"",!0),Ps(this,n[4]),this.l=mn(n[5]||"",!0),ea(this,n[6]||"",!0),this.o=mn(n[7]||"")):(this.h=!!e,this.i=new Mn(null,this.h))}Ct.prototype.toString=function(){var t=[],e=this.j;e&&t.push(pn(e,ta,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(pn(e,ta,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(pn(n,n.charAt(0)=="/"?Hg:qg,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",pn(n,Gg)),t.join("")};function lt(t){return new Ct(t)}function Os(t,e,n){t.j=n?mn(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ps(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ea(t,e,n){e instanceof Mn?(t.i=e,Qg(t.i,t.h)):(n||(e=pn(e,Kg)),t.i=new Mn(e,t.h))}function ue(t,e,n){t.i.set(e,n)}function sr(t){return ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function mn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function pn(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,zg),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zg(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var ta=/[#\/\?@]/g,qg=/[#\?:]/g,Hg=/[#\?]/g,Kg=/[#\?@]/g,Gg=/#/g;function Mn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function _t(t){t.g||(t.g=new Map,t.h=0,t.i&&jg(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}N=Mn.prototype;N.add=function(t,e){_t(this),this.i=null,t=rn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function eu(t,e){_t(t),e=rn(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function tu(t,e){return _t(t),e=rn(t,e),t.g.has(e)}N.forEach=function(t,e){_t(this),this.g.forEach(function(n,s){n.forEach(function(r){t.call(e,r,s,this)},this)},this)};N.oa=function(){_t(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const r=t[s];for(let i=0;i<r.length;i++)n.push(e[s])}return n};N.W=function(t){_t(this);let e=[];if(typeof t=="string")tu(this,t)&&(e=e.concat(this.g.get(rn(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};N.set=function(t,e){return _t(this),this.i=null,t=rn(this,t),tu(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};N.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function nu(t,e,n){eu(t,e),0<n.length&&(t.i=null,t.g.set(rn(t,e),wi(n)),t.h+=n.length)}N.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const i=encodeURIComponent(String(s)),o=this.W(s);for(s=0;s<o.length;s++){var r=i;o[s]!==""&&(r+="="+encodeURIComponent(String(o[s]))),t.push(r)}}return this.i=t.join("&")};function rn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Qg(t,e){e&&!t.j&&(_t(t),t.i=null,t.g.forEach(function(n,s){var r=s.toLowerCase();s!=r&&(eu(this,s),nu(this,r,n))},t)),t.j=e}var Wg=class{constructor(t,e){this.h=t,this.g=e}};function su(t){this.l=t||Xg,j.PerformanceNavigationTiming?(t=j.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(j.g&&j.g.Ga&&j.g.Ga()&&j.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Xg=10;function ru(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function iu(t){return t.h?1:t.g?t.g.size:0}function ii(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Oi(t,e){t.g?t.g.add(e):t.h=e}function ou(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}su.prototype.cancel=function(){if(this.i=au(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function au(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return wi(t.i)}function Pi(){}Pi.prototype.stringify=function(t){return j.JSON.stringify(t,void 0)};Pi.prototype.parse=function(t){return j.JSON.parse(t,void 0)};function Yg(){this.g=new Pi}function Jg(t,e,n){const s=n||"";try{Zl(t,function(r,i){let o=r;Hn(r)&&(o=Ai(r)),e.push(s+i+"="+encodeURIComponent(o))})}catch(r){throw e.push(s+"type="+encodeURIComponent("_badmap")),r}}function Zg(t,e){const n=new Zs;if(j.Image){const s=new Image;s.onload=cs(fs,n,s,"TestLoadImage: loaded",!0,e),s.onerror=cs(fs,n,s,"TestLoadImage: error",!1,e),s.onabort=cs(fs,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=cs(fs,n,s,"TestLoadImage: timeout",!1,e),j.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=t}else e(!1)}function fs(t,e,n,s,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(s)}catch{}}function Yn(t){this.l=t.ac||null,this.j=t.jb||!1}Ve(Yn,Ri);Yn.prototype.g=function(){return new rr(this.l,this.j)};Yn.prototype.i=function(t){return function(){return t}}({});function rr(t,e){De.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Vi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ve(rr,De);var Vi=0;N=rr.prototype;N.open=function(t,e){if(this.readyState!=Vi)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,On(this)};N.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||j).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};N.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jn(this)),this.readyState=Vi};N.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,On(this)),this.g&&(this.readyState=3,On(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof j.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;lu(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function lu(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}N.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Jn(this):On(this),this.readyState==3&&lu(this)}};N.Va=function(t){this.g&&(this.response=this.responseText=t,Jn(this))};N.Ua=function(t){this.g&&(this.response=t,Jn(this))};N.ga=function(){this.g&&Jn(this)};function Jn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,On(t)}N.setRequestHeader=function(t,e){this.v.append(t,e)};N.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};N.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function On(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(rr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var $g=j.JSON.parse;function ye(t){De.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=uu,this.K=this.L=!1}Ve(ye,De);var uu="",em=/^https?$/i,tm=["POST","PUT"];N=ye.prototype;N.Ka=function(t){this.L=t};N.da=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ti.g(),this.C=this.u?$o(this.u):$o(ti),this.g.onreadystatechange=xe(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){na(this,i);return}if(t=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var r in s)n.set(r,s[r]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const i of s.keys())n.set(i,s.get(i));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),r=j.FormData&&t instanceof j.FormData,!(0<=Cl(tm,e))||s||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{fu(this),0<this.B&&((this.K=nm(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xe(this.qa,this)):this.A=Ni(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){na(this,i)}};function nm(t){return Yt&&bg()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}N.qa=function(){typeof _i<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Oe(this,"timeout"),this.abort(8))};function na(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,cu(t),ir(t)}function cu(t){t.D||(t.D=!0,Oe(t,"complete"),Oe(t,"error"))}N.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Oe(this,"complete"),Oe(this,"abort"),ir(this))};N.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ir(this,!0)),ye.X.M.call(this)};N.Ha=function(){this.s||(this.F||this.v||this.l?hu(this):this.fb())};N.fb=function(){hu(this)};function hu(t){if(t.h&&typeof _i<"u"&&(!t.C[1]||rt(t)!=4||t.aa()!=2)){if(t.v&&rt(t)==4)Ni(t.Ha,0,t);else if(Oe(t,"readystatechange"),rt(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=a===0){var r=String(t.H).match($l)[1]||null;if(!r&&j.self&&j.self.location){var i=j.self.location.protocol;r=i.substr(0,i.length-1)}s=!em.test(r?r.toLowerCase():"")}n=s}if(n)Oe(t,"complete"),Oe(t,"success");else{t.m=6;try{var o=2<rt(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",cu(t)}}finally{ir(t)}}}}function ir(t,e){if(t.g){fu(t);const n=t.g,s=t.C[0]?Ns:null;t.g=null,t.C=null,e||Oe(t,"ready");try{n.onreadystatechange=s}catch{}}}function fu(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(j.clearTimeout(t.A),t.A=null)}function rt(t){return t.g?t.g.readyState:0}N.aa=function(){try{return 2<rt(this)?this.g.status:-1}catch{return-1}};N.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};N.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),$g(e)}};function sa(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case uu:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}N.Ea=function(){return this.m};N.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function du(t){let e="";return Ei(t,function(n,s){e+=s,e+=":",e+=n,e+=`\r
`}),e}function Fi(t,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=du(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ue(t,e,n))}function dn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function gu(t){this.Ca=0,this.i=[],this.j=new Zs,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=dn("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=dn("baseRetryDelayMs",5e3,t),this.bb=dn("retryDelaySeedMs",1e4,t),this.$a=dn("forwardChannelMaxRetries",2,t),this.ta=dn("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new su(t&&t.concurrentRequestLimit),this.Fa=new Yg,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}N=gu.prototype;N.ma=8;N.G=1;function Ui(t){if(mu(t),t.G==3){var e=t.U++,n=lt(t.F);ue(n,"SID",t.I),ue(n,"RID",e),ue(n,"TYPE","terminate"),Zn(t,n),e=new Wn(t,t.j,e,void 0),e.K=2,e.v=sr(lt(n)),n=!1,j.navigator&&j.navigator.sendBeacon&&(n=j.navigator.sendBeacon(e.v.toString(),"")),!n&&j.Image&&(new Image().src=e.v,n=!0),n||(e.g=Eu(e.l,null),e.g.da(e.v)),e.F=Date.now(),Xn(e)}wu(t)}function or(t){t.g&&(Bi(t),t.g.cancel(),t.g=null)}function mu(t){or(t),t.u&&(j.clearTimeout(t.u),t.u=null),Vs(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&j.clearTimeout(t.m),t.m=null)}function ar(t){ru(t.h)||t.m||(t.m=!0,Fl(t.Ja,t),t.C=0)}function sm(t,e){return iu(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=Gn(xe(t.Ja,t,e),_u(t,t.C)),t.C++,!0)}N.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new Wn(this,this.j,t,void 0);let i=this.s;if(this.S&&(i?(i=Dl(i),Nl(i,this.S)):i=this.S),this.o!==null||this.N||(r.H=i,i=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var s=this.i[n];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(e+=s,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=pu(this,r,e),n=lt(this.F),ue(n,"RID",t),ue(n,"CVER",22),this.D&&ue(n,"X-HTTP-Session-Id",this.D),Zn(this,n),i&&(this.N?e="headers="+encodeURIComponent(String(du(i)))+"&"+e:this.o&&Fi(n,this.o,i)),Oi(this.h,r),this.Ya&&ue(n,"TYPE","init"),this.O?(ue(n,"$req",e),ue(n,"SID","null"),r.Z=!0,si(r,n,null)):si(r,n,e),this.G=2}}else this.G==3&&(t?ra(this,t):this.i.length==0||ru(this.h)||ra(this))};function ra(t,e){var n;e?n=e.m:n=t.U++;const s=lt(t.F);ue(s,"SID",t.I),ue(s,"RID",n),ue(s,"AID",t.T),Zn(t,s),t.o&&t.s&&Fi(s,t.o,t.s),n=new Wn(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=pu(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),Oi(t.h,n),si(n,s,e)}function Zn(t,e){t.ia&&Ei(t.ia,function(n,s){ue(e,s,n)}),t.l&&Zl({},function(n,s){ue(e,s,n)})}function pu(t,e,n){n=Math.min(t.i.length,n);var s=t.l?xe(t.l.Ra,t.l,t):null;e:{var r=t.i;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=r[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let u=r[l].h;const c=r[l].g;if(u-=i,0>u)i=Math.max(0,r[l].h-100),a=!1;else try{Jg(c,o,"req"+u+"_")}catch{s&&s(c)}}if(a){s=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,s}function yu(t){t.g||t.u||(t.Z=1,Fl(t.Ia,t),t.A=0)}function xi(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=Gn(xe(t.Ia,t),_u(t,t.A)),t.A++,!0)}N.Ia=function(){if(this.u=null,vu(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=Gn(xe(this.eb,this),t)}};N.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ze(10),or(this),vu(this))};function Bi(t){t.B!=null&&(j.clearTimeout(t.B),t.B=null)}function vu(t){t.g=new Wn(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=lt(t.sa);ue(e,"RID","rpc"),ue(e,"SID",t.I),ue(e,"CI",t.L?"0":"1"),ue(e,"AID",t.T),ue(e,"TYPE","xmlhttp"),Zn(t,e),t.o&&t.s&&Fi(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=sr(lt(e)),n.s=null,n.P=!0,Wl(n,t)}N.cb=function(){this.v!=null&&(this.v=null,or(this),xi(this),ze(19))};function Vs(t){t.v!=null&&(j.clearTimeout(t.v),t.v=null)}function bu(t,e){var n=null;if(t.g==e){Vs(t),Bi(t),t.g=null;var s=2}else if(ii(t.h,e))n=e.D,ou(t.h,e),s=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(s==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;s=$s(),Oe(s,new Hl(s,n)),ar(t)}else yu(t);else if(r=e.o,r==3||r==0&&0<t.pa||!(s==1&&sm(t,e)||s==2&&xi(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:Et(t,5);break;case 4:Et(t,10);break;case 3:Et(t,6);break;default:Et(t,2)}}}function _u(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function Et(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var s=xe(t.kb,t);n||(n=new Ct("//www.google.com/images/cleardot.gif"),j.location&&j.location.protocol=="http"||Os(n,"https"),sr(n)),Zg(n.toString(),s)}else ze(2);t.G=0,t.l&&t.l.va(e),wu(t),mu(t)}N.kb=function(t){t?(this.j.info("Successfully pinged google.com"),ze(2)):(this.j.info("Failed to ping google.com"),ze(1))};function wu(t){if(t.G=0,t.la=[],t.l){const e=au(t.h);(e.length!=0||t.i.length!=0)&&(Qo(t.la,e),Qo(t.la,t.i),t.h.i.length=0,wi(t.i),t.i.length=0),t.l.ua()}}function ku(t,e,n){var s=n instanceof Ct?lt(n):new Ct(n,void 0);if(s.g!="")e&&(s.g=e+"."+s.g),Ps(s,s.m);else{var r=j.location;s=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var i=new Ct(null,void 0);s&&Os(i,s),e&&(i.g=e),r&&Ps(i,r),n&&(i.l=n),s=i}return n=t.D,e=t.za,n&&e&&ue(s,n,e),ue(s,"VER",t.ma),Zn(t,s),s}function Eu(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new ye(new Yn({jb:!0})):new ye(t.ra),e.Ka(t.H),e}function Tu(){}N=Tu.prototype;N.xa=function(){};N.wa=function(){};N.va=function(){};N.ua=function(){};N.Ra=function(){};function Fs(){if(Yt&&!(10<=Number(_g)))throw Error("Environmental error: no available transport.")}Fs.prototype.g=function(t,e){return new Qe(t,e)};function Qe(t,e){De.call(this),this.g=new gu(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!Rs(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Rs(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new on(this)}Ve(Qe,De);Qe.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;ze(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=ku(t,null,t.V),ar(t)};Qe.prototype.close=function(){Ui(this.g)};Qe.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ai(t),t=n);e.i.push(new Wg(e.ab++,t)),e.G==3&&ar(e)};Qe.prototype.M=function(){this.g.l=null,delete this.j,Ui(this.g),delete this.g,Qe.X.M.call(this)};function Cu(t){Li.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Ve(Cu,Li);function Iu(){Mi.call(this),this.status=1}Ve(Iu,Mi);function on(t){this.g=t}Ve(on,Tu);on.prototype.xa=function(){Oe(this.g,"a")};on.prototype.wa=function(t){Oe(this.g,new Cu(t))};on.prototype.va=function(t){Oe(this.g,new Iu)};on.prototype.ua=function(){Oe(this.g,"b")};Fs.prototype.createWebChannel=Fs.prototype.g;Qe.prototype.send=Qe.prototype.u;Qe.prototype.open=Qe.prototype.m;Qe.prototype.close=Qe.prototype.close;er.NO_ERROR=0;er.TIMEOUT=8;er.HTTP_ERROR=6;Kl.COMPLETE="complete";Gl.EventType=Qn;Qn.OPEN="a";Qn.CLOSE="b";Qn.ERROR="c";Qn.MESSAGE="d";De.prototype.listen=De.prototype.N;ye.prototype.listenOnce=ye.prototype.O;ye.prototype.getLastError=ye.prototype.Oa;ye.prototype.getLastErrorCode=ye.prototype.Ea;ye.prototype.getStatus=ye.prototype.aa;ye.prototype.getResponseJson=ye.prototype.Sa;ye.prototype.getResponseText=ye.prototype.fa;ye.prototype.send=ye.prototype.da;ye.prototype.setWithCredentials=ye.prototype.Ka;var rm=function(){return new Fs},im=function(){return $s()},Vr=er,om=Kl,am=Mt,ia={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},lm=Yn,ds=Gl,um=ye;const oa="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fe.UNAUTHENTICATED=new Fe(null),Fe.GOOGLE_CREDENTIALS=new Fe("google-credentials-uid"),Fe.FIRST_PARTY=new Fe("first-party-uid"),Fe.MOCK_USER=new Fe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let an="9.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt=new bl("@firebase/firestore");function aa(){return Nt.logLevel}function R(t,...e){if(Nt.logLevel<=$.DEBUG){const n=e.map(ji);Nt.debug(`Firestore (${an}): ${t}`,...n)}}function ut(t,...e){if(Nt.logLevel<=$.ERROR){const n=e.map(ji);Nt.error(`Firestore (${an}): ${t}`,...n)}}function oi(t,...e){if(Nt.logLevel<=$.WARN){const n=e.map(ji);Nt.warn(`Firestore (${an}): ${t}`,...n)}}function ji(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z(t="Unexpected state"){const e=`FIRESTORE (${an}) INTERNAL ASSERTION FAILED: `+t;throw ut(e),new Error(e)}function ne(t,e){t||z()}function q(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class O extends sn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Fe.UNAUTHENTICATED))}shutdown(){}}class hm{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class fm{constructor(e){this.t=e,this.currentUser=Fe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new It;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new It,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{R("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(R("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new It)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(R("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ne(typeof s.accessToken=="string"),new Su(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ne(e===null||typeof e=="string"),new Fe(e)}}class dm{constructor(e,n,s,r){this.h=e,this.l=n,this.m=s,this.g=r,this.type="FirstParty",this.user=Fe.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ne(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class gm{constructor(e,n,s,r){this.h=e,this.l=n,this.m=s,this.g=r}getToken(){return Promise.resolve(new dm(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(Fe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pm{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const s=i=>{i.error!=null&&R("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.A;return this.A=i.token,R("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{R("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.T.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.T.getImmediate({optional:!0});i?r(i):R("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ne(typeof n.token=="string"),this.A=n.token,new mm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const r=ym(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%e.length))}return s}}function ee(t,e){return t<e?-1:t>e?1:0}function Jt(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new O(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new O(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new O(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ee.fromMillis(Date.now())}static fromDate(e){return Ee.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new Ee(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.timestamp=e}static fromTimestamp(e){return new G(e)}static min(){return new G(new Ee(0,0))}static max(){return new G(new Ee(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n,s){n===void 0?n=0:n>e.length&&z(),s===void 0?s=e.length-n:s>e.length-n&&z(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Pn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=e.get(r),o=n.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ce extends Pn{construct(e,n,s){return new ce(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new O(E.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new ce(n)}static emptyPath(){return new ce([])}}const vm=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ue extends Pn{construct(e,n,s){return new Ue(e,n,s)}static isValidIdentifier(e){return vm.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ue.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ue(["__name__"])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new O(E.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new O(E.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new O(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new O(E.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ue(n)}static emptyPath(){return new Ue([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.path=e}static fromPath(e){return new V(ce.fromString(e))}static fromName(e){return new V(ce.fromString(e).popFirst(5))}static empty(){return new V(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new V(new ce(e.slice()))}}function bm(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=G.fromTimestamp(s===1e9?new Ee(n+1,0):new Ee(n,s));return new pt(r,V.empty(),e)}function _m(t){return new pt(t.readTime,t.key,-1)}class pt{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new pt(G.min(),V.empty(),-1)}static max(){return new pt(G.max(),V.empty(),-1)}}function wm(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=V.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Em{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $n(t){if(t.code!==E.FAILED_PRECONDITION||t.message!==km)throw t;R("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new T((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof T?n:T.resolve(n)}catch(n){return T.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):T.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):T.reject(n)}static resolve(e){return new T((n,s)=>{n(e)})}static reject(e){return new T((n,s)=>{s(e)})}static waitFor(e){return new T((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(e){let n=T.resolve(!1);for(const s of e)n=n.next(r=>r?T.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new T((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===i&&s(o)},c=>r(c))}})}static doWhile(e,n){return new T((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function es(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ut(s),this.ct=s=>n.writeSequenceNumber(s))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function la(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ln(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Du(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zi.at=-1;class Ce{constructor(e,n){this.comparator=e,this.root=n||Le.EMPTY}insert(e,n){return new Ce(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Le.BLACK,null,null))}remove(e){return new Ce(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Le.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gs(this.root,e,this.comparator,!1)}getReverseIterator(){return new gs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gs(this.root,e,this.comparator,!0)}}class gs{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Le{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s!=null?s:Le.RED,this.left=r!=null?r:Le.EMPTY,this.right=i!=null?i:Le.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Le(e!=null?e:this.key,n!=null?n:this.value,s!=null?s:this.color,r!=null?r:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Le.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Le.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Le.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Le.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();const e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}}Le.EMPTY=null,Le.RED=!0,Le.BLACK=!1;Le.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(t,e,n,s,r){return this}insert(t,e,n){return new Le(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.comparator=e,this.data=new Ce(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ua(this.data.getIterator())}getIteratorFrom(e){return new ua(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Te)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Te(this.comparator);return n.data=e,n}}class ua{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.fields=e,e.sort(Ue.comparator)}static empty(){return new tt([])}unionWith(e){let n=new Te(Ue.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new tt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jt(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new je(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new je(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}je.EMPTY_BYTE_STRING=new je("");const Tm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yt(t){if(ne(!!t),typeof t=="string"){let e=0;const n=Tm.exec(t);if(ne(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:we(t.seconds),nanos:we(t.nanos)}}function we(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zt(t){return typeof t=="string"?je.fromBase64String(t):je.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ru(t){const e=t.mapValue.fields.__previous_value__;return Nu(e)?Ru(e):e}function Vn(t){const e=yt(t.mapValue.fields.__local_write_time__.timestampValue);return new Ee(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n,s,r,i,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Fn{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Fn("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Fn&&e.projectId===this.projectId&&e.database===this.database}}function lr(t){return t==null}function Us(t){return t===0&&1/t==-1/0}function Im(t){return typeof t=="number"&&Number.isInteger(t)&&!Us(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Rt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nu(t)?4:Sm(t)?9007199254740991:10:z()}function nt(t,e){if(t===e)return!0;const n=Rt(t);if(n!==Rt(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vn(t).isEqual(Vn(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=yt(s.timestampValue),o=yt(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Zt(s.bytesValue).isEqual(Zt(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return we(s.geoPointValue.latitude)===we(r.geoPointValue.latitude)&&we(s.geoPointValue.longitude)===we(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return we(s.integerValue)===we(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=we(s.doubleValue),o=we(r.doubleValue);return i===o?Us(i)===Us(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Jt(t.arrayValue.values||[],e.arrayValue.values||[],nt);case 10:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(la(i)!==la(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!nt(i[a],o[a])))return!1;return!0}(t,e);default:return z()}}function Un(t,e){return(t.values||[]).find(n=>nt(n,e))!==void 0}function $t(t,e){if(t===e)return 0;const n=Rt(t),s=Rt(e);if(n!==s)return ee(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=we(r.integerValue||r.doubleValue),a=we(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return ca(t.timestampValue,e.timestampValue);case 4:return ca(Vn(t),Vn(e));case 5:return ee(t.stringValue,e.stringValue);case 6:return function(r,i){const o=Zt(r),a=Zt(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=ee(o[l],a[l]);if(u!==0)return u}return ee(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=ee(we(r.latitude),we(i.latitude));return o!==0?o:ee(we(r.longitude),we(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,i){const o=r.values||[],a=i.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=$t(o[l],a[l]);if(u)return u}return ee(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,i){if(r===ms.mapValue&&i===ms.mapValue)return 0;if(r===ms.mapValue)return 1;if(i===ms.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const h=ee(a[c],u[c]);if(h!==0)return h;const f=$t(o[a[c]],l[u[c]]);if(f!==0)return f}return ee(a.length,u.length)}(t.mapValue,e.mapValue);default:throw z()}}function ca(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);const n=yt(t),s=yt(e),r=ee(n.seconds,s.seconds);return r!==0?r:ee(n.nanos,s.nanos)}function Kt(t){return ai(t)}function ai(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const r=yt(s);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Zt(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,V.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(s){let r="[",i=!0;for(const o of s.values||[])i?i=!1:r+=",",r+=ai(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(s){const r=Object.keys(s.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${ai(s.fields[a])}`;return i+"}"}(t.mapValue):z();var e,n}function li(t){return!!t&&"integerValue"in t}function qi(t){return!!t&&"arrayValue"in t}function ha(t){return!!t&&"nullValue"in t}function fa(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vs(t){return!!t&&"mapValue"in t}function En(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ln(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=En(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=En(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Sm(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.value=e}static empty(){return new Xe({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!vs(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=En(n)}setAll(e){let n=Ue.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=En(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());vs(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return nt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];vs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){ln(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Xe(En(this.value))}}function Lu(t){const e=[];return ln(t.fields,(n,s)=>{const r=new Ue([n]);if(vs(s)){const i=Lu(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new tt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e,n,s,r,i,o){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Me(e,0,G.min(),G.min(),Xe.empty(),0)}static newFoundDocument(e,n,s){return new Me(e,1,n,G.min(),s,0)}static newNoDocument(e,n){return new Me(e,2,n,G.min(),Xe.empty(),0)}static newUnknownDocument(e,n){return new Me(e,3,n,G.min(),Xe.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xe.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=G.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Me&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Me(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ht=null}}function da(t,e=null,n=[],s=[],r=null,i=null,o=null){return new Am(t,e,n,s,r,i,o)}function Hi(t){const e=q(t);if(e.ht===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>{return(r=s).field.canonicalString()+r.op.toString()+Kt(r.value);var r}).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),lr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Kt(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Kt(s)).join(",")),e.ht=n}return e.ht}function Dm(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(s=n).field.canonicalString()} ${s.op} ${Kt(s.value)}`;var s}).join(", ")}]`),lr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Kt(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Kt(n)).join(",")),`Target(${e})`}function Ki(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Fm(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(n=t.filters[r],s=e.filters[r],n.op!==s.op||!n.field.isEqual(s.field)||!nt(n.value,s.value))return!1;var n,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ma(t.startAt,e.startAt)&&ma(t.endAt,e.endAt)}function ui(t){return V.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class Ke extends class{}{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.lt(e,n,s):new Nm(e,n,s):n==="array-contains"?new Mm(e,s):n==="in"?new Om(e,s):n==="not-in"?new Pm(e,s):n==="array-contains-any"?new Vm(e,s):new Ke(e,n,s)}static lt(e,n,s){return n==="in"?new Rm(e,s):new Lm(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.ft($t(n,this.value)):n!==null&&Rt(this.value)===Rt(n)&&this.ft($t(n,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Nm extends Ke{constructor(e,n,s){super(e,n,s),this.key=V.fromName(s.referenceValue)}matches(e){const n=V.comparator(e.key,this.key);return this.ft(n)}}class Rm extends Ke{constructor(e,n){super(e,"in",n),this.keys=Mu("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Lm extends Ke{constructor(e,n){super(e,"not-in",n),this.keys=Mu("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Mu(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>V.fromName(s.referenceValue))}class Mm extends Ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qi(n)&&Un(n.arrayValue,this.value)}}class Om extends Ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Un(this.value.arrayValue,n)}}class Pm extends Ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(Un(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Un(this.value.arrayValue,n)}}class Vm extends Ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qi(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>Un(this.value.arrayValue,s))}}class xs{constructor(e,n){this.position=e,this.inclusive=n}}class Gt{constructor(e,n="asc"){this.field=e,this.dir=n}}function Fm(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ga(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=V.comparator(V.fromName(o.referenceValue),n.key):s=$t(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function ma(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!nt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this._t=null,this.wt=null,this.startAt,this.endAt}}function Um(t,e,n,s,r,i,o,a){return new ts(t,e,n,s,r,i,o,a)}function Gi(t){return new ts(t)}function pa(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Ou(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Pu(t){for(const e of t.filters)if(e.dt())return e.field;return null}function xm(t){return t.collectionGroup!==null}function xn(t){const e=q(t);if(e._t===null){e._t=[];const n=Pu(e),s=Ou(e);if(n!==null&&s===null)n.isKeyField()||e._t.push(new Gt(n)),e._t.push(new Gt(Ue.keyField(),"asc"));else{let r=!1;for(const i of e.explicitOrderBy)e._t.push(i),i.field.isKeyField()&&(r=!0);if(!r){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Gt(Ue.keyField(),i))}}}return e._t}function ct(t){const e=q(t);if(!e.wt)if(e.limitType==="F")e.wt=da(e.path,e.collectionGroup,xn(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of xn(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new Gt(i.field,o))}const s=e.endAt?new xs(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new xs(e.startAt.position,e.startAt.inclusive):null;e.wt=da(e.path,e.collectionGroup,n,e.filters,e.limit,s,r)}return e.wt}function ci(t,e,n){return new ts(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ur(t,e){return Ki(ct(t),ct(e))&&t.limitType===e.limitType}function Vu(t){return`${Hi(ct(t))}|lt:${t.limitType}`}function hi(t){return`Query(target=${Dm(ct(t))}; limitType=${t.limitType})`}function Qi(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):V.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of n.explicitOrderBy)if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=ga(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,xn(n),s)||n.endAt&&!function(r,i,o){const a=ga(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,xn(n),s))}(t,e)}function Bm(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Fu(t){return(e,n)=>{let s=!1;for(const r of xn(t)){const i=jm(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function jm(t,e,n){const s=t.field.isKeyField()?V.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),l=o.data.field(r);return a!==null&&l!==null?$t(a,l):z()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return z()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t,e){if(t.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Us(e)?"-0":e}}function xu(t){return{integerValue:""+t}}function zm(t,e){return Im(e)?xu(e):Uu(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(){this._=void 0}}function qm(t,e,n){return t instanceof Bn?function(s,r){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&(i.fields.__previous_value__=r),{mapValue:i}}(n,e):t instanceof jn?ju(t,e):t instanceof zn?zu(t,e):function(s,r){const i=Bu(s,r),o=ya(i)+ya(s.yt);return li(i)&&li(s.yt)?xu(o):Uu(s.It,o)}(t,e)}function Hm(t,e,n){return t instanceof jn?ju(t,e):t instanceof zn?zu(t,e):n}function Bu(t,e){return t instanceof Bs?li(n=e)||function(s){return!!s&&"doubleValue"in s}(n)?e:{integerValue:0}:null;var n}class Bn extends cr{}class jn extends cr{constructor(e){super(),this.elements=e}}function ju(t,e){const n=qu(e);for(const s of t.elements)n.some(r=>nt(r,s))||n.push(s);return{arrayValue:{values:n}}}class zn extends cr{constructor(e){super(),this.elements=e}}function zu(t,e){let n=qu(e);for(const s of t.elements)n=n.filter(r=>!nt(r,s));return{arrayValue:{values:n}}}class Bs extends cr{constructor(e,n){super(),this.It=e,this.yt=n}}function ya(t){return we(t.integerValue||t.doubleValue)}function qu(t){return qi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e,n){this.field=e,this.transform=n}}function Gm(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof jn&&s instanceof jn||n instanceof zn&&s instanceof zn?Jt(n.elements,s.elements,nt):n instanceof Bs&&s instanceof Bs?nt(n.yt,s.yt):n instanceof Bn&&s instanceof Bn}(t.transform,e.transform)}class Qm{constructor(e,n){this.version=e,this.transformResults=n}}class it{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new it}static exists(e){return new it(void 0,e)}static updateTime(e){return new it(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bs(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hr{}function Hu(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gu(t.key,it.none()):new ns(t.key,t.data,it.none());{const n=t.data,s=Xe.empty();let r=new Te(Ue.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Ot(t.key,s,new tt(r.toArray()),it.none())}}function Wm(t,e,n){t instanceof ns?function(s,r,i){const o=s.value.clone(),a=ba(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Ot?function(s,r,i){if(!bs(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=ba(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(Ku(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Tn(t,e,n,s){return t instanceof ns?function(r,i,o,a){if(!bs(r.precondition,i))return o;const l=r.value.clone(),u=_a(r.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,s):t instanceof Ot?function(r,i,o,a){if(!bs(r.precondition,i))return o;const l=_a(r.fieldTransforms,a,i),u=i.data;return u.setAll(Ku(r)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(c=>c.field))}(t,e,n,s):function(r,i,o){return bs(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function Xm(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=Bu(s.transform,r||null);i!=null&&(n===null&&(n=Xe.empty()),n.set(s.field,i))}return n||null}function va(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Jt(n,s,(r,i)=>Gm(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ns extends hr{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ot extends hr{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ku(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function ba(t,e,n){const s=new Map;ne(t.length===n.length);for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,Hm(o,a,n[r]))}return s}function _a(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,qm(i,o,e))}return s}class Gu extends hr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ym extends hr{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e,Y;function Zm(t){switch(t){default:return z();case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0}}function Qu(t){if(t===void 0)return ut("GRPC error has no .code"),E.UNKNOWN;switch(t){case _e.OK:return E.OK;case _e.CANCELLED:return E.CANCELLED;case _e.UNKNOWN:return E.UNKNOWN;case _e.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case _e.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case _e.INTERNAL:return E.INTERNAL;case _e.UNAVAILABLE:return E.UNAVAILABLE;case _e.UNAUTHENTICATED:return E.UNAUTHENTICATED;case _e.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case _e.NOT_FOUND:return E.NOT_FOUND;case _e.ALREADY_EXISTS:return E.ALREADY_EXISTS;case _e.PERMISSION_DENIED:return E.PERMISSION_DENIED;case _e.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case _e.ABORTED:return E.ABORTED;case _e.OUT_OF_RANGE:return E.OUT_OF_RANGE;case _e.UNIMPLEMENTED:return E.UNIMPLEMENTED;case _e.DATA_LOSS:return E.DATA_LOSS;default:return z()}}(Y=_e||(_e={}))[Y.OK=0]="OK",Y[Y.CANCELLED=1]="CANCELLED",Y[Y.UNKNOWN=2]="UNKNOWN",Y[Y.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Y[Y.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Y[Y.NOT_FOUND=5]="NOT_FOUND",Y[Y.ALREADY_EXISTS=6]="ALREADY_EXISTS",Y[Y.PERMISSION_DENIED=7]="PERMISSION_DENIED",Y[Y.UNAUTHENTICATED=16]="UNAUTHENTICATED",Y[Y.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Y[Y.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Y[Y.ABORTED=10]="ABORTED",Y[Y.OUT_OF_RANGE=11]="OUT_OF_RANGE",Y[Y.UNIMPLEMENTED=12]="UNIMPLEMENTED",Y[Y.INTERNAL=13]="INTERNAL",Y[Y.UNAVAILABLE=14]="UNAVAILABLE",Y[Y.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ln(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return Du(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=new Ce(V.comparator);function ht(){return $m}const Wu=new Ce(V.comparator);function yn(...t){let e=Wu;for(const n of t)e=e.insert(n.key,n);return e}function Xu(t){let e=Wu;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Tt(){return Cn()}function Yu(){return Cn()}function Cn(){return new un(t=>t.toString(),(t,e)=>t.isEqual(e))}const ep=new Ce(V.comparator),tp=new Te(V.comparator);function W(...t){let e=tp;for(const n of t)e=e.add(n);return e}const np=new Te(ee);function Ju(){return np}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,ss.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new fr(G.min(),r,Ju(),ht(),W())}}class ss{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ss(s,n,W(),W(),W())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,n,s,r){this.Tt=e,this.removedTargetIds=n,this.key=s,this.Et=r}}class Zu{constructor(e,n){this.targetId=e,this.At=n}}class $u{constructor(e,n,s=je.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class wa{constructor(){this.Rt=0,this.bt=Ea(),this.Pt=je.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return this.Rt!==0}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=W(),n=W(),s=W();return this.bt.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:z()}}),new ss(this.Pt,this.vt,e,n,s)}Nt(){this.Vt=!1,this.bt=Ea()}kt(e,n){this.Vt=!0,this.bt=this.bt.insert(e,n)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class sp{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=ht(),this.qt=ka(),this.Kt=new Te(ee)}Gt(e){for(const n of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(n,e.Et):this.jt(n,e.key,e.Et);for(const n of e.removedTargetIds)this.jt(n,e.key,e.Et)}Wt(e){this.forEachTarget(e,n=>{const s=this.zt(n);switch(e.state){case 0:this.Ht(n)&&s.Ct(e.resumeToken);break;case 1:s.Ft(),s.St||s.Nt(),s.Ct(e.resumeToken);break;case 2:s.Ft(),s.St||this.removeTarget(n);break;case 3:this.Ht(n)&&(s.$t(),s.Ct(e.resumeToken));break;case 4:this.Ht(n)&&(this.Jt(n),s.Ct(e.resumeToken));break;default:z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Lt.forEach((s,r)=>{this.Ht(r)&&n(r)})}Yt(e){const n=e.targetId,s=e.At.count,r=this.Xt(n);if(r){const i=r.target;if(ui(i))if(s===0){const o=new V(i.path);this.jt(n,o,Me.newNoDocument(o,G.min()))}else ne(s===1);else this.Zt(n)!==s&&(this.Jt(n),this.Kt=this.Kt.add(n))}}te(e){const n=new Map;this.Lt.forEach((i,o)=>{const a=this.Xt(o);if(a){if(i.current&&ui(a.target)){const l=new V(a.target.path);this.Ut.get(l)!==null||this.ee(o,l)||this.jt(o,l,Me.newNoDocument(l,e))}i.Dt&&(n.set(o,i.xt()),i.Nt())}});let s=W();this.qt.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Xt(l);return!u||u.purpose===2||(a=!1,!1)}),a&&(s=s.add(i))}),this.Ut.forEach((i,o)=>o.setReadTime(e));const r=new fr(e,n,this.Kt,this.Ut,s);return this.Ut=ht(),this.qt=ka(),this.Kt=new Te(ee),r}Qt(e,n){if(!this.Ht(e))return;const s=this.ee(e,n.key)?2:0;this.zt(e).kt(n.key,s),this.Ut=this.Ut.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ne(n.key).add(e))}jt(e,n,s){if(!this.Ht(e))return;const r=this.zt(e);this.ee(e,n)?r.kt(n,1):r.Ot(n),this.qt=this.qt.insert(n,this.ne(n).delete(e)),s&&(this.Ut=this.Ut.insert(n,s))}removeTarget(e){this.Lt.delete(e)}Zt(e){const n=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let n=this.Lt.get(e);return n||(n=new wa,this.Lt.set(e,n)),n}ne(e){let n=this.qt.get(e);return n||(n=new Te(ee),this.qt=this.qt.insert(e,n)),n}Ht(e){const n=this.Xt(e)!==null;return n||R("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.Lt.get(e);return n&&n.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new wa),this.Bt.getRemoteKeysForTarget(e).forEach(n=>{this.jt(e,n,null)})}ee(e,n){return this.Bt.getRemoteKeysForTarget(e).has(n)}}function ka(){return new Ce(V.comparator)}function Ea(){return new Ce(V.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),ip=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class op{constructor(e,n){this.databaseId=e,this.gt=n}}function js(t,e){return t.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ec(t,e){return t.gt?e.toBase64():e.toUint8Array()}function ap(t,e){return js(t,e.toTimestamp())}function ot(t){return ne(!!t),G.fromTimestamp(function(e){const n=yt(e);return new Ee(n.seconds,n.nanos)}(t))}function Wi(t,e){return function(n){return new ce(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function tc(t){const e=ce.fromString(t);return ne(rc(e)),e}function fi(t,e){return Wi(t.databaseId,e.path)}function Fr(t,e){const n=tc(e);if(n.get(1)!==t.databaseId.projectId)throw new O(E.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new O(E.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new V(nc(n))}function di(t,e){return Wi(t.databaseId,e)}function lp(t){const e=tc(t);return e.length===4?ce.emptyPath():nc(e)}function gi(t){return new ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nc(t){return ne(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ta(t,e,n){return{name:fi(t,e),fields:n.value.mapValue.fields}}function up(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(l,u){return l.gt?(ne(u===void 0||typeof u=="string"),je.fromBase64String(u||"")):(ne(u===void 0||u instanceof Uint8Array),je.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?E.UNKNOWN:Qu(l.code);return new O(u,l.message||"")}(o);n=new $u(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Fr(t,s.document.name),i=ot(s.document.updateTime),o=new Xe({mapValue:{fields:s.document.fields}}),a=Me.newFoundDocument(r,i,o),l=s.targetIds||[],u=s.removedTargetIds||[];n=new _s(l,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Fr(t,s.document),i=s.readTime?ot(s.readTime):G.min(),o=Me.newNoDocument(r,i),a=s.removedTargetIds||[];n=new _s([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Fr(t,s.document),i=s.removedTargetIds||[];n=new _s([],i,r,null)}else{if(!("filter"in e))return z();{e.filter;const s=e.filter;s.targetId;const r=s.count||0,i=new Jm(r),o=s.targetId;n=new Zu(o,i)}}return n}function cp(t,e){let n;if(e instanceof ns)n={update:Ta(t,e.key,e.value)};else if(e instanceof Gu)n={delete:fi(t,e.key)};else if(e instanceof Ot)n={update:Ta(t,e.key,e.data),updateMask:_p(e.fieldMask)};else{if(!(e instanceof Ym))return z();n={verify:fi(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof Bn)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof jn)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof zn)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Bs)return{fieldPath:i.field.canonicalString(),increment:o.yt};throw z()}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:ap(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:z()}(t,e.precondition)),n}function hp(t,e){return t&&t.length>0?(ne(e!==void 0),t.map(n=>function(s,r){let i=s.updateTime?ot(s.updateTime):ot(r);return i.isEqual(G.min())&&(i=ot(r)),new Qm(i,s.transformResults||[])}(n,e))):[]}function fp(t,e){return{documents:[di(t,e.path)]}}function dp(t,e){const n={structuredQuery:{}},s=e.path;e.collectionGroup!==null?(n.parent=di(t,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=di(t,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const r=function(l){if(l.length===0)return;const u=l.map(c=>function(h){if(h.op==="=="){if(fa(h.value))return{unaryFilter:{field:xt(h.field),op:"IS_NAN"}};if(ha(h.value))return{unaryFilter:{field:xt(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(fa(h.value))return{unaryFilter:{field:xt(h.field),op:"IS_NOT_NAN"}};if(ha(h.value))return{unaryFilter:{field:xt(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xt(h.field),op:yp(h.op),value:h.value}}}(c));return u.length===1?u[0]:{compositeFilter:{op:"AND",filters:u}}}(e.filters);r&&(n.structuredQuery.where=r);const i=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:xt(c.field),direction:pp(c.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(l,u){return l.gt||lr(u)?u:{value:u}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function gp(t){let e=lp(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){ne(s===1);const c=n.from[0];c.allDescendants?r=c.collectionId:e=e.child(c.collectionId)}let i=[];n.where&&(i=sc(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new Gt(jt(h.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,lr(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(c){const h=!!c.before,f=c.values||[];return new xs(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const h=!c.before,f=c.values||[];return new xs(f,h)}(n.endAt)),Um(e,r,o,i,a,"F",l,u)}function mp(t,e){const n=function(s,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return z()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function sc(t){return t?t.unaryFilter!==void 0?[bp(t)]:t.fieldFilter!==void 0?[vp(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>sc(e)).reduce((e,n)=>e.concat(n)):z():[]}function pp(t){return rp[t]}function yp(t){return ip[t]}function xt(t){return{fieldPath:t.canonicalString()}}function jt(t){return Ue.fromServerFormat(t.fieldPath)}function vp(t){return Ke.create(jt(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}function bp(t){switch(t.unaryFilter.op){case"IS_NAN":const e=jt(t.unaryFilter.field);return Ke.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=jt(t.unaryFilter.field);return Ke.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=jt(t.unaryFilter.field);return Ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=jt(t.unaryFilter.field);return Ke.create(r,"!=",{nullValue:"NULL_VALUE"});default:return z()}}function _p(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function rc(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&Wm(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=Tn(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=Tn(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Yu();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=Hu(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(G.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),W())}isEqual(e){return this.batchId===e.batchId&&Jt(this.mutations,e.mutations,(n,s)=>va(n,s))&&Jt(this.baseMutations,e.baseMutations,(n,s)=>va(n,s))}}class Xi{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){ne(e.mutations.length===s.length);let r=ep;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Xi(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n,s,r,i=G.min(),o=G.min(),a=je.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new St(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new St(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new St(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this.re=e}}function Tp(t){const e=gp({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ci(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(){this.Ye=new Ip}addToCollectionParentIndex(e,n){return this.Ye.add(n),T.resolve()}getCollectionParents(e,n){return T.resolve(this.Ye.getEntries(n))}addFieldIndex(e,n){return T.resolve()}deleteFieldIndex(e,n){return T.resolve()}getDocumentsMatchingTarget(e,n){return T.resolve(null)}getIndexType(e,n){return T.resolve(0)}getFieldIndexes(e,n){return T.resolve([])}getNextCollectionGroupToUpdate(e){return T.resolve(null)}getMinOffset(e,n){return T.resolve(pt.min())}getMinOffsetFromCollectionGroup(e,n){return T.resolve(pt.min())}updateCollectionGroup(e,n,s){return T.resolve()}updateIndexEntries(e,n){return T.resolve()}}class Ip{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Te(ce.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Te(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new en(0)}static vn(){return new en(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(){this.changes=new un(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Me.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?T.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.getBaseDocument(e,n,s))).next(r=>(s!==null&&Tn(s.mutation,r,tt.empty(),Ee.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,W()).next(()=>s))}getLocalViewOfDocuments(e,n,s=W()){const r=Tt();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=yn();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=Tt();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,W()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=ht();const o=Cn(),a=Cn();return n.forEach((l,u)=>{const c=s.get(u.key);r.has(u.key)&&(c===void 0||c.mutation instanceof Ot)?i=i.insert(u.key,u):c!==void 0&&(o.set(u.key,c.mutation.getFieldMask()),Tn(c.mutation,u,c.mutation.getFieldMask(),Ee.now()))}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new Ap(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const s=Cn();let r=new Ce((o,a)=>o-a),i=W();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=s.get(l)||tt.empty();c=a.applyToLocalView(u,c),s.set(l,c);const h=(r.get(a.batchId)||W()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=Yu();c.forEach(f=>{if(!i.has(f)){const g=Hu(n.get(f),s.get(f));g!==null&&h.set(f,g),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return T.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s){return function(r){return V.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s):this.getDocumentsMatchingCollectionQuery(e,n,s)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):T.resolve(Tt());let a=-1,l=i;return o.next(u=>T.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(c)?T.resolve():this.getBaseDocument(e,c,h).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,W())).next(c=>({batchId:a,changes:Xu(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new V(n)).next(s=>{let r=yn();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s){const r=n.collectionGroup;let i=yn();return this.indexManager.getCollectionParents(e,r).next(o=>T.forEach(o,a=>{const l=function(u,c){return new ts(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,l,s).next(u=>{u.forEach((c,h)=>{i=i.insert(c,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,s){let r;return this.remoteDocumentCache.getAllFromCollection(e,n.path,s).next(i=>(r=i,this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId))).next(i=>{i.forEach((a,l)=>{const u=l.getKey();r.get(u)===null&&(r=r.insert(u,Me.newInvalidDocument(u)))});let o=yn();return r.forEach((a,l)=>{const u=i.get(a);u!==void 0&&Tn(u.mutation,l,tt.empty(),Ee.now()),Qi(n,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(e,n,s){return s===null||s.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):T.resolve(Me.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return T.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var s;return this.Zn.set(n.id,{id:(s=n).id,version:s.version,createTime:ot(s.createTime)}),T.resolve()}getNamedQuery(e,n){return T.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,function(s){return{name:s.name,query:Tp(s.bundledQuery),readTime:ot(s.readTime)}}(n)),T.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(){this.overlays=new Ce(V.comparator),this.es=new Map}getOverlay(e,n){return T.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Tt();return T.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.ue(e,n,i)}),T.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.es.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.es.delete(s)),T.resolve()}getOverlaysForCollection(e,n,s){const r=Tt(),i=n.length+1,o=new V(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return T.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Ce((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let c=i.get(u.largestBatchId);c===null&&(c=Tt(),i=i.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=Tt(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=r)););return T.resolve(a)}ue(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.es.get(r.largestBatchId).delete(s.key);this.es.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new kp(n,s));let i=this.es.get(n);i===void 0&&(i=W(),this.es.set(n,i)),this.es.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(){this.ns=new Te(Ie.ss),this.rs=new Te(Ie.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const s=new Ie(e,n);this.ns=this.ns.add(s),this.rs=this.rs.add(s)}us(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.cs(new Ie(e,n))}hs(e,n){e.forEach(s=>this.removeReference(s,n))}ls(e){const n=new V(new ce([])),s=new Ie(n,e),r=new Ie(n,e+1),i=[];return this.rs.forEachInRange([s,r],o=>{this.cs(o),i.push(o.key)}),i}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new V(new ce([])),s=new Ie(n,e),r=new Ie(n,e+1);let i=W();return this.rs.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ie(e,0),s=this.ns.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ie{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return V.comparator(e.key,n.key)||ee(e._s,n._s)}static os(e,n){return ee(e._s,n._s)||V.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Te(Ie.ss)}checkEmpty(e){return T.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new wp(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.gs=this.gs.add(new Ie(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return T.resolve(o)}lookupMutationBatch(e,n){return T.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ps(s),i=r<0?0:r;return T.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return T.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return T.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ie(n,0),r=new Ie(n,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([s,r],o=>{const a=this.ys(o._s);i.push(a)}),T.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Te(ee);return n.forEach(r=>{const i=new Ie(r,0),o=new Ie(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([i,o],a=>{s=s.add(a._s)})}),T.resolve(this.Is(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;V.isDocumentKey(i)||(i=i.child(""));const o=new Ie(new V(i),0);let a=new Te(ee);return this.gs.forEachWhile(l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(l._s)),!0)},o),T.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(s=>{const r=this.ys(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ne(this.Ts(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.gs;return T.forEach(n.mutations,r=>{const i=new Ie(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.gs=s})}An(e){}containsKey(e,n){const s=new Ie(n,0),r=this.gs.firstAfterOrEqual(s);return T.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,T.resolve()}Ts(e,n){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e){this.Es=e,this.docs=new Ce(V.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.Es(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return T.resolve(s?s.document.mutableCopy():Me.newInvalidDocument(n))}getEntries(e,n){let s=ht();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():Me.newInvalidDocument(r))}),T.resolve(s)}getAllFromCollection(e,n,s){let r=ht();const i=new V(n.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||wm(_m(l),s)<=0||(r=r.insert(l.key,l.mutableCopy()))}return T.resolve(r)}getAllFromCollectionGroup(e,n,s,r){z()}As(e,n){return T.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new Op(this)}getSize(e){return T.resolve(this.size)}}class Op extends Sp{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(s)}),T.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e){this.persistence=e,this.Rs=new un(n=>Hi(n),Ki),this.lastRemoteSnapshotVersion=G.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Yi,this.targetCount=0,this.vs=en.Pn()}forEachTarget(e,n){return this.Rs.forEach((s,r)=>n(r)),T.resolve()}getLastRemoteSnapshotVersion(e){return T.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return T.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),T.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.bs&&(this.bs=n),T.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new en(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,T.resolve()}updateTargetData(e,n){return this.Dn(n),T.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,T.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.Rs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),T.waitFor(i).next(()=>r)}getTargetCount(e){return T.resolve(this.targetCount)}getTargetData(e,n){const s=this.Rs.get(n)||null;return T.resolve(s)}addMatchingKeys(e,n,s){return this.Ps.us(n,s),T.resolve()}removeMatchingKeys(e,n,s){this.Ps.hs(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),T.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),T.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ps.ds(n);return T.resolve(s)}containsKey(e,n){return T.resolve(this.Ps.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new zi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Pp(this),this.indexManager=new Cp,this.remoteDocumentCache=function(s){return new Mp(s)}(s=>this.referenceDelegate.xs(s)),this.It=new Ep(n),this.Ns=new Np(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Rp,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Vs[e.toKey()];return s||(s=new Lp(n,this.referenceDelegate),this.Vs[e.toKey()]=s),s}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,s){R("MemoryPersistence","Starting transaction:",e);const r=new Fp(this.Ss.next());return this.referenceDelegate.ks(),s(r).next(i=>this.referenceDelegate.Os(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ms(e,n){return T.or(Object.values(this.Vs).map(s=>()=>s.containsKey(e,n)))}}class Fp extends Em{constructor(e){super(),this.currentSequenceNumber=e}}class Ji{constructor(e){this.persistence=e,this.Fs=new Yi,this.$s=null}static Bs(e){return new Ji(e)}get Ls(){if(this.$s)return this.$s;throw z()}addReference(e,n,s){return this.Fs.addReference(s,n),this.Ls.delete(s.toString()),T.resolve()}removeReference(e,n,s){return this.Fs.removeReference(s,n),this.Ls.add(s.toString()),T.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),T.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(r=>this.Ls.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.Ls.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}ks(){this.$s=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return T.forEach(this.Ls,s=>{const r=V.fromPath(s);return this.Us(e,r).next(i=>{i||n.removeEntry(r,G.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.Us(e,n).next(s=>{s?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}Us(e,n){return T.or([()=>T.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ms(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Si=s,this.Di=r}static Ci(e,n){let s=W(),r=W();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Zi(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,s,r){return this.ki(e,n).next(i=>i||this.Oi(e,n,r,s)).next(i=>i||this.Mi(e,n))}ki(e,n){if(pa(n))return T.resolve(null);let s=ct(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=ci(n,null,"F"),s=ct(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=W(...i);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const u=this.Fi(n,a);return this.$i(n,u,o,l.readTime)?this.ki(e,ci(n,null,"F")):this.Bi(e,u,n,l)}))})))}Oi(e,n,s,r){return pa(n)||r.isEqual(G.min())?this.Mi(e,n):this.Ni.getDocuments(e,s).next(i=>{const o=this.Fi(n,i);return this.$i(n,o,s,r)?this.Mi(e,n):(aa()<=$.DEBUG&&R("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),hi(n)),this.Bi(e,o,n,bm(r,-1)))})}Fi(e,n){let s=new Te(Fu(e));return n.forEach((r,i)=>{Qi(e,i)&&(s=s.add(i))}),s}$i(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Mi(e,n){return aa()<=$.DEBUG&&R("QueryEngine","Using full collection scan to execute query:",hi(n)),this.Ni.getDocumentsMatchingQuery(e,n,pt.min())}Bi(e,n,s,r){return this.Ni.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n,s,r){this.persistence=e,this.Li=n,this.It=r,this.Ui=new Ce(ee),this.qi=new un(i=>Hi(i),Ki),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(s)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Dp(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ui))}}function Bp(t,e,n,s){return new xp(t,e,n,s)}async function ic(t,e){const n=q(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Qi(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=W();for(const u of r){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of i){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(s,l).next(u=>({ji:u,removedBatchIds:o,addedBatchIds:a}))})})}function jp(t,e){const n=q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,h=c.keys();let f=T.resolve();return h.forEach(g=>{f=f.next(()=>u.getEntry(a,g)).next(d=>{const y=l.docVersions.get(g);ne(y!==null),d.version.compareTo(y)<0&&(c.applyToRemoteDocument(d,l),d.isValidDocument()&&(d.setReadTime(l.commitVersion),u.addEntry(d)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=W();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function oc(t){const e=q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function zp(t,e){const n=q(t),s=e.snapshotVersion;let r=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});r=n.Ui;const a=[];e.targetChanges.forEach((c,h)=>{const f=r.get(h);if(!f)return;a.push(n.Cs.removeMatchingKeys(i,c.removedDocuments,h).next(()=>n.Cs.addMatchingKeys(i,c.addedDocuments,h)));let g=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(h)?g=g.withResumeToken(je.EMPTY_BYTE_STRING,G.min()).withLastLimboFreeSnapshotVersion(G.min()):c.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(c.resumeToken,s)),r=r.insert(h,g),function(d,y,p){return d.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-d.snapshotVersion.toMicroseconds()>=3e8?!0:p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size>0}(f,g,c)&&a.push(n.Cs.updateTargetData(i,g))});let l=ht(),u=W();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))}),a.push(qp(i,o,e.documentUpdates).next(c=>{l=c.Wi,u=c.zi})),!s.isEqual(G.min())){const c=n.Cs.getLastRemoteSnapshotVersion(i).next(h=>n.Cs.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(c)}return T.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ui=r,i))}function qp(t,e,n){let s=W(),r=W();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=ht();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(G.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):R("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Wi:o,zi:r}})}function Hp(t,e){const n=q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Kp(t,e){const n=q(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Cs.getTargetData(s,e).next(i=>i?(r=i,T.resolve(r)):n.Cs.allocateTargetId(s).next(o=>(r=new St(e,o,0,s.currentSequenceNumber),n.Cs.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ui.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(s.targetId,s),n.qi.set(e,s.targetId)),s})}async function mi(t,e,n){const s=q(t),r=s.Ui.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!es(o))throw o;R("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ui=s.Ui.remove(e),s.qi.delete(r.target)}function Ca(t,e,n){const s=q(t);let r=G.min(),i=W();return s.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=q(a),h=c.qi.get(u);return h!==void 0?T.resolve(c.Ui.get(h)):c.Cs.getTargetData(l,u)}(s,o,ct(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Li.getDocumentsMatchingQuery(o,e,n?r:G.min(),n?i:W())).next(a=>(Gp(s,Bm(e),a),{documents:a,Hi:i})))}function Gp(t,e,n){let s=t.Ki.get(e)||G.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Ki.set(e,s)}class Ia{constructor(){this.activeTargetIds=Ju()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qp{constructor(){this.Lr=new Ia,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,n,s){this.Ur[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Ia,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{qr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){R("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){R("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.oo=n+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,n,s,r,i){const o=this.ho(e,n);R("RestConnection","Sending: ",o,s);const a={};return this.lo(a,r,i),this.fo(e,o,a,s).then(l=>(R("RestConnection","Received: ",l),l),l=>{throw oi("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",s),l})}_o(e,n,s,r,i,o){return this.ao(e,n,s,r,i)}lo(e,n,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+an,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}ho(e,n){const s=Xp[e];return`${this.oo}/v1/${n}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,s,r){return new Promise((i,o)=>{const a=new um;a.setWithCredentials(!0),a.listenOnce(om.COMPLETE,()=>{var u;try{switch(a.getLastErrorCode()){case Vr.NO_ERROR:const c=a.getResponseJson();R("Connection","XHR received:",JSON.stringify(c)),i(c);break;case Vr.TIMEOUT:R("Connection",'RPC "'+e+'" timed out'),o(new O(E.DEADLINE_EXCEEDED,"Request time out"));break;case Vr.HTTP_ERROR:const h=a.getStatus();if(R("Connection",'RPC "'+e+'" failed with status:',h,"response text:",a.getResponseText()),h>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=(u=f)===null||u===void 0?void 0:u.error;if(g&&g.status&&g.message){const d=function(y){const p=y.toLowerCase().replace(/_/g,"-");return Object.values(E).indexOf(p)>=0?p:E.UNKNOWN}(g.status);o(new O(d,g.message))}else o(new O(E.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new O(E.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{R("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(r);a.send(n,"POST",l,s,15)})}wo(e,n,s){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=rm(),o=im(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new lm({})),this.lo(a.initMessageHeaders,n,s),a.encodeInitMessageHeaders=!0;const l=r.join("");R("Connection","Creating WebChannel: "+l,a);const u=i.createWebChannel(l,a);let c=!1,h=!1;const f=new Yp({Hr:d=>{h?R("Connection","Not sending because WebChannel is closed:",d):(c||(R("Connection","Opening WebChannel transport."),u.open(),c=!0),R("Connection","WebChannel sending:",d),u.send(d))},Jr:()=>u.close()}),g=(d,y,p)=>{d.listen(y,_=>{try{p(_)}catch(I){setTimeout(()=>{throw I},0)}})};return g(u,ds.EventType.OPEN,()=>{h||R("Connection","WebChannel transport opened.")}),g(u,ds.EventType.CLOSE,()=>{h||(h=!0,R("Connection","WebChannel transport closed"),f.io())}),g(u,ds.EventType.ERROR,d=>{h||(h=!0,oi("Connection","WebChannel transport errored:",d),f.io(new O(E.UNAVAILABLE,"The operation could not be completed")))}),g(u,ds.EventType.MESSAGE,d=>{var y;if(!h){const p=d.data[0];ne(!!p);const _=p,I=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(I){R("Connection","WebChannel received error:",I);const A=I.status;let L=function(me){const Re=_e[me];if(Re!==void 0)return Qu(Re)}(A),S=I.message;L===void 0&&(L=E.INTERNAL,S="Unknown error status: "+A+" with message "+I.message),h=!0,f.io(new O(L,S)),u.close()}else R("Connection","WebChannel received:",p),f.ro(p)}}),g(o,am.STAT_EVENT,d=>{d.stat===ia.PROXY?R("Connection","Detected buffering proxy"):d.stat===ia.NOPROXY&&R("Connection","Detected no buffering proxy")}),setTimeout(()=>{f.so()},0),f}}function Ur(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(t){return new op(t,!0)}class ac{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Hs=e,this.timerId=n,this.mo=s,this.yo=r,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),s=Math.max(0,Date.now()-this.Eo),r=Math.max(0,n-s);r>0&&R("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n,s,r,i,o,a,l){this.Hs=e,this.vo=s,this.Vo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new ac(e,n)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,n){this.Lo(),this.Uo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():n&&n.code===E.RESOURCE_EXHAUSTED?(ut(n.toString()),ut("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===E.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.qo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}qo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.So===n&&this.Go(s,r)},s=>{e(()=>{const r=new O(E.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Qo(r)})})}Go(e,n){const s=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{s(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{s(()=>this.Qo(r))}),this.stream.onMessage(r=>{s(()=>this.onMessage(r))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return R("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(R("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zp extends lc{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.It=i}jo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.xo.reset();const n=up(this.It,e),s=function(r){if(!("targetChange"in r))return G.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?G.min():i.readTime?ot(i.readTime):G.min()}(e);return this.listener.Wo(n,s)}zo(e){const n={};n.database=gi(this.It),n.addTarget=function(r,i){let o;const a=i.target;return o=ui(a)?{documents:fp(r,a)}:{query:dp(r,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?o.resumeToken=ec(r,i.resumeToken):i.snapshotVersion.compareTo(G.min())>0&&(o.readTime=js(r,i.snapshotVersion.toTimestamp())),o}(this.It,e);const s=mp(this.It,e);s&&(n.labels=s),this.Bo(n)}Ho(e){const n={};n.database=gi(this.It),n.removeTarget=e,this.Bo(n)}}class $p extends lc{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.It=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=hp(e.writeResults,e.commitTime),s=ot(e.commitTime);return this.listener.Zo(s,n)}return ne(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=gi(this.It),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>cp(this.It,s))};this.Bo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0 extends class{}{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.It=r,this.nu=!1}su(){if(this.nu)throw new O(E.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,n,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.connection.ao(e,n,s,r,i)).catch(r=>{throw r.name==="FirebaseError"?(r.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new O(E.UNKNOWN,r.toString())})}_o(e,n,s,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection._o(e,n,s,i,o,r)).catch(i=>{throw i.name==="FirebaseError"?(i.code===E.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new O(E.UNKNOWN,i.toString())})}terminate(){this.nu=!0}}class t0{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(ut(n),this.ou=!1):R("OnlineStateTracker",n)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.qr(o=>{s.enqueueAndForget(async()=>{Pt(this)&&(R("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=q(a);l._u.add(4),await rs(l),l.gu.set("Unknown"),l._u.delete(4),await gr(l)}(this))})}),this.gu=new t0(s,r)}}async function gr(t){if(Pt(t))for(const e of t.wu)await e(!0)}async function rs(t){for(const e of t.wu)await e(!1)}function uc(t,e){const n=q(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),to(n)?eo(n):cn(n).ko()&&$i(n,e))}function cc(t,e){const n=q(t),s=cn(n);n.du.delete(e),s.ko()&&hc(n,e),n.du.size===0&&(s.ko()?s.Fo():Pt(n)&&n.gu.set("Unknown"))}function $i(t,e){t.yu.Mt(e.targetId),cn(t).zo(e)}function hc(t,e){t.yu.Mt(e),cn(t).Ho(e)}function eo(t){t.yu=new sp({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),se:e=>t.du.get(e)||null}),cn(t).start(),t.gu.uu()}function to(t){return Pt(t)&&!cn(t).No()&&t.du.size>0}function Pt(t){return q(t)._u.size===0}function fc(t){t.yu=void 0}async function s0(t){t.du.forEach((e,n)=>{$i(t,e)})}async function r0(t,e){fc(t),to(t)?(t.gu.hu(e),eo(t)):t.gu.set("Unknown")}async function i0(t,e,n){if(t.gu.set("Online"),e instanceof $u&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.du.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.du.delete(o),s.yu.removeTarget(o))}(t,e)}catch(s){R("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await zs(t,s)}else if(e instanceof _s?t.yu.Gt(e):e instanceof Zu?t.yu.Yt(e):t.yu.Wt(e),!n.isEqual(G.min()))try{const s=await oc(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.yu.te(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=r.du.get(l);u&&r.du.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach(a=>{const l=r.du.get(a);if(!l)return;r.du.set(a,l.withResumeToken(je.EMPTY_BYTE_STRING,l.snapshotVersion)),hc(r,a);const u=new St(l.target,a,1,l.sequenceNumber);$i(r,u)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){R("RemoteStore","Failed to raise snapshot:",s),await zs(t,s)}}async function zs(t,e,n){if(!es(e))throw e;t._u.add(1),await rs(t),t.gu.set("Offline"),n||(n=()=>oc(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{R("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await gr(t)})}function dc(t,e){return e().catch(n=>zs(t,n,e))}async function mr(t){const e=q(t),n=vt(e);let s=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;o0(e);)try{const r=await Hp(e.localStore,s);if(r===null){e.fu.length===0&&n.Fo();break}s=r.batchId,a0(e,r)}catch(r){await zs(e,r)}gc(e)&&mc(e)}function o0(t){return Pt(t)&&t.fu.length<10}function a0(t,e){t.fu.push(e);const n=vt(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function gc(t){return Pt(t)&&!vt(t).No()&&t.fu.length>0}function mc(t){vt(t).start()}async function l0(t){vt(t).eu()}async function u0(t){const e=vt(t);for(const n of t.fu)e.Xo(n.mutations)}async function c0(t,e,n){const s=t.fu.shift(),r=Xi.from(s,e,n);await dc(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await mr(t)}async function h0(t,e){e&&vt(t).Yo&&await async function(n,s){if(r=s.code,Zm(r)&&r!==E.ABORTED){const i=n.fu.shift();vt(n).Mo(),await dc(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await mr(n)}var r}(t,e),gc(t)&&mc(t)}async function Aa(t,e){const n=q(t);n.asyncQueue.verifyOperationInProgress(),R("RemoteStore","RemoteStore received new credentials");const s=Pt(n);n._u.add(3),await rs(n),s&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await gr(n)}async function f0(t,e){const n=q(t);e?(n._u.delete(2),await gr(n)):e||(n._u.add(2),await rs(n),n.gu.set("Unknown"))}function cn(t){return t.pu||(t.pu=function(e,n,s){const r=q(e);return r.su(),new Zp(n,r.connection,r.authCredentials,r.appCheckCredentials,r.It,s)}(t.datastore,t.asyncQueue,{Yr:s0.bind(null,t),Zr:r0.bind(null,t),Wo:i0.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Mo(),to(t)?eo(t):t.gu.set("Unknown")):(await t.pu.stop(),fc(t))})),t.pu}function vt(t){return t.Iu||(t.Iu=function(e,n,s){const r=q(e);return r.su(),new $p(n,r.connection,r.authCredentials,r.appCheckCredentials,r.It,s)}(t.datastore,t.asyncQueue,{Yr:l0.bind(null,t),Zr:h0.bind(null,t),tu:u0.bind(null,t),Zo:c0.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Mo(),await mr(t)):(await t.Iu.stop(),t.fu.length>0&&(R("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new It,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new no(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(E.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function so(t,e){if(ut("AsyncQueue",`${e}: ${t}`),es(t))return new O(E.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e?(n,s)=>e(n,s)||V.comparator(n.key,s.key):(n,s)=>V.comparator(n.key,s.key),this.keyedMap=yn(),this.sortedSet=new Ce(this.comparator)}static emptySet(e){return new Qt(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Qt;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.Tu=new Ce(V.comparator)}track(e){const n=e.doc.key,s=this.Tu.get(n);s?e.type!==0&&s.type===3?this.Tu=this.Tu.insert(n,e):e.type===3&&s.type!==1?this.Tu=this.Tu.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Tu=this.Tu.remove(n):e.type===1&&s.type===2?this.Tu=this.Tu.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):z():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,s)=>{e.push(s)}),e}}class tn{constructor(e,n,s,r,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new tn(e,n,Qt.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ur(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(){this.Au=void 0,this.listeners=[]}}class g0{constructor(){this.queries=new un(e=>Vu(e),ur),this.onlineState="Unknown",this.Ru=new Set}}async function m0(t,e){const n=q(t),s=e.query;let r=!1,i=n.queries.get(s);if(i||(r=!0,i=new d0),r)try{i.Au=await n.onListen(s)}catch(o){const a=so(o,`Initialization of query '${hi(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.listeners.push(e),e.bu(n.onlineState),i.Au&&e.Pu(i.Au)&&ro(n)}async function p0(t,e){const n=q(t),s=e.query;let r=!1;const i=n.queries.get(s);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),r=i.listeners.length===0)}if(r)return n.queries.delete(s),n.onUnlisten(s)}function y0(t,e){const n=q(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Pu(r)&&(s=!0);o.Au=r}}s&&ro(n)}function v0(t,e,n){const s=q(t),r=s.queries.get(e);if(r)for(const i of r.listeners)i.onError(n);s.queries.delete(e)}function ro(t){t.Ru.forEach(e=>{e.next()})}class b0{constructor(e,n,s){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=s||{}}Pu(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new tn(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){if(!e.fromCache)return!0;const s=n!=="Offline";return(!this.options.Nu||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const n=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}xu(e){e=tn.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e){this.key=e}}class yc{constructor(e){this.key=e}}class _0{constructor(e,n){this.query=e,this.Uu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=W(),this.mutatedKeys=W(),this.Gu=Fu(e),this.Qu=new Qt(this.Gu)}get ju(){return this.Uu}Wu(e,n){const s=n?n.zu:new Da,r=n?n.Qu:this.Qu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((c,h)=>{const f=r.get(c),g=Qi(this.query,h)?h:null,d=!!f&&this.mutatedKeys.has(f.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let p=!1;f&&g?f.data.isEqual(g.data)?d!==y&&(s.track({type:3,doc:g}),p=!0):this.Hu(f,g)||(s.track({type:2,doc:g}),p=!0,(l&&this.Gu(g,l)>0||u&&this.Gu(g,u)<0)&&(a=!0)):!f&&g?(s.track({type:0,doc:g}),p=!0):f&&!g&&(s.track({type:1,doc:f}),p=!0,(l||u)&&(a=!0)),p&&(g?(o=o.add(g),i=y?i.add(c):i.delete(c)):(o=o.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),i=i.delete(c.key),s.track({type:1,doc:c})}return{Qu:o,zu:s,$i:a,mutatedKeys:i}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const i=e.zu.Eu();i.sort((u,c)=>function(h,f){const g=d=>{switch(d){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return g(h)-g(f)}(u.type,c.type)||this.Gu(u.doc,c.doc)),this.Ju(s);const o=n?this.Yu():[],a=this.Ku.size===0&&this.current?1:0,l=a!==this.qu;return this.qu=a,i.length!==0||l?{snapshot:new tn(this.query,e.Qu,r,i,e.mutatedKeys,a===0,l,!1,!!s&&s.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Da,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.Uu=this.Uu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Uu=this.Uu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=W(),this.Qu.forEach(s=>{this.Zu(s.key)&&(this.Ku=this.Ku.add(s.key))});const n=[];return e.forEach(s=>{this.Ku.has(s)||n.push(new yc(s))}),this.Ku.forEach(s=>{e.has(s)||n.push(new pc(s))}),n}tc(e){this.Uu=e.Hi,this.Ku=W();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ec(){return tn.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.qu===0,this.hasCachedResults)}}class w0{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class k0{constructor(e){this.key=e,this.nc=!1}}class E0{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new un(a=>Vu(a),ur),this.rc=new Map,this.oc=new Set,this.uc=new Ce(V.comparator),this.cc=new Map,this.ac=new Yi,this.hc={},this.lc=new Map,this.fc=en.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function T0(t,e){const n=O0(t);let s,r;const i=n.ic.get(e);if(i)s=i.targetId,n.sharedClientState.addLocalQueryTarget(s),r=i.view.ec();else{const o=await Kp(n.localStore,ct(e));n.isPrimaryClient&&uc(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);s=o.targetId,r=await C0(n,e,s,a==="current",o.resumeToken)}return r}async function C0(t,e,n,s,r){t._c=(h,f,g)=>async function(d,y,p,_){let I=y.view.Wu(p);I.$i&&(I=await Ca(d.localStore,y.query,!1).then(({documents:S})=>y.view.Wu(S,I)));const A=_&&_.targetChanges.get(y.targetId),L=y.view.applyChanges(I,d.isPrimaryClient,A);return Ra(d,y.targetId,L.Xu),L.snapshot}(t,h,f,g);const i=await Ca(t.localStore,e,!0),o=new _0(e,i.Hi),a=o.Wu(i.documents),l=ss.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);Ra(t,n,u.Xu);const c=new w0(e,n,o);return t.ic.set(e,c),t.rc.has(n)?t.rc.get(n).push(e):t.rc.set(n,[e]),u.snapshot}async function I0(t,e){const n=q(t),s=n.ic.get(e),r=n.rc.get(s.targetId);if(r.length>1)return n.rc.set(s.targetId,r.filter(i=>!ur(i,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await mi(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),cc(n.remoteStore,s.targetId),pi(n,s.targetId)}).catch($n)):(pi(n,s.targetId),await mi(n.localStore,s.targetId,!0))}async function S0(t,e,n){const s=P0(t);try{const r=await function(i,o){const a=q(i),l=Ee.now(),u=o.reduce((f,g)=>f.add(g.key),W());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=ht(),d=W();return a.Gi.getEntries(f,u).next(y=>{g=y,g.forEach((p,_)=>{_.isValidDocument()||(d=d.add(p))})}).next(()=>a.localDocuments.getOverlayedDocuments(f,g)).next(y=>{c=y;const p=[];for(const _ of o){const I=Xm(_,c.get(_.key).overlayedDocument);I!=null&&p.push(new Ot(_.key,I,Lu(I.value.mapValue),it.exists(!0)))}return a.mutationQueue.addMutationBatch(f,l,p,o)}).next(y=>{h=y;const p=y.applyToLocalDocumentSet(c,d);return a.documentOverlayCache.saveOverlays(f,y.batchId,p)})}).then(()=>({batchId:h.batchId,changes:Xu(c)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let l=i.hc[i.currentUser.toKey()];l||(l=new Ce(ee)),l=l.insert(o,a),i.hc[i.currentUser.toKey()]=l}(s,r.batchId,n),await is(s,r.changes),await mr(s.remoteStore)}catch(r){const i=so(r,"Failed to persist write");n.reject(i)}}async function vc(t,e){const n=q(t);try{const s=await zp(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.cc.get(i);o&&(ne(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.nc=!0:r.modifiedDocuments.size>0?ne(o.nc):r.removedDocuments.size>0&&(ne(o.nc),o.nc=!1))}),await is(n,s,e)}catch(s){await $n(s)}}function Na(t,e,n){const s=q(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.ic.forEach((i,o)=>{const a=o.view.bu(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=q(i);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const h of c.listeners)h.bu(o)&&(l=!0)}),l&&ro(a)}(s.eventManager,e),r.length&&s.sc.Wo(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function A0(t,e,n){const s=q(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.cc.get(e),i=r&&r.key;if(i){let o=new Ce(V.comparator);o=o.insert(i,Me.newNoDocument(i,G.min()));const a=W().add(i),l=new fr(G.min(),new Map,new Te(ee),o,a);await vc(s,l),s.uc=s.uc.remove(i),s.cc.delete(e),io(s)}else await mi(s.localStore,e,!1).then(()=>pi(s,e,n)).catch($n)}async function D0(t,e){const n=q(t),s=e.batch.batchId;try{const r=await jp(n.localStore,e);_c(n,s,null),bc(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await is(n,r)}catch(r){await $n(r)}}async function N0(t,e,n){const s=q(t);try{const r=await function(i,o){const a=q(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(ne(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(s.localStore,e);_c(s,e,n),bc(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await is(s,r)}catch(r){await $n(r)}}function bc(t,e){(t.lc.get(e)||[]).forEach(n=>{n.resolve()}),t.lc.delete(e)}function _c(t,e,n){const s=q(t);let r=s.hc[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.hc[s.currentUser.toKey()]=r}}function pi(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.rc.get(e))t.ic.delete(s),n&&t.sc.wc(s,n);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(s=>{t.ac.containsKey(s)||wc(t,s)})}function wc(t,e){t.oc.delete(e.path.canonicalString());const n=t.uc.get(e);n!==null&&(cc(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),io(t))}function Ra(t,e,n){for(const s of n)s instanceof pc?(t.ac.addReference(s.key,e),R0(t,s)):s instanceof yc?(R("SyncEngine","Document no longer in limbo: "+s.key),t.ac.removeReference(s.key,e),t.ac.containsKey(s.key)||wc(t,s.key)):z()}function R0(t,e){const n=e.key,s=n.path.canonicalString();t.uc.get(n)||t.oc.has(s)||(R("SyncEngine","New document in limbo: "+n),t.oc.add(s),io(t))}function io(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const n=new V(ce.fromString(e)),s=t.fc.next();t.cc.set(s,new k0(n)),t.uc=t.uc.insert(n,s),uc(t.remoteStore,new St(ct(Gi(n.path)),s,2,zi.at))}}async function is(t,e,n){const s=q(t),r=[],i=[],o=[];s.ic.isEmpty()||(s.ic.forEach((a,l)=>{o.push(s._c(l,e,n).then(u=>{if((u||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){r.push(u);const c=Zi.Ci(l.targetId,u);i.push(c)}}))}),await Promise.all(o),s.sc.Wo(r),await async function(a,l){const u=q(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>T.forEach(l,h=>T.forEach(h.Si,f=>u.persistence.referenceDelegate.addReference(c,h.targetId,f)).next(()=>T.forEach(h.Di,f=>u.persistence.referenceDelegate.removeReference(c,h.targetId,f)))))}catch(c){if(!es(c))throw c;R("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const h=c.targetId;if(!c.fromCache){const f=u.Ui.get(h),g=f.snapshotVersion,d=f.withLastLimboFreeSnapshotVersion(g);u.Ui=u.Ui.insert(h,d)}}}(s.localStore,i))}async function L0(t,e){const n=q(t);if(!n.currentUser.isEqual(e)){R("SyncEngine","User change. New user:",e.toKey());const s=await ic(n.localStore,e);n.currentUser=e,function(r,i){r.lc.forEach(o=>{o.forEach(a=>{a.reject(new O(E.CANCELLED,i))})}),r.lc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await is(n,s.ji)}}function M0(t,e){const n=q(t),s=n.cc.get(e);if(s&&s.nc)return W().add(s.key);{let r=W();const i=n.rc.get(e);if(!i)return r;for(const o of i){const a=n.ic.get(o);r=r.unionWith(a.view.ju)}return r}}function O0(t){const e=q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=vc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=M0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A0.bind(null,e),e.sc.Wo=y0.bind(null,e.eventManager),e.sc.wc=v0.bind(null,e.eventManager),e}function P0(t){const e=q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=D0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N0.bind(null,e),e}class V0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.It=dr(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,n){return null}Ec(e,n){return null}Ic(e){return Bp(this.persistence,new Up,e.initialUser,this.It)}yc(e){return new Vp(Ji.Bs,this.It)}gc(e){return new Qp}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class F0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Na(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=L0.bind(null,this.syncEngine),await f0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new g0}createDatastore(e){const n=dr(e.databaseInfo.databaseId),s=(r=e.databaseInfo,new Jp(r));var r;return function(i,o,a,l){return new e0(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return n=this.localStore,s=this.datastore,r=e.asyncQueue,i=a=>Na(this.syncEngine,a,0),o=Sa.C()?new Sa:new Wp,new n0(n,s,r,i,o);var n,s,r,i,o}createSyncEngine(e,n){return function(s,r,i,o,a,l,u){const c=new E0(s,r,i,o,a,l);return u&&(c.dc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=q(e);R("RemoteStore","RemoteStore shutting down."),n._u.add(5),await rs(n),n.mu.shutdown(),n.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t,e,n){if(!n)throw new O(E.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function U0(t,e,n,s){if(e===!0&&s===!0)throw new O(E.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function La(t){if(!V.isDocumentKey(t))throw new O(E.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ma(t){if(V.isDocumentKey(t))throw new O(E.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function oo(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":z()}function In(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new O(E.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=oo(t);throw new O(E.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new Map;class Pa{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new O(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new O(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,U0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pa({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new O(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new O(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pa(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new cm;switch(n.type){case"gapi":const s=n.client;return new gm(s,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new O(E.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Oa.get(e);n&&(R("ComponentProvider","Removing Datastore"),Oa.delete(e),n.terminate())}(this),Promise.resolve()}}function x0(t,e,n,s={}){var r;const i=(t=In(t,pr))._getSettings();if(i.host!=="firestore.googleapis.com"&&i.host!==e&&oi("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:`${e}:${n}`,ssl:!1})),s.mockUserToken){let o,a;if(typeof s.mockUserToken=="string")o=s.mockUserToken,a=Fe.MOCK_USER;else{o=Wf(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const l=s.mockUserToken.sub||s.mockUserToken.user_id;if(!l)throw new O(E.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Fe(l)}t._authCredentials=new hm(new Su(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Je(this.firestore,e,this._key)}}class os{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class mt extends os{constructor(e,n,s){super(e,n,Gi(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Je(this.firestore,null,new V(e))}withConverter(e){return new mt(this.firestore,e,this._path)}}function Ec(t,e,...n){if(t=Xt(t),kc("collection","path",e),t instanceof pr){const s=ce.fromString(e,...n);return Ma(s),new mt(t,null,s)}{if(!(t instanceof Je||t instanceof mt))throw new O(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ce.fromString(e,...n));return Ma(s),new mt(t.firestore,null,s)}}function B0(t,e,...n){if(t=Xt(t),arguments.length===1&&(e=Au.R()),kc("doc","path",e),t instanceof pr){const s=ce.fromString(e,...n);return La(s),new Je(t,null,new V(s))}{if(!(t instanceof Je||t instanceof mt))throw new O(E.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ce.fromString(e,...n));return La(s),new Je(t.firestore,t instanceof mt?t.converter:null,new V(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):ut("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,n,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Fe.UNAUTHENTICATED,this.clientId=Au.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async i=>{R("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(s,i=>(R("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new O(E.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new It;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=so(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function q0(t,e){t.asyncQueue.verifyOperationInProgress(),R("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await ic(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function H0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await K0(t);R("FirestoreClient","Initializing OnlineComponentProvider");const s=await t.getConfiguration();await e.initialize(n,s),t.setCredentialChangeListener(r=>Aa(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Aa(e.remoteStore,i)),t.onlineComponents=e}async function K0(t){return t.offlineComponents||(R("FirestoreClient","Using default OfflineComponentProvider"),await q0(t,new V0)),t.offlineComponents}async function Tc(t){return t.onlineComponents||(R("FirestoreClient","Using default OnlineComponentProvider"),await H0(t,new F0)),t.onlineComponents}function G0(t){return Tc(t).then(e=>e.syncEngine)}async function Va(t){const e=await Tc(t),n=e.eventManager;return n.onListen=T0.bind(null,e.syncEngine),n.onUnlisten=I0.bind(null,e.syncEngine),n}class Q0{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new ac(this,"async_queue_retry"),this.Wc=()=>{const n=Ur();n&&R("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=Ur();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const n=Ur();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const n=new It;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!es(e))throw e;R("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(s=>{this.Kc=s,this.Gc=!1;const r=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(s);throw ut("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.Gc=!1,s))));return this.Bc=n,n}enqueueAfterDelay(e,n,s){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const r=no.createAndSchedule(this,e,n,s,i=>this.Yc(i));return this.qc.push(r),r}zc(){this.Kc&&z()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const n of this.qc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.qc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.qc.indexOf(e);this.qc.splice(n,1)}}function Fa(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class qs extends pr{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new Q0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ic(this),this._firestoreClient.terminate()}}function W0(t,e){const n=typeof t=="object"?t:Yd(),s=typeof t=="string"?t:e||"(default)",r=Gd(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=Kf("firestore");i&&x0(r,...i)}return r}function Cc(t){return t._firestoreClient||Ic(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Ic(t){var e;const n=t._freezeSettings(),s=function(r,i,o,a){return new Cm(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new z0(t._authCredentials,t._appCheckCredentials,t._queue,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nn(je.fromBase64String(e))}catch(n){throw new O(E.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new nn(je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new O(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ue(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new O(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new O(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=/^__.*__$/;class Y0{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ot(e,this.data,this.fieldMask,n,this.fieldTransforms):new ns(e,this.data,n,this.fieldTransforms)}}function Sc(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}class co{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.It=s,this.ignoreUndefinedProperties=r,i===void 0&&this.na(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new co(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ia({path:s,oa:!1});return r.ua(e),r}ca(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ia({path:s,oa:!1});return r.na(),r}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Hs(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(Sc(this.sa)&&X0.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class J0{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.It=s||dr(e)}da(e,n,s,r=!1){return new co({sa:e,methodName:n,fa:s,path:Ue.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Z0(t){const e=t._freezeSettings(),n=dr(t._databaseId);return new J0(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $0(t,e,n,s,r,i={}){const o=t.da(i.merge||i.mergeFields?2:0,e,n,r);Rc("Data must be an object, but it was:",o,s);const a=Dc(s,o);let l,u;if(i.merge)l=new tt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const c=[];for(const h of i.mergeFields){const f=ey(e,h,n);if(!o.contains(f))throw new O(E.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);ny(c,f)||c.push(f)}l=new tt(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new Y0(new Xe(a),l,u)}class ho extends lo{_toFieldTransform(e){return new Km(e.path,new Bn)}isEqual(e){return e instanceof ho}}function Ac(t,e){if(Nc(t=Xt(t)))return Rc("Unsupported field value:",e,t),Dc(t,e);if(t instanceof lo)return function(n,s){if(!Sc(s.sa))throw s.ha(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.ha(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=Ac(o,s.aa(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=Xt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return zm(s.It,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=Ee.fromDate(n);return{timestampValue:js(s.It,r)}}if(n instanceof Ee){const r=new Ee(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:js(s.It,r)}}if(n instanceof uo)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof nn)return{bytesValue:ec(s.It,n._byteString)};if(n instanceof Je){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s.ha(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Wi(n.firestore._databaseId||s.databaseId,n._key.path)}}throw s.ha(`Unsupported field value: ${oo(n)}`)}(t,e)}function Dc(t,e){const n={};return Du(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ln(t,(s,r)=>{const i=Ac(r,e.ra(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function Nc(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ee||t instanceof uo||t instanceof nn||t instanceof Je||t instanceof lo)}function Rc(t,e,n){if(!Nc(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const s=oo(n);throw s==="an object"?e.ha(t+" a custom object"):e.ha(t+" "+s)}}function ey(t,e,n){if((e=Xt(e))instanceof ao)return e._internalPath;if(typeof e=="string")return Lc(t,e);throw Hs("Field path arguments must be of type string or ",t,!1,void 0,n)}const ty=new RegExp("[~\\*/\\[\\]]");function Lc(t,e,n){if(e.search(ty)>=0)throw Hs(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ao(...e.split("."))._internalPath}catch{throw Hs(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hs(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new O(E.INVALID_ARGUMENT,a+t+l)}function ny(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fo("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sy extends Mc{data(){return super.data()}}function fo(t,e){return typeof e=="string"?Lc(t,e):e instanceof ao?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new O(E.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iy{}function oy(t,...e){for(const n of e)t=n._apply(t);return t}class ay extends iy{constructor(e,n){super(),this.ma=e,this.pa=n,this.type="orderBy"}_apply(e){const n=function(s,r,i){if(s.startAt!==null)throw new O(E.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new O(E.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Gt(r,i);return function(a,l){if(Ou(a)===null){const u=Pu(a);u!==null&&uy(a,u,l.field)}}(s,o),o}(e._query,this.ma,this.pa);return new os(e.firestore,e.converter,function(s,r){const i=s.explicitOrderBy.concat([r]);return new ts(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ly(t,e="asc"){const n=e,s=fo("orderBy",t);return new ay(s,n)}function uy(t,e,n){if(!n.isEqual(e))throw new O(E.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{convertValue(e,n="none"){switch(Rt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return we(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw z()}}convertObject(e,n){const s={};return ln(e.fields,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertGeoPoint(e){return new uo(we(e.latitude),we(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Ru(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Vn(e));default:return null}}convertTimestamp(e){const n=yt(e);return new Ee(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ce.fromString(e);ne(rc(s));const r=new Fn(s.get(1),s.get(3)),i=new V(s.popFirst(5));return r.isEqual(n)||ut(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oc extends Mc{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ws(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(fo("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class ws extends Oc{data(e={}){return super.data(e)}}class fy{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new vn(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new ws(this._firestore,this._userDataWriter,s.key,s,new vn(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new O(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new ws(s._firestore,s._userDataWriter,o.doc.key,o.doc,new vn(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new ws(s._firestore,s._userDataWriter,o.doc.key,o.doc,new vn(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:dy(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function dy(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}class Pc extends cy{constructor(e){super(),this.firestore=e}convertBytes(e){return new nn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Je(this.firestore,null,n)}}function gy(t,e){const n=In(t.firestore,qs),s=B0(t),r=hy(t.converter,e);return py(n,[$0(Z0(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,it.exists(!1))]).then(()=>s)}function my(t,...e){var n,s,r;t=Xt(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Fa(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(Fa(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(s=h.error)===null||s===void 0?void 0:s.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let l,u,c;if(t instanceof Je)u=In(t.firestore,qs),c=Gi(t._key.path),l={next:h=>{e[o]&&e[o](yy(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=In(t,os);u=In(h.firestore,qs),c=h._query;const f=new Pc(u);l={next:g=>{e[o]&&e[o](new fy(u,f,h,g))},error:e[o+1],complete:e[o+2]},ry(t._query)}return function(h,f,g,d){const y=new j0(d),p=new b0(f,y,g);return h.asyncQueue.enqueueAndForget(async()=>m0(await Va(h),p)),()=>{y.bc(),h.asyncQueue.enqueueAndForget(async()=>p0(await Va(h),p))}}(Cc(u),c,a,l)}function py(t,e){return function(n,s){const r=new It;return n.asyncQueue.enqueueAndForget(async()=>S0(await G0(n),s,r)),r.promise}(Cc(t),e)}function yy(t,e,n){const s=n.docs.get(e._key),r=new Pc(t);return new Oc(t,r,e._key,s,new vn(n.hasPendingWrites,n.fromCache),e.converter)}function vy(){return new ho("serverTimestamp")}(function(t,e=!0){(function(n){an=n})(Xd),Ds(new An("firestore",(n,{instanceIdentifier:s,options:r})=>{const i=n.getProvider("app").getImmediate(),o=new qs(new fm(n.getProvider("auth-internal")),new pm(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new O(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fn(a.options.projectId,l)}(i,s),i);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),Ht(oa,"3.7.3",t),Ht(oa,"3.7.3","esm2017")})();const by={apiKey:"AIzaSyBE1xuFncad-cgFgkDgRwO0hQkNb8aF1KI",authDomain:"thiagometro-bf771.firebaseapp.com",projectId:"thiagometro-bf771",storageBucket:"thiagometro-bf771.appspot.com",messagingSenderId:"969109893719",appId:"1:969109893719:web:b0c85ed83f5ec031ab2912"},_y=kl(by),Vc=W0(_y);function Ua(t,e,n){const s=t.slice();return s[18]=e[n],s}function xa(t,e,n){const s=t.slice();return s[21]=e[n],s[23]=n,s}function wy(t){let e;return{c(){e=ge("Selecione uma categoria")},m(n,s){C(n,e,s)},d(n){n&&k(e)}}}function ky(t){let e,n;return e=new wn({props:{size:"base",weight:"semibold",$$slots:{default:[wy]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,r){const i={};r&16777216&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function Ey(t){let e;return{c(){e=ge("Descri\xE7\xE3o")},m(n,s){C(n,e,s)},d(n){n&&k(e)}}}function Ty(t){let e,n;return e=new wn({props:{size:"base",weight:"semibold",$$slots:{default:[Ey]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,r){const i={};r&16777216&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function Cy(t){let e,n;return{c(){e=pe("svg"),n=pe("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-5 h-5")},m(s,r){C(s,e,r),B(e,n)},p:X,d(s){s&&k(e)}}}function Iy(t){let e,n,s;return{c(){e=pe("svg"),n=pe("path"),s=pe("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"),m(s,"stroke-linecap","round"),m(s,"stroke-linejoin","round"),m(s,"d","M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-5 h-5")},m(r,i){C(r,e,i),B(e,n),B(e,s)},p:X,d(r){r&&k(e)}}}function Sy(t){let e,n;return{c(){e=pe("svg"),n=pe("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-5 h-5")},m(s,r){C(s,e,r),B(e,n)},p:X,d(s){s&&k(e)}}}function Ay(t){let e,n,s,r,i,o;return e=new qt({props:{name:"Attach file",$$slots:{default:[Cy]},$$scope:{ctx:t}}}),s=new qt({props:{name:"Embed map",$$slots:{default:[Iy]},$$scope:{ctx:t}}}),i=new qt({props:{name:"Upload image",$$slots:{default:[Sy]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment),n=te(),Q(s.$$.fragment),r=te(),Q(i.$$.fragment)},m(a,l){H(e,a,l),C(a,n,l),H(s,a,l),C(a,r,l),H(i,a,l),o=!0},p(a,l){const u={};l&16777216&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const c={};l&16777216&&(c.$$scope={dirty:l,ctx:a}),s.$set(c);const h={};l&16777216&&(h.$$scope={dirty:l,ctx:a}),i.$set(h)},i(a){o||(v(e.$$.fragment,a),v(s.$$.fragment,a),v(i.$$.fragment,a),o=!0)},o(a){b(e.$$.fragment,a),b(s.$$.fragment,a),b(i.$$.fragment,a),o=!1},d(a){K(e,a),a&&k(n),K(s,a),a&&k(r),K(i,a)}}}function Dy(t){let e,n;return{c(){e=pe("svg"),n=pe("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-5 h-5")},m(s,r){C(s,e,r),B(e,n)},p:X,d(s){s&&k(e)}}}function Ny(t){let e,n;return{c(){e=pe("svg"),n=pe("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-5 h-5")},m(s,r){C(s,e,r),B(e,n)},p:X,d(s){s&&k(e)}}}function Ry(t){let e,n,s,r;return e=new qt({props:{name:"Format code",$$slots:{default:[Dy]},$$scope:{ctx:t}}}),s=new qt({props:{name:"Add emoji",$$slots:{default:[Ny]},$$scope:{ctx:t}}}),s.$on("click",t[13]),{c(){Q(e.$$.fragment),n=te(),Q(s.$$.fragment)},m(i,o){H(e,i,o),C(i,n,o),H(s,i,o),r=!0},p(i,o){const a={};o&16777216&&(a.$$scope={dirty:o,ctx:i}),e.$set(a);const l={};o&16777216&&(l.$$scope={dirty:o,ctx:i}),s.$set(l)},i(i){r||(v(e.$$.fragment,i),v(s.$$.fragment,i),r=!0)},o(i){b(e.$$.fragment,i),b(s.$$.fragment,i),r=!1},d(i){K(e,i),i&&k(n),K(s,i)}}}function Ly(t){let e,n,s,r;return e=new Fo({props:{$$slots:{default:[Ay]},$$scope:{ctx:t}}}),s=new Fo({props:{$$slots:{default:[Ry]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment),n=te(),Q(s.$$.fragment)},m(i,o){H(e,i,o),C(i,n,o),H(s,i,o),r=!0},p(i,o){const a={};o&16777216&&(a.$$scope={dirty:o,ctx:i}),e.$set(a);const l={};o&16777218&&(l.$$scope={dirty:o,ctx:i}),s.$set(l)},i(i){r||(v(e.$$.fragment,i),v(s.$$.fragment,i),r=!0)},o(i){b(e.$$.fragment,i),b(s.$$.fragment,i),r=!1},d(i){K(e,i),i&&k(n),K(s,i)}}}function My(t){let e,n;return{c(){e=pe("svg"),n=pe("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-6 h-6")},m(s,r){C(s,e,r),B(e,n)},p:X,d(s){s&&k(e)}}}function Oy(t){let e,n;return e=new qt({props:{name:"send",slot:"end",form:"form1",type:"submit",$$slots:{default:[My]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,r){const i={};r&16777216&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function Py(t){let e,n;return e=new Af({props:{slot:"header",embedded:!0,$$slots:{end:[Oy],default:[Ly]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,r){const i={};r&16777218&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function Ba(t){let e,n,s,r,i,o,a,l,u,c=t[5],h=[];for(let d=0;d<c.length;d+=1)h[d]=ja(xa(t,c,d));let f=t[0],g=[];for(let d=0;d<f.length;d+=1)g[d]=za(Ua(t,f,d));return{c(){e=P("div"),n=P("header");for(let d=0;d<h.length;d+=1)h[d].c();s=te(),r=P("div"),r.textContent="X",i=te();for(let d=0;d<g.length;d+=1)g[d].c();m(r,"id","closer-icon"),m(r,"class","svelte-om1sb4"),m(n,"class","svelte-om1sb4"),m(e,"id","emoji-cont"),m(e,"class","svelte-om1sb4")},m(d,y){C(d,e,y),B(e,n);for(let p=0;p<h.length;p+=1)h[p].m(n,null);B(n,s),B(n,r),B(e,i);for(let p=0;p<g.length;p+=1)g[p].m(e,null);a=!0,l||(u=x(r,"click",t[15]),l=!0)},p(d,y){if(y&48){c=d[5];let p;for(p=0;p<c.length;p+=1){const _=xa(d,c,p);h[p]?h[p].p(_,y):(h[p]=ja(_),h[p].c(),h[p].m(n,s))}for(;p<h.length;p+=1)h[p].d(1);h.length=c.length}if(y&65){f=d[0];let p;for(p=0;p<f.length;p+=1){const _=Ua(d,f,p);g[p]?g[p].p(_,y):(g[p]=za(_),g[p].c(),g[p].m(e,null))}for(;p<g.length;p+=1)g[p].d(1);g.length=f.length}},i(d){a||(at(()=>{o||(o=Is(e,bo,{y:-30},!0)),o.run(1)}),a=!0)},o(d){o||(o=Is(e,bo,{y:-30},!1)),o.run(0),a=!1},d(d){d&&k(e),Wt(h,d),Wt(g,d),d&&o&&o.end(),l=!1,u()}}}function ja(t){let e,n=String.fromCodePoint(t[21])+"",s,r,i;return{c(){e=P("div"),s=ge(n),m(e,"data-id",t[23]),m(e,"class","svelte-om1sb4")},m(o,a){C(o,e,a),B(e,s),r||(i=x(e,"click",t[4]),r=!0)},p:X,d(o){o&&k(e),r=!1,i()}}}function za(t){let e,n=t[18]+"",s,r,i;return{c(){e=P("span"),s=ge(n),m(e,"class","svelte-om1sb4")},m(o,a){C(o,e,a),B(e,s),r||(i=x(e,"click",t[6]),r=!0)},p(o,a){a&1&&n!==(n=o[18]+"")&&Ye(s,n)},d(o){o&&k(e),r=!1,i()}}}function Vy(t){let e,n,s,r,i,o,a,l,u,c,h,f,g,d;n=new wo({props:{for:"select-underline",align:"left",class:"sr-only",$$slots:{default:[ky]},$$scope:{ctx:t}}});function y(L){t[12](L)}let p={id:"select",items:t[7],placeholder:"Selecione uma categoria",required:!0};t[3]!==void 0&&(p.value=t[3]),r=new Wh({props:p}),At.push(()=>vo(r,"value",y)),a=new wo({props:{for:"editor",align:"left",class:"sr-only",$$slots:{default:[Ty]},$$scope:{ctx:t}}});function _(L){t[14](L)}let I={id:"editor",rows:"3",placeholder:"Ex: Thiago comentou que sente saudades da ex",required:!0,$$slots:{header:[Py]},$$scope:{ctx:t}};t[2]!==void 0&&(I.value=t[2]),u=new tf({props:I}),At.push(()=>vo(u,"value",_));let A=t[1]&&Ba(t);return{c(){e=P("form"),Q(n.$$.fragment),s=te(),Q(r.$$.fragment),o=te(),Q(a.$$.fragment),l=te(),Q(u.$$.fragment),h=te(),A&&A.c(),m(e,"id","form1")},m(L,S){C(L,e,S),H(n,e,null),B(e,s),H(r,e,null),B(e,o),H(a,e,null),B(e,l),H(u,e,null),B(e,h),A&&A.m(e,null),f=!0,g||(d=x(e,"submit",Hc(t[8])),g=!0)},p(L,S){const me={};S&16777216&&(me.$$scope={dirty:S,ctx:L}),n.$set(me);const Re={};!i&&S&8&&(i=!0,Re.value=L[3],yo(()=>i=!1)),r.$set(Re);const qe={};S&16777216&&(qe.$$scope={dirty:S,ctx:L}),a.$set(qe);const ve={};S&16777218&&(ve.$$scope={dirty:S,ctx:L}),!c&&S&4&&(c=!0,ve.value=L[2],yo(()=>c=!1)),u.$set(ve),L[1]?A?(A.p(L,S),S&2&&v(A,1)):(A=Ba(L),A.c(),v(A,1),A.m(e,null)):A&&(Se(),b(A,1,1,()=>{A=null}),Ae())},i(L){f||(v(n.$$.fragment,L),v(r.$$.fragment,L),v(a.$$.fragment,L),v(u.$$.fragment,L),v(A),f=!0)},o(L){b(n.$$.fragment,L),b(r.$$.fragment,L),b(a.$$.fragment,L),b(u.$$.fragment,L),b(A),f=!1},d(L){L&&k(e),K(n),K(r),K(a),K(u),A&&A.d(),g=!1,d()}}}function Fy(t){let e,n;return e=new Vh({props:{style:"text-align:left;width:70rem; max-width:none; padding:0",class:"mt-4",$$slots:{default:[Vy]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,[r]){const i={};r&16777231&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function Uy(t,e,n){let s,r,i=[{type:"faces",minVal:128512,maxVal:128580},{type:"faces2",minVal:129296,maxVal:129327},{type:"body",minVal:128066,maxVal:128080},{type:"animals",minVal:129408,maxVal:129442},{type:"transport",minVal:128640,maxVal:128676},{type:"misc",minVal:129494,maxVal:129535}],o=0,a=[];const l=()=>n(0,a=[]),u=S=>{n(9,o=Number(S.target.dataset.id)),l()};let c=[128512,129313,128074,129417,128664,129504],h=!1,f;const g=S=>{n(2,f+=S.target.textContent)};let d=[{value:"Jogos",name:"Jogos"},{value:"Culinaria",name:"Culinaria"},{value:"Relacionamento",name:"Relacionamento"},{value:"Trabalho",name:"Trabalho"},{value:"Caracteristicas",name:"Caracteristicas"},{value:"Amigas(os)",name:"Amigas(os)"},{value:"Teatro",name:"Teatro"},{value:"Danca",name:"Danca"},{value:"Mensagem",name:"Mensagem"},{value:"Atual namorado",name:"Atual namorado"},{value:"Doen\xE7as",name:"Doen\xE7as"},{value:"Sentimentos",name:"Sentimentos"},{value:"Outros",name:"Outros"}],y;const p=async()=>{if(console.log(y),y&&f){const S=await gy(Ec(Vc,"ex"),{categoria:y,descricao:f,horario:vy()}).then(n(3,y=""),n(2,f=""));console.log("Document written with ID: ",S.id)}};function _(S){y=S,n(3,y)}const I=()=>n(1,h=!h);function A(S){f=S,n(2,f)}const L=()=>n(1,h=!1);return t.$$.update=()=>{if(t.$$.dirty&512&&n(11,s=i[o].minVal),t.$$.dirty&512&&n(10,r=i[o].maxVal),t.$$.dirty&3073)for(let S=s;S<=r;S++)n(0,a=[...a,String.fromCodePoint(S)])},[a,h,f,y,u,c,g,d,p,o,r,s,_,I,A,L]}class xy extends de{constructor(e){super(),fe(this,e,Uy,Fy,Z,{})}}function qa(t,e,n){const s=t.slice();return s[18]=e[n],s}function Ha(t){let e,n={length:t[6]},s=[];for(let r=0;r<n.length;r+=1)s[r]=Ka(qa(t,n,r));return{c(){e=P("div");for(let r=0;r<s.length;r+=1)s[r].c();m(e,"class","confetti-holder svelte-1jmtwvj"),ft(e,"rounded",t[9]),ft(e,"cone",t[10]),ft(e,"no-gravity",t[11])},m(r,i){C(r,e,i);for(let o=0;o<s.length;o+=1)s[o].m(e,null)},p(r,i){if(i&20991){n={length:r[6]};let o;for(o=0;o<n.length;o+=1){const a=qa(r,n,o);s[o]?s[o].p(a,i):(s[o]=Ka(a),s[o].c(),s[o].m(e,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=n.length}i&512&&ft(e,"rounded",r[9]),i&1024&&ft(e,"cone",r[10]),i&2048&&ft(e,"no-gravity",r[11])},d(r){r&&k(e),Wt(s,r)}}}function Ka(t){let e;return{c(){e=P("div"),m(e,"class","confetti svelte-1jmtwvj"),be(e,"--fall-distance",t[8]),be(e,"--size",t[0]+"px"),be(e,"--color",t[14]()),be(e,"--skew",He(-45,45)+"deg,"+He(-45,45)+"deg"),be(e,"--rotation-xyz",He(-10,10)+", "+He(-10,10)+", "+He(-10,10)),be(e,"--rotation-deg",He(0,360)+"deg"),be(e,"--translate-y-multiplier",He(t[2][0],t[2][1])),be(e,"--translate-x-multiplier",He(t[1][0],t[1][1])),be(e,"--scale",.1*He(2,10)),be(e,"--transition-duration",t[4]?`calc(${t[3]}ms * var(--scale))`:`${t[3]}ms`),be(e,"--transition-delay",He(t[5][0],t[5][1])+"ms"),be(e,"--transition-iteration-count",t[4]?"infinite":t[7]),be(e,"--x-spread",1-t[12])},m(n,s){C(n,e,s)},p(n,s){s&256&&be(e,"--fall-distance",n[8]),s&1&&be(e,"--size",n[0]+"px"),s&4&&be(e,"--translate-y-multiplier",He(n[2][0],n[2][1])),s&2&&be(e,"--translate-x-multiplier",He(n[1][0],n[1][1])),s&24&&be(e,"--transition-duration",n[4]?`calc(${n[3]}ms * var(--scale))`:`${n[3]}ms`),s&32&&be(e,"--transition-delay",He(n[5][0],n[5][1])+"ms"),s&144&&be(e,"--transition-iteration-count",n[4]?"infinite":n[7]),s&4096&&be(e,"--x-spread",1-n[12])},d(n){n&&k(e)}}}function By(t){let e,n=!t[13]&&Ha(t);return{c(){n&&n.c(),e=Ne()},m(s,r){n&&n.m(s,r),C(s,e,r)},p(s,[r]){s[13]?n&&(n.d(1),n=null):n?n.p(s,r):(n=Ha(s),n.c(),n.m(e.parentNode,e))},i:X,o:X,d(s){n&&n.d(s),s&&k(e)}}}function He(t,e){return Math.random()*(e-t)+t}function jy(t,e,n){let{size:s=10}=e,{x:r=[-.5,.5]}=e,{y:i=[.25,1]}=e,{duration:o=2e3}=e,{infinite:a=!1}=e,{delay:l=[0,50]}=e,{colorRange:u=[0,360]}=e,{colorArray:c=[]}=e,{amount:h=50}=e,{iterationCount:f=1}=e,{fallDistance:g="100px"}=e,{rounded:d=!1}=e,{cone:y=!1}=e,{noGravity:p=!1}=e,{xSpread:_=.15}=e,{destroyOnComplete:I=!0}=e,A=!1;ol(()=>{!I||a||f=="infinite"||setTimeout(()=>n(13,A=!0),(o+l[1])*f)});function L(){return c.length?c[Math.round(Math.random()*(c.length-1))]:`hsl(${Math.round(He(u[0],u[1]))}, 75%, 50%`}return t.$$set=S=>{"size"in S&&n(0,s=S.size),"x"in S&&n(1,r=S.x),"y"in S&&n(2,i=S.y),"duration"in S&&n(3,o=S.duration),"infinite"in S&&n(4,a=S.infinite),"delay"in S&&n(5,l=S.delay),"colorRange"in S&&n(15,u=S.colorRange),"colorArray"in S&&n(16,c=S.colorArray),"amount"in S&&n(6,h=S.amount),"iterationCount"in S&&n(7,f=S.iterationCount),"fallDistance"in S&&n(8,g=S.fallDistance),"rounded"in S&&n(9,d=S.rounded),"cone"in S&&n(10,y=S.cone),"noGravity"in S&&n(11,p=S.noGravity),"xSpread"in S&&n(12,_=S.xSpread),"destroyOnComplete"in S&&n(17,I=S.destroyOnComplete)},[s,r,i,o,a,l,h,f,g,d,y,p,_,A,L,u,c,I]}class zy extends de{constructor(e){super(),fe(this,e,jy,By,Z,{size:0,x:1,y:2,duration:3,infinite:4,delay:5,colorRange:15,colorArray:16,amount:6,iterationCount:7,fallDistance:8,rounded:9,cone:10,noGravity:11,xSpread:12,destroyOnComplete:17})}}function qy(t){let e,n,s,r,i,o;return i=new zy({props:{x:[-5,5],y:[0,.1],delay:[500,2e3],infinite:!0,duration:"5000",amount:"300",fallDistance:"100vh"}}),{c(){e=P("audio"),s=te(),r=P("div"),Q(i.$$.fragment),e.autoplay=!0,e.loop=!0,ks(e.src,n=Hy)||m(e,"src",n),m(r,"class","confete_div svelte-1al5p8i")},m(a,l){C(a,e,l),C(a,s,l),C(a,r,l),H(i,r,null),o=!0},p:X,i(a){o||(v(i.$$.fragment,a),o=!0)},o(a){b(i.$$.fragment,a),o=!1},d(a){a&&k(e),a&&k(s),a&&k(r),K(i)}}}const Hy="https://firebasestorage.googleapis.com/v0/b/thiagometro-bf771.appspot.com/o/thiagometroCorneta.mp3?alt=media&token=688add95-d3c0-4c5d-8095-62278480d8df";class Ky extends de{constructor(e){super(),fe(this,e,null,qy,Z,{})}}function Ga(t,e,n){const s=t.slice();return s[9]=e[n],s[11]=n,s}function Gy(t){let e,n,s,r,i,o,a,l,u;return{c(){e=ge("Estamos trabalhando h\xE1 "),n=P("span"),s=ge(t[1]),r=ge(":"),i=ge(t[0]),o=ge(`hrs sem men\xE7\xF5es da EX. (teste) O atual recorde \xE9 de
            `),a=P("span"),l=ge(t[3]),u=ge(" dias!!!"),m(n,"class","dias svelte-k62fvm"),m(a,"class","dias svelte-k62fvm")},m(c,h){C(c,e,h),C(c,n,h),B(n,s),B(n,r),B(n,i),C(c,o,h),C(c,a,h),B(a,l),C(c,u,h)},p(c,h){h&2&&Ye(s,c[1]),h&1&&Ye(i,c[0]),h&8&&Ye(l,c[3])},d(c){c&&k(e),c&&k(n),c&&k(o),c&&k(a),c&&k(u)}}}function Qy(t){let e;return{c(){e=ge("Thiagometro")},m(n,s){C(n,e,s)},d(n){n&&k(e)}}}function Wy(t){let e,n,s;return n=new gl({}),{c(){e=P("h1"),Q(n.$$.fragment),m(e,"class","contador svelte-k62fvm")},m(r,i){C(r,e,i),H(n,e,null),s=!0},p:X,i(r){s||(v(n.$$.fragment,r),s=!0)},o(r){b(n.$$.fragment,r),s=!1},d(r){r&&k(e),K(n)}}}function Xy(t){let e,n,s=t[2].length+"",r,i,o=(t[2].length%We==0||t[2].length%We==1||t[2].length%We==2||t[2].length%We==3||t[2].length%We==4||t[2].length%We==5)&&Qa();return{c(){o&&o.c(),e=te(),n=P("h1"),r=ge(s),m(n,"class","contador svelte-k62fvm")},m(a,l){o&&o.m(a,l),C(a,e,l),C(a,n,l),B(n,r),i=!0},p(a,l){a[2].length%We==0||a[2].length%We==1||a[2].length%We==2||a[2].length%We==3||a[2].length%We==4||a[2].length%We==5?o?l&4&&v(o,1):(o=Qa(),o.c(),v(o,1),o.m(e.parentNode,e)):o&&(Se(),b(o,1,1,()=>{o=null}),Ae()),(!i||l&4)&&s!==(s=a[2].length+"")&&Ye(r,s)},i(a){i||(v(o),i=!0)},o(a){b(o),i=!1},d(a){o&&o.d(a),a&&k(e),a&&k(n)}}}function Qa(t){let e,n;return e=new Ky({}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function Yy(t){let e,n;return e=new gl({}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p:X,i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function Jy(t){let e,n;return e=new bf({props:{style:"text-align:left;",$$slots:{default:[n1]},$$scope:{ctx:t}}}),{c(){Q(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,r){const i={};r&4100&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){K(e,s)}}}function Zy(t){let e="Observa\xE7\xE3o "+(t[11]+1),n;return{c(){n=ge(e)},m(s,r){C(s,n,r)},p:X,d(s){s&&k(n)}}}function $y(t){let e=t[9].data().descricao+"",n;return{c(){n=ge(e)},m(s,r){C(s,n,r)},p(s,r){r&4&&e!==(e=s[9].data().descricao+"")&&Ye(n,e)},d(s){s&&k(n)}}}function e1(t){var s;let e=new Date(((s=t[9].data().horario)==null?void 0:s.seconds)*1e3).toLocaleString()+"",n;return{c(){n=ge(e)},m(r,i){C(r,n,i)},p(r,i){var o;i&4&&e!==(e=new Date(((o=r[9].data().horario)==null?void 0:o.seconds)*1e3).toLocaleString()+"")&&Ye(n,e)},d(r){r&&k(n)}}}function t1(t){let e=t[9].data().categoria+"",n;return{c(){n=ge(e)},m(s,r){C(s,n,r)},p(s,r){r&4&&e!==(e=s[9].data().categoria+"")&&Ye(n,e)},d(s){s&&k(n)}}}function Wa(t){let e,n,s,r,i,o,a,l,u,c,h;return n=new wn({props:{size:"base",weight:"semibold",$$slots:{default:[Zy]},$$scope:{ctx:t}}}),r=new wn({props:{size:"base",color:"text-grey-500",$$slots:{default:[$y]},$$scope:{ctx:t}}}),o=new wn({props:{size:"sm",align:"center",$$slots:{default:[e1]},$$scope:{ctx:t}}}),l=new Nh({props:{large:!0,class:"inline-flex items-center justify-center -mb-0.5 rounded px-2.5 py-0.5 absolute font-bold border-2 border-white dark:border-gray-900  -top-3 -right-3",$$slots:{default:[t1]},$$scope:{ctx:t}}}),{c(){e=P("div"),Q(n.$$.fragment),s=te(),Q(r.$$.fragment),i=te(),Q(o.$$.fragment),a=te(),Q(l.$$.fragment),u=te(),m(e,"class","relative")},m(f,g){C(f,e,g),H(n,e,null),B(e,s),H(r,e,null),B(e,i),H(o,e,null),B(e,a),H(l,e,null),B(e,u),h=!0},p(f,g){const d={};g&4096&&(d.$$scope={dirty:g,ctx:f}),n.$set(d);const y={};g&4100&&(y.$$scope={dirty:g,ctx:f}),r.$set(y);const p={};g&4100&&(p.$$scope={dirty:g,ctx:f}),o.$set(p);const _={};g&4100&&(_.$$scope={dirty:g,ctx:f}),l.$set(_)},i(f){h||(v(n.$$.fragment,f),v(r.$$.fragment,f),v(o.$$.fragment,f),v(l.$$.fragment,f),c||at(()=>{c=th(e,lh,{duration:500}),c.start()}),h=!0)},o(f){b(n.$$.fragment,f),b(r.$$.fragment,f),b(o.$$.fragment,f),b(l.$$.fragment,f),h=!1},d(f){f&&k(e),K(n),K(r),K(o),K(l)}}}function n1(t){let e,n,s=t[2],r=[];for(let o=0;o<s.length;o+=1)r[o]=Wa(Ga(t,s,o));const i=o=>b(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Ne()},m(o,a){for(let l=0;l<r.length;l+=1)r[l].m(o,a);C(o,e,a),n=!0},p(o,a){if(a&4){s=o[2];let l;for(l=0;l<s.length;l+=1){const u=Ga(o,s,l);r[l]?(r[l].p(u,a),v(r[l],1)):(r[l]=Wa(u),r[l].c(),v(r[l],1),r[l].m(e.parentNode,e))}for(Se(),l=s.length;l<r.length;l+=1)i(l);Ae()}},i(o){if(!n){for(let a=0;a<s.length;a+=1)v(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)b(r[a]);n=!1},d(o){Wt(r,o),o&&k(e)}}}function s1(t){let e,n,s,r,i,o,a,l,u,c,h,f,g,d,y,p,_,I,A,L;s=new Sh({props:{src:"https://firebasestorage.googleapis.com/v0/b/thiagometro-bf771.appspot.com/o/thiago.png?alt=media&token=36a9ddbd-5475-4e9e-bfa1-0025debba8b2",size:"lg"}}),i=new Uo({props:{tag:"h2",class:"pl-5",$$slots:{default:[Gy]},$$scope:{ctx:t}}}),l=new Uo({props:{tag:"h1",customeSize:"font-extrabold ",$$slots:{default:[Qy]},$$scope:{ctx:t}}});const S=[Xy,Wy],me=[];function Re(w,ke){return w[2]?0:1}c=Re(t),h=me[c]=S[c](t);const qe=[Jy,Yy],ve=[];function $e(w,ke){return w[2]?0:1}return p=$e(t),_=ve[p]=qe[p](t),A=new xy({}),{c(){e=P("marquee"),n=P("div"),Q(s.$$.fragment),r=te(),Q(i.$$.fragment),o=te(),a=P("div"),Q(l.$$.fragment),u=te(),h.c(),f=te(),g=P("div"),g.innerHTML='<h5 class="text-xl font-bold leading-none text-gray-900 dark:text-white">Ultimas cita\xE7\xF5es</h5>',d=te(),y=P("div"),_.c(),I=te(),Q(A.$$.fragment),m(n,"class","container-teste svelte-k62fvm"),m(e,"scrollamount","15"),m(g,"class","flex justify-between items-center mb-4"),m(y,"class","container_lista p-5 svelte-k62fvm"),m(a,"class","flex-col svelte-k62fvm")},m(w,ke){C(w,e,ke),B(e,n),H(s,n,null),B(n,r),H(i,n,null),C(w,o,ke),C(w,a,ke),H(l,a,null),B(a,u),me[c].m(a,null),B(a,f),B(a,g),B(a,d),B(a,y),ve[p].m(y,null),B(a,I),H(A,a,null),L=!0},p(w,[ke]){const Vt={};ke&4107&&(Vt.$$scope={dirty:ke,ctx:w}),i.$set(Vt);const Ft={};ke&4096&&(Ft.$$scope={dirty:ke,ctx:w}),l.$set(Ft);let D=c;c=Re(w),c===D?me[c].p(w,ke):(Se(),b(me[D],1,1,()=>{me[D]=null}),Ae(),h=me[c],h?h.p(w,ke):(h=me[c]=S[c](w),h.c()),v(h,1),h.m(a,f));let hn=p;p=$e(w),p===hn?ve[p].p(w,ke):(Se(),b(ve[hn],1,1,()=>{ve[hn]=null}),Ae(),_=ve[p],_?_.p(w,ke):(_=ve[p]=qe[p](w),_.c()),v(_,1),_.m(y,null))},i(w){L||(v(s.$$.fragment,w),v(i.$$.fragment,w),v(l.$$.fragment,w),v(h),v(_),v(A.$$.fragment,w),L=!0)},o(w){b(s.$$.fragment,w),b(i.$$.fragment,w),b(l.$$.fragment,w),b(h),b(_),b(A.$$.fragment,w),L=!1},d(w){w&&k(e),K(s),K(i),w&&k(o),w&&k(a),K(l),me[c].d(),ve[p].d(),K(A)}}}const We=58;function r1(t,e,n){let s,r,i,o;const a=Ec(Vc,"ex"),l=oy(a,ly("horario","desc")),u=f=>{const y=(new Date-f)/(1e3*60*60*24);return y>=1?y:0},c=()=>{var f;return parseInt((new Date-new Date(((f=s[0].data().horario)==null?void 0:f.seconds)*1e3))/(1e3*60*60))},h=()=>{var f,g,d;return((new Date-new Date(((f=s[0].data().horario)==null?void 0:f.seconds)*1e3))/(1e3*60*60)%1*60).toFixed(0)>9?((new Date-new Date(((g=s[0].data().horario)==null?void 0:g.seconds)*1e3))/(1e3*60*60)%1*60).toFixed(0):"0"+((new Date-new Date(((d=s[0].data().horario)==null?void 0:d.seconds)*1e3))/(1e3*60*60)%1*60).toFixed(0)};return my(l,f=>{var d;n(2,s=f.docs);let g=new Date(((d=s[0].data().horario)==null?void 0:d.seconds)*1e3);n(3,r=u(g))}),ol(()=>{const f=setInterval(()=>{s?(n(1,i=c()),n(0,o=h())):console.log("teste")},1e3);return()=>{clearInterval(f)}}),n(2,s=null),n(3,r=void 0),n(1,i=void 0),n(0,o=void 0),[o,i,s,r]}class i1 extends de{constructor(e){super(),fe(this,e,r1,s1,Z,{})}}function o1(t){let e,n,s;return n=new i1({}),{c(){e=P("main"),Q(n.$$.fragment)},m(r,i){C(r,e,i),H(n,e,null),s=!0},p:X,i(r){s||(v(n.$$.fragment,r),s=!0)},o(r){b(n.$$.fragment,r),s=!1},d(r){r&&k(e),K(n)}}}class a1 extends de{constructor(e){super(),fe(this,e,null,o1,Z,{})}}new a1({target:document.getElementById("app")});
