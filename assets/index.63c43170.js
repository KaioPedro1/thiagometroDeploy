(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Y(){}const za=t=>t;function O(t,e){for(const n in e)t[n]=e[n];return t}function qa(t){return t()}function uo(){return Object.create(null)}function Xe(t){t.forEach(qa)}function At(t){return typeof t=="function"}function ee(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ss;function Or(t,e){return ss||(ss=document.createElement("a")),ss.href=e,t===ss.href}function Rc(t){return Object.keys(t).length===0}function Lc(t,...e){if(t==null)return Y;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Ha(t,e,n){t.$$.on_destroy.push(Lc(e,n))}function se(t,e,n,s){if(t){const r=Ka(t,e,n,s);return t[0](r)}}function Ka(t,e,n,s){return t[1]&&s?O(n.ctx.slice(),t[1](s(e))):n.ctx}function re(t,e,n,s){if(t[2]&&s){const r=t[2](s(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const i=[],o=Math.max(e.dirty.length,r.length);for(let a=0;a<o;a+=1)i[a]=e.dirty[a]|r[a];return i}return e.dirty|r}return e.dirty}function ie(t,e,n,s,r,i){if(r){const o=Ka(e,n,s,i);t.p(o,r)}}function oe(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function J(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function he(t,e){const n={};e=new Set(e);for(const s in t)!e.has(s)&&s[0]!=="$"&&(n[s]=t[s]);return n}function Ga(t){const e={};for(const n in t)e[n]=!0;return e}function Mc(t,e,n){return t.set(n),e}function di(t){return t&&At(t.destroy)?t.destroy:Y}const Qa=typeof window<"u";let Wa=Qa?()=>window.performance.now():()=>Date.now(),gi=Qa?t=>requestAnimationFrame(t):Y;const xt=new Set;function Xa(t){xt.forEach(e=>{e.c(t)||(xt.delete(e),e.f())}),xt.size!==0&&gi(Xa)}function Ya(t){let e;return xt.size===0&&gi(Xa),{promise:new Promise(n=>{xt.add(e={c:t,f:n})}),abort(){xt.delete(e)}}}function x(t,e){t.appendChild(e)}function Ja(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Oc(t){const e=U("style");return Pc(Ja(t),e),e.sheet}function Pc(t,e){return x(t.head||t,e),e.sheet}function C(t,e,n){t.insertBefore(e,n||null)}function T(t){t.parentNode&&t.parentNode.removeChild(t)}function kn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function U(t){return document.createElement(t)}function ge(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function fe(t){return document.createTextNode(t)}function te(){return fe(" ")}function Me(){return fe("")}function F(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function Vc(t){return function(e){return e.preventDefault(),t.call(this,e)}}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function ae(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const s in e)e[s]==null?t.removeAttribute(s):s==="style"?t.style.cssText=e[s]:s==="__value"?t.value=t[s]=e[s]:n[s]&&n[s].set?t[s]=e[s]:m(t,s,e[s])}function He(t,e){Object.keys(e).forEach(n=>{Fc(t,n,e[n])})}function Fc(t,e,n){e in t?t[e]=typeof t[e]=="boolean"&&n===""?!0:n:m(t,e,n)}function xc(t){return Array.from(t.childNodes)}function Qe(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function co(t,e){t.value=e==null?"":e}function rs(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}t.selectedIndex=-1}function ho(t,e){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];s.selected=~e.indexOf(s.__value)}}function Uc(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function fo(t,e,n){t.classList[n?"add":"remove"](e)}function Za(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,s,e),r}const vs=new Map;let bs=0;function Bc(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function jc(t,e){const n={stylesheet:Oc(e),rules:{}};return vs.set(t,n),n}function Pr(t,e,n,s,r,i,o,a=0){const l=16.666/s;let u=`{
`;for(let p=0;p<=1;p+=l){const b=e+(n-e)*i(p);u+=p*100+`%{${o(b,1-b)}}
`}const c=u+`100% {${o(n,1-n)}}
}`,h=`__svelte_${Bc(c)}_${a}`,f=Ja(t),{stylesheet:g,rules:d}=vs.get(f)||jc(f,t);d[h]||(d[h]=!0,g.insertRule(`@keyframes ${h} ${c}`,g.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${h} ${s}ms linear ${r}ms 1 both`,bs+=1,h}function Vr(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),r=n.length-s.length;r&&(t.style.animation=s.join(", "),bs-=r,bs||zc())}function zc(){gi(()=>{bs||(vs.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&T(e)}),vs.clear())})}let En;function gn(t){En=t}function Bs(){if(!En)throw new Error("Function called outside component initialization");return En}function qc(t){Bs().$$.on_mount.push(t)}function Hc(){const t=Bs();return(e,n,{cancelable:s=!1}={})=>{const r=t.$$.callbacks[e];if(r){const i=Za(e,n,{cancelable:s});return r.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}function _s(t,e){return Bs().$$.context.set(t,e),e}function Un(t){return Bs().$$.context.get(t)}function R(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(s=>s.call(this,e))}const un=[],Tt=[],fs=[],Fr=[],Kc=Promise.resolve();let xr=!1;function Gc(){xr||(xr=!0,Kc.then($a))}function rt(t){fs.push(t)}function go(t){Fr.push(t)}const fr=new Set;let is=0;function $a(){const t=En;do{for(;is<un.length;){const e=un[is];is++,gn(e),Qc(e.$$)}for(gn(null),un.length=0,is=0;Tt.length;)Tt.pop()();for(let e=0;e<fs.length;e+=1){const n=fs[e];fr.has(n)||(fr.add(n),n())}fs.length=0}while(un.length);for(;Fr.length;)Fr.pop()();xr=!1,fr.clear(),gn(t)}function Qc(t){if(t.fragment!==null){t.update(),Xe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(rt)}}let an;function el(){return an||(an=Promise.resolve(),an.then(()=>{an=null})),an}function mn(t,e,n){t.dispatchEvent(Za(`${e?"intro":"outro"}${n}`))}const ds=new Set;let et;function Re(){et={r:0,c:[],p:et}}function Le(){et.r||Xe(et.c),et=et.p}function v(t,e){t&&t.i&&(ds.delete(t),t.i(e))}function _(t,e,n,s){if(t&&t.o){if(ds.has(t))return;ds.add(t),et.c.push(()=>{ds.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}const tl={duration:0};function Wc(t,e,n){let s=e(t,n),r=!1,i,o,a=0;function l(){i&&Vr(t,i)}function u(){const{delay:h=0,duration:f=300,easing:g=za,tick:d=Y,css:y}=s||tl;y&&(i=Pr(t,0,1,f,h,g,y,a++)),d(0,1);const p=Wa()+h,b=p+f;o&&o.abort(),r=!0,rt(()=>mn(t,!0,"start")),o=Ya(I=>{if(r){if(I>=b)return d(1,0),mn(t,!0,"end"),l(),r=!1;if(I>=p){const S=g((I-p)/f);d(S,1-S)}}return r})}let c=!1;return{start(){c||(c=!0,Vr(t),At(s)?(s=s(),el().then(u)):u())},invalidate(){c=!1},end(){r&&(l(),r=!1)}}}function ws(t,e,n,s){let r=e(t,n),i=s?0:1,o=null,a=null,l=null;function u(){l&&Vr(t,l)}function c(f,g){const d=f.b-i;return g*=Math.abs(d),{a:i,b:f.b,d,duration:g,start:f.start,end:f.start+g,group:f.group}}function h(f){const{delay:g=0,duration:d=300,easing:y=za,tick:p=Y,css:b}=r||tl,I={start:Wa()+g,b:f};f||(I.group=et,et.r+=1),o||a?a=I:(b&&(u(),l=Pr(t,i,f,d,g,y,b)),f&&p(0,1),o=c(I,d),rt(()=>mn(t,f,"start")),Ya(S=>{if(a&&S>a.start&&(o=c(a,d),a=null,mn(t,o.b,"start"),b&&(u(),l=Pr(t,i,o.b,o.duration,0,y,r.css))),o){if(S>=o.end)p(i=o.b,1-i),mn(t,o.b,"end"),a||(o.b?u():--o.group.r||Xe(o.group.c)),o=null;else if(S>=o.start){const P=S-o.start;i=o.a+o.d*y(P/o.duration),p(i,1-i)}}return!!(o||a)}))}return{run(f){At(r)?el().then(()=>{r=r(),h(f)}):h(f)},end(){u(),o=a=null}}}function Oe(t,e){const n={},s={},r={$$scope:1};let i=t.length;for(;i--;){const o=t[i],a=e[i];if(a){for(const l in o)l in a||(s[l]=1);for(const l in a)r[l]||(n[l]=a[l],r[l]=1);t[i]=a}else for(const l in o)r[l]=1}for(const o in s)o in n||(n[o]=void 0);return n}function js(t){return typeof t=="object"&&t!==null?t:{}}function mo(t,e,n){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,n(t.$$.ctx[s]))}function W(t){t&&t.c()}function K(t,e,n,s){const{fragment:r,after_update:i}=t.$$;r&&r.m(e,n),s||rt(()=>{const o=t.$$.on_mount.map(qa).filter(At);t.$$.on_destroy?t.$$.on_destroy.push(...o):Xe(o),t.$$.on_mount=[]}),i.forEach(rt)}function G(t,e){const n=t.$$;n.fragment!==null&&(Xe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Xc(t,e){t.$$.dirty[0]===-1&&(un.push(t),Gc(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function pe(t,e,n,s,r,i,o,a=[-1]){const l=En;gn(t);const u=t.$$={fragment:null,ctx:[],props:i,update:Y,not_equal:r,bound:uo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:uo(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(u.root);let c=!1;if(u.ctx=n?n(t,e.props||{},(h,f,...g)=>{const d=g.length?g[0]:f;return u.ctx&&r(u.ctx[h],u.ctx[h]=d)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](d),c&&Xc(t,h)),f}):[],u.update(),c=!0,Xe(u.before_update),u.fragment=s?s(u.ctx):!1,e.target){if(e.hydrate){const h=xc(e.target);u.fragment&&u.fragment.l(h),h.forEach(T)}else u.fragment&&u.fragment.c();e.intro&&v(t.$$.fragment),K(t,e.target,e.anchor,e.customElement),$a()}gn(l)}class ye{$destroy(){G(this,1),this.$destroy=Y}$on(e,n){if(!At(n))return Y;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const r=s.indexOf(n);r!==-1&&s.splice(r,1)}}$set(e){this.$$set&&!Rc(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ot=[];function Yc(t,e=Y){let n;const s=new Set;function r(a){if(ee(t,a)&&(t=a,n)){const l=!Ot.length;for(const u of s)u[1](),Ot.push(u,t);if(l){for(let u=0;u<Ot.length;u+=2)Ot[u][0](Ot[u+1]);Ot.length=0}}}function i(a){r(a(t))}function o(a,l=Y){const u=[a,l];return s.add(u),s.size===1&&(n=e(r)||Y),a(t),()=>{s.delete(u),s.size===0&&(n(),n=null)}}return{set:r,update:i,subscribe:o}}var nl={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s=[],r=0;r<arguments.length;r++){var i=arguments[r];if(!!i){var o=typeof i;if(o==="string"||o==="number")s.push(i);else if(Array.isArray(i)){if(i.length){var a=n.apply(null,i);a&&s.push(a)}}else if(o==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){s.push(i.toString());continue}for(var l in i)e.call(i,l)&&i[l]&&s.push(l)}}}return s.join(" ")}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(nl);const le=nl.exports;function Jc(t){let e=t[1],n,s,r=t[1]&&dr(t);return{c(){r&&r.c(),n=Me()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,o){i[1]?e?ee(e,i[1])?(r.d(1),r=dr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=dr(i),r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null),e=i[1]},i(i){s||(v(r),s=!0)},o(i){_(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function Zc(t){let e=t[1],n,s,r=t[1]&&gr(t);return{c(){r&&r.c(),n=Me()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,o){i[1]?e?ee(e,i[1])?(r.d(1),r=gr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=gr(i),r.c(),v(r),r.m(n.parentNode,n)):e&&(Re(),_(r,1,1,()=>{r=null}),Le()),e=i[1]},i(i){s||(v(r),s=!0)},o(i){_(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function dr(t){let e,n,s,r,i;const o=t[13].default,a=se(o,t,t[12],null);let l=[t[7],{class:t[6]}],u={};for(let c=0;c<l.length;c+=1)u=O(u,l[c]);return{c(){e=U(t[1]),a&&a.c(),/-/.test(t[1])?He(e,u):ae(e,u)},m(c,h){C(c,e,h),a&&a.m(e,null),t[23](e),s=!0,r||(i=[di(n=t[4].call(null,e,t[5])),F(e,"mouseenter",t[18]),F(e,"mouseleave",t[19]),F(e,"focusin",t[20]),F(e,"focusout",t[21])],r=!0)},p(c,h){a&&a.p&&(!s||h&4096)&&ie(a,o,c,c[12],s?re(o,c[12],h,null):oe(c[12]),null),u=Oe(l,[h&128&&c[7],(!s||h&64)&&{class:c[6]}]),/-/.test(c[1])?He(e,u):ae(e,u),n&&At(n.update)&&h&32&&n.update.call(null,c[5])},i(c){s||(v(a,c),s=!0)},o(c){_(a,c),s=!1},d(c){c&&T(e),a&&a.d(c),t[23](null),r=!1,Xe(i)}}}function gr(t){let e,n,s,r,i,o;const a=t[13].default,l=se(a,t,t[12],null);let u=[t[7],{class:t[6]}],c={};for(let h=0;h<u.length;h+=1)c=O(c,u[h]);return{c(){e=U(t[1]),l&&l.c(),/-/.test(t[1])?He(e,c):ae(e,c)},m(h,f){C(h,e,f),l&&l.m(e,null),t[22](e),r=!0,i||(o=[di(n=t[4].call(null,e,t[5])),F(e,"mouseenter",t[14]),F(e,"mouseleave",t[15]),F(e,"focusin",t[16]),F(e,"focusout",t[17])],i=!0)},p(h,f){t=h,l&&l.p&&(!r||f&4096)&&ie(l,a,t,t[12],r?re(a,t[12],f,null):oe(t[12]),null),c=Oe(u,[f&128&&t[7],(!r||f&64)&&{class:t[6]}]),/-/.test(t[1])?He(e,c):ae(e,c),n&&At(n.update)&&f&32&&n.update.call(null,t[5])},i(h){r||(v(l,h),rt(()=>{s||(s=ws(e,t[2],t[3],!0)),s.run(1)}),r=!0)},o(h){_(l,h),s||(s=ws(e,t[2],t[3],!1)),s.run(0),r=!1},d(h){h&&T(e),l&&l.d(h),t[22](null),h&&s&&s.end(),i=!1,Xe(o)}}}function $c(t){let e,n,s,r;const i=[Zc,Jc],o=[];function a(l,u){return l[2]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Me()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(Re(),_(o[c],1,1,()=>{o[c]=null}),Le(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),v(n,1),n.m(s.parentNode,s))},i(l){r||(v(n),r=!0)},o(l){_(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function eh(t,e,n){const s=["tag","color","rounded","border","shadow","transition","params","node","use","options"];let r=he(e,s),{$$slots:i={},$$scope:o}=e;_s("background",!0);let{tag:a="div"}=e,{color:l="default"}=e,{rounded:u=!1}=e,{border:c=!1}=e,{shadow:h=!1}=e,{transition:f=void 0}=e,{params:g={}}=e,{node:d=void 0}=e,{use:y=Y}=e,{options:p={}}=e;const b={gray:"bg-gray-100 dark:bg-gray-200 ",red:"bg-red-100 dark:bg-red-200",yellow:"bg-yellow-100 dark:bg-yellow-200 ",green:"bg-green-100 dark:bg-green-200 ",indigo:"bg-indigo-100 dark:bg-indigo-200 ",purple:"bg-purple-100 dark:bg-purple-200 ",pink:"bg-pink-100 dark:bg-pink-200 ",blue:"bg-blue-100 dark:bg-blue-200 ",light:"bg-gray-50 dark:bg-gray-700",dark:"bg-gray-100 dark:bg-gray-700",default:"bg-white dark:bg-gray-800",dropdown:"bg-white dark:bg-gray-700",navbar:"bg-white dark:bg-gray-900",navbarUl:"bg-gray-50 dark:bg-gray-800",form:"bg-gray-50 dark:bg-gray-700",primary:"bg-primary-100 dark:bg-primary-200 ",none:""},I={gray:"text-gray-700 dark:text-gray-800",red:"text-red-700 dark:text-red-800",yellow:"text-yellow-700 dark:text-yellow-800",green:"text-green-700 dark:text-green-800",indigo:"text-indigo-700 dark:text-indigo-800",purple:"text-purple-700 dark:text-purple-800",pink:"text-pink-700 dark:text-pink-800",blue:"text-blue-700 dark:text-blue-800",light:"text-gray-700 dark:text-gray-300",dark:"text-gray-700 dark:text-gray-300",default:"text-gray-500 dark:text-gray-400",dropdown:"text-gray-700 dark:text-gray-200",navbar:"text-gray-700 dark:text-gray-200",navbarUl:"text-gray-700 dark:text-gray-400",form:"text-gray-900 dark:text-white",primary:"text-primary-700 dark:text-primary-800",none:""},S={gray:"border-gray-500 dark:bg-gray-200 ",red:"border-red-500 dark:bg-red-200 ",yellow:"border-yellow-500 dark:bg-tellow-200 ",green:"border-green-500 dark:bg-green-200 ",indigo:"border-indigo-500 dark:bg-indigo-200 ",purple:"border-purple-500 dark:bg-purple-200 ",pink:"border-pink-500 dark:bg-pink-200 ",blue:"border-blue-500 dark:bg-blue-200 ",light:"border-gray-500",dark:"border-gray-500",default:"border-gray-200 dark:border-gray-700",dropdown:"border-gray-100 dark:border-gray-700",navbar:"border-gray-100 dark:border-gray-700",navbarUl:"border-gray-100 dark:border-gray-700",form:"border-gray-300 dark:border-gray-700",primary:"border-primary-500 dark:bg-primary-200 ",none:""};let P;function j(A){R.call(this,t,A)}function de(A){R.call(this,t,A)}function Se(A){R.call(this,t,A)}function ze(A){R.call(this,t,A)}function ve(A){R.call(this,t,A)}function Ye(A){R.call(this,t,A)}function w(A){R.call(this,t,A)}function we(A){R.call(this,t,A)}function Lt(A){Tt[A?"unshift":"push"](()=>{d=A,n(0,d)})}function Mt(A){Tt[A?"unshift":"push"](()=>{d=A,n(0,d)})}return t.$$set=A=>{n(27,e=O(O({},e),J(A))),n(7,r=he(e,s)),"tag"in A&&n(1,a=A.tag),"color"in A&&n(8,l=A.color),"rounded"in A&&n(9,u=A.rounded),"border"in A&&n(10,c=A.border),"shadow"in A&&n(11,h=A.shadow),"transition"in A&&n(2,f=A.transition),"params"in A&&n(3,g=A.params),"node"in A&&n(0,d=A.node),"use"in A&&n(4,y=A.use),"options"in A&&n(5,p=A.options),"$$scope"in A&&n(12,o=A.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&_s("color",l),n(6,P=le(b[l],I[l],u&&(l==="dropdown"?"rounded":"rounded-lg"),c&&"border",S[l],h&&"shadow-md",e.class))},e=J(e),[d,a,f,g,y,p,P,r,l,u,c,h,o,i,j,de,Se,ze,ve,Ye,w,we,Lt,Mt]}class sl extends ye{constructor(e){super(),pe(this,e,eh,$c,ee,{tag:1,color:8,rounded:9,border:10,shadow:11,transition:2,params:3,node:0,use:4,options:5})}}function rl(t){const e=t-1;return e*e*e+1}function po(t,{delay:e=0,duration:n=400,easing:s=rl,x:r=0,y:i=0,opacity:o=0}={}){const a=getComputedStyle(t),l=+a.opacity,u=a.transform==="none"?"":a.transform,c=l*(1-o);return{delay:e,duration:n,easing:s,css:(h,f)=>`
			transform: ${u} translate(${(1-h)*r}px, ${(1-h)*i}px);
			opacity: ${l-c*f}`}}function th(t,{delay:e=0,duration:n=400,easing:s=rl,start:r=0,opacity:i=0}={}){const o=getComputedStyle(t),a=+o.opacity,l=o.transform==="none"?"":o.transform,u=1-r,c=a*(1-i);return{delay:e,duration:n,easing:s,css:(h,f)=>`
			transform: ${l} scale(${1-u*f});
			opacity: ${a-c*f}
		`}}function nh(t){let e,n,s,r,i,o;return{c(){e=U("span"),n=fe(t[0]),s=te(),r=ge("svg"),i=ge("path"),m(e,"class","sr-only"),m(i,"fill-rule","evenodd"),m(i,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),m(i,"clip-rule","evenodd"),m(r,"class",o=t[3][t[1]]),m(r,"fill","currentColor"),m(r,"viewBox","0 0 20 20"),m(r,"xmlns","http://www.w3.org/2000/svg")},m(a,l){C(a,e,l),x(e,n),C(a,s,l),C(a,r,l),x(r,i)},p(a,l){l&1&&Qe(n,a[0]),l&2&&o!==(o=a[3][a[1]])&&m(r,"class",o)},d(a){a&&T(e),a&&T(s),a&&T(r)}}}function sh(t){let e,n,s,r;const i=t[6].default,o=se(i,t,t[5],null),a=o||nh(t);return{c(){e=U("button"),a&&a.c(),m(e,"type","button"),m(e,"class",t[2]),m(e,"aria-label","Close")},m(l,u){C(l,e,u),a&&a.m(e,null),n=!0,s||(r=F(e,"click",t[7]),s=!0)},p(l,[u]){o?o.p&&(!n||u&32)&&ie(o,i,l,l[5],n?re(i,l[5],u,null):oe(l[5]),null):a&&a.p&&(!n||u&3)&&a.p(l,n?u:-1),(!n||u&4)&&m(e,"class",l[2])},i(l){n||(v(a,l),n=!0)},o(l){_(a,l),n=!1},d(l){l&&T(e),a&&a.d(l),s=!1,r()}}}function rh(t,e,n){let{$$slots:s={},$$scope:r}=e;const i=Un("background");let{color:o="default"}=e,{name:a="Close"}=e,{size:l="md"}=e;const u={dark:"hover:text-gray-900 hover:bg-gray-100 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600",gray:"focus:ring-gray-400 hover:bg-gray-200 dark:hover:bg-gray-300",red:"focus:ring-red-400 hover:bg-red-200 dark:hover:bg-red-300",yellow:"focus:ring-yellow-400 hover:bg-yellow-200 dark:hover:bg-yellow-300",green:"focus:ring-green-400 hover:bg-green-200 dark:hover:bg-green-300",indigo:"focus:ring-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-300",purple:"focus:ring-purple-400 hover:bg-purple-200 dark:hover:bg-purple-300",pink:"focus:ring-pink-400 hover:bg-pink-200 dark:hover:bg-pink-300",blue:"focus:ring-blue-400 hover:bg-blue-200 dark:hover:bg-blue-300",default:"focus:ring-gray-300 "},c={xs:"m-0.5 rounded focus:ring-1 p-0.5",sm:"m-0.5 rounded focus:ring-1 p-0.5",md:"rounded-lg focus:ring-2 p-1.5"};let h="";const f={xs:"w-3 h-3",sm:"w-3.5 h-3.5",md:"w-5 h-5"};function g(d){R.call(this,t,d)}return t.$$set=d=>{n(11,e=O(O({},e),J(d))),"color"in d&&n(4,o=d.color),"name"in d&&n(0,a=d.name),"size"in d&&n(1,l=d.size),"$$scope"in d&&n(5,r=d.$$scope)},t.$$.update=()=>{n(2,h=le("ml-auto focus:outline-none whitespace-normal",c[l],u[o],o==="default"&&(i?"hover:bg-gray-100 dark:hover:bg-gray-600":"hover:bg-gray-100 dark:hover:bg-gray-700"),e.class))},e=J(e),[a,l,h,f,o,r,s,g]}class ih extends ye{constructor(e){super(),pe(this,e,rh,sh,ee,{color:4,name:0,size:1})}}function oh(t){let e,n,s;return{c(){e=ge("svg"),n=ge("path"),m(n,"fill-rule","evenodd"),m(n,"d","M8 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z"),m(n,"clip-rule","evenodd"),m(e,"class",s="text-gray-400 bg-gray-100 dark:bg-gray-600 "+(t[0]?"rounded":"rounded-full")),m(e,"fill","currentColor"),m(e,"viewBox","0 0 16 16"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(r,i){C(r,e,i),x(e,n)},p(r,[i]){i&1&&s!==(s="text-gray-400 bg-gray-100 dark:bg-gray-600 "+(r[0]?"rounded":"rounded-full"))&&m(e,"class",s)},i:Y,o:Y,d(r){r&&T(e)}}}function ah(t,e,n){let{rounded:s=!1}=e;return t.$$set=r=>{"rounded"in r&&n(0,s=r.rounded)},[s]}class lh extends ye{constructor(e){super(),pe(this,e,ah,oh,ee,{rounded:0})}}function uh(t){let e;const n=t[8].default,s=se(n,t,t[7],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&128)&&ie(s,n,r,r[7],e?re(n,r[7],i,null):oe(r[7]),null)},i(r){e||(v(s,r),e=!0)},o(r){_(s,r),e=!1},d(r){s&&s.d(r)}}}function ch(t){let e,n,s,r;const i=t[8].default,o=se(i,t,t[7],null);return{c(){e=U("div"),o&&o.c(),n=te(),s=U("span"),m(s,"class",t[1]),m(e,"class",t[2])},m(a,l){C(a,e,l),o&&o.m(e,null),x(e,n),x(e,s),r=!0},p(a,l){o&&o.p&&(!r||l&128)&&ie(o,i,a,a[7],r?re(i,a[7],l,null):oe(a[7]),null),(!r||l&2)&&m(s,"class",a[1]),(!r||l&4)&&m(e,"class",a[2])},i(a){r||(v(o,a),r=!0)},o(a){_(o,a),r=!1},d(a){a&&T(e),o&&o.d(a)}}}function hh(t){let e,n,s,r;const i=[ch,uh],o=[];function a(l,u){return l[0]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Me()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(Re(),_(o[c],1,1,()=>{o[c]=null}),Le(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),v(n,1),n.m(s.parentNode,s))},i(l){r||(v(n),r=!0)},o(l){_(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function fh(t,e,n){let{$$slots:s={},$$scope:r}=e,{show:i=!1}=e,{top:o=!1}=e,{color:a="bg-gray-300 dark:bg-gray-500"}=e,{rounded:l=!1}=e,{size:u="md"}=e;const c={xs:"w-2.5 h-2.5",sm:"w-3 h-3",md:"w-3.5 h-3.5",lg:"w-6 h-6",xl:"w-10 h-10"},h={xs:["left-4","left-5"],sm:["left-6","left-6"],md:["left-7","left-8"],lg:["left-14","left-16"],xl:["left-24","left-32"]};let f,g;return t.$$set=d=>{n(11,e=O(O({},e),J(d))),"show"in d&&n(0,i=d.show),"top"in d&&n(3,o=d.top),"color"in d&&n(4,a=d.color),"rounded"in d&&n(5,l=d.rounded),"size"in d&&n(6,u=d.size),"$$scope"in d&&n(7,r=d.$$scope)},t.$$.update=()=>{t.$$.dirty&120&&n(1,f=le("absolute rounded-full border-white dark:border-gray-800 border-2",c[u],h[u][+l],o?"top-0":"bottom-0",l&&o&&"transform -translate-y-1/2",l&&!o&&"transform translate-y-1/4",a)),n(2,g=le("relative flex-shrink-0",e.class))},e=J(e),[i,f,g,o,a,l,u,r,s]}class dh extends ye{constructor(e){super(),pe(this,e,fh,hh,ee,{show:0,top:3,color:4,rounded:5,size:6})}}function gh(t){let e=t[1]?"a":"div",n,s=(t[1]?"a":"div")&&mr(t);return{c(){s&&s.c(),n=Me()},m(r,i){s&&s.m(r,i),C(r,n,i)},p(r,i){r[1],e?ee(e,r[1]?"a":"div")?(s.d(1),s=mr(r),s.c(),s.m(n.parentNode,n)):s.p(r,i):(s=mr(r),s.c(),s.m(n.parentNode,n)),e=r[1]?"a":"div"},i:Y,o(r){_(s)},d(r){r&&T(n),s&&s.d(r)}}}function mh(t){let e=t[1]?"a":"div",n,s,r=(t[1]?"a":"div")&&pr(t);return{c(){r&&r.c(),n=Me()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,o){i[1],e?ee(e,i[1]?"a":"div")?(r.d(1),r=pr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=pr(i),r.c(),r.m(n.parentNode,n)),e=i[1]?"a":"div"},i(i){s||(v(r),s=!0)},o(i){_(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function ph(t){let e,n,s=[{alt:t[4]},{src:n=t[0]},t[9],{class:t[6]}],r={};for(let i=0;i<s.length;i+=1)r=O(r,s[i]);return{c(){e=U("img"),ae(e,r)},m(i,o){C(i,e,o)},p(i,o){ae(e,r=Oe(s,[o&16&&{alt:i[4]},o&1&&!Or(e.src,n=i[0])&&{src:n},o&512&&i[9],o&64&&{class:i[6]}]))},i:Y,o:Y,d(i){i&&T(e)}}}function mr(t){let e,n,s;n=new lh({props:{rounded:t[2]}});let r=[t[9],{class:t[6]}],i={};for(let o=0;o<r.length;o+=1)i=O(i,r[o]);return{c(){e=U(t[1]?"a":"div"),W(n.$$.fragment),/-/.test(t[1]?"a":"div")?He(e,i):ae(e,i)},m(o,a){C(o,e,a),K(n,e,null),s=!0},p(o,a){const l={};a&4&&(l.rounded=o[2]),n.$set(l),i=Oe(r,[a&512&&o[9],(!s||a&64)&&{class:o[6]}]),/-/.test(o[1]?"a":"div")?He(e,i):ae(e,i)},i(o){s||(v(n.$$.fragment,o),s=!0)},o(o){_(n.$$.fragment,o),s=!1},d(o){o&&T(e),G(n)}}}function pr(t){let e,n,s;const r=t[13].default,i=se(r,t,t[14],null);let o=[{href:t[1]},t[9],{class:n="flex justify-center items-center text-xs font-medium "+t[6]}],a={};for(let l=0;l<o.length;l+=1)a=O(a,o[l]);return{c(){e=U(t[1]?"a":"div"),i&&i.c(),/-/.test(t[1]?"a":"div")?He(e,a):ae(e,a)},m(l,u){C(l,e,u),i&&i.m(e,null),s=!0},p(l,u){i&&i.p&&(!s||u&16384)&&ie(i,r,l,l[14],s?re(r,l[14],u,null):oe(l[14]),null),a=Oe(o,[(!s||u&2)&&{href:l[1]},u&512&&l[9],(!s||u&64&&n!==(n="flex justify-center items-center text-xs font-medium "+l[6]))&&{class:n}]),/-/.test(l[1]?"a":"div")?He(e,a):ae(e,a)},i(l){s||(v(i,l),s=!0)},o(l){_(i,l),s=!1},d(l){l&&T(e),i&&i.d(l)}}}function yh(t){let e,n,s,r;const i=[ph,mh,gh],o=[];function a(l,u){return l[0]?0:l[10].default?1:2}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Me()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,u){let c=e;e=a(l),e===c?o[e].p(l,u):(Re(),_(o[c],1,1,()=>{o[c]=null}),Le(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),v(n,1),n.m(s.parentNode,s))},i(l){r||(v(n),r=!0)},o(l){_(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function vh(t){let e,n;const s=[{show:t[8].dot},{rounded:t[2]},t[3],{size:t[5]},{class:t[7][t[5]]}];let r={$$slots:{default:[yh]},$$scope:{ctx:t}};for(let i=0;i<s.length;i+=1)r=O(r,s[i]);return e=new dh({props:r}),{c(){W(e.$$.fragment)},m(i,o){K(e,i,o),n=!0},p(i,[o]){const a=o&428?Oe(s,[o&256&&{show:i[8].dot},o&4&&{rounded:i[2]},o&8&&js(i[3]),o&32&&{size:i[5]},o&160&&{class:i[7][i[5]]}]):{};o&18007&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){_(e.$$.fragment,i),n=!1},d(i){G(e,i)}}}function bh(t,e,n){const s=["src","href","rounded","border","stacked","dot","alt","size"];let r=he(e,s),{$$slots:i={},$$scope:o}=e;const a=Ga(i);let{src:l=""}=e,{href:u="#"}=e,{rounded:c=!1}=e,{border:h=!1}=e,{stacked:f=!1}=e,{dot:g={top:!1,color:"bg-gray-300 dark:bg-gray-500"}}=e,{alt:d=""}=e,{size:y="md"}=e;const p={xs:"w-6 h-6",sm:"w-8 h-8",md:"w-10 h-10",lg:"w-20 h-20",xl:"w-36 h-36"};let b;return t.$$set=I=>{n(8,e=O(O({},e),J(I))),n(9,r=he(e,s)),"src"in I&&n(0,l=I.src),"href"in I&&n(1,u=I.href),"rounded"in I&&n(2,c=I.rounded),"border"in I&&n(11,h=I.border),"stacked"in I&&n(12,f=I.stacked),"dot"in I&&n(3,g=I.dot),"alt"in I&&n(4,d=I.alt),"size"in I&&n(5,y=I.size),"$$scope"in I&&n(14,o=I.$$scope)},t.$$.update=()=>{n(6,b=le(c?"rounded":"rounded-full",h&&"p-1 ring-2 ring-gray-300 dark:ring-gray-500",p[y],f&&"border-2 -ml-4 border-white dark:border-gray-800","bg-gray-100 dark:bg-gray-600 text-gray-600 dark:text-gray-300",e.class))},e=J(e),[l,u,c,g,d,y,b,p,e,r,a,h,f,i,o]}class _h extends ye{constructor(e){super(),pe(this,e,bh,vh,ee,{src:0,href:1,rounded:2,border:11,stacked:12,dot:3,alt:4,size:5})}}function yo(t){let e,n;return e=new ih({props:{color:t[0],size:t[1]?"sm":"xs",class:"ml-1.5 -mr-1.5"}}),e.$on("click",t[6]),{c(){W(e.$$.fragment)},m(s,r){K(e,s,r),n=!0},p(s,r){const i={};r&1&&(i.color=s[0]),r&2&&(i.size=s[1]?"sm":"xs"),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){G(e,s)}}}function yr(t){let e,n,s;const r=t[12].default,i=se(r,t,t[11],null);let o=t[3]&&yo(t),a=[{href:t[2]},t[7],{class:t[5]}],l={};for(let u=0;u<a.length;u+=1)l=O(l,a[u]);return{c(){e=U(t[2]?"a":"span"),i&&i.c(),n=te(),o&&o.c(),/-/.test(t[2]?"a":"span")?He(e,l):ae(e,l),fo(e,"hidden",t[4])},m(u,c){C(u,e,c),i&&i.m(e,null),x(e,n),o&&o.m(e,null),s=!0},p(u,c){i&&i.p&&(!s||c&2048)&&ie(i,r,u,u[11],s?re(r,u[11],c,null):oe(u[11]),null),u[3]?o?(o.p(u,c),c&8&&v(o,1)):(o=yo(u),o.c(),v(o,1),o.m(e,null)):o&&(Re(),_(o,1,1,()=>{o=null}),Le()),l=Oe(a,[(!s||c&4)&&{href:u[2]},c&128&&u[7],(!s||c&32)&&{class:u[5]}]),/-/.test(u[2]?"a":"span")?He(e,l):ae(e,l),fo(e,"hidden",u[4])},i(u){s||(v(i,u),v(o),s=!0)},o(u){_(i,u),_(o),s=!1},d(u){u&&T(e),i&&i.d(u),o&&o.d()}}}function wh(t){let e=t[2]?"a":"span",n,s,r=(t[2]?"a":"span")&&yr(t);return{c(){r&&r.c(),n=Me()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,[o]){i[2],e?ee(e,i[2]?"a":"span")?(r.d(1),r=yr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=yr(i),r.c(),r.m(n.parentNode,n)),e=i[2]?"a":"span"},i(i){s||(v(r),s=!0)},o(i){_(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function kh(t,e,n){const s=["color","large","href","rounded","index","dismissable","baseClass"];let r=he(e,s),{$$slots:i={},$$scope:o}=e,{color:a="blue"}=e,{large:l=!1}=e,{href:u=void 0}=e,{rounded:c=!1}=e,{index:h=!1}=e,{dismissable:f=!1}=e,{baseClass:g="inline-flex items-center justify-center -mb-0.5"}=e,d=!1;const y={blue:"bg-blue-100 text-blue-800 dark:bg-blue-200 dark:text-blue-800",dark:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",red:"bg-red-100 text-red-800 dark:bg-red-200 dark:text-red-900",green:"bg-green-100 text-green-800 dark:bg-green-200 dark:text-green-900",yellow:"bg-yellow-100 text-yellow-800 dark:bg-yellow-200 dark:text-yellow-900",indigo:"bg-indigo-100 text-indigo-800 dark:bg-indigo-200 dark:text-indigo-900",purple:"bg-purple-100 text-purple-800 dark:bg-purple-200 dark:text-purple-900",pink:"bg-pink-100 text-pink-800 dark:bg-pink-200 dark:text-pink-900",["!blue"]:"bg-blue-500 text-blue-100",["!dark"]:"bg-gray-500 text-gray-100",["!red"]:"bg-red-500 text-white",["!green"]:"bg-green-500 text-green-100",["!yellow"]:"bg-yellow-300 text-yellow-800",["!indigo"]:"bg-indigo-500 text-indigo-100",["!purple"]:"bg-purple-500 text-purple-100",["!pink"]:"bg-pink-500 text-pink-100"},p={blue:"hover:bg-blue-200 dark:hover:bg-blue-300",dark:"hover:bg-gray-200 dark:hover:bg-gray-300",red:"hover:bg-red-200 dark:hover:bg-red-300",green:"hover:bg-green-200 dark:hover:bg-green-300",yellow:"hover:bg-yellow-200 dark:hover:bg-yellow-300",indigo:"hover:bg-indigo-200 dark:hover:bg-indigo-300",purple:"hover:bg-purple-200 dark:hover:bg-purple-300",pink:"hover:bg-pink-200 dark:hover:bg-pink-300"};let b;const I=()=>{n(4,d=!d)};return t.$$set=S=>{n(15,e=O(O({},e),J(S))),n(7,r=he(e,s)),"color"in S&&n(0,a=S.color),"large"in S&&n(1,l=S.large),"href"in S&&n(2,u=S.href),"rounded"in S&&n(8,c=S.rounded),"index"in S&&n(9,h=S.index),"dismissable"in S&&n(3,f=S.dismissable),"baseClass"in S&&n(10,g=S.baseClass),"$$scope"in S&&n(11,o=S.$$scope)},t.$$.update=()=>{var S;n(5,b=le(g,l?"text-sm font-medium":"text-xs font-semibold",y[a],u&&((S=p[a])!=null?S:p.blue),c?"rounded-full p-1":"rounded px-2.5 py-0.5",h&&"absolute font-bold border-2 border-white dark:border-gray-900",h&&(l?"w-7 h-7 -top-3 -right-3":"w-6 h-6 -top-2 -right-2"),e.class))},e=J(e),[a,l,u,f,d,b,I,r,c,h,g,o,i]}class Eh extends ye{constructor(e){super(),pe(this,e,kh,wh,ee,{color:0,large:1,href:2,rounded:8,index:9,dismissable:3,baseClass:10})}}function Th(t){let e;const n=t[10].default,s=se(n,t,t[11],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&2048)&&ie(s,n,r,r[11],e?re(n,r[11],i,null):oe(r[11]),null)},i(r){e||(v(s,r),e=!0)},o(r){_(s,r),e=!1},d(r){s&&s.d(r)}}}function Ch(t){let e,n,s,r,i;const o=t[10].default,a=se(o,t,t[11],null);return{c(){e=U("img"),s=te(),r=U("div"),a&&a.c(),m(e,"class",t[4]),Or(e.src,n=t[1])||m(e,"src",n),m(e,"alt",""),m(r,"class",t[2])},m(l,u){C(l,e,u),C(l,s,u),C(l,r,u),a&&a.m(r,null),i=!0},p(l,u){(!i||u&16)&&m(e,"class",l[4]),(!i||u&2&&!Or(e.src,n=l[1]))&&m(e,"src",n),a&&a.p&&(!i||u&2048)&&ie(a,o,l,l[11],i?re(o,l[11],u,null):oe(l[11]),null),(!i||u&4)&&m(r,"class",l[2])},i(l){i||(v(a,l),i=!0)},o(l){_(a,l),i=!1},d(l){l&&T(e),l&&T(s),l&&T(r),a&&a.d(l)}}}function Ih(t){let e,n,s,r;const i=[Ch,Th],o=[];function a(l,u){return l[1]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Me()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,u){let c=e;e=a(l),e===c?o[e].p(l,u):(Re(),_(o[c],1,1,()=>{o[c]=null}),Le(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),v(n,1),n.m(s.parentNode,s))},i(l){r||(v(n),r=!0)},o(l){_(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function Sh(t){let e,n;const s=[{tag:t[0]?"a":"div"},{rounded:!0},{shadow:!0},{border:!0},{href:t[0]},t[5],{class:t[3]}];let r={$$slots:{default:[Ih]},$$scope:{ctx:t}};for(let i=0;i<s.length;i+=1)r=O(r,s[i]);return e=new sl({props:r}),{c(){W(e.$$.fragment)},m(i,o){K(e,i,o),n=!0},p(i,[o]){const a=o&41?Oe(s,[o&1&&{tag:i[0]?"a":"div"},s[1],s[2],s[3],o&1&&{href:i[0]},o&32&&js(i[5]),o&8&&{class:i[3]}]):{};o&2070&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){_(e.$$.fragment,i),n=!1},d(i){G(e,i)}}}function Ah(t,e,n){const s=["href","horizontal","reverse","img","padding","size"];let r=he(e,s),{$$slots:i={},$$scope:o}=e,{href:a=void 0}=e,{horizontal:l=!1}=e,{reverse:u=!1}=e,{img:c=void 0}=e,{padding:h="lg"}=e,{size:f="sm"}=e;const g={none:"p-0",sm:"p-4 sm:p-6 md:p-8",md:"p-4 sm:p-5",lg:"p-4 sm:p-6",xl:"p-4 sm:p-8"},d={xs:"max-w-xs",sm:"max-w-sm",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-screen-xl"};let y,p,b;return t.$$set=I=>{n(14,e=O(O({},e),J(I))),n(5,r=he(e,s)),"href"in I&&n(0,a=I.href),"horizontal"in I&&n(6,l=I.horizontal),"reverse"in I&&n(7,u=I.reverse),"img"in I&&n(1,c=I.img),"padding"in I&&n(8,h=I.padding),"size"in I&&n(9,f=I.size),"$$scope"in I&&n(11,o=I.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&n(2,y=g[h]),n(3,p=le("flex",d[f],u?"flex-col-reverse":"flex-col",l&&(u?"md:flex-row-reverse md:max-w-xl":"md:flex-row md:max-w-xl"),a&&"hover:bg-gray-100 dark:hover:bg-gray-700",!c&&y,e.class)),t.$$.dirty&192&&n(4,b=le(u?"rounded-b-lg":"rounded-t-lg",l&&"object-cover w-full h-96 md:h-auto md:w-48 md:rounded-none",l&&(u?"md:rounded-r-lg":"md:rounded-l-lg")))},e=J(e),[a,c,y,p,b,r,l,u,h,f,i,o]}class Dh extends ye{constructor(e){super(),pe(this,e,Ah,Sh,ee,{href:0,horizontal:6,reverse:7,img:1,padding:8,size:9})}}function Nh(t){let e;const n=t[5].default,s=se(n,t,t[4],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&16)&&ie(s,n,r,r[4],e?re(n,r[4],i,null):oe(r[4]),null)},i(r){e||(v(s,r),e=!0)},o(r){_(s,r),e=!1},d(r){s&&s.d(r)}}}function Rh(t){let e=t[0],n,s,r=t[0]&&vr(t);return{c(){r&&r.c(),n=Me()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,o){i[0]?e?ee(e,i[0])?(r.d(1),r=vr(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=vr(i),r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null),e=i[0]},i(i){s||(v(r),s=!0)},o(i){_(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function vr(t){let e,n,s,r;const i=t[5].default,o=se(i,t,t[4],null);let a=[t[3]],l={};for(let u=0;u<a.length;u+=1)l=O(l,a[u]);return{c(){e=U(t[0]),o&&o.c(),/-/.test(t[0])?He(e,l):ae(e,l)},m(u,c){C(u,e,c),o&&o.m(e,null),n=!0,s||(r=di(t[2].call(null,e)),s=!0)},p(u,c){o&&o.p&&(!n||c&16)&&ie(o,i,u,u[4],n?re(i,u[4],c,null):oe(u[4]),null),l=Oe(a,[c&8&&u[3]]),/-/.test(u[0])?He(e,l):ae(e,l)},i(u){n||(v(o,u),n=!0)},o(u){_(o,u),n=!1},d(u){u&&T(e),o&&o.d(u),s=!1,r()}}}function Lh(t){let e,n,s,r;const i=[Rh,Nh],o=[];function a(l,u){return l[1]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Me()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(Re(),_(o[c],1,1,()=>{o[c]=null}),Le(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),v(n,1),n.m(s.parentNode,s))},i(l){r||(v(n),r=!0)},o(l){_(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function Mh(t,e,n){const s=["tag","show","use"];let r=he(e,s),{$$slots:i={},$$scope:o}=e,{tag:a="div"}=e,{show:l}=e,{use:u=()=>{}}=e;return t.$$set=c=>{e=O(O({},e),J(c)),n(3,r=he(e,s)),"tag"in c&&n(0,a=c.tag),"show"in c&&n(1,l=c.show),"use"in c&&n(2,u=c.use),"$$scope"in c&&n(4,o=c.$$scope)},[a,l,u,r,o,i]}class il extends ye{constructor(e){super(),pe(this,e,Mh,Lh,ee,{tag:0,show:1,use:2})}}function Oh(t){let e;const n=t[7].default,s=se(n,t,t[6],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&64)&&ie(s,n,r,r[6],e?re(n,r[6],i,null):oe(r[6]),null)},i(r){e||(v(s,r),e=!0)},o(r){_(s,r),e=!1},d(r){s&&s.d(r)}}}function Ph(t){let e,n;const s=t[7].default,r=se(s,t,t[6],null);let i=[t[3],{class:t[2]}],o={};for(let a=0;a<i.length;a+=1)o=O(o,i[a]);return{c(){e=U("label"),r&&r.c(),ae(e,o)},m(a,l){C(a,e,l),r&&r.m(e,null),t[8](e),n=!0},p(a,l){r&&r.p&&(!n||l&64)&&ie(r,s,a,a[6],n?re(s,a[6],l,null):oe(a[6]),null),ae(e,o=Oe(i,[l&8&&a[3],(!n||l&4)&&{class:a[2]}]))},i(a){n||(v(r,a),n=!0)},o(a){_(r,a),n=!1},d(a){a&&T(e),r&&r.d(a),t[8](null)}}}function Vh(t){let e,n,s,r;const i=[Ph,Oh],o=[];function a(l,u){return l[0]?0:1}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Me()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,[u]){let c=e;e=a(l),e===c?o[e].p(l,u):(Re(),_(o[c],1,1,()=>{o[c]=null}),Le(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),v(n,1),n.m(s.parentNode,s))},i(l){r||(v(n),r=!0)},o(l){_(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}function Fh(t,e,n){let s;const r=["color","defaultClass","show"];let i=he(e,r),{$$slots:o={},$$scope:a}=e,{color:l="gray"}=e,{defaultClass:u="text-sm font-medium block"}=e,{show:c=!0}=e,h;const f={gray:"text-gray-900 dark:text-gray-300",green:"text-green-700 dark:text-green-500",red:"text-red-700 dark:text-red-500",disabled:"text-gray-400 dark:text-gray-500"};function g(d){Tt[d?"unshift":"push"](()=>{h=d,n(1,h)})}return t.$$set=d=>{n(10,e=O(O({},e),J(d))),n(3,i=he(e,r)),"color"in d&&n(4,l=d.color),"defaultClass"in d&&n(5,u=d.defaultClass),"show"in d&&n(0,c=d.show),"$$scope"in d&&n(6,a=d.$$scope)},t.$$.update=()=>{if(t.$$.dirty&18){const d=h==null?void 0:h.control;n(4,l=d!=null&&d.disabled?"disabled":l)}n(2,s=le(u,f[l],e.class))},e=J(e),[c,h,s,i,l,u,a,o,g]}class vo extends ye{constructor(e){super(),pe(this,e,Fh,Vh,ee,{color:4,defaultClass:5,show:0})}}function bo(t,e,n){const s=t.slice();return s[0]=e[n].value,s[13]=e[n].name,s}function _o(t){let e,n=t[13]+"",s,r;return{c(){e=U("option"),s=fe(n),e.__value=r=t[0],e.value=e.__value},m(i,o){C(i,e,o),x(e,s)},p(i,o){o&2&&n!==(n=i[13]+"")&&Qe(s,n),o&2&&r!==(r=i[0])&&(e.__value=r,e.value=e.__value)},d(i){i&&T(e)}}}function xh(t){let e,n,s,r,i,o=t[1],a=[];for(let c=0;c<o.length;c+=1)a[c]=_o(bo(t,o,c));let l=[t[4],{class:t[3]}],u={};for(let c=0;c<l.length;c+=1)u=O(u,l[c]);return{c(){e=U("select"),n=U("option"),s=fe(t[2]);for(let c=0;c<a.length;c+=1)a[c].c();n.disabled=!0,n.selected=!0,n.__value="",n.value=n.__value,ae(e,u),t[0]===void 0&&rt(()=>t[11].call(e))},m(c,h){C(c,e,h),x(e,n),x(n,s);for(let f=0;f<a.length;f+=1)a[f].m(e,null);(u.multiple?ho:rs)(e,u.value),e.autofocus&&e.focus(),rs(e,t[0]),r||(i=[F(e,"change",t[11]),F(e,"change",t[9]),F(e,"input",t[10])],r=!0)},p(c,[h]){if(h&4&&Qe(s,c[2]),h&2){o=c[1];let f;for(f=0;f<o.length;f+=1){const g=bo(c,o,f);a[f]?a[f].p(g,h):(a[f]=_o(g),a[f].c(),a[f].m(e,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=o.length}ae(e,u=Oe(l,[h&16&&c[4],h&8&&{class:c[3]}])),h&24&&"value"in u&&(u.multiple?ho:rs)(e,u.value),h&3&&rs(e,c[0])},i:Y,o:Y,d(c){c&&T(e),kn(a,c),r=!1,Xe(i)}}}const Uh="block w-full";function Bh(t,e,n){const s=["items","value","placeholder","underline","size","defaultClass","underlineClass"];let r=he(e,s),{items:i=[]}=e,{value:o}=e,{placeholder:a="Choose option ..."}=e,{underline:l=!1}=e,{size:u="md"}=e,{defaultClass:c="text-gray-900 bg-gray-50 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"}=e,{underlineClass:h="text-gray-500 bg-transparent border-0 border-b-2 border-gray-200 appearance-none dark:text-gray-400 dark:border-gray-700 focus:outline-none focus:ring-0 focus:border-gray-200 peer"}=e;const f={sm:"text-sm p-2",md:"text-sm p-2.5",lg:"text-base py-3 px-4"};let g;function d(b){R.call(this,t,b)}function y(b){R.call(this,t,b)}function p(){o=Uc(this),n(0,o),n(1,i)}return t.$$set=b=>{e=O(O({},e),J(b)),n(4,r=he(e,s)),"items"in b&&n(1,i=b.items),"value"in b&&n(0,o=b.value),"placeholder"in b&&n(2,a=b.placeholder),"underline"in b&&n(5,l=b.underline),"size"in b&&n(6,u=b.size),"defaultClass"in b&&n(7,c=b.defaultClass),"underlineClass"in b&&n(8,h=b.underlineClass)},t.$$.update=()=>{n(3,g=le(Uh,l?h:c,f[u],l&&"!px-0",r.class))},[o,i,a,g,r,l,u,c,h,d,y,p]}class jh extends ye{constructor(e){super(),pe(this,e,Bh,xh,ee,{items:1,value:0,placeholder:2,underline:5,size:6,defaultClass:7,underlineClass:8})}}const zh=t=>({}),wo=t=>({}),qh=t=>({}),ko=t=>({});function Eo(t){let e,n;const s=t[8].header,r=se(s,t,t[21],ko);return{c(){e=U("div"),r&&r.c(),m(e,"class",t[5](!0))},m(i,o){C(i,e,o),r&&r.m(e,null),n=!0},p(i,o){r&&r.p&&(!n||o&2097152)&&ie(r,s,i,i[21],n?re(s,i[21],o,qh):oe(i[21]),ko)},i(i){n||(v(r,i),n=!0)},o(i){_(r,i),n=!1},d(i){i&&T(e),r&&r.d(i)}}}function Hh(t){let e,n,s,r=[t[7],{class:t[3]}],i={};for(let o=0;o<r.length;o+=1)i=O(i,r[o]);return{c(){e=U("textarea"),ae(e,i)},m(o,a){C(o,e,a),e.autofocus&&e.focus(),co(e,t[0]),n||(s=[F(e,"input",t[20]),F(e,"blur",t[9]),F(e,"change",t[10]),F(e,"click",t[11]),F(e,"focus",t[12]),F(e,"keydown",t[13]),F(e,"keypress",t[14]),F(e,"keyup",t[15]),F(e,"mouseenter",t[16]),F(e,"mouseleave",t[17]),F(e,"mouseover",t[18]),F(e,"paste",t[19])],n=!0)},p(o,a){ae(e,i=Oe(r,[a&128&&o[7],a&8&&{class:o[3]}])),a&1&&co(e,o[0])},d(o){o&&T(e),n=!1,Xe(s)}}}function To(t){let e,n;const s=t[8].footer,r=se(s,t,t[21],wo);return{c(){e=U("div"),r&&r.c(),m(e,"class",t[5](!1))},m(i,o){C(i,e,o),r&&r.m(e,null),n=!0},p(i,o){r&&r.p&&(!n||o&2097152)&&ie(r,s,i,i[21],n?re(s,i[21],o,zh):oe(i[21]),wo)},i(i){n||(v(r,i),n=!0)},o(i){_(r,i),n=!1},d(i){i&&T(e),r&&r.d(i)}}}function Kh(t){let e,n,s,r,i,o=t[6].header&&Eo(t);n=new il({props:{show:t[1],class:t[4],$$slots:{default:[Hh]},$$scope:{ctx:t}}});let a=t[6].footer&&To(t);return{c(){o&&o.c(),e=te(),W(n.$$.fragment),s=te(),a&&a.c(),r=Me()},m(l,u){o&&o.m(l,u),C(l,e,u),K(n,l,u),C(l,s,u),a&&a.m(l,u),C(l,r,u),i=!0},p(l,u){l[6].header?o?(o.p(l,u),u&64&&v(o,1)):(o=Eo(l),o.c(),v(o,1),o.m(e.parentNode,e)):o&&(Re(),_(o,1,1,()=>{o=null}),Le());const c={};u&2&&(c.show=l[1]),u&16&&(c.class=l[4]),u&2097289&&(c.$$scope={dirty:u,ctx:l}),n.$set(c),l[6].footer?a?(a.p(l,u),u&64&&v(a,1)):(a=To(l),a.c(),v(a,1),a.m(r.parentNode,r)):a&&(Re(),_(a,1,1,()=>{a=null}),Le())},i(l){i||(v(o),v(n.$$.fragment,l),v(a),i=!0)},o(l){_(o),_(n.$$.fragment,l),_(a),i=!1},d(l){o&&o.d(l),l&&T(e),G(n,l),l&&T(s),a&&a.d(l),l&&T(r)}}}function Gh(t){let e,n;return e=new il({props:{show:t[1],class:t[2],$$slots:{default:[Kh]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment)},m(s,r){K(e,s,r),n=!0},p(s,[r]){const i={};r&2&&(i.show=s[1]),r&4&&(i.class=s[2]),r&2097371&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){G(e,s)}}}function Qh(t,e,n){const s=["value"];let r=he(e,s),{$$slots:i={},$$scope:o}=e;const a=Ga(i),l=Un("background");let{value:u=""}=e,c,h,f;const g=w=>le(w?"border-b":"border-t","py-2 px-3 border-gray-200 dark:border-gray-600");let d;function y(w){R.call(this,t,w)}function p(w){R.call(this,t,w)}function b(w){R.call(this,t,w)}function I(w){R.call(this,t,w)}function S(w){R.call(this,t,w)}function P(w){R.call(this,t,w)}function j(w){R.call(this,t,w)}function de(w){R.call(this,t,w)}function Se(w){R.call(this,t,w)}function ze(w){R.call(this,t,w)}function ve(w){R.call(this,t,w)}function Ye(){u=this.value,n(0,u)}return t.$$set=w=>{n(23,e=O(O({},e),J(w))),n(7,r=he(e,s)),"value"in w&&n(0,u=w.value),"$$scope"in w&&n(21,o=w.$$scope)},t.$$.update=()=>{n(2,h=le("w-full rounded-lg",l?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700","text-gray-900 dark:placeholder-gray-400 dark:text-white ","border border-gray-200 dark:border-gray-600",e.class)),t.$$.dirty&6&&n(3,f=c?le("block w-full","text-sm","border-0 px-0","bg-inherit dark:bg-inherit","focus:outline-none focus:ring-0"):le(h,"p-2.5 text-sm","focus:ring-blue-500 focus:border-blue-500 dark:focus:ring-blue-500 dark:focus:border-blue-500"))},n(1,c=a.header||a.footer),n(4,d=le("py-2 px-4 bg-white dark:bg-gray-800",a.footer||"rounded-b-lg",a.header||"rounded-t-lg")),e=J(e),[u,c,h,f,d,g,a,r,i,y,p,b,I,S,P,j,de,Se,ze,ve,Ye,o]}class Wh extends ye{constructor(e){super(),pe(this,e,Qh,Gh,ee,{value:0})}}const Xh=t=>({item:t[0]&64}),Co=t=>({item:t[6]}),Yh=t=>({item:t[0]&64}),Io=t=>({item:t[6]}),Jh=t=>({item:t[0]&64}),So=t=>({item:t[6]});function Zh(t){let e,n,s,r,i;const o=t[9].default,a=se(o,t,t[8],Co);return{c(){e=U("button"),a&&a.c(),m(e,"class",n="inline-flex relative items-center text-left "+t[4]),e.disabled=t[2],m(e,"aria-current",t[1])},m(l,u){C(l,e,u),a&&a.m(e,null),s=!0,r||(i=[F(e,"click",t[31]),F(e,"blur",t[20]),F(e,"change",t[21]),F(e,"click",t[22]),F(e,"focus",t[23]),F(e,"keydown",t[24]),F(e,"keypress",t[25]),F(e,"keyup",t[26]),F(e,"mouseenter",t[27]),F(e,"mouseleave",t[28]),F(e,"mouseover",t[29])],r=!0)},p(l,u){a&&a.p&&(!s||u[0]&320)&&ie(a,o,l,l[8],s?re(o,l[8],u,Xh):oe(l[8]),Co),(!s||u[0]&16&&n!==(n="inline-flex relative items-center text-left "+l[4]))&&m(e,"class",n),(!s||u[0]&4)&&(e.disabled=l[2]),(!s||u[0]&2)&&m(e,"aria-current",l[1])},i(l){s||(v(a,l),s=!0)},o(l){_(a,l),s=!1},d(l){l&&T(e),a&&a.d(l),r=!1,Xe(i)}}}function $h(t){let e,n,s,r,i;const o=t[9].default,a=se(o,t,t[8],Io);return{c(){e=U("a"),a&&a.c(),m(e,"href",t[3]),m(e,"class",n="block "+t[4]),m(e,"aria-current",t[1])},m(l,u){C(l,e,u),a&&a.m(e,null),s=!0,r||(i=[F(e,"click",t[30]),F(e,"blur",t[10]),F(e,"change",t[11]),F(e,"click",t[12]),F(e,"focus",t[13]),F(e,"keydown",t[14]),F(e,"keypress",t[15]),F(e,"keyup",t[16]),F(e,"mouseenter",t[17]),F(e,"mouseleave",t[18]),F(e,"mouseover",t[19])],r=!0)},p(l,u){a&&a.p&&(!s||u[0]&320)&&ie(a,o,l,l[8],s?re(o,l[8],u,Yh):oe(l[8]),Io),(!s||u[0]&8)&&m(e,"href",l[3]),(!s||u[0]&16&&n!==(n="block "+l[4]))&&m(e,"class",n),(!s||u[0]&2)&&m(e,"aria-current",l[1])},i(l){s||(v(a,l),s=!0)},o(l){_(a,l),s=!1},d(l){l&&T(e),a&&a.d(l),r=!1,Xe(i)}}}function ef(t){let e,n;const s=t[9].default,r=se(s,t,t[8],So);return{c(){e=U("li"),r&&r.c(),m(e,"class",t[4])},m(i,o){C(i,e,o),r&&r.m(e,null),n=!0},p(i,o){r&&r.p&&(!n||o[0]&320)&&ie(r,s,i,i[8],n?re(s,i[8],o,Jh):oe(i[8]),So),(!n||o[0]&16)&&m(e,"class",i[4])},i(i){n||(v(r,i),n=!0)},o(i){_(r,i),n=!1},d(i){i&&T(e),r&&r.d(i)}}}function tf(t){let e,n,s,r;const i=[ef,$h,Zh],o=[];function a(l,u){return l[0]?l[3]?1:2:0}return e=a(t),n=o[e]=i[e](t),{c(){n.c(),s=Me()},m(l,u){o[e].m(l,u),C(l,s,u),r=!0},p(l,u){let c=e;e=a(l),e===c?o[e].p(l,u):(Re(),_(o[c],1,1,()=>{o[c]=null}),Le(),n=o[e],n?n.p(l,u):(n=o[e]=i[e](l),n.c()),v(n,1),n.m(s.parentNode,s))},i(l){r||(v(n),r=!0)},o(l){_(n),r=!1},d(l){o[e].d(l),l&&T(s)}}}let nf="focus:z-40 focus:outline-none focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:focus:ring-gray-500 dark:focus:text-white",sf="hover:bg-gray-100 hover:text-blue-700 dark:hover:bg-gray-600 dark:hover:text-white";function rf(t,e,n){let{$$slots:s={},$$scope:r}=e,{active:i=Un("active")}=e,{current:o=!1}=e,{disabled:a=!1}=e,{href:l=""}=e,u=Hc();const c={current:"text-white bg-blue-700 dark:text-white dark:bg-gray-800",normal:"",disabled:"text-gray-900 bg-gray-100 dark:bg-gray-600 dark:text-gray-400"};let h,f;function g(V){R.call(this,t,V)}function d(V){R.call(this,t,V)}function y(V){R.call(this,t,V)}function p(V){R.call(this,t,V)}function b(V){R.call(this,t,V)}function I(V){R.call(this,t,V)}function S(V){R.call(this,t,V)}function P(V){R.call(this,t,V)}function j(V){R.call(this,t,V)}function de(V){R.call(this,t,V)}function Se(V){R.call(this,t,V)}function ze(V){R.call(this,t,V)}function ve(V){R.call(this,t,V)}function Ye(V){R.call(this,t,V)}function w(V){R.call(this,t,V)}function we(V){R.call(this,t,V)}function Lt(V){R.call(this,t,V)}function Mt(V){R.call(this,t,V)}function A(V){R.call(this,t,V)}function on(V){R.call(this,t,V)}const Dc=()=>u("click",e),Nc=()=>u("click",e);return t.$$set=V=>{n(6,e=O(O({},e),J(V))),"active"in V&&n(0,i=V.active),"current"in V&&n(1,o=V.current),"disabled"in V&&n(2,a=V.disabled),"href"in V&&n(3,l=V.href),"$$scope"in V&&n(8,r=V.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&6&&n(7,h=a?"disabled":o?"current":"normal"),n(4,f=le("py-2 px-0 sm:px-4 w-full text-sm font-medium","first:rounded-t-lg last:rounded-b-lg",c[h],i&&h==="disabled"&&"cursor-not-allowed",i&&h==="normal"&&sf,i&&h==="normal"&&nf,e.class))},e=J(e),[i,o,a,l,f,u,e,h,r,s,g,d,y,p,b,I,S,P,j,de,Se,ze,ve,Ye,w,we,Lt,Mt,A,on,Dc,Nc]}class of extends ye{constructor(e){super(),pe(this,e,rf,tf,ee,{active:0,current:1,disabled:2,href:3},null,[-1,-1])}}function Ao(t,e,n){const s=t.slice();return s[8]=e[n],s[10]=n,s}const af=t=>({item:t&1}),Do=t=>({item:t[8],index:t[10]});function No(t){let e;const n=t[4].default,s=se(n,t,t[6],null);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&64)&&ie(s,n,r,r[6],e?re(n,r[6],i,null):oe(r[6]),null)},i(r){e||(v(s,r),e=!0)},o(r){_(s,r),e=!1},d(r){s&&s.d(r)}}}function lf(t){let e;const n=t[4].default,s=se(n,t,t[6],Do);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){s&&s.p&&(!e||i&65)&&ie(s,n,r,r[6],e?re(n,r[6],i,af):oe(r[6]),Do)},i(r){e||(v(s,r),e=!0)},o(r){_(s,r),e=!1},d(r){s&&s.d(r)}}}function Ro(t){let e,n;const s=[{active:t[1]},t[8],{index:t[10]}];let r={$$slots:{default:[lf]},$$scope:{ctx:t}};for(let i=0;i<s.length;i+=1)r=O(r,s[i]);return e=new of({props:r}),e.$on("click",t[5]),{c(){W(e.$$.fragment)},m(i,o){K(e,i,o),n=!0},p(i,o){const a=o&3?Oe(s,[o&2&&{active:i[1]},o&1&&js(i[8]),s[2]]):{};o&65&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){_(e.$$.fragment,i),n=!1},d(i){G(e,i)}}}function uf(t){let e,n,s=t[0],r=[];for(let a=0;a<s.length;a+=1)r[a]=Ro(Ao(t,s,a));const i=a=>_(r[a],1,1,()=>{r[a]=null});let o=null;return s.length||(o=No(t)),{c(){for(let a=0;a<r.length;a+=1)r[a].c();e=Me(),o&&o.c()},m(a,l){for(let u=0;u<r.length;u+=1)r[u].m(a,l);C(a,e,l),o&&o.m(a,l),n=!0},p(a,l){if(l&67){s=a[0];let u;for(u=0;u<s.length;u+=1){const c=Ao(a,s,u);r[u]?(r[u].p(c,l),v(r[u],1)):(r[u]=Ro(c),r[u].c(),v(r[u],1),r[u].m(e.parentNode,e))}for(Re(),u=s.length;u<r.length;u+=1)i(u);Le(),!s.length&&o?o.p(a,l):s.length?o&&(Re(),_(o,1,1,()=>{o=null}),Le()):(o=No(a),o.c(),v(o,1),o.m(e.parentNode,e))}},i(a){if(!n){for(let l=0;l<s.length;l+=1)v(r[l]);n=!0}},o(a){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)_(r[l]);n=!1},d(a){kn(r,a),a&&T(e),o&&o.d(a)}}}function cf(t){let e,n;const s=[{tag:t[1]?"div":"ul"},t[3],{rounded:!0},{border:!0},{class:t[2]}];let r={$$slots:{default:[uf]},$$scope:{ctx:t}};for(let i=0;i<s.length;i+=1)r=O(r,s[i]);return e=new sl({props:r}),{c(){W(e.$$.fragment)},m(i,o){K(e,i,o),n=!0},p(i,[o]){const a=o&14?Oe(s,[o&2&&{tag:i[1]?"div":"ul"},o&8&&js(i[3]),s[2],s[3],o&4&&{class:i[2]}]):{};o&67&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){_(e.$$.fragment,i),n=!1},d(i){G(e,i)}}}function hf(t,e,n){const s=["items","active"];let r=he(e,s),{$$slots:i={},$$scope:o}=e,{items:a=[]}=e,{active:l=!1}=e,u;function c(h){R.call(this,t,h)}return t.$$set=h=>{n(7,e=O(O({},e),J(h))),n(3,r=he(e,s)),"items"in h&&n(0,a=h.items),"active"in h&&n(1,l=h.active),"$$scope"in h&&n(6,o=h.$$scope)},t.$$.update=()=>{t.$$.dirty&2&&_s("active",l),n(2,u=le("divide-y divide-gray-200 dark:divide-gray-600",e.class))},e=J(e),[a,l,u,r,i,c,o]}class ff extends ye{constructor(e){super(),pe(this,e,hf,cf,ee,{items:0,active:1})}}function Lo(t){let e,n;return{c(){e=U("span"),n=fe(t[0]),m(e,"class","sr-only")},m(s,r){C(s,e,r),x(e,n)},p(s,r){r&1&&Qe(n,s[0])},d(s){s&&T(e)}}}function df(t){let e,n,s;return{c(){e=ge("svg"),n=ge("path"),m(n,"fill-rule","evenodd"),m(n,"d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"),m(n,"clip-rule","evenodd"),m(e,"class",s=t[4][t[2]]),m(e,"fill","currentColor"),m(e,"viewBox","0 0 20 20"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(r,i){C(r,e,i),x(e,n)},p(r,i){i&4&&s!==(s=r[4][r[2]])&&m(e,"class",s)},d(r){r&&T(e)}}}function gf(t){var g;let e,n,s,r,i,o,a=t[0]&&Lo(t);const l=t[8].default,u=se(l,t,t[7],null),c=u||df(t);let h=[{type:"button"},t[5],{class:t[3]},{"aria-label":s=(g=t[1])!=null?g:t[0]}],f={};for(let d=0;d<h.length;d+=1)f=O(f,h[d]);return{c(){e=U("button"),a&&a.c(),n=te(),c&&c.c(),ae(e,f)},m(d,y){C(d,e,y),a&&a.m(e,null),x(e,n),c&&c.m(e,null),e.autofocus&&e.focus(),r=!0,i||(o=F(e,"click",t[9]),i=!0)},p(d,[y]){var p;d[0]?a?a.p(d,y):(a=Lo(d),a.c(),a.m(e,n)):a&&(a.d(1),a=null),u?u.p&&(!r||y&128)&&ie(u,l,d,d[7],r?re(l,d[7],y,null):oe(d[7]),null):c&&c.p&&(!r||y&4)&&c.p(d,r?y:-1),ae(e,f=Oe(h,[{type:"button"},y&32&&d[5],(!r||y&8)&&{class:d[3]},(!r||y&3&&s!==(s=(p=d[1])!=null?p:d[0]))&&{"aria-label":s}]))},i(d){r||(v(c,d),r=!0)},o(d){_(c,d),r=!1},d(d){d&&T(e),a&&a.d(),c&&c.d(d),i=!1,o()}}}function mf(t,e,n){const s=["color","name","ariaLabel","size"];let r=he(e,s),{$$slots:i={},$$scope:o}=e;const a=Un("background");let{color:l="default"}=e,{name:u=void 0}=e,{ariaLabel:c=void 0}=e,{size:h="md"}=e;const f={default:"hover:text-gray-900 hover:bg-gray-100 text-gray-500 dark:text-gray-400 dark:hover:text-white dark:hover:bg-gray-600",gray:"focus:ring-gray-400 hover:bg-gray-200 dark:hover:bg-gray-300",red:"focus:ring-red-400 hover:bg-red-200 dark:hover:bg-red-300",yellow:"focus:ring-yellow-400 hover:bg-yellow-200 dark:hover:bg-yellow-300",green:"focus:ring-green-400 hover:bg-green-200 dark:hover:bg-green-300",indigo:"focus:ring-indigo-400 hover:bg-indigo-200 dark:hover:bg-indigo-300",purple:"focus:ring-purple-400 hover:bg-purple-200 dark:hover:bg-purple-300",pink:"focus:ring-pink-400 hover:bg-pink-200 dark:hover:bg-pink-300",blue:"focus:ring-blue-400 hover:bg-blue-200 dark:hover:bg-blue-300"},g={xs:"m-0.5 rounded focus:ring-1 p-0.5",sm:"m-0.5 rounded focus:ring-1 p-0.5",md:"rounded-lg focus:ring-2 p-1.5"};let d;const y={xs:"w-3 h-3",sm:"w-3.5 h-3.5",md:"w-5 h-5"};function p(b){R.call(this,t,b)}return t.$$set=b=>{n(13,e=O(O({},e),J(b))),n(5,r=he(e,s)),"color"in b&&n(6,l=b.color),"name"in b&&n(0,u=b.name),"ariaLabel"in b&&n(1,c=b.ariaLabel),"size"in b&&n(2,h=b.size),"$$scope"in b&&n(7,o=b.$$scope)},t.$$.update=()=>{n(3,d=le("focus:outline-none whitespace-normal",g[h],f[l],l==="default"&&(a?"hover:bg-gray-100 dark:hover:bg-gray-600":"hover:bg-gray-100 dark:hover:bg-gray-700"),e.class))},e=J(e),[u,c,h,d,y,r,l,o,i,p]}class Ut extends ye{constructor(e){super(),pe(this,e,mf,gf,ee,{color:6,name:0,ariaLabel:1,size:2})}}function pf(t){let e,n,s,r;return{c(){e=ge("svg"),n=ge("path"),s=ge("path"),m(n,"d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z"),m(n,"fill",t[2]),m(s,"d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z"),m(s,"fill",t[1]),m(e,"role","status"),m(e,"class",r=le("inline -mt-px animate-spin dark:text-gray-600",t[3],t[0],t[4],t[5].class)),m(e,"viewBox","0 0 100 101"),m(e,"fill","none"),m(e,"xmlns","http://www.w3.org/2000/svg")},m(i,o){C(i,e,o),x(e,n),x(e,s)},p(i,[o]){o&4&&m(n,"fill",i[2]),o&2&&m(s,"fill",i[1]),o&33&&r!==(r=le("inline -mt-px animate-spin dark:text-gray-600",i[3],i[0],i[4],i[5].class))&&m(e,"class",r)},i:Y,o:Y,d(i){i&&T(e)}}}function yf(t,e,n){var h;let{color:s="blue"}=e,{bg:r="text-gray-300"}=e,{size:i="8"}=e,{currentFill:o="currentFill"}=e,{currentColor:a="currentColor"}=e,l=`w-${i} h-${i}`;o!=="currentFill"&&(s=void 0);const u={blue:"fill-blue-600",gray:"fill-gray-600 dark:fill-gray-300",green:"fill-green-500",red:"fill-red-600",yellow:"fill-yellow-400",pink:"fill-pink-600",purple:"fill-purple-600",white:"fill-white"};let c=s===void 0?"":(h=u[s])!=null?h:u.blue;return t.$$set=f=>{n(5,e=O(O({},e),J(f))),"color"in f&&n(6,s=f.color),"bg"in f&&n(0,r=f.bg),"size"in f&&n(7,i=f.size),"currentFill"in f&&n(1,o=f.currentFill),"currentColor"in f&&n(2,a=f.currentColor)},e=J(e),[r,o,a,l,c,e,s,i]}class ol extends ye{constructor(e){super(),pe(this,e,yf,pf,ee,{color:6,bg:0,size:7,currentFill:1,currentColor:2})}}const vf=t=>({}),Mo=t=>({});function bf(t){let e,n,s,r,i;const o=t[7].default,a=se(o,t,t[6],null),l=t[7].end,u=se(l,t,t[6],Mo);return{c(){e=U("div"),n=U("div"),a&&a.c(),r=te(),u&&u.c(),m(n,"class",s="flex flex-wrap items-center "+t[1]),m(e,"class",t[0])},m(c,h){C(c,e,h),x(e,n),a&&a.m(n,null),x(e,r),u&&u.m(e,null),i=!0},p(c,[h]){a&&a.p&&(!i||h&64)&&ie(a,o,c,c[6],i?re(o,c[6],h,null):oe(c[6]),null),(!i||h&2&&s!==(s="flex flex-wrap items-center "+c[1]))&&m(n,"class",s),u&&u.p&&(!i||h&64)&&ie(u,l,c,c[6],i?re(l,c[6],h,vf):oe(c[6]),Mo),(!i||h&1)&&m(e,"class",c[0])},i(c){i||(v(a,c),v(u,c),i=!0)},o(c){_(a,c),_(u,c),i=!1},d(c){c&&T(e),a&&a.d(c),u&&u.d(c)}}}function _f(t,e,n){let s,{$$slots:r={},$$scope:i}=e;const o=Yc(!1);Ha(t,o,d=>n(5,s=d)),_s("toolbar",o);let{color:a="dark"}=e,{embedded:l=!1}=e;const u={gray:"bg-gray-100 dark:bg-gray-200 ",red:"bg-red-100 dark:bg-red-200",yellow:"bg-yellow-100 dark:bg-yellow-200 ",green:"bg-green-100 dark:bg-green-200 ",indigo:"bg-indigo-100 dark:bg-indigo-200 ",purple:"bg-purple-100 dark:bg-purple-200 ",pink:"bg-pink-100 dark:bg-pink-200 ",blue:"bg-blue-100 dark:bg-blue-200 ",dark:"bg-gray-50 dark:bg-gray-700"},c={gray:"text-gray-500 dark:text-gray-700",red:"text-red-500 dark:text-red-700",yellow:"text-yellow-500 dark:text-yellow-700",green:"text-green-500 dark:text-green-700",indigo:"text-indigo-500 dark:text-indigo-700",purple:"text-purple-500 dark:text-purple-700",pink:"text-pink-500 dark:text-pink-700",blue:"text-blue-500 dark:text-blue-700",dark:"text-gray-500 dark:text-gray-400"};let h;const f={gray:"divide-gray-200 dark:divide-gray-700",red:"divide-red-200 dark:divide-red-700",yellow:"divide-yellow-200 dark:divide-yellow-700",green:"divide-green-200 dark:divide-green-700",indigo:"divide-indigo-200 dark:divide-indigo-700",purple:"divide-purple-200 dark:divide-purple-700",pink:"divide-pink-200 dark:divide-pink-700",blue:"divide-blue-200 dark:divide-blue-700",dark:"divide-gray-200 dark:divide-gray-600"};let g;return t.$$set=d=>{n(11,e=O(O({},e),J(d))),"color"in d&&n(3,a=d.color),"embedded"in d&&n(4,l=d.embedded),"$$scope"in d&&n(6,i=d.$$scope)},t.$$.update=()=>{n(0,h=le("flex justify-between items-center",l||"rounded-lg border border-gray-200 dark:border-gray-600 py-2 px-3",l||c[a],l||u[a],e.class)),t.$$.dirty&40&&n(1,g=le(s&&"divide-gray-200 sm:divide-x",f[a]))},e=J(e),[h,g,o,a,l,s,i,r]}class wf extends ye{constructor(e){super(),pe(this,e,_f,bf,ee,{color:3,embedded:4})}}function kf(t){let e,n;const s=t[2].default,r=se(s,t,t[1],null);return{c(){e=U("div"),r&&r.c(),m(e,"class","flex items-center space-x-1 sm:pr-4 sm:pl-4 first:sm:pl-0 last:sm:pr-0")},m(i,o){C(i,e,o),r&&r.m(e,null),n=!0},p(i,[o]){r&&r.p&&(!n||o&2)&&ie(r,s,i,i[1],n?re(s,i[1],o,null):oe(i[1]),null)},i(i){n||(v(r,i),n=!0)},o(i){_(r,i),n=!1},d(i){i&&T(e),r&&r.d(i)}}}function Ef(t,e,n){let s,{$$slots:r={},$$scope:i}=e;const o=Un("toolbar");return Ha(t,o,a=>n(3,s=a)),o&&Mc(o,s=!0,s),t.$$set=a=>{"$$scope"in a&&n(1,i=a.$$scope)},[o,i,r]}class Oo extends ye{constructor(e){super(),pe(this,e,Ef,kf,ee,{})}}function br(t){let e,n,s;const r=t[7].default,i=se(r,t,t[6],null);let o=[t[4],{class:n=le(t[2]?t[2]:t[3][t[0]],t[1],"w-full",t[5].class)}],a={};for(let l=0;l<o.length;l+=1)a=O(a,o[l]);return{c(){e=U(t[0]),i&&i.c(),/-/.test(t[0])?He(e,a):ae(e,a)},m(l,u){C(l,e,u),i&&i.m(e,null),s=!0},p(l,u){i&&i.p&&(!s||u&64)&&ie(i,r,l,l[6],s?re(r,l[6],u,null):oe(l[6]),null),a=Oe(o,[u&16&&l[4],(!s||u&39&&n!==(n=le(l[2]?l[2]:l[3][l[0]],l[1],"w-full",l[5].class)))&&{class:n}]),/-/.test(l[0])?He(e,a):ae(e,a)},i(l){s||(v(i,l),s=!0)},o(l){_(i,l),s=!1},d(l){l&&T(e),i&&i.d(l)}}}function Tf(t){let e=t[0],n,s,r=t[0]&&br(t);return{c(){r&&r.c(),n=Me()},m(i,o){r&&r.m(i,o),C(i,n,o),s=!0},p(i,[o]){i[0]?e?ee(e,i[0])?(r.d(1),r=br(i),r.c(),r.m(n.parentNode,n)):r.p(i,o):(r=br(i),r.c(),r.m(n.parentNode,n)):e&&(r.d(1),r=null),e=i[0]},i(i){s||(v(r),s=!0)},o(i){_(r),s=!1},d(i){i&&T(n),r&&r.d(i)}}}function Cf(t,e,n){const s=["tag","color","customSize"];let r=he(e,s),{$$slots:i={},$$scope:o}=e,{tag:a="h1"}=e,{color:l="text-gray-900 dark:text-white"}=e,{customSize:u=""}=e;const c={h1:"text-5xl font-extrabold",h2:"text-4xl font-bold",h3:"text-3xl font-bold",h4:"text-2xl font-bold",h5:"text-xl font-bold",h6:"text-lg font-bold"};return t.$$set=h=>{n(5,e=O(O({},e),J(h))),n(4,r=he(e,s)),"tag"in h&&n(0,a=h.tag),"color"in h&&n(1,l=h.color),"customSize"in h&&n(2,u=h.customSize),"$$scope"in h&&n(6,o=h.$$scope)},e=J(e),[a,l,u,c,r,e,o,i]}class Po extends ye{constructor(e){super(),pe(this,e,Cf,Tf,ee,{tag:0,color:1,customSize:2})}}function If(t){let e,n;const s=t[15].default,r=se(s,t,t[14],null);let i=[t[1],{class:t[0]}],o={};for(let a=0;a<i.length;a+=1)o=O(o,i[a]);return{c(){e=U("p"),r&&r.c(),ae(e,o)},m(a,l){C(a,e,l),r&&r.m(e,null),n=!0},p(a,[l]){r&&r.p&&(!n||l&16384)&&ie(r,s,a,a[14],n?re(s,a[14],l,null):oe(a[14]),null),ae(e,o=Oe(i,[l&2&&a[1],{class:a[0]}]))},i(a){n||(v(r,a),n=!0)},o(a){_(r,a),n=!1},d(a){a&&T(e),r&&r.d(a)}}}function Sf(t,e,n){const s=["color","height","align","justify","italic","firstupper","upperClass","opacity","whitespace","size","space","weight"];let r=he(e,s),{$$slots:i={},$$scope:o}=e,{color:a="text-gray-900 dark:text-white"}=e,{height:l="normal"}=e,{align:u="left"}=e,{justify:c=!1}=e,{italic:h=!1}=e,{firstupper:f=!1}=e,{upperClass:g="first-line:uppercase first-line:tracking-widest first-letter:text-7xl first-letter:font-bold first-letter:text-gray-900 dark:first-letter:text-gray-100 first-letter:mr-3 first-letter:float-left"}=e,{opacity:d=void 0}=e,{whitespace:y="normal"}=e,{size:p="base"}=e,{space:b=void 0}=e,{weight:I="normal"}=e;const S={xs:"text-xs",sm:"text-sm",base:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl","4xl":"text-4xl","5xl":"text-5xl","6xl":"text-6xl","7xl":"text-7xl","8xl":"text-8xl","9xl":"text-9xl"},P={thin:"font-thin",extralight:"font-extralight",light:"font-light",normal:"font-normal",medium:"font-medium",semibold:"font-semibold",bold:"font-bold",extrabold:"font-extrabold",black:"font-black"},j={tighter:"tracking-tighter",tight:"tracking-tight",normal:"tracking-normal",wide:"tracking-wide",wider:"tracking-wider",widest:"tracking-widest"},de={normal:"leading-normal",relaxed:"leading-relaxed",loose:"leading-loose"},Se={left:"text-left",center:"text-center",right:"text-right"},ze={normal:"whitespace-normal",nowrap:"whitespace-nowrap",pre:"whitespace-pre",preline:"whitespace-pre-line",prewrap:"whitespace-pre-wrap"};let ve=a.split(" ").map(w=>w.trim()).map(w=>w+"/"+String(d)).join(" "),Ye=le(p&&S[p],d&&ve||a&&a,l&&de[l],I&&P[I],b&&j[b],u&&Se[u],c&&"text-justify",h&&"italic",f&&g,y&&ze[y],e.class);return t.$$set=w=>{n(23,e=O(O({},e),J(w))),n(1,r=he(e,s)),"color"in w&&n(2,a=w.color),"height"in w&&n(3,l=w.height),"align"in w&&n(4,u=w.align),"justify"in w&&n(5,c=w.justify),"italic"in w&&n(6,h=w.italic),"firstupper"in w&&n(7,f=w.firstupper),"upperClass"in w&&n(8,g=w.upperClass),"opacity"in w&&n(9,d=w.opacity),"whitespace"in w&&n(10,y=w.whitespace),"size"in w&&n(11,p=w.size),"space"in w&&n(12,b=w.space),"weight"in w&&n(13,I=w.weight),"$$scope"in w&&n(14,o=w.$$scope)},e=J(e),[Ye,r,a,l,u,c,h,f,g,d,y,p,b,I,o,i]}class pn extends ye{constructor(e){super(),pe(this,e,Sf,If,ee,{color:2,height:3,align:4,justify:5,italic:6,firstupper:7,upperClass:8,opacity:9,whitespace:10,size:11,space:12,weight:13})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Af=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const r=t[n++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[n++];e[s++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[s++]=String.fromCharCode((r&15)<<12|(i&63)<<6|o&63)}}return e.join("")},ll={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<t.length;r+=3){const i=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,c=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,g=u&63;l||(g=64,o||(f=64)),s.push(n[c],n[h],n[f],n[g])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(al(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Af(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<t.length;){const i=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const h=r<t.length?n[t.charAt(r)]:64;if(++r,i==null||a==null||u==null||h==null)throw Error();const f=i<<2|a>>4;if(s.push(f),u!==64){const g=a<<4&240|u>>2;if(s.push(g),h!==64){const d=u<<6&192|h;s.push(d)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Df=function(t){const e=al(t);return ll.encodeByteArray(e,!0)},ks=function(t){return Df(t).replace(/\./g,"")},Nf=function(t){try{return ll.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Rf(){return typeof indexedDB=="object"}function Lf(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function Mf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of=()=>Mf().__FIREBASE_DEFAULTS__,Pf=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Vf=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Nf(t[1]);return e&&JSON.parse(e)},ul=()=>{try{return Of()||Pf()||Vf()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ff=t=>{var e,n;return(n=(e=ul())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},xf=t=>{const e=Ff(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Uf=()=>{var t;return(t=ul())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[ks(JSON.stringify(n)),ks(JSON.stringify(o)),a].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="FirebaseError";class Zt extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=zf,Object.setPrototypeOf(this,Zt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cl.prototype.create)}}class cl{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?qf(i,s):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Zt(r,a,s)}}function qf(t,e){return t.replace(Hf,(n,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const Hf=/\{\$([^}]+)}/g;function Ur(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const r of n){if(!s.includes(r))return!1;const i=t[r],o=e[r];if(Vo(i)&&Vo(o)){if(!Ur(i,o))return!1}else if(i!==o)return!1}for(const r of s)if(!n.includes(r))return!1;return!0}function Vo(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t){return t&&t._delegate?t._delegate:t}class Tn{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Bf;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Qf(e))try{this.getOrInitializeService({instanceIdentifier:yt})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:r});s.resolve(i)}catch{}}}}clearInstance(e=yt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yt){return this.instances.has(e)}getOptions(e=yt){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);s===a&&o.resolve(r)}return r}onInit(e,n){var s;const r=this.normalizeInstanceIdentifier(n),i=(s=this.onInitCallbacks.get(r))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(!!s)for(const r of s)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Gf(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=yt){return this.component?this.component.multipleInstances?e:yt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Gf(t){return t===yt?void 0:t}function Qf(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Kf(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Z||(Z={}));const Xf={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},Yf=Z.INFO,Jf={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},Zf=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),r=Jf[e];if(r)console[r](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hl{constructor(e){this.name=e,this._logLevel=Yf,this._logHandler=Zf,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Xf[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...e),this._logHandler(this,Z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...e),this._logHandler(this,Z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...e),this._logHandler(this,Z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...e),this._logHandler(this,Z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...e),this._logHandler(this,Z.ERROR,...e)}}const $f=(t,e)=>e.some(n=>t instanceof n);let Fo,xo;function ed(){return Fo||(Fo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function td(){return xo||(xo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fl=new WeakMap,Br=new WeakMap,dl=new WeakMap,_r=new WeakMap,mi=new WeakMap;function nd(t){const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ut(t.result)),r()},o=()=>{s(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&fl.set(n,t)}).catch(()=>{}),mi.set(e,t),e}function sd(t){if(Br.has(t))return;const e=new Promise((n,s)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),r()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Br.set(t,e)}let jr={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Br.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dl.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ut(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function rd(t){jr=t(jr)}function id(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(wr(this),e,...n);return dl.set(s,e.sort?e.sort():[e]),ut(s)}:td().includes(t)?function(...e){return t.apply(wr(this),e),ut(fl.get(this))}:function(...e){return ut(t.apply(wr(this),e))}}function od(t){return typeof t=="function"?id(t):(t instanceof IDBTransaction&&sd(t),$f(t,ed())?new Proxy(t,jr):t)}function ut(t){if(t instanceof IDBRequest)return nd(t);if(_r.has(t))return _r.get(t);const e=od(t);return e!==t&&(_r.set(t,e),mi.set(e,t)),e}const wr=t=>mi.get(t);function ad(t,e,{blocked:n,upgrade:s,blocking:r,terminated:i}={}){const o=indexedDB.open(t,e),a=ut(o);return s&&o.addEventListener("upgradeneeded",l=>{s(ut(o.result),l.oldVersion,l.newVersion,ut(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{i&&l.addEventListener("close",()=>i()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}const ld=["get","getKey","getAll","getAllKeys","count"],ud=["put","add","delete","clear"],kr=new Map;function Uo(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(kr.get(e))return kr.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,r=ud.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(r||ld.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return s&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return kr.set(e,i),i}rd(t=>({...t,get:(e,n,s)=>Uo(e,n)||t.get(e,n,s),has:(e,n)=>!!Uo(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hd(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function hd(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zr="@firebase/app",Bo="0.8.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct=new hl("@firebase/app"),fd="@firebase/app-compat",dd="@firebase/analytics-compat",gd="@firebase/analytics",md="@firebase/app-check-compat",pd="@firebase/app-check",yd="@firebase/auth",vd="@firebase/auth-compat",bd="@firebase/database",_d="@firebase/database-compat",wd="@firebase/functions",kd="@firebase/functions-compat",Ed="@firebase/installations",Td="@firebase/installations-compat",Cd="@firebase/messaging",Id="@firebase/messaging-compat",Sd="@firebase/performance",Ad="@firebase/performance-compat",Dd="@firebase/remote-config",Nd="@firebase/remote-config-compat",Rd="@firebase/storage",Ld="@firebase/storage-compat",Md="@firebase/firestore",Od="@firebase/firestore-compat",Pd="firebase",Vd="9.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="[DEFAULT]",Fd={[zr]:"fire-core",[fd]:"fire-core-compat",[gd]:"fire-analytics",[dd]:"fire-analytics-compat",[pd]:"fire-app-check",[md]:"fire-app-check-compat",[yd]:"fire-auth",[vd]:"fire-auth-compat",[bd]:"fire-rtdb",[_d]:"fire-rtdb-compat",[wd]:"fire-fn",[kd]:"fire-fn-compat",[Ed]:"fire-iid",[Td]:"fire-iid-compat",[Cd]:"fire-fcm",[Id]:"fire-fcm-compat",[Sd]:"fire-perf",[Ad]:"fire-perf-compat",[Dd]:"fire-rc",[Nd]:"fire-rc-compat",[Rd]:"fire-gcs",[Ld]:"fire-gcs-compat",[Md]:"fire-fst",[Od]:"fire-fst-compat","fire-js":"fire-js",[Pd]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new Map,Hr=new Map;function xd(t,e){try{t.container.addComponent(e)}catch(n){Ct.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ts(t){const e=t.name;if(Hr.has(e))return Ct.debug(`There were multiple attempts to register component ${e}.`),!1;Hr.set(e,t);for(const n of Es.values())xd(n,t);return!0}function Ud(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ct=new cl("app","Firebase",Bd);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Tn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ct.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd=Vd;function gl(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s=Object.assign({name:qr,automaticDataCollectionEnabled:!1},e),r=s.name;if(typeof r!="string"||!r)throw ct.create("bad-app-name",{appName:String(r)});if(n||(n=Uf()),!n)throw ct.create("no-options");const i=Es.get(r);if(i){if(Ur(n,i.options)&&Ur(s,i.config))return i;throw ct.create("duplicate-app",{appName:r})}const o=new Wf(r);for(const l of Hr.values())o.addComponent(l);const a=new jd(n,s,o);return Es.set(r,a),a}function qd(t=qr){const e=Es.get(t);if(!e&&t===qr)return gl();if(!e)throw ct.create("no-app",{appName:t});return e}function Bt(t,e,n){var s;let r=(s=Fd[t])!==null&&s!==void 0?s:t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ct.warn(a.join(" "));return}Ts(new Tn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="firebase-heartbeat-database",Kd=1,Cn="firebase-heartbeat-store";let Er=null;function ml(){return Er||(Er=ad(Hd,Kd,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Cn)}}}).catch(t=>{throw ct.create("idb-open",{originalErrorMessage:t.message})})),Er}async function Gd(t){var e;try{return(await ml()).transaction(Cn).objectStore(Cn).get(pl(t))}catch(n){if(n instanceof Zt)Ct.warn(n.message);else{const s=ct.create("idb-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message});Ct.warn(s.message)}}}async function jo(t,e){var n;try{const r=(await ml()).transaction(Cn,"readwrite");return await r.objectStore(Cn).put(e,pl(t)),r.done}catch(s){if(s instanceof Zt)Ct.warn(s.message);else{const r=ct.create("idb-set",{originalErrorMessage:(n=s)===null||n===void 0?void 0:n.message});Ct.warn(r.message)}}}function pl(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=1024,Wd=30*24*60*60*1e3;class Xd{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Jd(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zo();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(r=>r.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const i=new Date(r.date).valueOf();return Date.now()-i<=Wd}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=zo(),{heartbeatsToSend:n,unsentEntries:s}=Yd(this._heartbeatsCache.heartbeats),r=ks(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function zo(){return new Date().toISOString().substring(0,10)}function Yd(t,e=Qd){const n=[];let s=t.slice();for(const r of t){const i=n.find(o=>o.agent===r.agent);if(i){if(i.dates.push(r.date),qo(n)>e){i.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),qo(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class Jd{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rf()?Lf().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Gd(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return jo(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return jo(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function qo(t){return ks(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(t){Ts(new Tn("platform-logger",e=>new cd(e),"PRIVATE")),Ts(new Tn("heartbeat",e=>new Xd(e),"PRIVATE")),Bt(zr,Bo,t),Bt(zr,Bo,"esm2017"),Bt("fire-js","")}Zd("");var $d="firebase",eg="9.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bt($d,eg,"app");var tg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},D,pi=pi||{},B=tg||self;function Cs(){}function zs(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Bn(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function ng(t){return Object.prototype.hasOwnProperty.call(t,Tr)&&t[Tr]||(t[Tr]=++sg)}var Tr="closure_uid_"+(1e9*Math.random()>>>0),sg=0;function rg(t,e,n){return t.call.apply(t.bind,arguments)}function ig(t,e,n){if(!t)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,s),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function xe(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?xe=rg:xe=ig,xe.apply(null,arguments)}function os(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var s=n.slice();return s.push.apply(s,arguments),t.apply(this,s)}}function Pe(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(s,r,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(s,o)}}function mt(){this.s=this.s,this.o=this.o}var og=0;mt.prototype.s=!1;mt.prototype.na=function(){!this.s&&(this.s=!0,this.M(),og!=0)&&ng(this)};mt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const yl=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function yi(t){const e=t.length;if(0<e){const n=Array(e);for(let s=0;s<e;s++)n[s]=t[s];return n}return[]}function Ho(t,e){for(let n=1;n<arguments.length;n++){const s=arguments[n];if(zs(s)){const r=t.length||0,i=s.length||0;t.length=r+i;for(let o=0;o<i;o++)t[r+o]=s[o]}else t.push(s)}}function Ue(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ue.prototype.h=function(){this.defaultPrevented=!0};var ag=function(){if(!B.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{B.addEventListener("test",Cs,e),B.removeEventListener("test",Cs,e)}catch{}return t}();function Is(t){return/^[\s\xa0]*$/.test(t)}var Ko=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Cr(t,e){return t<e?-1:t>e?1:0}function qs(){var t=B.navigator;return t&&(t=t.userAgent)?t:""}function Je(t){return qs().indexOf(t)!=-1}function vi(t){return vi[" "](t),t}vi[" "]=Cs;function lg(t){var e=hg;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var ug=Je("Opera"),Kt=Je("Trident")||Je("MSIE"),vl=Je("Edge"),Kr=vl||Kt,bl=Je("Gecko")&&!(qs().toLowerCase().indexOf("webkit")!=-1&&!Je("Edge"))&&!(Je("Trident")||Je("MSIE"))&&!Je("Edge"),cg=qs().toLowerCase().indexOf("webkit")!=-1&&!Je("Edge");function _l(){var t=B.document;return t?t.documentMode:void 0}var Ss;e:{var Ir="",Sr=function(){var t=qs();if(bl)return/rv:([^\);]+)(\)|;)/.exec(t);if(vl)return/Edge\/([\d\.]+)/.exec(t);if(Kt)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(cg)return/WebKit\/(\S+)/.exec(t);if(ug)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Sr&&(Ir=Sr?Sr[1]:""),Kt){var Ar=_l();if(Ar!=null&&Ar>parseFloat(Ir)){Ss=String(Ar);break e}}Ss=Ir}var hg={};function fg(){return lg(function(){let t=0;const e=Ko(String(Ss)).split("."),n=Ko("9").split("."),s=Math.max(e.length,n.length);for(let o=0;t==0&&o<s;o++){var r=e[o]||"",i=n[o]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],r[0].length==0&&i[0].length==0)break;t=Cr(r[1].length==0?0:parseInt(r[1],10),i[1].length==0?0:parseInt(i[1],10))||Cr(r[2].length==0,i[2].length==0)||Cr(r[2],i[2]),r=r[3],i=i[3]}while(t==0)}return 0<=t})}var Gr;if(B.document&&Kt){var Go=_l();Gr=Go||parseInt(Ss,10)||void 0}else Gr=void 0;var dg=Gr;function In(t,e){if(Ue.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,s=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(bl){e:{try{vi(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,s?(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:gg[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&In.X.h.call(this)}}Pe(In,Ue);var gg={2:"touch",3:"pen",4:"mouse"};In.prototype.h=function(){In.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var jn="closure_listenable_"+(1e6*Math.random()|0),mg=0;function pg(t,e,n,s,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!s,this.ha=r,this.key=++mg,this.ba=this.ea=!1}function Hs(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function bi(t,e,n){for(const s in t)e.call(n,t[s],s,t)}function wl(t){const e={};for(const n in t)e[n]=t[n];return e}const Qo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kl(t,e){let n,s;for(let r=1;r<arguments.length;r++){s=arguments[r];for(n in s)t[n]=s[n];for(let i=0;i<Qo.length;i++)n=Qo[i],Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}}function Ks(t){this.src=t,this.g={},this.h=0}Ks.prototype.add=function(t,e,n,s,r){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=Wr(t,e,s,r);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new pg(e,this.src,i,!!s,r),e.ea=n,t.push(e)),e};function Qr(t,e){var n=e.type;if(n in t.g){var s=t.g[n],r=yl(s,e),i;(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(Hs(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Wr(t,e,n,s){for(var r=0;r<t.length;++r){var i=t[r];if(!i.ba&&i.listener==e&&i.capture==!!n&&i.ha==s)return r}return-1}var _i="closure_lm_"+(1e6*Math.random()|0),Dr={};function El(t,e,n,s,r){if(s&&s.once)return Cl(t,e,n,s,r);if(Array.isArray(e)){for(var i=0;i<e.length;i++)El(t,e[i],n,s,r);return null}return n=Ei(n),t&&t[jn]?t.N(e,n,Bn(s)?!!s.capture:!!s,r):Tl(t,e,n,!1,s,r)}function Tl(t,e,n,s,r,i){if(!e)throw Error("Invalid event type");var o=Bn(r)?!!r.capture:!!r,a=ki(t);if(a||(t[_i]=a=new Ks(t)),n=a.add(e,n,s,o,i),n.proxy)return n;if(s=yg(),n.proxy=s,s.src=t,s.listener=n,t.addEventListener)ag||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),s,r);else if(t.attachEvent)t.attachEvent(Sl(e.toString()),s);else if(t.addListener&&t.removeListener)t.addListener(s);else throw Error("addEventListener and attachEvent are unavailable.");return n}function yg(){function t(n){return e.call(t.src,t.listener,n)}const e=vg;return t}function Cl(t,e,n,s,r){if(Array.isArray(e)){for(var i=0;i<e.length;i++)Cl(t,e[i],n,s,r);return null}return n=Ei(n),t&&t[jn]?t.O(e,n,Bn(s)?!!s.capture:!!s,r):Tl(t,e,n,!0,s,r)}function Il(t,e,n,s,r){if(Array.isArray(e))for(var i=0;i<e.length;i++)Il(t,e[i],n,s,r);else s=Bn(s)?!!s.capture:!!s,n=Ei(n),t&&t[jn]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=Wr(i,n,s,r),-1<n&&(Hs(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=ki(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Wr(e,n,s,r)),(n=-1<t?e[t]:null)&&wi(n))}function wi(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[jn])Qr(e.i,t);else{var n=t.type,s=t.proxy;e.removeEventListener?e.removeEventListener(n,s,t.capture):e.detachEvent?e.detachEvent(Sl(n),s):e.addListener&&e.removeListener&&e.removeListener(s),(n=ki(e))?(Qr(n,t),n.h==0&&(n.src=null,e[_i]=null)):Hs(t)}}}function Sl(t){return t in Dr?Dr[t]:Dr[t]="on"+t}function vg(t,e){if(t.ba)t=!0;else{e=new In(e,this);var n=t.listener,s=t.ha||t.src;t.ea&&wi(t),t=n.call(s,e)}return t}function ki(t){return t=t[_i],t instanceof Ks?t:null}var Nr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ei(t){return typeof t=="function"?t:(t[Nr]||(t[Nr]=function(e){return t.handleEvent(e)}),t[Nr])}function Ie(){mt.call(this),this.i=new Ks(this),this.P=this,this.I=null}Pe(Ie,mt);Ie.prototype[jn]=!0;Ie.prototype.removeEventListener=function(t,e,n,s){Il(this,t,e,n,s)};function Ne(t,e){var n,s=t.I;if(s)for(n=[];s;s=s.I)n.push(s);if(t=t.P,s=e.type||e,typeof e=="string")e=new Ue(e,t);else if(e instanceof Ue)e.target=e.target||t;else{var r=e;e=new Ue(s,t),kl(e,r)}if(r=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];r=as(o,s,!0,e)&&r}if(o=e.g=t,r=as(o,s,!0,e)&&r,r=as(o,s,!1,e)&&r,n)for(i=0;i<n.length;i++)o=e.g=n[i],r=as(o,s,!1,e)&&r}Ie.prototype.M=function(){if(Ie.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],s=0;s<n.length;s++)Hs(n[s]);delete t.g[e],t.h--}}this.I=null};Ie.prototype.N=function(t,e,n,s){return this.i.add(String(t),e,!1,n,s)};Ie.prototype.O=function(t,e,n,s){return this.i.add(String(t),e,!0,n,s)};function as(t,e,n,s){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ba&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.ea&&Qr(t.i,o),r=a.call(l,s)!==!1&&r}}return r&&!s.defaultPrevented}var Ti=B.JSON.stringify;function bg(){var t=Nl;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class _g{constructor(){this.h=this.g=null}add(e,n){const s=Al.get();s.set(e,n),this.h?this.h.next=s:this.g=s,this.h=s}}var Al=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new wg,t=>t.reset());class wg{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function kg(t){B.setTimeout(()=>{throw t},0)}function Dl(t,e){Xr||Eg(),Yr||(Xr(),Yr=!0),Nl.add(t,e)}var Xr;function Eg(){var t=B.Promise.resolve(void 0);Xr=function(){t.then(Tg)}}var Yr=!1,Nl=new _g;function Tg(){for(var t;t=bg();){try{t.h.call(t.g)}catch(n){kg(n)}var e=Al;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Yr=!1}function Gs(t,e){Ie.call(this),this.h=t||1,this.g=e||B,this.j=xe(this.lb,this),this.l=Date.now()}Pe(Gs,Ie);D=Gs.prototype;D.ca=!1;D.R=null;D.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ne(this,"tick"),this.ca&&(Ci(this),this.start()))}};D.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Ci(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}D.M=function(){Gs.X.M.call(this),Ci(this),delete this.g};function Ii(t,e,n){if(typeof t=="function")n&&(t=xe(t,n));else if(t&&typeof t.handleEvent=="function")t=xe(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:B.setTimeout(t,e||0)}function Rl(t){t.g=Ii(()=>{t.g=null,t.i&&(t.i=!1,Rl(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Cg extends mt{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Rl(this)}M(){super.M(),this.g&&(B.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sn(t){mt.call(this),this.h=t,this.g={}}Pe(Sn,mt);var Wo=[];function Ll(t,e,n,s){Array.isArray(n)||(n&&(Wo[0]=n.toString()),n=Wo);for(var r=0;r<n.length;r++){var i=El(e,n[r],s||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function Ml(t){bi(t.g,function(e,n){this.g.hasOwnProperty(n)&&wi(e)},t),t.g={}}Sn.prototype.M=function(){Sn.X.M.call(this),Ml(this)};Sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Qs(){this.g=!0}Qs.prototype.Aa=function(){this.g=!1};function Ig(t,e,n,s,r,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+s+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function Sg(t,e,n,s,r,i,o){t.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+r+"]: "+e+`
`+n+`
`+i+" "+o})}function Vt(t,e,n,s){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Dg(t,n)+(s?" "+s:"")})}function Ag(t,e){t.info(function(){return"TIMEOUT: "+e})}Qs.prototype.info=function(){};function Dg(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var s=n[t];if(!(2>s.length)){var r=s[1];if(Array.isArray(r)&&!(1>r.length)){var i=r[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return Ti(n)}catch{return e}}var Dt={},Xo=null;function Ws(){return Xo=Xo||new Ie}Dt.Pa="serverreachability";function Ol(t){Ue.call(this,Dt.Pa,t)}Pe(Ol,Ue);function An(t){const e=Ws();Ne(e,new Ol(e))}Dt.STAT_EVENT="statevent";function Pl(t,e){Ue.call(this,Dt.STAT_EVENT,t),this.stat=e}Pe(Pl,Ue);function je(t){const e=Ws();Ne(e,new Pl(e,t))}Dt.Qa="timingevent";function Vl(t,e){Ue.call(this,Dt.Qa,t),this.size=e}Pe(Vl,Ue);function zn(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return B.setTimeout(function(){t()},e)}var Xs={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Fl={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Si(){}Si.prototype.h=null;function Yo(t){return t.h||(t.h=t.i())}function xl(){}var qn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Ai(){Ue.call(this,"d")}Pe(Ai,Ue);function Di(){Ue.call(this,"c")}Pe(Di,Ue);var Jr;function Ys(){}Pe(Ys,Si);Ys.prototype.g=function(){return new XMLHttpRequest};Ys.prototype.i=function(){return{}};Jr=new Ys;function Hn(t,e,n,s){this.l=t,this.j=e,this.m=n,this.U=s||1,this.S=new Sn(this),this.O=Ng,t=Kr?125:void 0,this.T=new Gs(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ul}function Ul(){this.i=null,this.g="",this.h=!1}var Ng=45e3,Zr={},As={};D=Hn.prototype;D.setTimeout=function(t){this.O=t};function $r(t,e,n){t.K=1,t.v=Zs(it(e)),t.s=n,t.P=!0,Bl(t,null)}function Bl(t,e){t.F=Date.now(),Kn(t),t.A=it(t.v);var n=t.A,s=t.U;Array.isArray(s)||(s=[String(s)]),Wl(n.i,"t",s),t.C=0,n=t.l.H,t.h=new Ul,t.g=mu(t.l,n?e:null,!t.s),0<t.N&&(t.L=new Cg(xe(t.La,t,t.g),t.N)),Ll(t.S,t.g,"readystatechange",t.ib),e=t.H?wl(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),An(),Ig(t.j,t.u,t.A,t.m,t.U,t.s)}D.ib=function(t){t=t.target;const e=this.L;e&&tt(t)==3?e.l():this.La(t)};D.La=function(t){try{if(t==this.g)e:{const c=tt(this.g);var e=this.g.Ea();const h=this.g.aa();if(!(3>c)&&(c!=3||Kr||this.g&&(this.h.h||this.g.fa()||ea(this.g)))){this.I||c!=4||e==7||(e==8||0>=h?An(3):An(2)),Js(this);var n=this.g.aa();this.Y=n;t:if(jl(this)){var s=ea(this.g);t="";var r=s.length,i=tt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vt(this),yn(this);var o="";break t}this.h.i=new B.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(s[e],{stream:i&&e==r-1});s.splice(0,r),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,Sg(this.j,this.u,this.A,this.m,this.U,c,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Is(a)){var u=a;break t}}u=null}if(n=u)Vt(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ei(this,n);else{this.i=!1,this.o=3,je(12),vt(this),yn(this);break e}}this.P?(zl(this,c,o),Kr&&this.i&&c==3&&(Ll(this.S,this.T,"tick",this.hb),this.T.start())):(Vt(this.j,this.m,o,null),ei(this,o)),c==4&&vt(this),this.i&&!this.I&&(c==4?hu(this.l,this):(this.i=!1,Kn(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,je(12)):(this.o=0,je(13)),vt(this),yn(this)}}}catch{}finally{}};function jl(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function zl(t,e,n){let s=!0,r;for(;!t.I&&t.C<n.length;)if(r=Rg(t,n),r==As){e==4&&(t.o=4,je(14),s=!1),Vt(t.j,t.m,null,"[Incomplete Response]");break}else if(r==Zr){t.o=4,je(15),Vt(t.j,t.m,n,"[Invalid Chunk]"),s=!1;break}else Vt(t.j,t.m,r,null),ei(t,r);jl(t)&&r!=As&&r!=Zr&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,je(16),s=!1),t.i=t.i&&s,s?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Vi(e),e.K=!0,je(11))):(Vt(t.j,t.m,n,"[Invalid Chunked Response]"),vt(t),yn(t))}D.hb=function(){if(this.g){var t=tt(this.g),e=this.g.fa();this.C<e.length&&(Js(this),zl(this,t,e),this.i&&t!=4&&Kn(this))}};function Rg(t,e){var n=t.C,s=e.indexOf(`
`,n);return s==-1?As:(n=Number(e.substring(n,s)),isNaN(n)?Zr:(s+=1,s+n>e.length?As:(e=e.substr(s,n),t.C=s+n,e)))}D.cancel=function(){this.I=!0,vt(this)};function Kn(t){t.V=Date.now()+t.O,ql(t,t.O)}function ql(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=zn(xe(t.gb,t),e)}function Js(t){t.B&&(B.clearTimeout(t.B),t.B=null)}D.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(Ag(this.j,this.A),this.K!=2&&(An(),je(17)),vt(this),this.o=2,yn(this)):ql(this,this.V-t)};function yn(t){t.l.G==0||t.I||hu(t.l,t)}function vt(t){Js(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Ci(t.T),Ml(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function ei(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||ti(n.h,t))){if(!t.J&&ti(n.h,t)&&n.G==3){try{var s=n.Fa.g.parse(e)}catch{s=null}if(Array.isArray(s)&&s.length==3){var r=s;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)Rs(n),tr(n);else break e;Pi(n),je(18)}}else n.Ba=r[1],0<n.Ba-n.T&&37500>r[2]&&n.L&&n.A==0&&!n.v&&(n.v=zn(xe(n.cb,n),6e3));if(1>=Jl(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else bt(n,11)}else if((t.J||n.g==t)&&Rs(n),!Is(e))for(r=n.Fa.g.parse(e),e=0;e<r.length;e++){let u=r[e];if(n.T=u[0],u=u[1],n.G==2)if(u[0]=="c"){n.I=u[1],n.ka=u[2];const c=u[3];c!=null&&(n.ma=c,n.j.info("VER="+n.ma));const h=u[4];h!=null&&(n.Ca=h,n.j.info("SVER="+n.Ca));const f=u[5];f!=null&&typeof f=="number"&&0<f&&(s=1.5*f,n.J=s,n.j.info("backChannelRequestTimeoutMs_="+s)),s=n;const g=t.g;if(g){const d=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(d){var i=s.h;i.g||d.indexOf("spdy")==-1&&d.indexOf("quic")==-1&&d.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Ni(i,i.h),i.h=null))}if(s.D){const y=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(s.za=y,ue(s.F,s.D,y))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),s=n;var o=t;if(s.sa=gu(s,s.H?s.ka:null,s.V),o.J){Zl(s.h,o);var a=o,l=s.J;l&&a.setTimeout(l),a.B&&(Js(a),Kn(a)),s.g=o}else uu(s);0<n.i.length&&nr(n)}else u[0]!="stop"&&u[0]!="close"||bt(n,7);else n.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?bt(n,7):Oi(n):u[0]!="noop"&&n.l&&n.l.wa(u),n.A=0)}}An(4)}catch{}}function Lg(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(zs(t)){for(var e=[],n=t.length,s=0;s<n;s++)e.push(t[s]);return e}e=[],n=0;for(s in t)e[n++]=t[s];return e}function Mg(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(zs(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const s in t)e[n++]=s;return e}}}function Hl(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(zs(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Mg(t),s=Lg(t),r=s.length,i=0;i<r;i++)e.call(void 0,s[i],n&&n[i],t)}var Kl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Og(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var s=t[n].indexOf("="),r=null;if(0<=s){var i=t[n].substring(0,s);r=t[n].substring(s+1)}else i=t[n];e(i,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function wt(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof wt){this.h=e!==void 0?e:t.h,Ds(this,t.j),this.s=t.s,this.g=t.g,Ns(this,t.m),this.l=t.l,e=t.i;var n=new Dn;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Jo(this,n),this.o=t.o}else t&&(n=String(t).match(Kl))?(this.h=!!e,Ds(this,n[1]||"",!0),this.s=cn(n[2]||""),this.g=cn(n[3]||"",!0),Ns(this,n[4]),this.l=cn(n[5]||"",!0),Jo(this,n[6]||"",!0),this.o=cn(n[7]||"")):(this.h=!!e,this.i=new Dn(null,this.h))}wt.prototype.toString=function(){var t=[],e=this.j;e&&t.push(hn(e,Zo,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(hn(e,Zo,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(hn(n,n.charAt(0)=="/"?Fg:Vg,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",hn(n,Ug)),t.join("")};function it(t){return new wt(t)}function Ds(t,e,n){t.j=n?cn(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ns(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Jo(t,e,n){e instanceof Dn?(t.i=e,Bg(t.i,t.h)):(n||(e=hn(e,xg)),t.i=new Dn(e,t.h))}function ue(t,e,n){t.i.set(e,n)}function Zs(t){return ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function cn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function hn(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Pg),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Pg(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Zo=/[#\/\?@]/g,Vg=/[#\?:]/g,Fg=/[#\?]/g,xg=/[#\?@]/g,Ug=/#/g;function Dn(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function pt(t){t.g||(t.g=new Map,t.h=0,t.i&&Og(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}D=Dn.prototype;D.add=function(t,e){pt(this),this.i=null,t=$t(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Gl(t,e){pt(t),e=$t(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Ql(t,e){return pt(t),e=$t(t,e),t.g.has(e)}D.forEach=function(t,e){pt(this),this.g.forEach(function(n,s){n.forEach(function(r){t.call(e,r,s,this)},this)},this)};D.oa=function(){pt(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let s=0;s<e.length;s++){const r=t[s];for(let i=0;i<r.length;i++)n.push(e[s])}return n};D.W=function(t){pt(this);let e=[];if(typeof t=="string")Ql(this,t)&&(e=e.concat(this.g.get($t(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};D.set=function(t,e){return pt(this),this.i=null,t=$t(this,t),Ql(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};D.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function Wl(t,e,n){Gl(t,e),0<n.length&&(t.i=null,t.g.set($t(t,e),yi(n)),t.h+=n.length)}D.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var s=e[n];const i=encodeURIComponent(String(s)),o=this.W(s);for(s=0;s<o.length;s++){var r=i;o[s]!==""&&(r+="="+encodeURIComponent(String(o[s]))),t.push(r)}}return this.i=t.join("&")};function $t(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Bg(t,e){e&&!t.j&&(pt(t),t.i=null,t.g.forEach(function(n,s){var r=s.toLowerCase();s!=r&&(Gl(this,s),Wl(this,r,n))},t)),t.j=e}var jg=class{constructor(t,e){this.h=t,this.g=e}};function Xl(t){this.l=t||zg,B.PerformanceNavigationTiming?(t=B.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(B.g&&B.g.Ga&&B.g.Ga()&&B.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var zg=10;function Yl(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Jl(t){return t.h?1:t.g?t.g.size:0}function ti(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Ni(t,e){t.g?t.g.add(e):t.h=e}function Zl(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Xl.prototype.cancel=function(){if(this.i=$l(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function $l(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return yi(t.i)}function Ri(){}Ri.prototype.stringify=function(t){return B.JSON.stringify(t,void 0)};Ri.prototype.parse=function(t){return B.JSON.parse(t,void 0)};function qg(){this.g=new Ri}function Hg(t,e,n){const s=n||"";try{Hl(t,function(r,i){let o=r;Bn(r)&&(o=Ti(r)),e.push(s+i+"="+encodeURIComponent(o))})}catch(r){throw e.push(s+"type="+encodeURIComponent("_badmap")),r}}function Kg(t,e){const n=new Qs;if(B.Image){const s=new Image;s.onload=os(ls,n,s,"TestLoadImage: loaded",!0,e),s.onerror=os(ls,n,s,"TestLoadImage: error",!1,e),s.onabort=os(ls,n,s,"TestLoadImage: abort",!1,e),s.ontimeout=os(ls,n,s,"TestLoadImage: timeout",!1,e),B.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=t}else e(!1)}function ls(t,e,n,s,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(s)}catch{}}function Gn(t){this.l=t.ac||null,this.j=t.jb||!1}Pe(Gn,Si);Gn.prototype.g=function(){return new $s(this.l,this.j)};Gn.prototype.i=function(t){return function(){return t}}({});function $s(t,e){Ie.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Li,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pe($s,Ie);var Li=0;D=$s.prototype;D.open=function(t,e){if(this.readyState!=Li)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Nn(this)};D.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||B).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};D.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qn(this)),this.readyState=Li};D.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Nn(this)),this.g&&(this.readyState=3,Nn(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof B.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;eu(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function eu(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}D.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Qn(this):Nn(this),this.readyState==3&&eu(this)}};D.Va=function(t){this.g&&(this.response=this.responseText=t,Qn(this))};D.Ua=function(t){this.g&&(this.response=t,Qn(this))};D.ga=function(){this.g&&Qn(this)};function Qn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Nn(t)}D.setRequestHeader=function(t,e){this.v.append(t,e)};D.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};D.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Nn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty($s.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Gg=B.JSON.parse;function me(t){Ie.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tu,this.K=this.L=!1}Pe(me,Ie);var tu="",Qg=/^https?$/i,Wg=["POST","PUT"];D=me.prototype;D.Ka=function(t){this.L=t};D.da=function(t,e,n,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Jr.g(),this.C=this.u?Yo(this.u):Yo(Jr),this.g.onreadystatechange=xe(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){$o(this,i);return}if(t=n||"",n=new Map(this.headers),s)if(Object.getPrototypeOf(s)===Object.prototype)for(var r in s)n.set(r,s[r]);else if(typeof s.keys=="function"&&typeof s.get=="function")for(const i of s.keys())n.set(i,s.get(i));else throw Error("Unknown input type for opt_headers: "+String(s));s=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),r=B.FormData&&t instanceof B.FormData,!(0<=yl(Wg,e))||s||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ru(this),0<this.B&&((this.K=Xg(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xe(this.qa,this)):this.A=Ii(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){$o(this,i)}};function Xg(t){return Kt&&fg()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}D.qa=function(){typeof pi<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ne(this,"timeout"),this.abort(8))};function $o(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,nu(t),er(t)}function nu(t){t.D||(t.D=!0,Ne(t,"complete"),Ne(t,"error"))}D.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ne(this,"complete"),Ne(this,"abort"),er(this))};D.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),er(this,!0)),me.X.M.call(this)};D.Ha=function(){this.s||(this.F||this.v||this.l?su(this):this.fb())};D.fb=function(){su(this)};function su(t){if(t.h&&typeof pi<"u"&&(!t.C[1]||tt(t)!=4||t.aa()!=2)){if(t.v&&tt(t)==4)Ii(t.Ha,0,t);else if(Ne(t,"readystatechange"),tt(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var s;if(s=a===0){var r=String(t.H).match(Kl)[1]||null;if(!r&&B.self&&B.self.location){var i=B.self.location.protocol;r=i.substr(0,i.length-1)}s=!Qg.test(r?r.toLowerCase():"")}n=s}if(n)Ne(t,"complete"),Ne(t,"success");else{t.m=6;try{var o=2<tt(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",nu(t)}}finally{er(t)}}}}function er(t,e){if(t.g){ru(t);const n=t.g,s=t.C[0]?Cs:null;t.g=null,t.C=null,e||Ne(t,"ready");try{n.onreadystatechange=s}catch{}}}function ru(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(B.clearTimeout(t.A),t.A=null)}function tt(t){return t.g?t.g.readyState:0}D.aa=function(){try{return 2<tt(this)?this.g.status:-1}catch{return-1}};D.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};D.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Gg(e)}};function ea(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case tu:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}D.Ea=function(){return this.m};D.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function iu(t){let e="";return bi(t,function(n,s){e+=s,e+=":",e+=n,e+=`\r
`}),e}function Mi(t,e,n){e:{for(s in n){var s=!1;break e}s=!0}s||(n=iu(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ue(t,e,n))}function ln(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ou(t){this.Ca=0,this.i=[],this.j=new Qs,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ln("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ln("baseRetryDelayMs",5e3,t),this.bb=ln("retryDelaySeedMs",1e4,t),this.$a=ln("forwardChannelMaxRetries",2,t),this.ta=ln("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new Xl(t&&t.concurrentRequestLimit),this.Fa=new qg,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}D=ou.prototype;D.ma=8;D.G=1;function Oi(t){if(au(t),t.G==3){var e=t.U++,n=it(t.F);ue(n,"SID",t.I),ue(n,"RID",e),ue(n,"TYPE","terminate"),Wn(t,n),e=new Hn(t,t.j,e,void 0),e.K=2,e.v=Zs(it(n)),n=!1,B.navigator&&B.navigator.sendBeacon&&(n=B.navigator.sendBeacon(e.v.toString(),"")),!n&&B.Image&&(new Image().src=e.v,n=!0),n||(e.g=mu(e.l,null),e.g.da(e.v)),e.F=Date.now(),Kn(e)}du(t)}function tr(t){t.g&&(Vi(t),t.g.cancel(),t.g=null)}function au(t){tr(t),t.u&&(B.clearTimeout(t.u),t.u=null),Rs(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&B.clearTimeout(t.m),t.m=null)}function nr(t){Yl(t.h)||t.m||(t.m=!0,Dl(t.Ja,t),t.C=0)}function Yg(t,e){return Jl(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=zn(xe(t.Ja,t,e),fu(t,t.C)),t.C++,!0)}D.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const r=new Hn(this,this.j,t,void 0);let i=this.s;if(this.S&&(i?(i=wl(i),kl(i,this.S)):i=this.S),this.o!==null||this.N||(r.H=i,i=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var s=this.i[n];if("__data__"in s.g&&(s=s.g.__data__,typeof s=="string")){s=s.length;break t}s=void 0}if(s===void 0)break;if(e+=s,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=lu(this,r,e),n=it(this.F),ue(n,"RID",t),ue(n,"CVER",22),this.D&&ue(n,"X-HTTP-Session-Id",this.D),Wn(this,n),i&&(this.N?e="headers="+encodeURIComponent(String(iu(i)))+"&"+e:this.o&&Mi(n,this.o,i)),Ni(this.h,r),this.Ya&&ue(n,"TYPE","init"),this.O?(ue(n,"$req",e),ue(n,"SID","null"),r.Z=!0,$r(r,n,null)):$r(r,n,e),this.G=2}}else this.G==3&&(t?ta(this,t):this.i.length==0||Yl(this.h)||ta(this))};function ta(t,e){var n;e?n=e.m:n=t.U++;const s=it(t.F);ue(s,"SID",t.I),ue(s,"RID",n),ue(s,"AID",t.T),Wn(t,s),t.o&&t.s&&Mi(s,t.o,t.s),n=new Hn(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=lu(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),Ni(t.h,n),$r(n,s,e)}function Wn(t,e){t.ia&&bi(t.ia,function(n,s){ue(e,s,n)}),t.l&&Hl({},function(n,s){ue(e,s,n)})}function lu(t,e,n){n=Math.min(t.i.length,n);var s=t.l?xe(t.l.Ra,t.l,t):null;e:{var r=t.i;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=r[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let u=r[l].h;const c=r[l].g;if(u-=i,0>u)i=Math.max(0,r[l].h-100),a=!1;else try{Hg(c,o,"req"+u+"_")}catch{s&&s(c)}}if(a){s=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,s}function uu(t){t.g||t.u||(t.Z=1,Dl(t.Ia,t),t.A=0)}function Pi(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=zn(xe(t.Ia,t),fu(t,t.A)),t.A++,!0)}D.Ia=function(){if(this.u=null,cu(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=zn(xe(this.eb,this),t)}};D.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,je(10),tr(this),cu(this))};function Vi(t){t.B!=null&&(B.clearTimeout(t.B),t.B=null)}function cu(t){t.g=new Hn(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=it(t.sa);ue(e,"RID","rpc"),ue(e,"SID",t.I),ue(e,"CI",t.L?"0":"1"),ue(e,"AID",t.T),ue(e,"TYPE","xmlhttp"),Wn(t,e),t.o&&t.s&&Mi(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=Zs(it(e)),n.s=null,n.P=!0,Bl(n,t)}D.cb=function(){this.v!=null&&(this.v=null,tr(this),Pi(this),je(19))};function Rs(t){t.v!=null&&(B.clearTimeout(t.v),t.v=null)}function hu(t,e){var n=null;if(t.g==e){Rs(t),Vi(t),t.g=null;var s=2}else if(ti(t.h,e))n=e.D,Zl(t.h,e),s=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(s==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var r=t.C;s=Ws(),Ne(s,new Vl(s,n)),nr(t)}else uu(t);else if(r=e.o,r==3||r==0&&0<t.pa||!(s==1&&Yg(t,e)||s==2&&Pi(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),r){case 1:bt(t,5);break;case 4:bt(t,10);break;case 3:bt(t,6);break;default:bt(t,2)}}}function fu(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function bt(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var s=xe(t.kb,t);n||(n=new wt("//www.google.com/images/cleardot.gif"),B.location&&B.location.protocol=="http"||Ds(n,"https"),Zs(n)),Kg(n.toString(),s)}else je(2);t.G=0,t.l&&t.l.va(e),du(t),au(t)}D.kb=function(t){t?(this.j.info("Successfully pinged google.com"),je(2)):(this.j.info("Failed to ping google.com"),je(1))};function du(t){if(t.G=0,t.la=[],t.l){const e=$l(t.h);(e.length!=0||t.i.length!=0)&&(Ho(t.la,e),Ho(t.la,t.i),t.h.i.length=0,yi(t.i),t.i.length=0),t.l.ua()}}function gu(t,e,n){var s=n instanceof wt?it(n):new wt(n,void 0);if(s.g!="")e&&(s.g=e+"."+s.g),Ns(s,s.m);else{var r=B.location;s=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var i=new wt(null,void 0);s&&Ds(i,s),e&&(i.g=e),r&&Ns(i,r),n&&(i.l=n),s=i}return n=t.D,e=t.za,n&&e&&ue(s,n,e),ue(s,"VER",t.ma),Wn(t,s),s}function mu(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new me(new Gn({jb:!0})):new me(t.ra),e.Ka(t.H),e}function pu(){}D=pu.prototype;D.xa=function(){};D.wa=function(){};D.va=function(){};D.ua=function(){};D.Ra=function(){};function Ls(){if(Kt&&!(10<=Number(dg)))throw Error("Environmental error: no available transport.")}Ls.prototype.g=function(t,e){return new Ke(t,e)};function Ke(t,e){Ie.call(this),this.g=new ou(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!Is(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Is(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new en(this)}Pe(Ke,Ie);Ke.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;je(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=gu(t,null,t.V),nr(t)};Ke.prototype.close=function(){Oi(this.g)};Ke.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ti(t),t=n);e.i.push(new jg(e.ab++,t)),e.G==3&&nr(e)};Ke.prototype.M=function(){this.g.l=null,delete this.j,Oi(this.g),delete this.g,Ke.X.M.call(this)};function yu(t){Ai.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Pe(yu,Ai);function vu(){Di.call(this),this.status=1}Pe(vu,Di);function en(t){this.g=t}Pe(en,pu);en.prototype.xa=function(){Ne(this.g,"a")};en.prototype.wa=function(t){Ne(this.g,new yu(t))};en.prototype.va=function(t){Ne(this.g,new vu)};en.prototype.ua=function(){Ne(this.g,"b")};Ls.prototype.createWebChannel=Ls.prototype.g;Ke.prototype.send=Ke.prototype.u;Ke.prototype.open=Ke.prototype.m;Ke.prototype.close=Ke.prototype.close;Xs.NO_ERROR=0;Xs.TIMEOUT=8;Xs.HTTP_ERROR=6;Fl.COMPLETE="complete";xl.EventType=qn;qn.OPEN="a";qn.CLOSE="b";qn.ERROR="c";qn.MESSAGE="d";Ie.prototype.listen=Ie.prototype.N;me.prototype.listenOnce=me.prototype.O;me.prototype.getLastError=me.prototype.Oa;me.prototype.getLastErrorCode=me.prototype.Ea;me.prototype.getStatus=me.prototype.aa;me.prototype.getResponseJson=me.prototype.Sa;me.prototype.getResponseText=me.prototype.fa;me.prototype.send=me.prototype.da;me.prototype.setWithCredentials=me.prototype.Ka;var Jg=function(){return new Ls},Zg=function(){return Ws()},Rr=Xs,$g=Fl,em=Dt,na={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},tm=Gn,us=xl,nm=me;const sa="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ve.UNAUTHENTICATED=new Ve(null),Ve.GOOGLE_CREDENTIALS=new Ve("google-credentials-uid"),Ve.FIRST_PARTY=new Ve("first-party-uid"),Ve.MOCK_USER=new Ve("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tn="9.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It=new hl("@firebase/firestore");function ra(){return It.logLevel}function N(t,...e){if(It.logLevel<=Z.DEBUG){const n=e.map(Fi);It.debug(`Firestore (${tn}): ${t}`,...n)}}function ot(t,...e){if(It.logLevel<=Z.ERROR){const n=e.map(Fi);It.error(`Firestore (${tn}): ${t}`,...n)}}function ni(t,...e){if(It.logLevel<=Z.WARN){const n=e.map(Fi);It.warn(`Firestore (${tn}): ${t}`,...n)}}function Fi(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z(t="Unexpected state"){const e=`FIRESTORE (${tn}) INTERNAL ASSERTION FAILED: `+t;throw ot(e),new Error(e)}function ne(t,e){t||z()}function q(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends Zt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class sm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ve.UNAUTHENTICATED))}shutdown(){}}class rm{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class im{constructor(e){this.t=e,this.currentUser=Ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let s=this.i;const r=l=>this.i!==s?(s=this.i,n(l)):Promise.resolve();let i=new kt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new kt,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{N("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(N("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new kt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(N("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ne(typeof s.accessToken=="string"),new bu(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ne(e===null||typeof e=="string"),new Ve(e)}}class om{constructor(e,n,s,r){this.h=e,this.l=n,this.m=s,this.g=r,this.type="FirstParty",this.user=Ve.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ne(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class am{constructor(e,n,s,r){this.h=e,this.l=n,this.m=s,this.g=r}getToken(){return Promise.resolve(new om(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(Ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class lm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class um{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const s=i=>{i.error!=null&&N("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.A;return this.A=i.token,N("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const r=i=>{N("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.T.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.T.getImmediate({optional:!0});i?r(i):N("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ne(typeof n.token=="string"),this.A=n.token,new lm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<t;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const r=cm(40);for(let i=0;i<r.length;++i)s.length<20&&r[i]<n&&(s+=e.charAt(r[i]%e.length))}return s}}function $(t,e){return t<e?-1:t>e?1:0}function Gt(t,e,n){return t.length===e.length&&t.every((s,r)=>n(s,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new L(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new ke(n,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$(this.nanoseconds,e.nanoseconds):$(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.timestamp=e}static fromTimestamp(e){return new H(e)}static min(){return new H(new ke(0,0))}static max(){return new H(new ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n,s){n===void 0?n=0:n>e.length&&z(),s===void 0?s=e.length-n:s>e.length-n&&z(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Rn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Rn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let r=0;r<s;r++){const i=e.get(r),o=n.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ce extends Rn{construct(e,n,s){return new ce(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new L(k.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(r=>r.length>0))}return new ce(n)}static emptyPath(){return new ce([])}}const hm=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fe extends Rn{construct(e,n,s){return new Fe(e,n,s)}static isValidIdentifier(e){return hm.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Fe(["__name__"])}static fromServerFormat(e){const n=[];let s="",r=0;const i=()=>{if(s.length===0)throw new L(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new L(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new L(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(s+=a,r++):(i(),r++)}if(i(),o)throw new L(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fe(n)}static emptyPath(){return new Fe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.path=e}static fromPath(e){return new M(ce.fromString(e))}static fromName(e){return new M(ce.fromString(e).popFirst(5))}static empty(){return new M(ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new M(new ce(e.slice()))}}function fm(t,e){const n=t.toTimestamp().seconds,s=t.toTimestamp().nanoseconds+1,r=H.fromTimestamp(s===1e9?new ke(n+1,0):new ke(n,s));return new ft(r,M.empty(),e)}function dm(t){return new ft(t.readTime,t.key,-1)}class ft{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ft(H.min(),M.empty(),-1)}static max(){return new ft(H.max(),M.empty(),-1)}}function gm(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=M.comparator(t.documentKey,e.documentKey),n!==0?n:$(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xn(t){if(t.code!==k.FAILED_PRECONDITION||t.message!==mm)throw t;N("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new E((s,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,r)},this.catchCallback=i=>{this.wrapFailure(n,i).next(s,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof E?n:E.resolve(n)}catch(n){return E.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):E.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):E.reject(n)}static resolve(e){return new E((n,s)=>{n(e)})}static reject(e){return new E((n,s)=>{s(e)})}static waitFor(e){return new E((n,s)=>{let r=0,i=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++i,o&&i===r&&n()},l=>s(l))}),o=!0,i===r&&n()})}static or(e){let n=E.resolve(!1);for(const s of e)n=n.next(r=>r?E.resolve(r):s());return n}static forEach(e,n){const s=[];return e.forEach((r,i)=>{s.push(n.call(this,r,i))}),this.waitFor(s)}static mapArray(e,n){return new E((s,r)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===i&&s(o)},c=>r(c))}})}static doWhile(e,n){return new E((s,r)=>{const i=()=>{e()===!0?n().next(()=>{i()},r):s()};i()})}}function Yn(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ut(s),this.ct=s=>n.writeSequenceNumber(s))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function nn(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wu(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xi.at=-1;class Te{constructor(e,n){this.comparator=e,this.root=n||Ae.EMPTY}insert(e,n){return new Te(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ae.BLACK,null,null))}remove(e){return new Te(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ae.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return n+s.left.size;r<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cs(this.root,e,this.comparator,!1)}getReverseIterator(){return new cs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cs(this.root,e,this.comparator,!0)}}class cs{constructor(e,n,s,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?s(e.key,n):1,n&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ae{constructor(e,n,s,r,i){this.key=e,this.value=n,this.color=s!=null?s:Ae.RED,this.left=r!=null?r:Ae.EMPTY,this.right=i!=null?i:Ae.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,r,i){return new Ae(e!=null?e:this.key,n!=null?n:this.value,s!=null?s:this.color,r!=null?r:this.left,i!=null?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let r=this;const i=s(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,n,s),null):i===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ae.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Ae.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ae.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ae.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();const e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}}Ae.EMPTY=null,Ae.RED=!0,Ae.BLACK=!1;Ae.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(t,e,n,s,r){return this}insert(t,e,n){return new Ae(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.comparator=e,this.data=new Te(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new oa(this.data.getIterator())}getIteratorFrom(e){return new oa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof Ee)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ee(this.comparator);return n.data=e,n}}class oa{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.fields=e,e.sort(Fe.comparator)}static empty(){return new Ze([])}unionWith(e){let n=new Ee(Fe.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Ze(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Gt(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Be(n)}static fromUint8Array(e){const n=function(s){let r="";for(let i=0;i<s.length;++i)r+=String.fromCharCode(s[i]);return r}(e);return new Be(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Be.EMPTY_BYTE_STRING=new Be("");const ym=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dt(t){if(ne(!!t),typeof t=="string"){let e=0;const n=ym.exec(t);if(ne(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(t);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:_e(t.seconds),nanos:_e(t.nanos)}}function _e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qt(t){return typeof t=="string"?Be.fromBase64String(t):Be.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Eu(t){const e=t.mapValue.fields.__previous_value__;return ku(e)?Eu(e):e}function Ln(t){const e=dt(t.mapValue.fields.__local_write_time__.timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n,s,r,i,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Mn{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Mn("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Mn&&e.projectId===this.projectId&&e.database===this.database}}function sr(t){return t==null}function Ms(t){return t===0&&1/t==-1/0}function bm(t){return typeof t=="number"&&Number.isInteger(t)&&!Ms(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function St(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ku(t)?4:_m(t)?9007199254740991:10:z()}function $e(t,e){if(t===e)return!0;const n=St(t);if(n!==St(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ln(t).isEqual(Ln(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const i=dt(s.timestampValue),o=dt(r.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Qt(s.bytesValue).isEqual(Qt(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return _e(s.geoPointValue.latitude)===_e(r.geoPointValue.latitude)&&_e(s.geoPointValue.longitude)===_e(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return _e(s.integerValue)===_e(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const i=_e(s.doubleValue),o=_e(r.doubleValue);return i===o?Ms(i)===Ms(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Gt(t.arrayValue.values||[],e.arrayValue.values||[],$e);case 10:return function(s,r){const i=s.mapValue.fields||{},o=r.mapValue.fields||{};if(ia(i)!==ia(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!$e(i[a],o[a])))return!1;return!0}(t,e);default:return z()}}function On(t,e){return(t.values||[]).find(n=>$e(n,e))!==void 0}function Wt(t,e){if(t===e)return 0;const n=St(t),s=St(e);if(n!==s)return $(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return $(t.booleanValue,e.booleanValue);case 2:return function(r,i){const o=_e(r.integerValue||r.doubleValue),a=_e(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return aa(t.timestampValue,e.timestampValue);case 4:return aa(Ln(t),Ln(e));case 5:return $(t.stringValue,e.stringValue);case 6:return function(r,i){const o=Qt(r),a=Qt(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(r,i){const o=r.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=$(o[l],a[l]);if(u!==0)return u}return $(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,i){const o=$(_e(r.latitude),_e(i.latitude));return o!==0?o:$(_e(r.longitude),_e(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(r,i){const o=r.values||[],a=i.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=Wt(o[l],a[l]);if(u)return u}return $(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(r,i){if(r===hs.mapValue&&i===hs.mapValue)return 0;if(r===hs.mapValue)return 1;if(i===hs.mapValue)return-1;const o=r.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const h=$(a[c],u[c]);if(h!==0)return h;const f=Wt(o[a[c]],l[u[c]]);if(f!==0)return f}return $(a.length,u.length)}(t.mapValue,e.mapValue);default:throw z()}}function aa(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return $(t,e);const n=dt(t),s=dt(e),r=$(n.seconds,s.seconds);return r!==0?r:$(n.nanos,s.nanos)}function jt(t){return si(t)}function si(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const r=dt(s);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Qt(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,M.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(s){let r="[",i=!0;for(const o of s.values||[])i?i=!1:r+=",",r+=si(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(s){const r=Object.keys(s.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${si(s.fields[a])}`;return i+"}"}(t.mapValue):z();var e,n}function ri(t){return!!t&&"integerValue"in t}function Ui(t){return!!t&&"arrayValue"in t}function la(t){return!!t&&"nullValue"in t}function ua(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gs(t){return!!t&&"mapValue"in t}function vn(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return nn(t.mapValue.fields,(n,s)=>e.mapValue.fields[n]=vn(s)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vn(t.arrayValue.values[n]);return e}return Object.assign({},t)}function _m(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.value=e}static empty(){return new Ge({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!gs(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vn(n)}setAll(e){let n=Fe.emptyPath(),s={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,s,r),s={},r=[],n=a.popLast()}o?s[a.lastSegment()]=vn(o):r.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,s,r)}delete(e){const n=this.field(e.popLast());gs(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $e(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=n.mapValue.fields[e.get(s)];gs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,s){nn(n,(r,i)=>e[r]=i);for(const r of s)delete e[r]}clone(){return new Ge(vn(this.value))}}function Tu(t){const e=[];return nn(t.fields,(n,s)=>{const r=new Fe([n]);if(gs(s)){const i=Tu(s.mapValue).fields;if(i.length===0)e.push(r);else for(const o of i)e.push(r.child(o))}else e.push(r)}),new Ze(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n,s,r,i,o){this.key=e,this.documentType=n,this.version=s,this.readTime=r,this.data=i,this.documentState=o}static newInvalidDocument(e){return new De(e,0,H.min(),H.min(),Ge.empty(),0)}static newFoundDocument(e,n,s){return new De(e,1,n,H.min(),s,0)}static newNoDocument(e,n){return new De(e,2,n,H.min(),Ge.empty(),0)}static newUnknownDocument(e,n){return new De(e,3,n,H.min(),Ge.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ge.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ge.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=H.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof De&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new De(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e,n=null,s=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ht=null}}function ca(t,e=null,n=[],s=[],r=null,i=null,o=null){return new wm(t,e,n,s,r,i,o)}function Bi(t){const e=q(t);if(e.ht===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>{return(r=s).field.canonicalString()+r.op.toString()+jt(r.value);var r}).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(r){return r.field.canonicalString()+r.dir}(s)).join(","),sr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>jt(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>jt(s)).join(",")),e.ht=n}return e.ht}function km(t){let e=t.path.canonicalString();return t.collectionGroup!==null&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(s=n).field.canonicalString()} ${s.op} ${jt(s.value)}`;var s}).join(", ")}]`),sr(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(n)).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>jt(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>jt(n)).join(",")),`Target(${e})`}function ji(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!Nm(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(n=t.filters[r],s=e.filters[r],n.op!==s.op||!n.field.isEqual(s.field)||!$e(n.value,s.value))return!1;var n,s;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fa(t.startAt,e.startAt)&&fa(t.endAt,e.endAt)}function ii(t){return M.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}class qe extends class{}{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.lt(e,n,s):new Em(e,n,s):n==="array-contains"?new Im(e,s):n==="in"?new Sm(e,s):n==="not-in"?new Am(e,s):n==="array-contains-any"?new Dm(e,s):new qe(e,n,s)}static lt(e,n,s){return n==="in"?new Tm(e,s):new Cm(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.ft(Wt(n,this.value)):n!==null&&St(this.value)===St(n)&&this.ft(Wt(n,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Em extends qe{constructor(e,n,s){super(e,n,s),this.key=M.fromName(s.referenceValue)}matches(e){const n=M.comparator(e.key,this.key);return this.ft(n)}}class Tm extends qe{constructor(e,n){super(e,"in",n),this.keys=Cu("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Cm extends qe{constructor(e,n){super(e,"not-in",n),this.keys=Cu("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Cu(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>M.fromName(s.referenceValue))}class Im extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ui(n)&&On(n.arrayValue,this.value)}}class Sm extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&On(this.value.arrayValue,n)}}class Am extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(On(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!On(this.value.arrayValue,n)}}class Dm extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ui(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>On(this.value.arrayValue,s))}}class Os{constructor(e,n){this.position=e,this.inclusive=n}}class zt{constructor(e,n="asc"){this.field=e,this.dir=n}}function Nm(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ha(t,e,n){let s=0;for(let r=0;r<t.position.length;r++){const i=e[r],o=t.position[r];if(i.field.isKeyField()?s=M.comparator(M.fromName(o.referenceValue),n.key):s=Wt(o,n.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function fa(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$e(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n=null,s=[],r=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this._t=null,this.wt=null,this.startAt,this.endAt}}function Rm(t,e,n,s,r,i,o,a){return new Jn(t,e,n,s,r,i,o,a)}function zi(t){return new Jn(t)}function da(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Iu(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Su(t){for(const e of t.filters)if(e.dt())return e.field;return null}function Lm(t){return t.collectionGroup!==null}function Pn(t){const e=q(t);if(e._t===null){e._t=[];const n=Su(e),s=Iu(e);if(n!==null&&s===null)n.isKeyField()||e._t.push(new zt(n)),e._t.push(new zt(Fe.keyField(),"asc"));else{let r=!1;for(const i of e.explicitOrderBy)e._t.push(i),i.field.isKeyField()&&(r=!0);if(!r){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new zt(Fe.keyField(),i))}}}return e._t}function at(t){const e=q(t);if(!e.wt)if(e.limitType==="F")e.wt=ca(e.path,e.collectionGroup,Pn(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of Pn(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new zt(i.field,o))}const s=e.endAt?new Os(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Os(e.startAt.position,e.startAt.inclusive):null;e.wt=ca(e.path,e.collectionGroup,n,e.filters,e.limit,s,r)}return e.wt}function oi(t,e,n){return new Jn(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function rr(t,e){return ji(at(t),at(e))&&t.limitType===e.limitType}function Au(t){return`${Bi(at(t))}|lt:${t.limitType}`}function ai(t){return`Query(target=${km(at(t))}; limitType=${t.limitType})`}function qi(t,e){return e.isFoundDocument()&&function(n,s){const r=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):M.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(t,e)&&function(n,s){for(const r of n.explicitOrderBy)if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const r of n.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(r,i,o){const a=ha(r,i,o);return r.inclusive?a<=0:a<0}(n.startAt,Pn(n),s)||n.endAt&&!function(r,i,o){const a=ha(r,i,o);return r.inclusive?a>=0:a>0}(n.endAt,Pn(n),s))}(t,e)}function Mm(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Du(t){return(e,n)=>{let s=!1;for(const r of Pn(t)){const i=Om(r,e,n);if(i!==0)return i;s=s||r.field.isKeyField()}return 0}}function Om(t,e,n){const s=t.field.isKeyField()?M.comparator(e.key,n.key):function(r,i,o){const a=i.data.field(r),l=o.data.field(r);return a!==null&&l!==null?Wt(a,l):z()}(t.field,e,n);switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return z()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(t,e){if(t.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ms(e)?"-0":e}}function Ru(t){return{integerValue:""+t}}function Pm(t,e){return bm(e)?Ru(e):Nu(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(){this._=void 0}}function Vm(t,e,n){return t instanceof Vn?function(s,r){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&(i.fields.__previous_value__=r),{mapValue:i}}(n,e):t instanceof Fn?Mu(t,e):t instanceof xn?Ou(t,e):function(s,r){const i=Lu(s,r),o=ga(i)+ga(s.yt);return ri(i)&&ri(s.yt)?Ru(o):Nu(s.It,o)}(t,e)}function Fm(t,e,n){return t instanceof Fn?Mu(t,e):t instanceof xn?Ou(t,e):n}function Lu(t,e){return t instanceof Ps?ri(n=e)||function(s){return!!s&&"doubleValue"in s}(n)?e:{integerValue:0}:null;var n}class Vn extends ir{}class Fn extends ir{constructor(e){super(),this.elements=e}}function Mu(t,e){const n=Pu(e);for(const s of t.elements)n.some(r=>$e(r,s))||n.push(s);return{arrayValue:{values:n}}}class xn extends ir{constructor(e){super(),this.elements=e}}function Ou(t,e){let n=Pu(e);for(const s of t.elements)n=n.filter(r=>!$e(r,s));return{arrayValue:{values:n}}}class Ps extends ir{constructor(e,n){super(),this.It=e,this.yt=n}}function ga(t){return _e(t.integerValue||t.doubleValue)}function Pu(t){return Ui(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n){this.field=e,this.transform=n}}function Um(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Fn&&s instanceof Fn||n instanceof xn&&s instanceof xn?Gt(n.elements,s.elements,$e):n instanceof Ps&&s instanceof Ps?$e(n.yt,s.yt):n instanceof Vn&&s instanceof Vn}(t.transform,e.transform)}class Bm{constructor(e,n){this.version=e,this.transformResults=n}}class nt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nt}static exists(e){return new nt(void 0,e)}static updateTime(e){return new nt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ms(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class or{}function Vu(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xu(t.key,nt.none()):new Zn(t.key,t.data,nt.none());{const n=t.data,s=Ge.empty();let r=new Ee(Fe.comparator);for(let i of e.fields)if(!r.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?s.delete(i):s.set(i,o),r=r.add(i)}return new Nt(t.key,s,new Ze(r.toArray()),nt.none())}}function jm(t,e,n){t instanceof Zn?function(s,r,i){const o=s.value.clone(),a=pa(s.fieldTransforms,r,i.transformResults);o.setAll(a),r.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Nt?function(s,r,i){if(!ms(s.precondition,r))return void r.convertToUnknownDocument(i.version);const o=pa(s.fieldTransforms,r,i.transformResults),a=r.data;a.setAll(Fu(s)),a.setAll(o),r.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(s,r,i){r.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function bn(t,e,n,s){return t instanceof Zn?function(r,i,o,a){if(!ms(r.precondition,i))return o;const l=r.value.clone(),u=ya(r.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,s):t instanceof Nt?function(r,i,o,a){if(!ms(r.precondition,i))return o;const l=ya(r.fieldTransforms,a,i),u=i.data;return u.setAll(Fu(r)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(c=>c.field))}(t,e,n,s):function(r,i,o){return ms(r.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function zm(t,e){let n=null;for(const s of t.fieldTransforms){const r=e.data.field(s.field),i=Lu(s.transform,r||null);i!=null&&(n===null&&(n=Ge.empty()),n.set(s.field,i))}return n||null}function ma(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Gt(n,s,(r,i)=>Um(r,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zn extends or{constructor(e,n,s,r=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Nt extends or{constructor(e,n,s,r,i=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Fu(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=t.data.field(n);e.set(n,s)}}),e}function pa(t,e,n){const s=new Map;ne(t.length===n.length);for(let r=0;r<n.length;r++){const i=t[r],o=i.transform,a=e.data.field(i.field);s.set(i.field,Fm(o,a,n[r]))}return s}function ya(t,e,n){const s=new Map;for(const r of t){const i=r.transform,o=n.data.field(r.field);s.set(r.field,Vm(i,o,e))}return s}class xu extends or{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qm extends or{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be,X;function Km(t){switch(t){default:return z();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0}}function Uu(t){if(t===void 0)return ot("GRPC error has no .code"),k.UNKNOWN;switch(t){case be.OK:return k.OK;case be.CANCELLED:return k.CANCELLED;case be.UNKNOWN:return k.UNKNOWN;case be.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case be.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case be.INTERNAL:return k.INTERNAL;case be.UNAVAILABLE:return k.UNAVAILABLE;case be.UNAUTHENTICATED:return k.UNAUTHENTICATED;case be.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case be.NOT_FOUND:return k.NOT_FOUND;case be.ALREADY_EXISTS:return k.ALREADY_EXISTS;case be.PERMISSION_DENIED:return k.PERMISSION_DENIED;case be.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case be.ABORTED:return k.ABORTED;case be.OUT_OF_RANGE:return k.OUT_OF_RANGE;case be.UNIMPLEMENTED:return k.UNIMPLEMENTED;case be.DATA_LOSS:return k.DATA_LOSS;default:return z()}}(X=be||(be={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[r,i]of s)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[n]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){nn(this.inner,(n,s)=>{for(const[r,i]of s)e(r,i)})}isEmpty(){return wu(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=new Te(M.comparator);function lt(){return Gm}const Bu=new Te(M.comparator);function fn(...t){let e=Bu;for(const n of t)e=e.insert(n.key,n);return e}function ju(t){let e=Bu;return t.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function _t(){return _n()}function zu(){return _n()}function _n(){return new sn(t=>t.toString(),(t,e)=>t.isEqual(e))}const Qm=new Te(M.comparator),Wm=new Ee(M.comparator);function Q(...t){let e=Wm;for(const n of t)e=e.add(n);return e}const Xm=new Ee($);function qu(){return Xm}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,s,r,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const r=new Map;return r.set(e,$n.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ar(H.min(),r,qu(),lt(),Q())}}class $n{constructor(e,n,s,r,i){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new $n(s,n,Q(),Q(),Q())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n,s,r){this.Tt=e,this.removedTargetIds=n,this.key=s,this.Et=r}}class Hu{constructor(e,n){this.targetId=e,this.At=n}}class Ku{constructor(e,n,s=Be.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=r}}class va{constructor(){this.Rt=0,this.bt=_a(),this.Pt=Be.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return this.Rt!==0}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Q(),n=Q(),s=Q();return this.bt.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:s=s.add(r);break;default:z()}}),new $n(this.Pt,this.vt,e,n,s)}Nt(){this.Vt=!1,this.bt=_a()}kt(e,n){this.Vt=!0,this.bt=this.bt.insert(e,n)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Ym{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=lt(),this.qt=ba(),this.Kt=new Ee($)}Gt(e){for(const n of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(n,e.Et):this.jt(n,e.key,e.Et);for(const n of e.removedTargetIds)this.jt(n,e.key,e.Et)}Wt(e){this.forEachTarget(e,n=>{const s=this.zt(n);switch(e.state){case 0:this.Ht(n)&&s.Ct(e.resumeToken);break;case 1:s.Ft(),s.St||s.Nt(),s.Ct(e.resumeToken);break;case 2:s.Ft(),s.St||this.removeTarget(n);break;case 3:this.Ht(n)&&(s.$t(),s.Ct(e.resumeToken));break;case 4:this.Ht(n)&&(this.Jt(n),s.Ct(e.resumeToken));break;default:z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Lt.forEach((s,r)=>{this.Ht(r)&&n(r)})}Yt(e){const n=e.targetId,s=e.At.count,r=this.Xt(n);if(r){const i=r.target;if(ii(i))if(s===0){const o=new M(i.path);this.jt(n,o,De.newNoDocument(o,H.min()))}else ne(s===1);else this.Zt(n)!==s&&(this.Jt(n),this.Kt=this.Kt.add(n))}}te(e){const n=new Map;this.Lt.forEach((i,o)=>{const a=this.Xt(o);if(a){if(i.current&&ii(a.target)){const l=new M(a.target.path);this.Ut.get(l)!==null||this.ee(o,l)||this.jt(o,l,De.newNoDocument(l,e))}i.Dt&&(n.set(o,i.xt()),i.Nt())}});let s=Q();this.qt.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Xt(l);return!u||u.purpose===2||(a=!1,!1)}),a&&(s=s.add(i))}),this.Ut.forEach((i,o)=>o.setReadTime(e));const r=new ar(e,n,this.Kt,this.Ut,s);return this.Ut=lt(),this.qt=ba(),this.Kt=new Ee($),r}Qt(e,n){if(!this.Ht(e))return;const s=this.ee(e,n.key)?2:0;this.zt(e).kt(n.key,s),this.Ut=this.Ut.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ne(n.key).add(e))}jt(e,n,s){if(!this.Ht(e))return;const r=this.zt(e);this.ee(e,n)?r.kt(n,1):r.Ot(n),this.qt=this.qt.insert(n,this.ne(n).delete(e)),s&&(this.Ut=this.Ut.insert(n,s))}removeTarget(e){this.Lt.delete(e)}Zt(e){const n=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let n=this.Lt.get(e);return n||(n=new va,this.Lt.set(e,n)),n}ne(e){let n=this.qt.get(e);return n||(n=new Ee($),this.qt=this.qt.insert(e,n)),n}Ht(e){const n=this.Xt(e)!==null;return n||N("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.Lt.get(e);return n&&n.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new va),this.Bt.getRemoteKeysForTarget(e).forEach(n=>{this.jt(e,n,null)})}ee(e,n){return this.Bt.getRemoteKeysForTarget(e).has(n)}}function ba(){return new Te(M.comparator)}function _a(){return new Te(M.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Zm=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class $m{constructor(e,n){this.databaseId=e,this.gt=n}}function Vs(t,e){return t.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gu(t,e){return t.gt?e.toBase64():e.toUint8Array()}function ep(t,e){return Vs(t,e.toTimestamp())}function st(t){return ne(!!t),H.fromTimestamp(function(e){const n=dt(e);return new ke(n.seconds,n.nanos)}(t))}function Hi(t,e){return function(n){return new ce(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Qu(t){const e=ce.fromString(t);return ne(Yu(e)),e}function li(t,e){return Hi(t.databaseId,e.path)}function Lr(t,e){const n=Qu(e);if(n.get(1)!==t.databaseId.projectId)throw new L(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new M(Wu(n))}function ui(t,e){return Hi(t.databaseId,e)}function tp(t){const e=Qu(t);return e.length===4?ce.emptyPath():Wu(e)}function ci(t){return new ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Wu(t){return ne(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function wa(t,e,n){return{name:li(t,e),fields:n.value.mapValue.fields}}function np(t,e){let n;if("targetChange"in e){e.targetChange;const s=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(l,u){return l.gt?(ne(u===void 0||typeof u=="string"),Be.fromBase64String(u||"")):(ne(u===void 0||u instanceof Uint8Array),Be.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?k.UNKNOWN:Uu(l.code);return new L(u,l.message||"")}(o);n=new Ku(s,r,i,a||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=Lr(t,s.document.name),i=st(s.document.updateTime),o=new Ge({mapValue:{fields:s.document.fields}}),a=De.newFoundDocument(r,i,o),l=s.targetIds||[],u=s.removedTargetIds||[];n=new ps(l,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=Lr(t,s.document),i=s.readTime?st(s.readTime):H.min(),o=De.newNoDocument(r,i),a=s.removedTargetIds||[];n=new ps([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=Lr(t,s.document),i=s.removedTargetIds||[];n=new ps([],i,r,null)}else{if(!("filter"in e))return z();{e.filter;const s=e.filter;s.targetId;const r=s.count||0,i=new Hm(r),o=s.targetId;n=new Hu(o,i)}}return n}function sp(t,e){let n;if(e instanceof Zn)n={update:wa(t,e.key,e.value)};else if(e instanceof xu)n={delete:li(t,e.key)};else if(e instanceof Nt)n={update:wa(t,e.key,e.data),updateMask:dp(e.fieldMask)};else{if(!(e instanceof qm))return z();n={verify:li(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(r,i){const o=i.transform;if(o instanceof Vn)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Fn)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof xn)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Ps)return{fieldPath:i.field.canonicalString(),increment:o.yt};throw z()}(0,s))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:ep(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:z()}(t,e.precondition)),n}function rp(t,e){return t&&t.length>0?(ne(e!==void 0),t.map(n=>function(s,r){let i=s.updateTime?st(s.updateTime):st(r);return i.isEqual(H.min())&&(i=st(r)),new Bm(i,s.transformResults||[])}(n,e))):[]}function ip(t,e){return{documents:[ui(t,e.path)]}}function op(t,e){const n={structuredQuery:{}},s=e.path;e.collectionGroup!==null?(n.parent=ui(t,s),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ui(t,s.popLast()),n.structuredQuery.from=[{collectionId:s.lastSegment()}]);const r=function(l){if(l.length===0)return;const u=l.map(c=>function(h){if(h.op==="=="){if(ua(h.value))return{unaryFilter:{field:Pt(h.field),op:"IS_NAN"}};if(la(h.value))return{unaryFilter:{field:Pt(h.field),op:"IS_NULL"}}}else if(h.op==="!="){if(ua(h.value))return{unaryFilter:{field:Pt(h.field),op:"IS_NOT_NAN"}};if(la(h.value))return{unaryFilter:{field:Pt(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pt(h.field),op:cp(h.op),value:h.value}}}(c));return u.length===1?u[0]:{compositeFilter:{op:"AND",filters:u}}}(e.filters);r&&(n.structuredQuery.where=r);const i=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:Pt(c.field),direction:up(c.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(l,u){return l.gt||sr(u)?u:{value:u}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function ap(t){let e=tp(t.parent);const n=t.structuredQuery,s=n.from?n.from.length:0;let r=null;if(s>0){ne(s===1);const c=n.from[0];c.allDescendants?r=c.collectionId:e=e.child(c.collectionId)}let i=[];n.where&&(i=Xu(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new zt(Ft(h.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,sr(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(c){const h=!!c.before,f=c.values||[];return new Os(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const h=!c.before,f=c.values||[];return new Os(f,h)}(n.endAt)),Rm(e,r,o,i,a,"F",l,u)}function lp(t,e){const n=function(s,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return z()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function Xu(t){return t?t.unaryFilter!==void 0?[fp(t)]:t.fieldFilter!==void 0?[hp(t)]:t.compositeFilter!==void 0?t.compositeFilter.filters.map(e=>Xu(e)).reduce((e,n)=>e.concat(n)):z():[]}function up(t){return Jm[t]}function cp(t){return Zm[t]}function Pt(t){return{fieldPath:t.canonicalString()}}function Ft(t){return Fe.fromServerFormat(t.fieldPath)}function hp(t){return qe.create(Ft(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}function fp(t){switch(t.unaryFilter.op){case"IS_NAN":const e=Ft(t.unaryFilter.field);return qe.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Ft(t.unaryFilter.field);return qe.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ft(t.unaryFilter.field);return qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Ft(t.unaryFilter.field);return qe.create(r,"!=",{nullValue:"NULL_VALUE"});default:return z()}}function dp(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Yu(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,s,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&jm(i,e,s[r])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=bn(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=bn(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=zu();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(r.key)?null:a;const l=Vu(o,a);l!==null&&s.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(H.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Q())}isEqual(e){return this.batchId===e.batchId&&Gt(this.mutations,e.mutations,(n,s)=>ma(n,s))&&Gt(this.baseMutations,e.baseMutations,(n,s)=>ma(n,s))}}class Ki{constructor(e,n,s,r){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=r}static from(e,n,s){ne(e.mutations.length===s.length);let r=Qm;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,s[o].version);return new Ki(e,n,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n,s,r,i=H.min(),o=H.min(),a=Be.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new Et(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Et(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Et(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e){this.re=e}}function yp(t){const e=ap({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?oi(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(){this.Ye=new bp}addToCollectionParentIndex(e,n){return this.Ye.add(n),E.resolve()}getCollectionParents(e,n){return E.resolve(this.Ye.getEntries(n))}addFieldIndex(e,n){return E.resolve()}deleteFieldIndex(e,n){return E.resolve()}getDocumentsMatchingTarget(e,n){return E.resolve(null)}getIndexType(e,n){return E.resolve(0)}getFieldIndexes(e,n){return E.resolve([])}getNextCollectionGroupToUpdate(e){return E.resolve(null)}getMinOffset(e,n){return E.resolve(ft.min())}getMinOffsetFromCollectionGroup(e,n){return E.resolve(ft.min())}updateCollectionGroup(e,n,s){return E.resolve()}updateIndexEntries(e,n){return E.resolve()}}class bp{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n]||new Ee(ce.comparator),i=!r.has(s);return this.index[n]=r.add(s),i}has(e){const n=e.lastSegment(),s=e.popLast(),r=this.index[n];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Ee(ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Xt(0)}static vn(){return new Xt(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(){this.changes=new sn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,De.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?E.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n,s,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(s=r,this.getBaseDocument(e,n,s))).next(r=>(s!==null&&bn(s.mutation,r,Ze.empty(),ke.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Q()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Q()){const r=_t();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,s).next(i=>{let o=fn();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const s=_t();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Q()))}populateOverlays(e,n,s){const r=[];return s.forEach(i=>{n.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,s,r){let i=lt();const o=_n(),a=_n();return n.forEach((l,u)=>{const c=s.get(u.key);r.has(u.key)&&(c===void 0||c.mutation instanceof Nt)?i=i.insert(u.key,u):c!==void 0&&(o.set(u.key,c.mutation.getFieldMask()),bn(c.mutation,u,c.mutation.getFieldMask(),ke.now()))}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new wp(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const s=_n();let r=new Te((o,a)=>o-a),i=Q();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=s.get(l)||Ze.empty();c=a.applyToLocalView(u,c),s.set(l,c);const h=(r.get(a.batchId)||Q()).add(l);r=r.insert(a.batchId,h)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=zu();c.forEach(f=>{if(!i.has(f)){const g=Vu(n.get(f),s.get(f));g!==null&&h.set(f,g),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return E.waitFor(o)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s){return function(r){return M.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Lm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s):this.getDocumentsMatchingCollectionQuery(e,n,s)}getNextDocuments(e,n,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,r-i.size):E.resolve(_t());let a=-1,l=i;return o.next(u=>E.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(c)?E.resolve():this.getBaseDocument(e,c,h).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Q())).next(c=>({batchId:a,changes:ju(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new M(n)).next(s=>{let r=fn();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,s){const r=n.collectionGroup;let i=fn();return this.indexManager.getCollectionParents(e,r).next(o=>E.forEach(o,a=>{const l=function(u,c){return new Jn(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,l,s).next(u=>{u.forEach((c,h)=>{i=i.insert(c,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,s){let r;return this.remoteDocumentCache.getAllFromCollection(e,n.path,s).next(i=>(r=i,this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId))).next(i=>{i.forEach((a,l)=>{const u=l.getKey();r.get(u)===null&&(r=r.insert(u,De.newInvalidDocument(u)))});let o=fn();return r.forEach((a,l)=>{const u=i.get(a);u!==void 0&&bn(u.mutation,l,Ze.empty(),ke.now()),qi(n,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(e,n,s){return s===null||s.mutation.type===1?this.remoteDocumentCache.getEntry(e,n):E.resolve(De.newInvalidDocument(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return E.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var s;return this.Zn.set(n.id,{id:(s=n).id,version:s.version,createTime:st(s.createTime)}),E.resolve()}getNamedQuery(e,n){return E.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,function(s){return{name:s.name,query:yp(s.bundledQuery),readTime:st(s.readTime)}}(n)),E.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(){this.overlays=new Te(M.comparator),this.es=new Map}getOverlay(e,n){return E.resolve(this.overlays.get(n))}getOverlays(e,n){const s=_t();return E.forEach(n,r=>this.getOverlay(e,r).next(i=>{i!==null&&s.set(r,i)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((r,i)=>{this.ue(e,n,i)}),E.resolve()}removeOverlaysForBatchId(e,n,s){const r=this.es.get(s);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.es.delete(s)),E.resolve()}getOverlaysForCollection(e,n,s){const r=_t(),i=n.length+1,o=new M(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>s&&r.set(l.getKey(),l)}return E.resolve(r)}getOverlaysForCollectionGroup(e,n,s,r){let i=new Te((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>s){let c=i.get(u.largestBatchId);c===null&&(c=_t(),i=i.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=_t(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=r)););return E.resolve(a)}ue(e,n,s){const r=this.overlays.get(s.key);if(r!==null){const o=this.es.get(r.largestBatchId).delete(s.key);this.es.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(s.key,new mp(n,s));let i=this.es.get(n);i===void 0&&(i=Q(),this.es.set(n,i)),this.es.set(n,i.add(s.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(){this.ns=new Ee(Ce.ss),this.rs=new Ee(Ce.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const s=new Ce(e,n);this.ns=this.ns.add(s),this.rs=this.rs.add(s)}us(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.cs(new Ce(e,n))}hs(e,n){e.forEach(s=>this.removeReference(s,n))}ls(e){const n=new M(new ce([])),s=new Ce(n,e),r=new Ce(n,e+1),i=[];return this.rs.forEachInRange([s,r],o=>{this.cs(o),i.push(o.key)}),i}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new M(new ce([])),s=new Ce(n,e),r=new Ce(n,e+1);let i=Q();return this.rs.forEachInRange([s,r],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ce(e,0),s=this.ns.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ce{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return M.comparator(e.key,n.key)||$(e._s,n._s)}static os(e,n){return $(e._s,n._s)||M.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Ee(Ce.ss)}checkEmpty(e){return E.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,r){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new gp(i,n,s,r);this.mutationQueue.push(o);for(const a of r)this.gs=this.gs.add(new Ce(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return E.resolve(o)}lookupMutationBatch(e,n){return E.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,r=this.ps(s),i=r<0?0:r;return E.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return E.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return E.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ce(n,0),r=new Ce(n,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([s,r],o=>{const a=this.ys(o._s);i.push(a)}),E.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Ee($);return n.forEach(r=>{const i=new Ce(r,0),o=new Ce(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([i,o],a=>{s=s.add(a._s)})}),E.resolve(this.Is(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,r=s.length+1;let i=s;M.isDocumentKey(i)||(i=i.child(""));const o=new Ce(new M(i),0);let a=new Ee($);return this.gs.forEachWhile(l=>{const u=l.key.path;return!!s.isPrefixOf(u)&&(u.length===r&&(a=a.add(l._s)),!0)},o),E.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(s=>{const r=this.ys(s);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ne(this.Ts(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.gs;return E.forEach(n.mutations,r=>{const i=new Ce(r.key,n.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.gs=s})}An(e){}containsKey(e,n){const s=new Ce(n,0),r=this.gs.firstAfterOrEqual(s);return E.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,E.resolve()}Ts(e,n){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e){this.Es=e,this.docs=new Te(M.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,r=this.docs.get(s),i=r?r.size:0,o=this.Es(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return E.resolve(s?s.document.mutableCopy():De.newInvalidDocument(n))}getEntries(e,n){let s=lt();return n.forEach(r=>{const i=this.docs.get(r);s=s.insert(r,i?i.document.mutableCopy():De.newInvalidDocument(r))}),E.resolve(s)}getAllFromCollection(e,n,s){let r=lt();const i=new M(n.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||gm(dm(l),s)<=0||(r=r.insert(l.key,l.mutableCopy()))}return E.resolve(r)}getAllFromCollectionGroup(e,n,s,r){z()}As(e,n){return E.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new Sp(this)}getSize(e){return E.resolve(this.size)}}class Sp extends _p{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((s,r)=>{r.isValidDocument()?n.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(s)}),E.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e){this.persistence=e,this.Rs=new sn(n=>Bi(n),ji),this.lastRemoteSnapshotVersion=H.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Gi,this.targetCount=0,this.vs=Xt.Pn()}forEachTarget(e,n){return this.Rs.forEach((s,r)=>n(r)),E.resolve()}getLastRemoteSnapshotVersion(e){return E.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return E.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),E.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.bs&&(this.bs=n),E.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new Xt(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,E.resolve()}updateTargetData(e,n){return this.Dn(n),E.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,E.resolve()}removeTargets(e,n,s){let r=0;const i=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&s.get(a.targetId)===null&&(this.Rs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),E.waitFor(i).next(()=>r)}getTargetCount(e){return E.resolve(this.targetCount)}getTargetData(e,n){const s=this.Rs.get(n)||null;return E.resolve(s)}addMatchingKeys(e,n,s){return this.Ps.us(n,s),E.resolve()}removeMatchingKeys(e,n,s){this.Ps.hs(n,s);const r=this.persistence.referenceDelegate,i=[];return r&&n.forEach(o=>{i.push(r.markPotentiallyOrphaned(e,o))}),E.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),E.resolve()}getMatchingKeysForTargetId(e,n){const s=this.Ps.ds(n);return E.resolve(s)}containsKey(e,n){return E.resolve(this.Ps.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new xi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Ap(this),this.indexManager=new vp,this.remoteDocumentCache=function(s){return new Ip(s)}(s=>this.referenceDelegate.xs(s)),this.It=new pp(n),this.Ns=new Ep(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Tp,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Vs[e.toKey()];return s||(s=new Cp(n,this.referenceDelegate),this.Vs[e.toKey()]=s),s}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,s){N("MemoryPersistence","Starting transaction:",e);const r=new Np(this.Ss.next());return this.referenceDelegate.ks(),s(r).next(i=>this.referenceDelegate.Os(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Ms(e,n){return E.or(Object.values(this.Vs).map(s=>()=>s.containsKey(e,n)))}}class Np extends pm{constructor(e){super(),this.currentSequenceNumber=e}}class Qi{constructor(e){this.persistence=e,this.Fs=new Gi,this.$s=null}static Bs(e){return new Qi(e)}get Ls(){if(this.$s)return this.$s;throw z()}addReference(e,n,s){return this.Fs.addReference(s,n),this.Ls.delete(s.toString()),E.resolve()}removeReference(e,n,s){return this.Fs.removeReference(s,n),this.Ls.add(s.toString()),E.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),E.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(r=>this.Ls.add(r.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(i=>this.Ls.add(i.toString()))}).next(()=>s.removeTargetData(e,n))}ks(){this.$s=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return E.forEach(this.Ls,s=>{const r=M.fromPath(s);return this.Us(e,r).next(i=>{i||n.removeEntry(r,H.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.Us(e,n).next(s=>{s?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}Us(e,n){return E.or([()=>E.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ms(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n,s,r){this.targetId=e,this.fromCache=n,this.Si=s,this.Di=r}static Ci(e,n){let s=Q(),r=Q();for(const i of n.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Wi(e,n.fromCache,s,r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,s,r){return this.ki(e,n).next(i=>i||this.Oi(e,n,r,s)).next(i=>i||this.Mi(e,n))}ki(e,n){if(da(n))return E.resolve(null);let s=at(n);return this.indexManager.getIndexType(e,s).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=oi(n,null,"F"),s=at(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const o=Q(...i);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,s).next(l=>{const u=this.Fi(n,a);return this.$i(n,u,o,l.readTime)?this.ki(e,oi(n,null,"F")):this.Bi(e,u,n,l)}))})))}Oi(e,n,s,r){return da(n)||r.isEqual(H.min())?this.Mi(e,n):this.Ni.getDocuments(e,s).next(i=>{const o=this.Fi(n,i);return this.$i(n,o,s,r)?this.Mi(e,n):(ra()<=Z.DEBUG&&N("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ai(n)),this.Bi(e,o,n,fm(r,-1)))})}Fi(e,n){let s=new Ee(Du(e));return n.forEach((r,i)=>{qi(e,i)&&(s=s.add(i))}),s}$i(e,n,s,r){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Mi(e,n){return ra()<=Z.DEBUG&&N("QueryEngine","Using full collection scan to execute query:",ai(n)),this.Ni.getDocumentsMatchingQuery(e,n,ft.min())}Bi(e,n,s,r){return this.Ni.getDocumentsMatchingQuery(e,s,r).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,n,s,r){this.persistence=e,this.Li=n,this.It=r,this.Ui=new Te($),this.qi=new sn(i=>Bi(i),ji),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(s)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kp(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ui))}}function Mp(t,e,n,s){return new Lp(t,e,n,s)}async function Ju(t,e){const n=q(t);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let r;return n.mutationQueue.getAllMutationBatches(s).next(i=>(r=i,n.Qi(e),n.mutationQueue.getAllMutationBatches(s))).next(i=>{const o=[],a=[];let l=Q();for(const u of r){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of i){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(s,l).next(u=>({ji:u,removedBatchIds:o,addedBatchIds:a}))})})}function Op(t,e){const n=q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const r=e.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,h=c.keys();let f=E.resolve();return h.forEach(g=>{f=f.next(()=>u.getEntry(a,g)).next(d=>{const y=l.docVersions.get(g);ne(y!==null),d.version.compareTo(y)<0&&(c.applyToRemoteDocument(d,l),d.isValidDocument()&&(d.setReadTime(l.commitVersion),u.addEntry(d)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,s,e,i).next(()=>i.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(o){let a=Q();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(s,r))})}function Zu(t){const e=q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function Pp(t,e){const n=q(t),s=e.snapshotVersion;let r=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});r=n.Ui;const a=[];e.targetChanges.forEach((c,h)=>{const f=r.get(h);if(!f)return;a.push(n.Cs.removeMatchingKeys(i,c.removedDocuments,h).next(()=>n.Cs.addMatchingKeys(i,c.addedDocuments,h)));let g=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(h)?g=g.withResumeToken(Be.EMPTY_BYTE_STRING,H.min()).withLastLimboFreeSnapshotVersion(H.min()):c.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(c.resumeToken,s)),r=r.insert(h,g),function(d,y,p){return d.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-d.snapshotVersion.toMicroseconds()>=3e8?!0:p.addedDocuments.size+p.modifiedDocuments.size+p.removedDocuments.size>0}(f,g,c)&&a.push(n.Cs.updateTargetData(i,g))});let l=lt(),u=Q();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))}),a.push(Vp(i,o,e.documentUpdates).next(c=>{l=c.Wi,u=c.zi})),!s.isEqual(H.min())){const c=n.Cs.getLastRemoteSnapshotVersion(i).next(h=>n.Cs.setTargetsMetadata(i,i.currentSequenceNumber,s));a.push(c)}return E.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.Ui=r,i))}function Vp(t,e,n){let s=Q(),r=Q();return n.forEach(i=>s=s.add(i)),e.getEntries(t,s).next(i=>{let o=lt();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(H.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):N("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Wi:o,zi:r}})}function Fp(t,e){const n=q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function xp(t,e){const n=q(t);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let r;return n.Cs.getTargetData(s,e).next(i=>i?(r=i,E.resolve(r)):n.Cs.allocateTargetId(s).next(o=>(r=new Et(e,o,0,s.currentSequenceNumber),n.Cs.addTargetData(s,r).next(()=>r))))}).then(s=>{const r=n.Ui.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(s.targetId,s),n.qi.set(e,s.targetId)),s})}async function hi(t,e,n){const s=q(t),r=s.Ui.get(e),i=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",i,o=>s.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Yn(o))throw o;N("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}s.Ui=s.Ui.remove(e),s.qi.delete(r.target)}function ka(t,e,n){const s=q(t);let r=H.min(),i=Q();return s.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=q(a),h=c.qi.get(u);return h!==void 0?E.resolve(c.Ui.get(h)):c.Cs.getTargetData(l,u)}(s,o,at(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,s.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>s.Li.getDocumentsMatchingQuery(o,e,n?r:H.min(),n?i:Q())).next(a=>(Up(s,Mm(e),a),{documents:a,Hi:i})))}function Up(t,e,n){let s=t.Ki.get(e)||H.min();n.forEach((r,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),t.Ki.set(e,s)}class Ea{constructor(){this.activeTargetIds=qu()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bp{constructor(){this.Lr=new Ea,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,n,s){this.Ur[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Ea,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{qr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){N("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){N("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.oo=n+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,n,s,r,i){const o=this.ho(e,n);N("RestConnection","Sending: ",o,s);const a={};return this.lo(a,r,i),this.fo(e,o,a,s).then(l=>(N("RestConnection","Received: ",l),l),l=>{throw ni("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",s),l})}_o(e,n,s,r,i,o){return this.ao(e,n,s,r,i)}lo(e,n,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+tn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,i)=>e[i]=r),s&&s.headers.forEach((r,i)=>e[i]=r)}ho(e,n){const s=zp[e];return`${this.oo}/v1/${n}:${s}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,s,r){return new Promise((i,o)=>{const a=new nm;a.setWithCredentials(!0),a.listenOnce($g.COMPLETE,()=>{var u;try{switch(a.getLastErrorCode()){case Rr.NO_ERROR:const c=a.getResponseJson();N("Connection","XHR received:",JSON.stringify(c)),i(c);break;case Rr.TIMEOUT:N("Connection",'RPC "'+e+'" timed out'),o(new L(k.DEADLINE_EXCEEDED,"Request time out"));break;case Rr.HTTP_ERROR:const h=a.getStatus();if(N("Connection",'RPC "'+e+'" failed with status:',h,"response text:",a.getResponseText()),h>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=(u=f)===null||u===void 0?void 0:u.error;if(g&&g.status&&g.message){const d=function(y){const p=y.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(p)>=0?p:k.UNKNOWN}(g.status);o(new L(d,g.message))}else o(new L(k.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new L(k.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{N("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(r);a.send(n,"POST",l,s,15)})}wo(e,n,s){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Jg(),o=Zg(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new tm({})),this.lo(a.initMessageHeaders,n,s),a.encodeInitMessageHeaders=!0;const l=r.join("");N("Connection","Creating WebChannel: "+l,a);const u=i.createWebChannel(l,a);let c=!1,h=!1;const f=new qp({Hr:d=>{h?N("Connection","Not sending because WebChannel is closed:",d):(c||(N("Connection","Opening WebChannel transport."),u.open(),c=!0),N("Connection","WebChannel sending:",d),u.send(d))},Jr:()=>u.close()}),g=(d,y,p)=>{d.listen(y,b=>{try{p(b)}catch(I){setTimeout(()=>{throw I},0)}})};return g(u,us.EventType.OPEN,()=>{h||N("Connection","WebChannel transport opened.")}),g(u,us.EventType.CLOSE,()=>{h||(h=!0,N("Connection","WebChannel transport closed"),f.io())}),g(u,us.EventType.ERROR,d=>{h||(h=!0,ni("Connection","WebChannel transport errored:",d),f.io(new L(k.UNAVAILABLE,"The operation could not be completed")))}),g(u,us.EventType.MESSAGE,d=>{var y;if(!h){const p=d.data[0];ne(!!p);const b=p,I=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(I){N("Connection","WebChannel received error:",I);const S=I.status;let P=function(de){const Se=be[de];if(Se!==void 0)return Uu(Se)}(S),j=I.message;P===void 0&&(P=k.INTERNAL,j="Unknown error status: "+S+" with message "+I.message),h=!0,f.io(new L(P,j)),u.close()}else N("Connection","WebChannel received:",p),f.ro(p)}}),g(o,em.STAT_EVENT,d=>{d.stat===na.PROXY?N("Connection","Detected buffering proxy"):d.stat===na.NOPROXY&&N("Connection","Detected no buffering proxy")}),setTimeout(()=>{f.so()},0),f}}function Mr(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t){return new $m(t,!0)}class $u{constructor(e,n,s=1e3,r=1.5,i=6e4){this.Hs=e,this.timerId=n,this.mo=s,this.yo=r,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),s=Math.max(0,Date.now()-this.Eo),r=Math.max(0,n-s);r>0&&N("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e,n,s,r,i,o,a,l){this.Hs=e,this.vo=s,this.Vo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new $u(e,n)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,n){this.Lo(),this.Uo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(ot(n.toString()),ot("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.qo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}qo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,r])=>{this.So===n&&this.Go(s,r)},s=>{e(()=>{const r=new L(k.UNKNOWN,"Fetching auth token failed: "+s.message);return this.Qo(r)})})}Go(e,n){const s=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{s(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{s(()=>this.Qo(r))}),this.stream.onMessage(r=>{s(()=>this.onMessage(r))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return N("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(N("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Kp extends ec{constructor(e,n,s,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,r,o),this.It=i}jo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.xo.reset();const n=np(this.It,e),s=function(r){if(!("targetChange"in r))return H.min();const i=r.targetChange;return i.targetIds&&i.targetIds.length?H.min():i.readTime?st(i.readTime):H.min()}(e);return this.listener.Wo(n,s)}zo(e){const n={};n.database=ci(this.It),n.addTarget=function(r,i){let o;const a=i.target;return o=ii(a)?{documents:ip(r,a)}:{query:op(r,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?o.resumeToken=Gu(r,i.resumeToken):i.snapshotVersion.compareTo(H.min())>0&&(o.readTime=Vs(r,i.snapshotVersion.toTimestamp())),o}(this.It,e);const s=lp(this.It,e);s&&(n.labels=s),this.Bo(n)}Ho(e){const n={};n.database=ci(this.It),n.removeTarget=e,this.Bo(n)}}class Gp extends ec{constructor(e,n,s,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,r,o),this.It=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(ne(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=rp(e.writeResults,e.commitTime),s=st(e.commitTime);return this.listener.Zo(s,n)}return ne(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=ci(this.It),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>sp(this.It,s))};this.Bo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp extends class{}{constructor(e,n,s,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.It=r,this.nu=!1}su(){if(this.nu)throw new L(k.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,n,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.connection.ao(e,n,s,r,i)).catch(r=>{throw r.name==="FirebaseError"?(r.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new L(k.UNKNOWN,r.toString())})}_o(e,n,s,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection._o(e,n,s,i,o,r)).catch(i=>{throw i.name==="FirebaseError"?(i.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new L(k.UNKNOWN,i.toString())})}terminate(){this.nu=!0}}class Wp{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(ot(n),this.ou=!1):N("OnlineStateTracker",n)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n,s,r,i){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.qr(o=>{s.enqueueAndForget(async()=>{Rt(this)&&(N("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=q(a);l._u.add(4),await es(l),l.gu.set("Unknown"),l._u.delete(4),await ur(l)}(this))})}),this.gu=new Wp(s,r)}}async function ur(t){if(Rt(t))for(const e of t.wu)await e(!0)}async function es(t){for(const e of t.wu)await e(!1)}function tc(t,e){const n=q(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),Ji(n)?Yi(n):rn(n).ko()&&Xi(n,e))}function nc(t,e){const n=q(t),s=rn(n);n.du.delete(e),s.ko()&&sc(n,e),n.du.size===0&&(s.ko()?s.Fo():Rt(n)&&n.gu.set("Unknown"))}function Xi(t,e){t.yu.Mt(e.targetId),rn(t).zo(e)}function sc(t,e){t.yu.Mt(e),rn(t).Ho(e)}function Yi(t){t.yu=new Ym({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),se:e=>t.du.get(e)||null}),rn(t).start(),t.gu.uu()}function Ji(t){return Rt(t)&&!rn(t).No()&&t.du.size>0}function Rt(t){return q(t)._u.size===0}function rc(t){t.yu=void 0}async function Yp(t){t.du.forEach((e,n)=>{Xi(t,e)})}async function Jp(t,e){rc(t),Ji(t)?(t.gu.hu(e),Yi(t)):t.gu.set("Unknown")}async function Zp(t,e,n){if(t.gu.set("Online"),e instanceof Ku&&e.state===2&&e.cause)try{await async function(s,r){const i=r.cause;for(const o of r.targetIds)s.du.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.du.delete(o),s.yu.removeTarget(o))}(t,e)}catch(s){N("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fs(t,s)}else if(e instanceof ps?t.yu.Gt(e):e instanceof Hu?t.yu.Yt(e):t.yu.Wt(e),!n.isEqual(H.min()))try{const s=await Zu(t.localStore);n.compareTo(s)>=0&&await function(r,i){const o=r.yu.te(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=r.du.get(l);u&&r.du.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach(a=>{const l=r.du.get(a);if(!l)return;r.du.set(a,l.withResumeToken(Be.EMPTY_BYTE_STRING,l.snapshotVersion)),sc(r,a);const u=new Et(l.target,a,1,l.sequenceNumber);Xi(r,u)}),r.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(s){N("RemoteStore","Failed to raise snapshot:",s),await Fs(t,s)}}async function Fs(t,e,n){if(!Yn(e))throw e;t._u.add(1),await es(t),t.gu.set("Offline"),n||(n=()=>Zu(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{N("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await ur(t)})}function ic(t,e){return e().catch(n=>Fs(t,n,e))}async function cr(t){const e=q(t),n=gt(e);let s=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;$p(e);)try{const r=await Fp(e.localStore,s);if(r===null){e.fu.length===0&&n.Fo();break}s=r.batchId,e0(e,r)}catch(r){await Fs(e,r)}oc(e)&&ac(e)}function $p(t){return Rt(t)&&t.fu.length<10}function e0(t,e){t.fu.push(e);const n=gt(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function oc(t){return Rt(t)&&!gt(t).No()&&t.fu.length>0}function ac(t){gt(t).start()}async function t0(t){gt(t).eu()}async function n0(t){const e=gt(t);for(const n of t.fu)e.Xo(n.mutations)}async function s0(t,e,n){const s=t.fu.shift(),r=Ki.from(s,e,n);await ic(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await cr(t)}async function r0(t,e){e&&gt(t).Yo&&await async function(n,s){if(r=s.code,Km(r)&&r!==k.ABORTED){const i=n.fu.shift();gt(n).Mo(),await ic(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await cr(n)}var r}(t,e),oc(t)&&ac(t)}async function Ca(t,e){const n=q(t);n.asyncQueue.verifyOperationInProgress(),N("RemoteStore","RemoteStore received new credentials");const s=Rt(n);n._u.add(3),await es(n),s&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await ur(n)}async function i0(t,e){const n=q(t);e?(n._u.delete(2),await ur(n)):e||(n._u.add(2),await es(n),n.gu.set("Unknown"))}function rn(t){return t.pu||(t.pu=function(e,n,s){const r=q(e);return r.su(),new Kp(n,r.connection,r.authCredentials,r.appCheckCredentials,r.It,s)}(t.datastore,t.asyncQueue,{Yr:Yp.bind(null,t),Zr:Jp.bind(null,t),Wo:Zp.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Mo(),Ji(t)?Yi(t):t.gu.set("Unknown")):(await t.pu.stop(),rc(t))})),t.pu}function gt(t){return t.Iu||(t.Iu=function(e,n,s){const r=q(e);return r.su(),new Gp(n,r.connection,r.authCredentials,r.appCheckCredentials,r.It,s)}(t.datastore,t.asyncQueue,{Yr:t0.bind(null,t),Zr:r0.bind(null,t),tu:n0.bind(null,t),Zo:s0.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Mo(),await cr(t)):(await t.Iu.stop(),t.fu.length>0&&(N("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n,s,r,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=r,this.removalCallback=i,this.deferred=new kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,s,r,i){const o=Date.now()+s,a=new Zi(e,n,o,r,i);return a.start(s),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $i(t,e){if(ot("AsyncQueue",`${e}: ${t}`),Yn(t))return new L(k.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e?(n,s)=>e(n,s)||M.comparator(n.key,s.key):(n,s)=>M.comparator(n.key,s.key),this.keyedMap=fn(),this.sortedSet=new Te(this.comparator)}static emptySet(e){return new qt(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,i=s.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new qt;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.Tu=new Te(M.comparator)}track(e){const n=e.doc.key,s=this.Tu.get(n);s?e.type!==0&&s.type===3?this.Tu=this.Tu.insert(n,e):e.type===3&&s.type!==1?this.Tu=this.Tu.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.Tu=this.Tu.remove(n):e.type===1&&s.type===2?this.Tu=this.Tu.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):z():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,s)=>{e.push(s)}),e}}class Yt{constructor(e,n,s,r,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,s,r,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Yt(e,n,qt.emptySet(n),o,s,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rr(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==s[r].type||!n[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(){this.Au=void 0,this.listeners=[]}}class a0{constructor(){this.queries=new sn(e=>Au(e),rr),this.onlineState="Unknown",this.Ru=new Set}}async function l0(t,e){const n=q(t),s=e.query;let r=!1,i=n.queries.get(s);if(i||(r=!0,i=new o0),r)try{i.Au=await n.onListen(s)}catch(o){const a=$i(o,`Initialization of query '${ai(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.listeners.push(e),e.bu(n.onlineState),i.Au&&e.Pu(i.Au)&&eo(n)}async function u0(t,e){const n=q(t),s=e.query;let r=!1;const i=n.queries.get(s);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),r=i.listeners.length===0)}if(r)return n.queries.delete(s),n.onUnlisten(s)}function c0(t,e){const n=q(t);let s=!1;for(const r of e){const i=r.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Pu(r)&&(s=!0);o.Au=r}}s&&eo(n)}function h0(t,e,n){const s=q(t),r=s.queries.get(e);if(r)for(const i of r.listeners)i.onError(n);s.queries.delete(e)}function eo(t){t.Ru.forEach(e=>{e.next()})}class f0{constructor(e,n,s){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=s||{}}Pu(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new Yt(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){if(!e.fromCache)return!0;const s=n!=="Offline";return(!this.options.Nu||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const n=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}xu(e){e=Yt.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e){this.key=e}}class uc{constructor(e){this.key=e}}class d0{constructor(e,n){this.query=e,this.Uu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Q(),this.mutatedKeys=Q(),this.Gu=Du(e),this.Qu=new qt(this.Gu)}get ju(){return this.Uu}Wu(e,n){const s=n?n.zu:new Ia,r=n?n.Qu:this.Qu;let i=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((c,h)=>{const f=r.get(c),g=qi(this.query,h)?h:null,d=!!f&&this.mutatedKeys.has(f.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let p=!1;f&&g?f.data.isEqual(g.data)?d!==y&&(s.track({type:3,doc:g}),p=!0):this.Hu(f,g)||(s.track({type:2,doc:g}),p=!0,(l&&this.Gu(g,l)>0||u&&this.Gu(g,u)<0)&&(a=!0)):!f&&g?(s.track({type:0,doc:g}),p=!0):f&&!g&&(s.track({type:1,doc:f}),p=!0,(l||u)&&(a=!0)),p&&(g?(o=o.add(g),i=y?i.add(c):i.delete(c)):(o=o.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),i=i.delete(c.key),s.track({type:1,doc:c})}return{Qu:o,zu:s,$i:a,mutatedKeys:i}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const i=e.zu.Eu();i.sort((u,c)=>function(h,f){const g=d=>{switch(d){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return g(h)-g(f)}(u.type,c.type)||this.Gu(u.doc,c.doc)),this.Ju(s);const o=n?this.Yu():[],a=this.Ku.size===0&&this.current?1:0,l=a!==this.qu;return this.qu=a,i.length!==0||l?{snapshot:new Yt(this.query,e.Qu,r,i,e.mutatedKeys,a===0,l,!1,!!s&&s.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Ia,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.Uu=this.Uu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Uu=this.Uu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Q(),this.Qu.forEach(s=>{this.Zu(s.key)&&(this.Ku=this.Ku.add(s.key))});const n=[];return e.forEach(s=>{this.Ku.has(s)||n.push(new uc(s))}),this.Ku.forEach(s=>{e.has(s)||n.push(new lc(s))}),n}tc(e){this.Uu=e.Hi,this.Ku=Q();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ec(){return Yt.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.qu===0,this.hasCachedResults)}}class g0{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class m0{constructor(e){this.key=e,this.nc=!1}}class p0{constructor(e,n,s,r,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new sn(a=>Au(a),rr),this.rc=new Map,this.oc=new Set,this.uc=new Te(M.comparator),this.cc=new Map,this.ac=new Gi,this.hc={},this.lc=new Map,this.fc=Xt.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function y0(t,e){const n=S0(t);let s,r;const i=n.ic.get(e);if(i)s=i.targetId,n.sharedClientState.addLocalQueryTarget(s),r=i.view.ec();else{const o=await xp(n.localStore,at(e));n.isPrimaryClient&&tc(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);s=o.targetId,r=await v0(n,e,s,a==="current",o.resumeToken)}return r}async function v0(t,e,n,s,r){t._c=(h,f,g)=>async function(d,y,p,b){let I=y.view.Wu(p);I.$i&&(I=await ka(d.localStore,y.query,!1).then(({documents:j})=>y.view.Wu(j,I)));const S=b&&b.targetChanges.get(y.targetId),P=y.view.applyChanges(I,d.isPrimaryClient,S);return Aa(d,y.targetId,P.Xu),P.snapshot}(t,h,f,g);const i=await ka(t.localStore,e,!0),o=new d0(e,i.Hi),a=o.Wu(i.documents),l=$n.createSynthesizedTargetChangeForCurrentChange(n,s&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);Aa(t,n,u.Xu);const c=new g0(e,n,o);return t.ic.set(e,c),t.rc.has(n)?t.rc.get(n).push(e):t.rc.set(n,[e]),u.snapshot}async function b0(t,e){const n=q(t),s=n.ic.get(e),r=n.rc.get(s.targetId);if(r.length>1)return n.rc.set(s.targetId,r.filter(i=>!rr(i,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await hi(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),nc(n.remoteStore,s.targetId),fi(n,s.targetId)}).catch(Xn)):(fi(n,s.targetId),await hi(n.localStore,s.targetId,!0))}async function _0(t,e,n){const s=A0(t);try{const r=await function(i,o){const a=q(i),l=ke.now(),u=o.reduce((f,g)=>f.add(g.key),Q());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=lt(),d=Q();return a.Gi.getEntries(f,u).next(y=>{g=y,g.forEach((p,b)=>{b.isValidDocument()||(d=d.add(p))})}).next(()=>a.localDocuments.getOverlayedDocuments(f,g)).next(y=>{c=y;const p=[];for(const b of o){const I=zm(b,c.get(b.key).overlayedDocument);I!=null&&p.push(new Nt(b.key,I,Tu(I.value.mapValue),nt.exists(!0)))}return a.mutationQueue.addMutationBatch(f,l,p,o)}).next(y=>{h=y;const p=y.applyToLocalDocumentSet(c,d);return a.documentOverlayCache.saveOverlays(f,y.batchId,p)})}).then(()=>({batchId:h.batchId,changes:ju(c)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),function(i,o,a){let l=i.hc[i.currentUser.toKey()];l||(l=new Te($)),l=l.insert(o,a),i.hc[i.currentUser.toKey()]=l}(s,r.batchId,n),await ts(s,r.changes),await cr(s.remoteStore)}catch(r){const i=$i(r,"Failed to persist write");n.reject(i)}}async function cc(t,e){const n=q(t);try{const s=await Pp(n.localStore,e);e.targetChanges.forEach((r,i)=>{const o=n.cc.get(i);o&&(ne(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.nc=!0:r.modifiedDocuments.size>0?ne(o.nc):r.removedDocuments.size>0&&(ne(o.nc),o.nc=!1))}),await ts(n,s,e)}catch(s){await Xn(s)}}function Sa(t,e,n){const s=q(t);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const r=[];s.ic.forEach((i,o)=>{const a=o.view.bu(e);a.snapshot&&r.push(a.snapshot)}),function(i,o){const a=q(i);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const h of c.listeners)h.bu(o)&&(l=!0)}),l&&eo(a)}(s.eventManager,e),r.length&&s.sc.Wo(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function w0(t,e,n){const s=q(t);s.sharedClientState.updateQueryState(e,"rejected",n);const r=s.cc.get(e),i=r&&r.key;if(i){let o=new Te(M.comparator);o=o.insert(i,De.newNoDocument(i,H.min()));const a=Q().add(i),l=new ar(H.min(),new Map,new Ee($),o,a);await cc(s,l),s.uc=s.uc.remove(i),s.cc.delete(e),to(s)}else await hi(s.localStore,e,!1).then(()=>fi(s,e,n)).catch(Xn)}async function k0(t,e){const n=q(t),s=e.batch.batchId;try{const r=await Op(n.localStore,e);fc(n,s,null),hc(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ts(n,r)}catch(r){await Xn(r)}}async function E0(t,e,n){const s=q(t);try{const r=await function(i,o){const a=q(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(ne(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(s.localStore,e);fc(s,e,n),hc(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ts(s,r)}catch(r){await Xn(r)}}function hc(t,e){(t.lc.get(e)||[]).forEach(n=>{n.resolve()}),t.lc.delete(e)}function fc(t,e,n){const s=q(t);let r=s.hc[s.currentUser.toKey()];if(r){const i=r.get(e);i&&(n?i.reject(n):i.resolve(),r=r.remove(e)),s.hc[s.currentUser.toKey()]=r}}function fi(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const s of t.rc.get(e))t.ic.delete(s),n&&t.sc.wc(s,n);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(s=>{t.ac.containsKey(s)||dc(t,s)})}function dc(t,e){t.oc.delete(e.path.canonicalString());const n=t.uc.get(e);n!==null&&(nc(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),to(t))}function Aa(t,e,n){for(const s of n)s instanceof lc?(t.ac.addReference(s.key,e),T0(t,s)):s instanceof uc?(N("SyncEngine","Document no longer in limbo: "+s.key),t.ac.removeReference(s.key,e),t.ac.containsKey(s.key)||dc(t,s.key)):z()}function T0(t,e){const n=e.key,s=n.path.canonicalString();t.uc.get(n)||t.oc.has(s)||(N("SyncEngine","New document in limbo: "+n),t.oc.add(s),to(t))}function to(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const n=new M(ce.fromString(e)),s=t.fc.next();t.cc.set(s,new m0(n)),t.uc=t.uc.insert(n,s),tc(t.remoteStore,new Et(at(zi(n.path)),s,2,xi.at))}}async function ts(t,e,n){const s=q(t),r=[],i=[],o=[];s.ic.isEmpty()||(s.ic.forEach((a,l)=>{o.push(s._c(l,e,n).then(u=>{if((u||n)&&s.isPrimaryClient&&s.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){r.push(u);const c=Wi.Ci(l.targetId,u);i.push(c)}}))}),await Promise.all(o),s.sc.Wo(r),await async function(a,l){const u=q(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>E.forEach(l,h=>E.forEach(h.Si,f=>u.persistence.referenceDelegate.addReference(c,h.targetId,f)).next(()=>E.forEach(h.Di,f=>u.persistence.referenceDelegate.removeReference(c,h.targetId,f)))))}catch(c){if(!Yn(c))throw c;N("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const h=c.targetId;if(!c.fromCache){const f=u.Ui.get(h),g=f.snapshotVersion,d=f.withLastLimboFreeSnapshotVersion(g);u.Ui=u.Ui.insert(h,d)}}}(s.localStore,i))}async function C0(t,e){const n=q(t);if(!n.currentUser.isEqual(e)){N("SyncEngine","User change. New user:",e.toKey());const s=await Ju(n.localStore,e);n.currentUser=e,function(r,i){r.lc.forEach(o=>{o.forEach(a=>{a.reject(new L(k.CANCELLED,i))})}),r.lc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ts(n,s.ji)}}function I0(t,e){const n=q(t),s=n.cc.get(e);if(s&&s.nc)return Q().add(s.key);{let r=Q();const i=n.rc.get(e);if(!i)return r;for(const o of i){const a=n.ic.get(o);r=r.unionWith(a.view.ju)}return r}}function S0(t){const e=q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I0.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w0.bind(null,e),e.sc.Wo=c0.bind(null,e.eventManager),e.sc.wc=h0.bind(null,e.eventManager),e}function A0(t){const e=q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=k0.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E0.bind(null,e),e}class D0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.It=lr(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,n){return null}Ec(e,n){return null}Ic(e){return Mp(this.persistence,new Rp,e.initialUser,this.It)}yc(e){return new Dp(Qi.Bs,this.It)}gc(e){return new Bp}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class N0{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Sa(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=C0.bind(null,this.syncEngine),await i0(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new a0}createDatastore(e){const n=lr(e.databaseInfo.databaseId),s=(r=e.databaseInfo,new Hp(r));var r;return function(i,o,a,l){return new Qp(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return n=this.localStore,s=this.datastore,r=e.asyncQueue,i=a=>Sa(this.syncEngine,a,0),o=Ta.C()?new Ta:new jp,new Xp(n,s,r,i,o);var n,s,r,i,o}createSyncEngine(e,n){return function(s,r,i,o,a,l,u){const c=new p0(s,r,i,o,a,l);return u&&(c.dc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=q(e);N("RemoteStore","RemoteStore shutting down."),n._u.add(5),await es(n),n.mu.shutdown(),n.gu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(t,e,n){if(!n)throw new L(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function R0(t,e,n,s){if(e===!0&&s===!0)throw new L(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Da(t){if(!M.isDocumentKey(t))throw new L(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Na(t){if(M.isDocumentKey(t))throw new L(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function no(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":z()}function wn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=no(t);throw new L(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=new Map;class La{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new L(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new L(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,R0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n,s,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new La({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new L(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new L(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new La(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new sm;switch(n.type){case"gapi":const s=n.client;return new am(s,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new L(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Ra.get(e);n&&(N("ComponentProvider","Removing Datastore"),Ra.delete(e),n.terminate())}(this),Promise.resolve()}}function L0(t,e,n,s={}){var r;const i=(t=wn(t,hr))._getSettings();if(i.host!=="firestore.googleapis.com"&&i.host!==e&&ni("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:`${e}:${n}`,ssl:!1})),s.mockUserToken){let o,a;if(typeof s.mockUserToken=="string")o=s.mockUserToken,a=Ve.MOCK_USER;else{o=jf(s.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const l=s.mockUserToken.sub||s.mockUserToken.user_id;if(!l)throw new L(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Ve(l)}t._authCredentials=new rm(new bu(o,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ht(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new We(this.firestore,e,this._key)}}class ns{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class ht extends ns{constructor(e,n,s){super(e,n,zi(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new M(e))}withConverter(e){return new ht(this.firestore,e,this._path)}}function mc(t,e,...n){if(t=Ht(t),gc("collection","path",e),t instanceof hr){const s=ce.fromString(e,...n);return Na(s),new ht(t,null,s)}{if(!(t instanceof We||t instanceof ht))throw new L(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ce.fromString(e,...n));return Na(s),new ht(t.firestore,null,s)}}function M0(t,e,...n){if(t=Ht(t),arguments.length===1&&(e=_u.R()),gc("doc","path",e),t instanceof hr){const s=ce.fromString(e,...n);return Da(s),new We(t,null,new M(s))}{if(!(t instanceof We||t instanceof ht))throw new L(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=t._path.child(ce.fromString(e,...n));return Da(s),new We(t.firestore,t instanceof ht?t.converter:null,new M(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):ot("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,n,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=r,this.user=Ve.UNAUTHENTICATED,this.clientId=_u.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,async i=>{N("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(s,i=>(N("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new L(k.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=$i(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function V0(t,e){t.asyncQueue.verifyOperationInProgress(),N("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let s=n.initialUser;t.setCredentialChangeListener(async r=>{s.isEqual(r)||(await Ju(e.localStore,r),s=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function F0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await x0(t);N("FirestoreClient","Initializing OnlineComponentProvider");const s=await t.getConfiguration();await e.initialize(n,s),t.setCredentialChangeListener(r=>Ca(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Ca(e.remoteStore,i)),t.onlineComponents=e}async function x0(t){return t.offlineComponents||(N("FirestoreClient","Using default OfflineComponentProvider"),await V0(t,new D0)),t.offlineComponents}async function pc(t){return t.onlineComponents||(N("FirestoreClient","Using default OnlineComponentProvider"),await F0(t,new N0)),t.onlineComponents}function U0(t){return pc(t).then(e=>e.syncEngine)}async function Ma(t){const e=await pc(t),n=e.eventManager;return n.onListen=y0.bind(null,e.syncEngine),n.onUnlisten=b0.bind(null,e.syncEngine),n}class B0{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new $u(this,"async_queue_retry"),this.Wc=()=>{const n=Mr();n&&N("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=Mr();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const n=Mr();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const n=new kt;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!Yn(e))throw e;N("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(s=>{this.Kc=s,this.Gc=!1;const r=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(s);throw ot("INTERNAL UNHANDLED ERROR: ",r),s}).then(s=>(this.Gc=!1,s))));return this.Bc=n,n}enqueueAfterDelay(e,n,s){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const r=Zi.createAndSchedule(this,e,n,s,i=>this.Yc(i));return this.qc.push(r),r}zc(){this.Kc&&z()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const n of this.qc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.qc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.qc.indexOf(e);this.qc.splice(n,1)}}function Oa(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const s=e;for(const r of n)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class xs extends hr{constructor(e,n,s,r){super(e,n,s,r),this.type="firestore",this._queue=new B0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||vc(this),this._firestoreClient.terminate()}}function j0(t,e){const n=typeof t=="object"?t:qd(),s=typeof t=="string"?t:e||"(default)",r=Ud(n,"firestore").getImmediate({identifier:s});if(!r._initialized){const i=xf("firestore");i&&L0(r,...i)}return r}function yc(t){return t._firestoreClient||vc(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function vc(t){var e;const n=t._freezeSettings(),s=function(r,i,o,a){return new vm(r,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new P0(t._authCredentials,t._appCheckCredentials,t._queue,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jt(Be.fromBase64String(e))}catch(n){throw new L(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Jt(Be.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $(this._lat,e._lat)||$(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=/^__.*__$/;class q0{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Nt(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zn(e,this.data,n,this.fieldTransforms)}}function bc(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}class oo{constructor(e,n,s,r,i,o){this.settings=e,this.databaseId=n,this.It=s,this.ignoreUndefinedProperties=r,i===void 0&&this.na(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new oo(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ia({path:s,oa:!1});return r.ua(e),r}ca(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.ia({path:s,oa:!1});return r.na(),r}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Us(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(bc(this.sa)&&z0.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class H0{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.It=s||lr(e)}da(e,n,s,r=!1){return new oo({sa:e,methodName:n,fa:s,path:Fe.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function K0(t){const e=t._freezeSettings(),n=lr(t._databaseId);return new H0(t._databaseId,!!e.ignoreUndefinedProperties,n)}function G0(t,e,n,s,r,i={}){const o=t.da(i.merge||i.mergeFields?2:0,e,n,r);Ec("Data must be an object, but it was:",o,s);const a=wc(s,o);let l,u;if(i.merge)l=new Ze(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const c=[];for(const h of i.mergeFields){const f=Q0(e,h,n);if(!o.contains(f))throw new L(k.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);X0(c,f)||c.push(f)}l=new Ze(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new q0(new Ge(a),l,u)}class ao extends ro{_toFieldTransform(e){return new xm(e.path,new Vn)}isEqual(e){return e instanceof ao}}function _c(t,e){if(kc(t=Ht(t)))return Ec("Unsupported field value:",e,t),wc(t,e);if(t instanceof ro)return function(n,s){if(!bc(s.sa))throw s.ha(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.ha(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(n,s){const r=[];let i=0;for(const o of n){let a=_c(o,s.aa(i));a==null&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}return{arrayValue:{values:r}}}(t,e)}return function(n,s){if((n=Ht(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Pm(s.It,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const r=ke.fromDate(n);return{timestampValue:Vs(s.It,r)}}if(n instanceof ke){const r=new ke(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Vs(s.It,r)}}if(n instanceof io)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Jt)return{bytesValue:Gu(s.It,n._byteString)};if(n instanceof We){const r=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(r))throw s.ha(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Hi(n.firestore._databaseId||s.databaseId,n._key.path)}}throw s.ha(`Unsupported field value: ${no(n)}`)}(t,e)}function wc(t,e){const n={};return wu(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nn(t,(s,r)=>{const i=_c(r,e.ra(s));i!=null&&(n[s]=i)}),{mapValue:{fields:n}}}function kc(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof io||t instanceof Jt||t instanceof We||t instanceof ro)}function Ec(t,e,n){if(!kc(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const s=no(n);throw s==="an object"?e.ha(t+" a custom object"):e.ha(t+" "+s)}}function Q0(t,e,n){if((e=Ht(e))instanceof so)return e._internalPath;if(typeof e=="string")return Tc(t,e);throw Us("Field path arguments must be of type string or ",t,!1,void 0,n)}const W0=new RegExp("[~\\*/\\[\\]]");function Tc(t,e,n){if(e.search(W0)>=0)throw Us(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new so(...e.split("."))._internalPath}catch{throw Us(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Us(t,e,n,s,r){const i=s&&!s.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${s}`),o&&(l+=` in document ${r}`),l+=")"),new L(k.INVALID_ARGUMENT,a+t+l)}function X0(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n,s,r,i){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Y0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lo("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Y0 extends Cc{data(){return super.data()}}function lo(t,e){return typeof e=="string"?Tc(t,e):e instanceof so?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Z0{}function $0(t,...e){for(const n of e)t=n._apply(t);return t}class ey extends Z0{constructor(e,n){super(),this.ma=e,this.pa=n,this.type="orderBy"}_apply(e){const n=function(s,r,i){if(s.startAt!==null)throw new L(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new L(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new zt(r,i);return function(a,l){if(Iu(a)===null){const u=Su(a);u!==null&&ny(a,u,l.field)}}(s,o),o}(e._query,this.ma,this.pa);return new ns(e.firestore,e.converter,function(s,r){const i=s.explicitOrderBy.concat([r]);return new Jn(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ty(t,e="asc"){const n=e,s=lo("orderBy",t);return new ey(s,n)}function ny(t,e,n){if(!n.isEqual(e))throw new L(k.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{convertValue(e,n="none"){switch(St(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw z()}}convertObject(e,n){const s={};return nn(e.fields,(r,i)=>{s[r]=this.convertValue(i,n)}),s}convertGeoPoint(e){return new io(_e(e.latitude),_e(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Eu(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Ln(e));default:return null}}convertTimestamp(e){const n=dt(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ce.fromString(e);ne(Yu(s));const r=new Mn(s.get(1),s.get(3)),i=new M(s.popFirst(5));return r.isEqual(n)||ot(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(t,e,n){let s;return s=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ic extends Cc{constructor(e,n,s,r,i,o){super(e,n,s,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ys(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(lo("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class ys extends Ic{data(e={}){return super.data(e)}}class iy{constructor(e,n,s,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new dn(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new ys(this._firestore,this._userDataWriter,s.key,s,new dn(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const a=new ys(s._firestore,s._userDataWriter,o.doc.key,o.doc,new dn(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>r||o.type!==3).map(o=>{const a=new ys(s._firestore,s._userDataWriter,o.doc.key,o.doc,new dn(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:oy(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function oy(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}class Sc extends sy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,n)}}function ay(t,e){const n=wn(t.firestore,xs),s=M0(t),r=ry(t.converter,e);return uy(n,[G0(K0(t.firestore),"addDoc",s._key,r,t.converter!==null,{}).toMutation(s._key,nt.exists(!1))]).then(()=>s)}function ly(t,...e){var n,s,r;t=Ht(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||Oa(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(Oa(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(s=h.error)===null||s===void 0?void 0:s.bind(h),e[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let l,u,c;if(t instanceof We)u=wn(t.firestore,xs),c=zi(t._key.path),l={next:h=>{e[o]&&e[o](cy(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=wn(t,ns);u=wn(h.firestore,xs),c=h._query;const f=new Sc(u);l={next:g=>{e[o]&&e[o](new iy(u,f,h,g))},error:e[o+1],complete:e[o+2]},J0(t._query)}return function(h,f,g,d){const y=new O0(d),p=new f0(f,y,g);return h.asyncQueue.enqueueAndForget(async()=>l0(await Ma(h),p)),()=>{y.bc(),h.asyncQueue.enqueueAndForget(async()=>u0(await Ma(h),p))}}(yc(u),c,a,l)}function uy(t,e){return function(n,s){const r=new kt;return n.asyncQueue.enqueueAndForget(async()=>_0(await U0(n),s,r)),r.promise}(yc(t),e)}function cy(t,e,n){const s=n.docs.get(e._key),r=new Sc(t);return new Ic(t,r,e._key,s,new dn(n.hasPendingWrites,n.fromCache),e.converter)}function hy(){return new ao("serverTimestamp")}(function(t,e=!0){(function(n){tn=n})(zd),Ts(new Tn("firestore",(n,{instanceIdentifier:s,options:r})=>{const i=n.getProvider("app").getImmediate(),o=new xs(new im(n.getProvider("auth-internal")),new um(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new L(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mn(a.options.projectId,l)}(i,s),i);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),Bt(sa,"3.7.3",t),Bt(sa,"3.7.3","esm2017")})();const fy={apiKey:"AIzaSyBE1xuFncad-cgFgkDgRwO0hQkNb8aF1KI",authDomain:"thiagometro-bf771.firebaseapp.com",projectId:"thiagometro-bf771",storageBucket:"thiagometro-bf771.appspot.com",messagingSenderId:"969109893719",appId:"1:969109893719:web:b0c85ed83f5ec031ab2912"},dy=gl(fy),Ac=j0(dy);function Pa(t,e,n){const s=t.slice();return s[18]=e[n],s}function Va(t,e,n){const s=t.slice();return s[21]=e[n],s[23]=n,s}function gy(t){let e;return{c(){e=fe("Selecione uma categoria")},m(n,s){C(n,e,s)},d(n){n&&T(e)}}}function my(t){let e,n;return e=new pn({props:{size:"base",weight:"semibold",$$slots:{default:[gy]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment)},m(s,r){K(e,s,r),n=!0},p(s,r){const i={};r&16777216&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){G(e,s)}}}function py(t){let e;return{c(){e=fe("Descri\xE7\xE3o")},m(n,s){C(n,e,s)},d(n){n&&T(e)}}}function yy(t){let e,n;return e=new pn({props:{size:"base",weight:"semibold",$$slots:{default:[py]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment)},m(s,r){K(e,s,r),n=!0},p(s,r){const i={};r&16777216&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){G(e,s)}}}function vy(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-5 h-5")},m(s,r){C(s,e,r),x(e,n)},p:Y,d(s){s&&T(e)}}}function by(t){let e,n,s;return{c(){e=ge("svg"),n=ge("path"),s=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"),m(s,"stroke-linecap","round"),m(s,"stroke-linejoin","round"),m(s,"d","M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-5 h-5")},m(r,i){C(r,e,i),x(e,n),x(e,s)},p:Y,d(r){r&&T(e)}}}function _y(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-5 h-5")},m(s,r){C(s,e,r),x(e,n)},p:Y,d(s){s&&T(e)}}}function wy(t){let e,n,s,r,i,o;return e=new Ut({props:{name:"Attach file",$$slots:{default:[vy]},$$scope:{ctx:t}}}),s=new Ut({props:{name:"Embed map",$$slots:{default:[by]},$$scope:{ctx:t}}}),i=new Ut({props:{name:"Upload image",$$slots:{default:[_y]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment),n=te(),W(s.$$.fragment),r=te(),W(i.$$.fragment)},m(a,l){K(e,a,l),C(a,n,l),K(s,a,l),C(a,r,l),K(i,a,l),o=!0},p(a,l){const u={};l&16777216&&(u.$$scope={dirty:l,ctx:a}),e.$set(u);const c={};l&16777216&&(c.$$scope={dirty:l,ctx:a}),s.$set(c);const h={};l&16777216&&(h.$$scope={dirty:l,ctx:a}),i.$set(h)},i(a){o||(v(e.$$.fragment,a),v(s.$$.fragment,a),v(i.$$.fragment,a),o=!0)},o(a){_(e.$$.fragment,a),_(s.$$.fragment,a),_(i.$$.fragment,a),o=!1},d(a){G(e,a),a&&T(n),G(s,a),a&&T(r),G(i,a)}}}function ky(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-5 h-5")},m(s,r){C(s,e,r),x(e,n)},p:Y,d(s){s&&T(e)}}}function Ey(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-5 h-5")},m(s,r){C(s,e,r),x(e,n)},p:Y,d(s){s&&T(e)}}}function Ty(t){let e,n,s,r;return e=new Ut({props:{name:"Format code",$$slots:{default:[ky]},$$scope:{ctx:t}}}),s=new Ut({props:{name:"Add emoji",$$slots:{default:[Ey]},$$scope:{ctx:t}}}),s.$on("click",t[13]),{c(){W(e.$$.fragment),n=te(),W(s.$$.fragment)},m(i,o){K(e,i,o),C(i,n,o),K(s,i,o),r=!0},p(i,o){const a={};o&16777216&&(a.$$scope={dirty:o,ctx:i}),e.$set(a);const l={};o&16777216&&(l.$$scope={dirty:o,ctx:i}),s.$set(l)},i(i){r||(v(e.$$.fragment,i),v(s.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(s.$$.fragment,i),r=!1},d(i){G(e,i),i&&T(n),G(s,i)}}}function Cy(t){let e,n,s,r;return e=new Oo({props:{$$slots:{default:[wy]},$$scope:{ctx:t}}}),s=new Oo({props:{$$slots:{default:[Ty]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment),n=te(),W(s.$$.fragment)},m(i,o){K(e,i,o),C(i,n,o),K(s,i,o),r=!0},p(i,o){const a={};o&16777216&&(a.$$scope={dirty:o,ctx:i}),e.$set(a);const l={};o&16777218&&(l.$$scope={dirty:o,ctx:i}),s.$set(l)},i(i){r||(v(e.$$.fragment,i),v(s.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(s.$$.fragment,i),r=!1},d(i){G(e,i),i&&T(n),G(s,i)}}}function Iy(t){let e,n;return{c(){e=ge("svg"),n=ge("path"),m(n,"stroke-linecap","round"),m(n,"stroke-linejoin","round"),m(n,"d","M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"),m(e,"xmlns","http://www.w3.org/2000/svg"),m(e,"fill","none"),m(e,"viewBox","0 0 24 24"),m(e,"stroke-width","1.5"),m(e,"stroke","currentColor"),m(e,"class","w-6 h-6")},m(s,r){C(s,e,r),x(e,n)},p:Y,d(s){s&&T(e)}}}function Sy(t){let e,n;return e=new Ut({props:{name:"send",slot:"end",form:"form1",type:"submit",$$slots:{default:[Iy]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment)},m(s,r){K(e,s,r),n=!0},p(s,r){const i={};r&16777216&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){G(e,s)}}}function Ay(t){let e,n;return e=new wf({props:{slot:"header",embedded:!0,$$slots:{end:[Sy],default:[Cy]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment)},m(s,r){K(e,s,r),n=!0},p(s,r){const i={};r&16777218&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){G(e,s)}}}function Fa(t){let e,n,s,r,i,o,a,l,u,c=t[5],h=[];for(let d=0;d<c.length;d+=1)h[d]=xa(Va(t,c,d));let f=t[0],g=[];for(let d=0;d<f.length;d+=1)g[d]=Ua(Pa(t,f,d));return{c(){e=U("div"),n=U("header");for(let d=0;d<h.length;d+=1)h[d].c();s=te(),r=U("div"),r.textContent="X",i=te();for(let d=0;d<g.length;d+=1)g[d].c();m(r,"id","closer-icon"),m(r,"class","svelte-om1sb4"),m(n,"class","svelte-om1sb4"),m(e,"id","emoji-cont"),m(e,"class","svelte-om1sb4")},m(d,y){C(d,e,y),x(e,n);for(let p=0;p<h.length;p+=1)h[p].m(n,null);x(n,s),x(n,r),x(e,i);for(let p=0;p<g.length;p+=1)g[p].m(e,null);a=!0,l||(u=F(r,"click",t[15]),l=!0)},p(d,y){if(y&48){c=d[5];let p;for(p=0;p<c.length;p+=1){const b=Va(d,c,p);h[p]?h[p].p(b,y):(h[p]=xa(b),h[p].c(),h[p].m(n,s))}for(;p<h.length;p+=1)h[p].d(1);h.length=c.length}if(y&65){f=d[0];let p;for(p=0;p<f.length;p+=1){const b=Pa(d,f,p);g[p]?g[p].p(b,y):(g[p]=Ua(b),g[p].c(),g[p].m(e,null))}for(;p<g.length;p+=1)g[p].d(1);g.length=f.length}},i(d){a||(rt(()=>{o||(o=ws(e,po,{y:-30},!0)),o.run(1)}),a=!0)},o(d){o||(o=ws(e,po,{y:-30},!1)),o.run(0),a=!1},d(d){d&&T(e),kn(h,d),kn(g,d),d&&o&&o.end(),l=!1,u()}}}function xa(t){let e,n=String.fromCodePoint(t[21])+"",s,r,i;return{c(){e=U("div"),s=fe(n),m(e,"data-id",t[23]),m(e,"class","svelte-om1sb4")},m(o,a){C(o,e,a),x(e,s),r||(i=F(e,"click",t[4]),r=!0)},p:Y,d(o){o&&T(e),r=!1,i()}}}function Ua(t){let e,n=t[18]+"",s,r,i;return{c(){e=U("span"),s=fe(n),m(e,"class","svelte-om1sb4")},m(o,a){C(o,e,a),x(e,s),r||(i=F(e,"click",t[6]),r=!0)},p(o,a){a&1&&n!==(n=o[18]+"")&&Qe(s,n)},d(o){o&&T(e),r=!1,i()}}}function Dy(t){let e,n,s,r,i,o,a,l,u,c,h,f,g,d;n=new vo({props:{for:"select-underline",align:"left",class:"sr-only",$$slots:{default:[my]},$$scope:{ctx:t}}});function y(P){t[12](P)}let p={id:"select",items:t[7],placeholder:"Selecione uma categoria",required:!0};t[3]!==void 0&&(p.value=t[3]),r=new jh({props:p}),Tt.push(()=>mo(r,"value",y)),a=new vo({props:{for:"editor",align:"left",class:"sr-only",$$slots:{default:[yy]},$$scope:{ctx:t}}});function b(P){t[14](P)}let I={id:"editor",rows:"3",placeholder:"Ex: Thiago comentou que sente saudades da ex",required:!0,$$slots:{header:[Ay]},$$scope:{ctx:t}};t[2]!==void 0&&(I.value=t[2]),u=new Wh({props:I}),Tt.push(()=>mo(u,"value",b));let S=t[1]&&Fa(t);return{c(){e=U("form"),W(n.$$.fragment),s=te(),W(r.$$.fragment),o=te(),W(a.$$.fragment),l=te(),W(u.$$.fragment),h=te(),S&&S.c(),m(e,"id","form1")},m(P,j){C(P,e,j),K(n,e,null),x(e,s),K(r,e,null),x(e,o),K(a,e,null),x(e,l),K(u,e,null),x(e,h),S&&S.m(e,null),f=!0,g||(d=F(e,"submit",Vc(t[8])),g=!0)},p(P,j){const de={};j&16777216&&(de.$$scope={dirty:j,ctx:P}),n.$set(de);const Se={};!i&&j&8&&(i=!0,Se.value=P[3],go(()=>i=!1)),r.$set(Se);const ze={};j&16777216&&(ze.$$scope={dirty:j,ctx:P}),a.$set(ze);const ve={};j&16777218&&(ve.$$scope={dirty:j,ctx:P}),!c&&j&4&&(c=!0,ve.value=P[2],go(()=>c=!1)),u.$set(ve),P[1]?S?(S.p(P,j),j&2&&v(S,1)):(S=Fa(P),S.c(),v(S,1),S.m(e,null)):S&&(Re(),_(S,1,1,()=>{S=null}),Le())},i(P){f||(v(n.$$.fragment,P),v(r.$$.fragment,P),v(a.$$.fragment,P),v(u.$$.fragment,P),v(S),f=!0)},o(P){_(n.$$.fragment,P),_(r.$$.fragment,P),_(a.$$.fragment,P),_(u.$$.fragment,P),_(S),f=!1},d(P){P&&T(e),G(n),G(r),G(a),G(u),S&&S.d(),g=!1,d()}}}function Ny(t){let e,n;return e=new Dh({props:{style:"text-align:left;width:70rem; max-width:none; padding:0",class:"mt-4",$$slots:{default:[Dy]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment)},m(s,r){K(e,s,r),n=!0},p(s,[r]){const i={};r&16777231&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){G(e,s)}}}function Ry(t,e,n){let s,r,i=[{type:"faces",minVal:128512,maxVal:128580},{type:"faces2",minVal:129296,maxVal:129327},{type:"body",minVal:128066,maxVal:128080},{type:"animals",minVal:129408,maxVal:129442},{type:"transport",minVal:128640,maxVal:128676},{type:"misc",minVal:129494,maxVal:129535}],o=0,a=[];const l=()=>n(0,a=[]),u=j=>{n(9,o=Number(j.target.dataset.id)),l()};let c=[128512,129313,128074,129417,128664,129504],h=!1,f;const g=j=>{n(2,f+=j.target.textContent)};let d=[{value:"Jogos",name:"Jogos"},{value:"Culinaria",name:"Culinaria"},{value:"Relacionamento",name:"Relacionamento"},{value:"Trabalho",name:"Trabalho"},{value:"Caracteristicas",name:"Caracteristicas"},{value:"Amigas(os)",name:"Amigas(os)"},{value:"Teatro",name:"Teatro"},{value:"Danca",name:"Danca"},{value:"Mensagem",name:"Mensagem"},{value:"Atual namorado",name:"Atual namorado"},{value:"Doen\xE7as",name:"Doen\xE7as"},{value:"Sentimentos",name:"Sentimentos"},{value:"Outros",name:"Outros"}],y;const p=async()=>{if(console.log(y),y&&f){const j=await ay(mc(Ac,"ex"),{categoria:y,descricao:f,horario:hy()}).then(n(3,y=""),n(2,f=""));console.log("Document written with ID: ",j.id)}};function b(j){y=j,n(3,y)}const I=()=>n(1,h=!h);function S(j){f=j,n(2,f)}const P=()=>n(1,h=!1);return t.$$.update=()=>{if(t.$$.dirty&512&&n(11,s=i[o].minVal),t.$$.dirty&512&&n(10,r=i[o].maxVal),t.$$.dirty&3073)for(let j=s;j<=r;j++)n(0,a=[...a,String.fromCodePoint(j)])},[a,h,f,y,u,c,g,d,p,o,r,s,b,I,S,P]}class Ly extends ye{constructor(e){super(),pe(this,e,Ry,Ny,ee,{})}}function Ba(t,e,n){const s=t.slice();return s[9]=e[n],s[11]=n,s}function My(t){let e,n,s,r,i,o,a,l,u;return{c(){e=fe("Estamos trabalhando h\xE1 "),n=U("span"),s=fe(t[1]),r=fe(":"),i=fe(t[0]),o=fe(`hrs sem men\xE7\xF5es da EX. (teste) O atual recorde \xE9 de
            `),a=U("span"),l=fe(t[3]),u=fe(" dias!!!"),m(n,"class","dias svelte-o7kvad"),m(a,"class","dias svelte-o7kvad")},m(c,h){C(c,e,h),C(c,n,h),x(n,s),x(n,r),x(n,i),C(c,o,h),C(c,a,h),x(a,l),C(c,u,h)},p(c,h){h&2&&Qe(s,c[1]),h&1&&Qe(i,c[0]),h&8&&Qe(l,c[3])},d(c){c&&T(e),c&&T(n),c&&T(o),c&&T(a),c&&T(u)}}}function Oy(t){let e;return{c(){e=fe("Thiagometro")},m(n,s){C(n,e,s)},d(n){n&&T(e)}}}function Py(t){let e,n,s;return n=new ol({}),{c(){e=U("h1"),W(n.$$.fragment),m(e,"class","contador svelte-o7kvad")},m(r,i){C(r,e,i),K(n,e,null),s=!0},p:Y,i(r){s||(v(n.$$.fragment,r),s=!0)},o(r){_(n.$$.fragment,r),s=!1},d(r){r&&T(e),G(n)}}}function Vy(t){let e,n=t[2].length+"",s;return{c(){e=U("h1"),s=fe(n),m(e,"class","contador svelte-o7kvad")},m(r,i){C(r,e,i),x(e,s)},p(r,i){i&4&&n!==(n=r[2].length+"")&&Qe(s,n)},i:Y,o:Y,d(r){r&&T(e)}}}function Fy(t){let e,n;return e=new ol({}),{c(){W(e.$$.fragment)},m(s,r){K(e,s,r),n=!0},p:Y,i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){G(e,s)}}}function xy(t){let e,n;return e=new ff({props:{style:"text-align:left;",$$slots:{default:[qy]},$$scope:{ctx:t}}}),{c(){W(e.$$.fragment)},m(s,r){K(e,s,r),n=!0},p(s,r){const i={};r&4100&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){n||(v(e.$$.fragment,s),n=!0)},o(s){_(e.$$.fragment,s),n=!1},d(s){G(e,s)}}}function Uy(t){let e="Observa\xE7\xE3o "+(t[11]+1),n;return{c(){n=fe(e)},m(s,r){C(s,n,r)},p:Y,d(s){s&&T(n)}}}function By(t){let e=t[9].data().descricao+"",n;return{c(){n=fe(e)},m(s,r){C(s,n,r)},p(s,r){r&4&&e!==(e=s[9].data().descricao+"")&&Qe(n,e)},d(s){s&&T(n)}}}function jy(t){var s;let e=new Date(((s=t[9].data().horario)==null?void 0:s.seconds)*1e3).toLocaleString()+"",n;return{c(){n=fe(e)},m(r,i){C(r,n,i)},p(r,i){var o;i&4&&e!==(e=new Date(((o=r[9].data().horario)==null?void 0:o.seconds)*1e3).toLocaleString()+"")&&Qe(n,e)},d(r){r&&T(n)}}}function zy(t){let e=t[9].data().categoria+"",n;return{c(){n=fe(e)},m(s,r){C(s,n,r)},p(s,r){r&4&&e!==(e=s[9].data().categoria+"")&&Qe(n,e)},d(s){s&&T(n)}}}function ja(t){let e,n,s,r,i,o,a,l,u,c,h;return n=new pn({props:{size:"base",weight:"semibold",$$slots:{default:[Uy]},$$scope:{ctx:t}}}),r=new pn({props:{size:"base",color:"text-grey-500",$$slots:{default:[By]},$$scope:{ctx:t}}}),o=new pn({props:{size:"sm",align:"center",$$slots:{default:[jy]},$$scope:{ctx:t}}}),l=new Eh({props:{large:!0,class:"inline-flex items-center justify-center -mb-0.5 rounded px-2.5 py-0.5 absolute font-bold border-2 border-white dark:border-gray-900  -top-3 -right-3",$$slots:{default:[zy]},$$scope:{ctx:t}}}),{c(){e=U("div"),W(n.$$.fragment),s=te(),W(r.$$.fragment),i=te(),W(o.$$.fragment),a=te(),W(l.$$.fragment),u=te(),m(e,"class","relative")},m(f,g){C(f,e,g),K(n,e,null),x(e,s),K(r,e,null),x(e,i),K(o,e,null),x(e,a),K(l,e,null),x(e,u),h=!0},p(f,g){const d={};g&4096&&(d.$$scope={dirty:g,ctx:f}),n.$set(d);const y={};g&4100&&(y.$$scope={dirty:g,ctx:f}),r.$set(y);const p={};g&4100&&(p.$$scope={dirty:g,ctx:f}),o.$set(p);const b={};g&4100&&(b.$$scope={dirty:g,ctx:f}),l.$set(b)},i(f){h||(v(n.$$.fragment,f),v(r.$$.fragment,f),v(o.$$.fragment,f),v(l.$$.fragment,f),c||rt(()=>{c=Wc(e,th,{duration:500}),c.start()}),h=!0)},o(f){_(n.$$.fragment,f),_(r.$$.fragment,f),_(o.$$.fragment,f),_(l.$$.fragment,f),h=!1},d(f){f&&T(e),G(n),G(r),G(o),G(l)}}}function qy(t){let e,n,s=t[2],r=[];for(let o=0;o<s.length;o+=1)r[o]=ja(Ba(t,s,o));const i=o=>_(r[o],1,1,()=>{r[o]=null});return{c(){for(let o=0;o<r.length;o+=1)r[o].c();e=Me()},m(o,a){for(let l=0;l<r.length;l+=1)r[l].m(o,a);C(o,e,a),n=!0},p(o,a){if(a&4){s=o[2];let l;for(l=0;l<s.length;l+=1){const u=Ba(o,s,l);r[l]?(r[l].p(u,a),v(r[l],1)):(r[l]=ja(u),r[l].c(),v(r[l],1),r[l].m(e.parentNode,e))}for(Re(),l=s.length;l<r.length;l+=1)i(l);Le()}},i(o){if(!n){for(let a=0;a<s.length;a+=1)v(r[a]);n=!0}},o(o){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)_(r[a]);n=!1},d(o){kn(r,o),o&&T(e)}}}function Hy(t){let e,n,s,r,i,o,a,l,u,c,h,f,g,d,y,p,b,I,S,P;s=new _h({props:{src:"https://firebasestorage.googleapis.com/v0/b/thiagometro-bf771.appspot.com/o/thiago.png?alt=media&token=36a9ddbd-5475-4e9e-bfa1-0025debba8b2",size:"lg"}}),i=new Po({props:{tag:"h2",class:"pl-5",$$slots:{default:[My]},$$scope:{ctx:t}}}),l=new Po({props:{tag:"h1",customeSize:"font-extrabold ",$$slots:{default:[Oy]},$$scope:{ctx:t}}});const j=[Vy,Py],de=[];function Se(w,we){return w[2]?0:1}c=Se(t),h=de[c]=j[c](t);const ze=[xy,Fy],ve=[];function Ye(w,we){return w[2]?0:1}return p=Ye(t),b=ve[p]=ze[p](t),S=new Ly({}),{c(){e=U("marquee"),n=U("div"),W(s.$$.fragment),r=te(),W(i.$$.fragment),o=te(),a=U("div"),W(l.$$.fragment),u=te(),h.c(),f=te(),g=U("div"),g.innerHTML='<h5 class="text-xl font-bold leading-none text-gray-900 dark:text-white">Ultimas cita\xE7\xF5es</h5>',d=te(),y=U("div"),b.c(),I=te(),W(S.$$.fragment),m(n,"class","container-teste svelte-o7kvad"),m(e,"scrollamount","15"),m(g,"class","flex justify-between items-center mb-4"),m(y,"class","container_lista p-5 svelte-o7kvad"),m(a,"class","flex-col svelte-o7kvad")},m(w,we){C(w,e,we),x(e,n),K(s,n,null),x(n,r),K(i,n,null),C(w,o,we),C(w,a,we),K(l,a,null),x(a,u),de[c].m(a,null),x(a,f),x(a,g),x(a,d),x(a,y),ve[p].m(y,null),x(a,I),K(S,a,null),P=!0},p(w,[we]){const Lt={};we&4107&&(Lt.$$scope={dirty:we,ctx:w}),i.$set(Lt);const Mt={};we&4096&&(Mt.$$scope={dirty:we,ctx:w}),l.$set(Mt);let A=c;c=Se(w),c===A?de[c].p(w,we):(Re(),_(de[A],1,1,()=>{de[A]=null}),Le(),h=de[c],h?h.p(w,we):(h=de[c]=j[c](w),h.c()),v(h,1),h.m(a,f));let on=p;p=Ye(w),p===on?ve[p].p(w,we):(Re(),_(ve[on],1,1,()=>{ve[on]=null}),Le(),b=ve[p],b?b.p(w,we):(b=ve[p]=ze[p](w),b.c()),v(b,1),b.m(y,null))},i(w){P||(v(s.$$.fragment,w),v(i.$$.fragment,w),v(l.$$.fragment,w),v(h),v(b),v(S.$$.fragment,w),P=!0)},o(w){_(s.$$.fragment,w),_(i.$$.fragment,w),_(l.$$.fragment,w),_(h),_(b),_(S.$$.fragment,w),P=!1},d(w){w&&T(e),G(s),G(i),w&&T(o),w&&T(a),G(l),de[c].d(),ve[p].d(),G(S)}}}function Ky(t,e,n){let s,r,i,o;const a=mc(Ac,"ex"),l=$0(a,ty("horario","desc")),u=f=>{const y=(new Date-f)/(1e3*60*60*24);return y>=1?y:0},c=()=>{var f;return parseInt((new Date-new Date(((f=s[0].data().horario)==null?void 0:f.seconds)*1e3))/(1e3*60*60))},h=()=>{var f,g,d;return((new Date-new Date(((f=s[0].data().horario)==null?void 0:f.seconds)*1e3))/(1e3*60*60)%1*60).toFixed(0)>9?((new Date-new Date(((g=s[0].data().horario)==null?void 0:g.seconds)*1e3))/(1e3*60*60)%1*60).toFixed(0):"0"+((new Date-new Date(((d=s[0].data().horario)==null?void 0:d.seconds)*1e3))/(1e3*60*60)%1*60).toFixed(0)};return ly(l,f=>{var d;n(2,s=f.docs);let g=new Date(((d=s[0].data().horario)==null?void 0:d.seconds)*1e3);n(3,r=u(g))}),qc(()=>{const f=setInterval(()=>{s?(n(1,i=c()),n(0,o=h())):console.log("teste")},1e3);return()=>{clearInterval(f)}}),n(2,s=null),n(3,r=void 0),n(1,i=void 0),n(0,o=void 0),[o,i,s,r]}class Gy extends ye{constructor(e){super(),pe(this,e,Ky,Hy,ee,{})}}function Qy(t){let e,n,s;return n=new Gy({}),{c(){e=U("main"),W(n.$$.fragment)},m(r,i){C(r,e,i),K(n,e,null),s=!0},p:Y,i(r){s||(v(n.$$.fragment,r),s=!0)},o(r){_(n.$$.fragment,r),s=!1},d(r){r&&T(e),G(n)}}}class Wy extends ye{constructor(e){super(),pe(this,e,null,Qy,ee,{})}}new Wy({target:document.getElementById("app")});
